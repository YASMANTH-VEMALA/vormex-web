{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":["c","_c","React","useRouter","useAuth","ProtectedRouteProps","children","ReactNode","ProtectedRoute","t0","$","$i","Symbol","for","isAuthenticated","loading","router","t1","t2","ProtectedRoute[useEffect()]","push","useEffect","t3"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;;AAJ5C,YAAY;;;;;AAUL,wBAAAK,EAAA;;IAAA,MAAAC,CAAA,OAAAT,gLAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAJ,QAAAA,EAAA,GAAAG,EAAiC;IAC9D,MAAA,EAAAK,eAAA,EAAAC,OAAAA,EAAA;IACA,MAAAC,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAI,eAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAK,OAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,MAAA,EAAA;QAEXC,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACd,IAAI,CAACJ,OAA2B,IAA5B,CAAaD,eAAe,EAAA;oBAC9BE,MAAM,CAAAI,IAAK,CAAC,QAAQ,CAAC;gBAAA;YACtB;SAAA,CAAA,CAAA,8BACF;QAAEF,EAAA,GAAA;YAACJ,eAAe;YAAEC,OAAO;YAAEC,MAAM;SAAC;QAAAN,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,OAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,MAAA;QAAAN,CAAA,CAAA,EAAA,GAAAO,EAAA;QAAAP,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAP,CAAA,CAAA,EAAA;QAAAQ,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAJrCR,wKAAK,CAAAmB,SAAU,CAACJ,EAIf,EAAEC,EAAkC,CAAC;IAEtC,IAAIH,OAAO,EAAA;QAAA,IAAAO,EAAA;QAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPS,EAAA,iBAAA,6LAAA,GAKM;gBALS,SAA+C,EAA/C,+CAA+C;wCAC5D,6LAAA,GAGM;oBAHS,SAAa,EAAb,aAAa;;sCAC1B,6LAAA,GAA8F;4BAA/E,SAAwE,EAAxE,wEAAwE;;;;;;sCACvF,6LAAA,CAAgD;4BAAnC,SAAoB,EAApB,oBAAoB;sCAAC,UAAU,EAA5C,CAAgD,CAClD,EAHA,GAGM,CACR,EALA,GAKM;;;;;;;;;;;;;;;;;YAAAZ,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;QAAA;QAAA,OALNY,EAKM;IAAA;IAIV,IAAI,CAACR,eAAe,EAAA;QAAA,OACX,IAAI;IAAA;IACZ,IAAAQ,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAEMgB,EAAA,iBAAA,EAAGhB;sBAAAA,QAAO,CAAC,GAAI;;QAAAI,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAfY,EAAe;AAAA;;;QAxBelB,2IAAO,CAAC,CAAC;QAC/BD,kJAAS,CAAC,CAAC;;;KAFrBK","ignoreList":[]}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/api/chat.ts"],"sourcesContent":["import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface ChatUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  isOnline: boolean;\n  lastActiveAt: string | null;\n}\n\nexport interface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  receiverId: string;\n  content: string;\n  contentType: string;\n  mediaUrl?: string;\n  mediaType?: string;\n  fileName?: string;\n  fileSize?: number;\n  status: 'SENT' | 'DELIVERED' | 'READ';\n  deliveredAt?: string;\n  readAt?: string;\n  isDeleted: boolean;\n  replyToId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n  };\n  sender: ChatUser;\n  reactions: MessageReaction[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface MessageReaction {\n  id: string;\n  userId: string;\n  emoji: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n  };\n}\n\nexport interface Conversation {\n  id: string;\n  participant1Id: string;\n  participant2Id: string;\n  participant1: ChatUser;\n  participant2: ChatUser;\n  otherParticipant: ChatUser;\n  lastMessage?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n    status: 'SENT' | 'DELIVERED' | 'READ';\n    createdAt: string;\n  };\n  lastMessageAt?: string;\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ConversationsResponse {\n  conversations: Conversation[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\nexport interface MessagesResponse {\n  messages: Message[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n// ============================================\n// Chat API Functions\n// ============================================\n\n/**\n * Get all conversations for the current user\n */\nexport async function getConversations(\n  limit?: number,\n  cursor?: string\n): Promise<ConversationsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations?${params.toString()}`);\n}\n\n/**\n * Get or create a conversation with another user\n */\nexport async function getOrCreateConversation(participantId: string): Promise<Conversation> {\n  return apiClient.post('/chat/conversations', { participantId });\n}\n\n/**\n * Get a specific conversation\n */\nexport async function getConversation(conversationId: string): Promise<Conversation> {\n  return apiClient.get(`/chat/conversations/${conversationId}`);\n}\n\n/**\n * Get messages for a conversation\n */\nexport async function getMessages(\n  conversationId: string,\n  limit?: number,\n  cursor?: string\n): Promise<MessagesResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations/${conversationId}/messages?${params.toString()}`);\n}\n\n/**\n * Send a message (REST fallback - prefer WebSocket)\n */\nexport async function sendMessage(\n  conversationId: string,\n  data: {\n    content: string;\n    contentType?: string;\n    mediaUrl?: string;\n    mediaType?: string;\n    fileName?: string;\n    fileSize?: number;\n    replyToId?: string;\n  }\n): Promise<Message> {\n  return apiClient.post(`/chat/conversations/${conversationId}/messages`, data);\n}\n\n/**\n * Mark messages as read\n */\nexport async function markAsRead(conversationId: string): Promise<{ updatedCount: number; readAt: string }> {\n  return apiClient.post(`/chat/conversations/${conversationId}/read`);\n}\n\n/**\n * Delete a message\n */\nexport async function deleteMessage(\n  messageId: string,\n  forEveryone?: boolean\n): Promise<{ success: boolean }> {\n  return apiClient.delete(`/chat/messages/${messageId}`, { \n    data: { forEveryone } \n  });\n}\n\n/**\n * Edit a message\n */\nexport async function editMessage(messageId: string, content: string): Promise<Message> {\n  return apiClient.patch(`/chat/messages/${messageId}`, { content });\n}\n\n/**\n * Add reaction to a message\n */\nexport async function addReaction(\n  messageId: string,\n  emoji: string\n): Promise<{ action: 'added' | 'removed' | 'updated'; emoji: string }> {\n  return apiClient.post(`/chat/messages/${messageId}/reactions`, { emoji });\n}\n\n/**\n * Get unread message count\n */\nexport async function getUnreadCount(): Promise<{ unreadCount: number }> {\n  return apiClient.get('/chat/unread-count');\n}\n\n/**\n * Search messages\n */\nexport async function searchMessages(\n  query: string,\n  limit?: number\n): Promise<{ messages: Message[] }> {\n  const params = new URLSearchParams();\n  params.append('q', query);\n  if (limit) params.append('limit', String(limit));\n  \n  return apiClient.get(`/chat/search?${params.toString()}`);\n}\n\n/**\n * Upload chat media (image, video, document, audio)\n */\nexport async function uploadChatMedia(\n  file: File,\n  mediaType: 'image' | 'video' | 'document' | 'audio',\n  onProgress?: (progress: number) => void\n): Promise<{\n  mediaUrl: string;\n  fileName: string;\n  fileSize: number;\n  mediaType: string;\n}> {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('mediaType', mediaType);\n  \n  // Use axios with proper config for file uploads\n  return apiClient.post('/chat/upload', formData, {\n    timeout: 120000, // 2 minutes timeout for large files\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n    onUploadProgress: (progressEvent) => {\n      if (onProgress && progressEvent.total) {\n        const progress = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n        onProgress(progress);\n      }\n    },\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AA8FO,eAAe,iBACpB,KAAc,EACd,MAAe;IAEf,MAAM,SAAS,IAAI;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IACzC,IAAI,QAAQ,OAAO,MAAM,CAAC,UAAU;IAEpC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,OAAO,QAAQ,IAAI;AACjE;AAKO,eAAe,wBAAwB,aAAqB;IACjE,OAAO,yIAAS,CAAC,IAAI,CAAC,uBAAuB;QAAE;IAAc;AAC/D;AAKO,eAAe,gBAAgB,cAAsB;IAC1D,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,gBAAgB;AAC9D;AAKO,eAAe,YACpB,cAAsB,EACtB,KAAc,EACd,MAAe;IAEf,MAAM,SAAS,IAAI;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IACzC,IAAI,QAAQ,OAAO,MAAM,CAAC,UAAU;IAEpC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,eAAe,UAAU,EAAE,OAAO,QAAQ,IAAI;AAC5F;AAKO,eAAe,YACpB,cAAsB,EACtB,IAQC;IAED,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,eAAe,SAAS,CAAC,EAAE;AAC1E;AAKO,eAAe,WAAW,cAAsB;IACrD,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,eAAe,KAAK,CAAC;AACpE;AAKO,eAAe,cACpB,SAAiB,EACjB,WAAqB;IAErB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;QACrD,MAAM;YAAE;QAAY;IACtB;AACF;AAKO,eAAe,YAAY,SAAiB,EAAE,OAAe;IAClE,OAAO,yIAAS,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;QAAE;IAAQ;AAClE;AAKO,eAAe,YACpB,SAAiB,EACjB,KAAa;IAEb,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,UAAU,UAAU,CAAC,EAAE;QAAE;IAAM;AACzE;AAKO,eAAe;IACpB,OAAO,yIAAS,CAAC,GAAG,CAAC;AACvB;AAKO,eAAe,eACpB,KAAa,EACb,KAAc;IAEd,MAAM,SAAS,IAAI;IACnB,OAAO,MAAM,CAAC,KAAK;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IAEzC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,OAAO,QAAQ,IAAI;AAC1D;AAKO,eAAe,gBACpB,IAAU,EACV,SAAmD,EACnD,UAAuC;IAOvC,MAAM,WAAW,IAAI;IACrB,SAAS,MAAM,CAAC,QAAQ;IACxB,SAAS,MAAM,CAAC,aAAa;IAE7B,gDAAgD;IAChD,OAAO,yIAAS,CAAC,IAAI,CAAC,gBAAgB,UAAU;QAC9C,SAAS;QACT,kBAAkB;QAClB,eAAe;QACf,kBAAkB,CAAC;YACjB,IAAI,cAAc,cAAc,KAAK,EAAE;gBACrC,MAAM,WAAW,KAAK,KAAK,CAAC,AAAC,cAAc,MAAM,GAAG,cAAc,KAAK,GAAI;gBAC3E,WAAW;YACb;QACF;IACF;AACF"}},
    {"offset": {"line": 232, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatList.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getConversations, Conversation } from '@/lib/api/chat';\nimport { initializeSocket, getSocket } from '@/lib/socket';\nimport { formatDistanceToNow } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\ninterface ChatListProps {\n  selectedConversationId?: string;\n  onSelectConversation?: (conversation: Conversation) => void;\n  currentUserId?: string;\n}\n\nexport default function ChatList({ \n  selectedConversationId, \n  onSelectConversation,\n  currentUserId \n}: ChatListProps) {\n  const router = useRouter();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n\n  const fetchConversations = useCallback(async (cursor?: string) => {\n    try {\n      // Only show loading if we don't have any conversations yet\n      if (conversations.length === 0) {\n        setLoading(true);\n      }\n      const result = await getConversations(30, cursor);\n      \n      if (cursor) {\n        setConversations(prev => [...prev, ...result.conversations]);\n      } else {\n        setConversations(result.conversations);\n      }\n      \n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load conversations');\n    } finally {\n      setLoading(false);\n    }\n  }, [conversations.length]);\n\n  useEffect(() => {\n    fetchConversations();\n  }, [fetchConversations]);\n\n  // Listen for new messages to update conversation list\n  useEffect(() => {\n    const socket = getSocket();\n    \n    if (!socket) return;\n\n    const handleNewMessage = (data: { conversationId: string; message: any }) => {\n      setConversations(prev => {\n        const existingIndex = prev.findIndex(c => c.id === data.conversationId);\n        \n        if (existingIndex >= 0) {\n          // Update existing conversation and move to top\n          const updated = [...prev];\n          const conv = { ...updated[existingIndex] };\n          conv.lastMessage = {\n            id: data.message.id,\n            content: data.message.content,\n            contentType: data.message.contentType,\n            senderId: data.message.senderId,\n            status: data.message.status,\n            createdAt: data.message.createdAt,\n          };\n          conv.lastMessageAt = data.message.createdAt;\n          \n          // Increment unread if not the sender\n          if (data.message.senderId !== currentUserId && data.conversationId !== selectedConversationId) {\n            conv.unreadCount = (conv.unreadCount || 0) + 1;\n          }\n          \n          updated.splice(existingIndex, 1);\n          return [conv, ...updated];\n        }\n        \n        // Refresh to get new conversation\n        fetchConversations();\n        return prev;\n      });\n    };\n\n    const handleMessagesRead = (data: { conversationId: string }) => {\n      setConversations(prev => \n        prev.map(c => \n          c.id === data.conversationId \n            ? { ...c, unreadCount: 0 } \n            : c\n        )\n      );\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:notification', handleNewMessage);\n    socket.on('chat:messages_read', handleMessagesRead);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:notification', handleNewMessage);\n      socket.off('chat:messages_read', handleMessagesRead);\n    };\n  }, [currentUserId, selectedConversationId, fetchConversations]);\n\n  const handleSelectConversation = (conversation: Conversation) => {\n    if (onSelectConversation) {\n      onSelectConversation(conversation);\n    } else {\n      router.push(`/messages/${conversation.id}`);\n    }\n  };\n\n  const loadMore = () => {\n    if (hasMore && nextCursor) {\n      fetchConversations(nextCursor);\n    }\n  };\n\n  if (loading && conversations.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 text-center text-red-500\">\n        {error}\n        <button \n          onClick={() => fetchConversations()}\n          className=\"block mx-auto mt-2 text-blue-500 hover:underline\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (conversations.length === 0) {\n    return (\n      <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n        <div className=\"text-4xl mb-4\">ðŸ’¬</div>\n        <p>No conversations yet</p>\n        <p className=\"text-sm mt-2\">Start a chat with someone!</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 overflow-y-auto\">\n        {conversations.map((conversation) => (\n          <ConversationItem\n            key={conversation.id}\n            conversation={conversation}\n            isSelected={selectedConversationId === conversation.id}\n            currentUserId={currentUserId}\n            onClick={() => handleSelectConversation(conversation)}\n          />\n        ))}\n        \n        {hasMore && (\n          <button\n            onClick={loadMore}\n            disabled={loading}\n            className=\"w-full py-3 text-sm text-blue-600 hover:bg-gray-50 dark:hover:bg-gray-800\"\n          >\n            {loading ? 'Loading...' : 'Load more'}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Conversation Item Component\n// ============================================\ninterface ConversationItemProps {\n  conversation: Conversation;\n  isSelected: boolean;\n  currentUserId?: string;\n  onClick: () => void;\n}\n\nfunction ConversationItem({ \n  conversation, \n  isSelected, \n  currentUserId,\n  onClick \n}: ConversationItemProps) {\n  const other = conversation.otherParticipant;\n  const lastMessage = conversation.lastMessage;\n  const isUnread = conversation.unreadCount > 0;\n  const isSentByMe = lastMessage?.senderId === currentUserId;\n\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        'flex items-center gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 dark:border-gray-800',\n        isSelected \n          ? 'bg-blue-50 dark:bg-blue-900/20' \n          : 'hover:bg-gray-50 dark:hover:bg-gray-800/50',\n        isUnread && !isSelected && 'bg-gray-50 dark:bg-gray-800/30'\n      )}\n    >\n      {/* Avatar */}\n      <div className=\"relative flex-shrink-0\">\n        <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {other.profileImage ? (\n            <img\n              src={other.profileImage}\n              alt={other.name}\n              className=\"w-12 h-12 rounded-full object-cover\"\n            />\n          ) : (\n            other.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {other.isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center justify-between\">\n          <span className={cn(\n            'font-medium truncate',\n            isUnread && 'text-gray-900 dark:text-white font-semibold'\n          )}>\n            {other.name}\n          </span>\n          {lastMessage && (\n            <span className=\"text-xs text-gray-500 flex-shrink-0\">\n              {formatDistanceToNow(new Date(lastMessage.createdAt), { addSuffix: false })}\n            </span>\n          )}\n        </div>\n        \n        <div className=\"flex items-center gap-1\">\n          {lastMessage ? (\n            <>\n              {isSentByMe && (\n                <span className=\"text-gray-400 text-sm\">\n                  {lastMessage.status === 'READ' ? 'âœ“âœ“' : lastMessage.status === 'DELIVERED' ? 'âœ“âœ“' : 'âœ“'}\n                </span>\n              )}\n              <p className={cn(\n                'text-sm truncate',\n                isUnread \n                  ? 'text-gray-900 dark:text-white font-medium' \n                  : 'text-gray-500 dark:text-gray-400'\n              )}>\n                {lastMessage.contentType === 'image' ? 'ðŸ“· Photo' :\n                 lastMessage.contentType === 'file' ? 'ðŸ“Ž File' :\n                 lastMessage.contentType === 'voice' ? 'ðŸŽ¤ Voice message' :\n                 lastMessage.content}\n              </p>\n            </>\n          ) : (\n            <p className=\"text-sm text-gray-400 italic\">No messages yet</p>\n          )}\n        </div>\n      </div>\n\n      {/* Unread badge */}\n      {isUnread && (\n        <div className=\"flex-shrink-0 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center\">\n          <span className=\"text-xs text-white font-medium\">\n            {conversation.unreadCount > 9 ? '9+' : conversation.unreadCount}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["c","_c","React","useEffect","useState","useCallback","useRouter","getConversations","Conversation","initializeSocket","getSocket","formatDistanceToNow","cn","ChatListProps","selectedConversationId","onSelectConversation","conversation","currentUserId","ChatList","router","conversations","setConversations","loading","setLoading","error","setError","hasMore","setHasMore","nextCursor","setNextCursor","fetchConversations","cursor","length","result","prev","err","message","socket","handleNewMessage","data","conversationId","existingIndex","findIndex","id","updated","conv","lastMessage","content","contentType","senderId","status","createdAt","lastMessageAt","unreadCount","splice","handleMessagesRead","map","on","off","handleSelectConversation","push","loadMore","ConversationItemProps","isSelected","onClick","ConversationItem","t0","$","$i","Symbol","for","other","otherParticipant","isUnread","isSentByMe","t1","t2","t3","t4","name","profileImage","charAt","toUpperCase","t5","t6","isOnline","t7","t8","t9","t10","t11","Date","addSuffix","t12","t13","t14","t15","t16"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/MessageMenu.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  Reply,\n  Copy,\n  Pencil,\n  Trash2,\n  Forward,\n  Star,\n  Pin,\n  MoreHorizontal,\n  Download,\n} from 'lucide-react';\n\nconst REACTION_EMOJIS = ['â¤ï¸', 'ðŸ‘', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ™', 'ðŸ”¥', 'ðŸ‘'];\n\ninterface MessageMenuProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isOwn: boolean;\n  messageId: string;\n  messageContent: string;\n  hasMedia?: boolean;\n  mediaUrl?: string;\n  onReply: () => void;\n  onEdit?: () => void;\n  onDelete: (forEveryone: boolean) => void;\n  onReact: (emoji: string) => void;\n  onCopy: () => void;\n  onForward?: () => void;\n  onPin?: () => void;\n  onStar?: () => void;\n  position?: { x: number; y: number };\n  anchorPosition?: 'left' | 'right';\n}\n\nexport default function MessageMenu({\n  isOpen,\n  onClose,\n  isOwn,\n  messageId,\n  messageContent,\n  hasMedia,\n  mediaUrl,\n  onReply,\n  onEdit,\n  onDelete,\n  onReact,\n  onCopy,\n  onForward,\n  onPin,\n  onStar,\n  position,\n  anchorPosition = 'right',\n}: MessageMenuProps) {\n  const [showDeleteOptions, setShowDeleteOptions] = useState(false);\n  const [showReactions, setShowReactions] = useState(true);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, onClose]);\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!isOpen) return;\n      \n      if (event.key === 'Escape') {\n        onClose();\n      } else if (event.key === 'r' && !event.metaKey && !event.ctrlKey) {\n        onReply();\n        onClose();\n      } else if (event.key === 'c' && (event.metaKey || event.ctrlKey)) {\n        onCopy();\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose, onReply, onCopy]);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(messageContent);\n    onCopy();\n    onClose();\n  };\n\n  const handleDownload = () => {\n    if (mediaUrl) {\n      const link = document.createElement('a');\n      link.href = mediaUrl;\n      link.download = '';\n      link.target = '_blank';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n    onClose();\n  };\n\n  const menuItems = [\n    {\n      id: 'reply',\n      label: 'Reply',\n      icon: Reply,\n      onClick: () => { onReply(); onClose(); },\n      shortcut: 'R',\n    },\n    {\n      id: 'copy',\n      label: 'Copy',\n      icon: Copy,\n      onClick: handleCopy,\n      shortcut: 'âŒ˜C',\n    },\n    ...(isOwn ? [{\n      id: 'edit',\n      label: 'Edit',\n      icon: Pencil,\n      onClick: () => { onEdit?.(); onClose(); },\n    }] : []),\n    ...(hasMedia && mediaUrl ? [{\n      id: 'download',\n      label: 'Download',\n      icon: Download,\n      onClick: handleDownload,\n    }] : []),\n    {\n      id: 'forward',\n      label: 'Forward',\n      icon: Forward,\n      onClick: () => { onForward?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'pin',\n      label: 'Pin',\n      icon: Pin,\n      onClick: () => { onPin?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'star',\n      label: 'Star',\n      icon: Star,\n      onClick: () => { onStar?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'delete',\n      label: 'Delete',\n      icon: Trash2,\n      onClick: () => setShowDeleteOptions(true),\n      danger: true,\n    },\n  ];\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          ref={menuRef}\n          initial={{ opacity: 0, scale: 0.95, y: -10 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: -10 }}\n          transition={{ duration: 0.15 }}\n          className={cn(\n            'absolute z-50 min-w-[200px]',\n            'bg-white dark:bg-gray-800 rounded-xl shadow-xl',\n            'border border-gray-200 dark:border-gray-700',\n            'overflow-hidden'\n          )}\n          style={position ? {\n            top: position.y,\n            left: anchorPosition === 'left' ? position.x : undefined,\n            right: anchorPosition === 'right' ? position.x : undefined,\n          } : {\n            top: '-8px',\n            [anchorPosition === 'left' ? 'left' : 'right']: '100%',\n            marginLeft: anchorPosition === 'left' ? '8px' : undefined,\n            marginRight: anchorPosition === 'right' ? '8px' : undefined,\n          }}\n        >\n          {/* Reaction bar */}\n          {showReactions && !showDeleteOptions && (\n            <div className=\"p-2 border-b border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center gap-1\">\n                {REACTION_EMOJIS.map((emoji) => (\n                  <button\n                    key={emoji}\n                    onClick={() => { onReact(emoji); onClose(); }}\n                    className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all hover:scale-125\"\n                  >\n                    <span className=\"text-lg\">{emoji}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Delete options submenu */}\n          {showDeleteOptions ? (\n            <div className=\"py-1\">\n              <div className=\"px-3 py-2 text-sm font-medium text-gray-500 dark:text-gray-400\">\n                Delete message?\n              </div>\n              <button\n                onClick={() => { onDelete(false); onClose(); }}\n                className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n                <span>Delete for me</span>\n              </button>\n              {isOwn && (\n                <button\n                  onClick={() => { onDelete(true); onClose(); }}\n                  className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  <span>Delete for everyone</span>\n                </button>\n              )}\n              <button\n                onClick={() => setShowDeleteOptions(false)}\n                className=\"w-full px-3 py-2 text-left text-sm text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          ) : (\n            /* Main menu items */\n            <div className=\"py-1\">\n              {menuItems.map((item) => (\n                <button\n                  key={item.id}\n                  onClick={item.onClick}\n                  disabled={item.disabled}\n                  className={cn(\n                    'w-full flex items-center justify-between gap-3 px-3 py-2 text-left text-sm transition-colors',\n                    item.danger\n                      ? 'text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20'\n                      : 'text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700',\n                    item.disabled && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <item.icon className=\"w-4 h-4\" />\n                    <span>{item.label}</span>\n                    {item.disabled && (\n                      <span className=\"text-xs text-gray-400\">(soon)</span>\n                    )}\n                  </div>\n                  {item.shortcut && (\n                    <span className=\"text-xs text-gray-400\">{item.shortcut}</span>\n                  )}\n                </button>\n              ))}\n            </div>\n          )}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Simple hover-based quick actions component (Discord style)\ninterface QuickActionsProps {\n  isVisible: boolean;\n  isOwn: boolean;\n  onReply: () => void;\n  onReact: () => void;\n  onMore: () => void;\n}\n\nexport function MessageQuickActions({\n  isVisible,\n  isOwn,\n  onReply,\n  onReact,\n  onMore,\n}: QuickActionsProps) {\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: 5 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 5 }}\n          transition={{ duration: 0.1 }}\n          className={cn(\n            'absolute -top-8 flex items-center gap-0.5',\n            'bg-white dark:bg-gray-800 rounded-lg shadow-lg',\n            'border border-gray-200 dark:border-gray-700 p-0.5',\n            isOwn ? 'right-0' : 'left-8'\n          )}\n        >\n          <button\n            onClick={onReact}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"Add reaction\"\n          >\n            <span className=\"text-sm\">ðŸ˜€</span>\n          </button>\n          <button\n            onClick={onReply}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"Reply\"\n          >\n            <Reply className=\"w-4 h-4 text-gray-500\" />\n          </button>\n          <button\n            onClick={onMore}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"More options\"\n          >\n            <MoreHorizontal className=\"w-4 h-4 text-gray-500\" />\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["c","_c","React","useState","useRef","useEffect","motion","AnimatePresence","cn","Reply","Copy","Pencil","Trash2","Forward","Star","Pin","MoreHorizontal","Download","REACTION_EMOJIS","MessageMenuProps","isOpen","onClose","isOwn","messageId","messageContent","hasMedia","mediaUrl","onReply","onEdit","onDelete","forEveryone","onReact","emoji","onCopy","onForward","onPin","onStar","position","x","y","anchorPosition","MessageMenu","showDeleteOptions","setShowDeleteOptions","showReactions","setShowReactions","menuRef","HTMLDivElement","handleClickOutside","event","MouseEvent","current","contains","target","Node","document","addEventListener","removeEventListener","handleKeyDown","KeyboardEvent","key","metaKey","ctrlKey","handleCopy","navigator","clipboard","writeText","handleDownload","link","createElement","href","download","body","appendChild","click","removeChild","menuItems","id","label","icon","onClick","shortcut","disabled","danger","opacity","scale","duration","top","left","undefined","right","marginLeft","marginRight","map","item","QuickActionsProps","isVisible","onMore","MessageQuickActions","t0","$","$i","Symbol","for","t1","t2"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1293, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatSettingsPanel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  X,\n  Image as ImageIcon,\n  FileText,\n  Video,\n  Music,\n  Trash2,\n  Bell,\n  BellOff,\n  ChevronRight,\n  Palette,\n  Shield,\n  Ban,\n  Flag,\n  Search,\n} from 'lucide-react';\n\n// Wallpaper option type\ninterface WallpaperOption {\n  id: string;\n  name: string;\n  color: string;\n  preview?: string | null;\n  pattern?: string;\n}\n\n// Default wallpaper options\nconst WALLPAPER_OPTIONS: WallpaperOption[] = [\n  { id: 'default', name: 'Default', color: 'bg-gray-50 dark:bg-gray-900' },\n  { id: 'gradient-1', name: 'Ocean', color: 'bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30' },\n  { id: 'gradient-2', name: 'Sunset', color: 'bg-gradient-to-br from-orange-100 to-pink-100 dark:from-orange-900/30 dark:to-pink-900/30' },\n  { id: 'gradient-3', name: 'Forest', color: 'bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30' },\n  { id: 'gradient-4', name: 'Lavender', color: 'bg-gradient-to-br from-purple-100 to-violet-100 dark:from-purple-900/30 dark:to-violet-900/30' },\n  { id: 'gradient-5', name: 'Rose', color: 'bg-gradient-to-br from-rose-100 to-pink-100 dark:from-rose-900/30 dark:to-pink-900/30' },\n  { id: 'gradient-6', name: 'Midnight', color: 'bg-gradient-to-br from-slate-800 to-gray-900' },\n  { id: 'gradient-7', name: 'Sky', color: 'bg-gradient-to-br from-sky-100 to-indigo-100 dark:from-sky-900/30 dark:to-indigo-900/30' },\n  { id: 'gradient-8', name: 'Amber', color: 'bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/30' },\n  { id: 'pattern-1', name: 'Dots', color: 'bg-gray-100 dark:bg-gray-800', pattern: 'bg-[radial-gradient(circle,_#00000010_1px,_transparent_1px)] bg-[size:20px_20px]' },\n  { id: 'pattern-2', name: 'Grid', color: 'bg-gray-100 dark:bg-gray-800', pattern: 'bg-[linear-gradient(#00000008_1px,_transparent_1px),linear-gradient(90deg,_#00000008_1px,_transparent_1px)] bg-[size:20px_20px]' },\n];\n\ninterface MediaItem {\n  id: string;\n  type: 'image' | 'video' | 'file' | 'audio';\n  url: string;\n  fileName?: string;\n  createdAt: string;\n}\n\ninterface ChatSettingsPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n  conversationId: string;\n  otherUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n  };\n  currentWallpaper: string;\n  onWallpaperChange: (wallpaperId: string) => void;\n  mediaItems?: MediaItem[];\n  onClearChat?: () => void;\n  onBlockUser?: () => void;\n  onReportUser?: () => void;\n}\n\ntype TabType = 'settings' | 'wallpaper' | 'media';\n\nexport default function ChatSettingsPanel({\n  isOpen,\n  onClose,\n  conversationId,\n  otherUser,\n  currentWallpaper,\n  onWallpaperChange,\n  mediaItems = [],\n  onClearChat,\n  onBlockUser,\n  onReportUser,\n}: ChatSettingsPanelProps) {\n  const [activeTab, setActiveTab] = useState<TabType>('settings');\n  const [isMuted, setIsMuted] = useState(false);\n  const [mediaFilter, setMediaFilter] = useState<'all' | 'images' | 'videos' | 'files'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  // Load mute preference from localStorage\n  useEffect(() => {\n    const muted = localStorage.getItem(`chat_muted_${conversationId}`);\n    setIsMuted(muted === 'true');\n  }, [conversationId]);\n\n  const handleMuteToggle = () => {\n    const newMuted = !isMuted;\n    setIsMuted(newMuted);\n    localStorage.setItem(`chat_muted_${conversationId}`, String(newMuted));\n  };\n\n  // Filter media items\n  const filteredMedia = mediaItems.filter(item => {\n    if (mediaFilter === 'all') return true;\n    if (mediaFilter === 'images') return item.type === 'image';\n    if (mediaFilter === 'videos') return item.type === 'video';\n    if (mediaFilter === 'files') return item.type === 'file' || item.type === 'audio';\n    return true;\n  });\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/30 backdrop-blur-sm z-40\"\n          />\n\n          {/* Panel */}\n          <motion.div\n            initial={{ x: '100%' }}\n            animate={{ x: 0 }}\n            exit={{ x: '100%' }}\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n            className=\"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white dark:bg-gray-900 shadow-xl z-50 flex flex-col\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Chat Info\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* User Info */}\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex flex-col items-center\">\n              <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-2xl font-semibold mb-3\">\n                {otherUser.profileImage ? (\n                  <img\n                    src={otherUser.profileImage}\n                    alt={otherUser.name}\n                    className=\"w-20 h-20 rounded-full object-cover\"\n                  />\n                ) : (\n                  otherUser.name.charAt(0).toUpperCase()\n                )}\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">{otherUser.name}</h3>\n              <p className=\"text-gray-500 dark:text-gray-400\">@{otherUser.username}</p>\n              {otherUser.isOnline && (\n                <span className=\"mt-2 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs rounded-full\">\n                  Online\n                </span>\n              )}\n            </div>\n\n            {/* Tabs */}\n            <div className=\"flex border-b border-gray-200 dark:border-gray-700\">\n              {[\n                { id: 'settings', label: 'Settings' },\n                { id: 'wallpaper', label: 'Wallpaper' },\n                { id: 'media', label: 'Media' },\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as TabType)}\n                  className={cn(\n                    'flex-1 py-3 text-sm font-medium transition-colors relative',\n                    activeTab === tab.id\n                      ? 'text-blue-600 dark:text-blue-400'\n                      : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'\n                  )}\n                >\n                  {tab.label}\n                  {activeTab === tab.id && (\n                    <motion.div\n                      layoutId=\"activeTab\"\n                      className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400\"\n                    />\n                  )}\n                </button>\n              ))}\n            </div>\n\n            {/* Tab Content */}\n            <div className=\"flex-1 overflow-y-auto\">\n              {/* Settings Tab */}\n              {activeTab === 'settings' && (\n                <div className=\"p-4 space-y-2\">\n                  {/* Mute Notifications */}\n                  <button\n                    onClick={handleMuteToggle}\n                    className=\"w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      {isMuted ? (\n                        <BellOff className=\"w-5 h-5 text-gray-500\" />\n                      ) : (\n                        <Bell className=\"w-5 h-5 text-gray-500\" />\n                      )}\n                      <span className=\"text-gray-900 dark:text-white\">Mute Notifications</span>\n                    </div>\n                    <div className={cn(\n                      'w-10 h-6 rounded-full transition-colors relative',\n                      isMuted ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'\n                    )}>\n                      <div className={cn(\n                        'absolute top-1 w-4 h-4 bg-white rounded-full transition-transform',\n                        isMuted ? 'translate-x-5' : 'translate-x-1'\n                      )} />\n                    </div>\n                  </button>\n\n                  {/* Divider */}\n                  <div className=\"my-4 border-t border-gray-200 dark:border-gray-700\" />\n\n                  {/* Clear Chat */}\n                  <button\n                    onClick={onClearChat}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                    <span>Clear Chat History</span>\n                  </button>\n\n                  {/* Block User */}\n                  <button\n                    onClick={onBlockUser}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Ban className=\"w-5 h-5\" />\n                    <span>Block {otherUser.name}</span>\n                  </button>\n\n                  {/* Report User */}\n                  <button\n                    onClick={onReportUser}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Flag className=\"w-5 h-5\" />\n                    <span>Report</span>\n                  </button>\n                </div>\n              )}\n\n              {/* Wallpaper Tab */}\n              {activeTab === 'wallpaper' && (\n                <div className=\"p-4\">\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\n                    Choose a wallpaper for this chat\n                  </p>\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {WALLPAPER_OPTIONS.map((wallpaper) => (\n                      <button\n                        key={wallpaper.id}\n                        onClick={() => onWallpaperChange(wallpaper.id)}\n                        className={cn(\n                          'aspect-[3/4] rounded-xl overflow-hidden relative transition-all',\n                          wallpaper.color,\n                          wallpaper.pattern,\n                          currentWallpaper === wallpaper.id\n                            ? 'ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900'\n                            : 'hover:scale-105'\n                        )}\n                      >\n                        {wallpaper.preview && (\n                          <img\n                            src={wallpaper.preview}\n                            alt={wallpaper.name}\n                            className=\"w-full h-full object-cover\"\n                          />\n                        )}\n                        <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/50 to-transparent\">\n                          <span className=\"text-xs text-white font-medium\">{wallpaper.name}</span>\n                        </div>\n                        {currentWallpaper === wallpaper.id && (\n                          <div className=\"absolute top-2 right-2 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center\">\n                            <svg className=\"w-3 h-3 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                            </svg>\n                          </div>\n                        )}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Media Tab */}\n              {activeTab === 'media' && (\n                <div className=\"p-4\">\n                  {/* Search */}\n                  <div className=\"relative mb-4\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                    <input\n                      type=\"text\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      placeholder=\"Search media...\"\n                      className=\"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg border-0 focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n\n                  {/* Filter buttons */}\n                  <div className=\"flex gap-2 mb-4 overflow-x-auto pb-2\">\n                    {[\n                      { id: 'all', label: 'All', icon: null },\n                      { id: 'images', label: 'Images', icon: ImageIcon },\n                      { id: 'videos', label: 'Videos', icon: Video },\n                      { id: 'files', label: 'Files', icon: FileText },\n                    ].map((filter) => (\n                      <button\n                        key={filter.id}\n                        onClick={() => setMediaFilter(filter.id as any)}\n                        className={cn(\n                          'flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-colors',\n                          mediaFilter === filter.id\n                            ? 'bg-blue-600 text-white'\n                            : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n                        )}\n                      >\n                        {filter.icon && <filter.icon className=\"w-4 h-4\" />}\n                        {filter.label}\n                      </button>\n                    ))}\n                  </div>\n\n                  {/* Media Grid */}\n                  {filteredMedia.length > 0 ? (\n                    <div className=\"grid grid-cols-3 gap-2\">\n                      {filteredMedia.map((item) => (\n                        <a\n                          key={item.id}\n                          href={item.url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 hover:opacity-80 transition-opacity relative group\"\n                        >\n                          {item.type === 'image' ? (\n                            <img\n                              src={item.url}\n                              alt=\"\"\n                              className=\"w-full h-full object-cover\"\n                            />\n                          ) : item.type === 'video' ? (\n                            <div className=\"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-700\">\n                              <Video className=\"w-8 h-8 text-gray-500\" />\n                            </div>\n                          ) : (\n                            <div className=\"w-full h-full flex flex-col items-center justify-center p-2\">\n                              <FileText className=\"w-8 h-8 text-gray-500 mb-1\" />\n                              <span className=\"text-xs text-gray-500 truncate w-full text-center\">\n                                {item.fileName || 'File'}\n                              </span>\n                            </div>\n                          )}\n                        </a>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12 text-gray-500\">\n                      <ImageIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p>No media shared yet</p>\n                      <p className=\"text-sm\">Photos, videos, and files will appear here</p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Export wallpaper options for use in other components\nexport { WALLPAPER_OPTIONS };\nexport type { MediaItem };\n"],"names":["c","_c","React","useState","useEffect","motion","AnimatePresence","cn","X","Image","ImageIcon","FileText","Video","Music","Trash2","Bell","BellOff","ChevronRight","Palette","Shield","Ban","Flag","Search","WallpaperOption","id","name","color","preview","pattern","WALLPAPER_OPTIONS","MediaItem","type","url","fileName","createdAt","ChatSettingsPanelProps","isOpen","onClose","conversationId","otherUser","username","profileImage","isOnline","currentWallpaper","onWallpaperChange","wallpaperId","mediaItems","onClearChat","onBlockUser","onReportUser","TabType","ChatSettingsPanel","t0","$","$i","Symbol","for","t1","undefined","activeTab","setActiveTab","isMuted","setIsMuted","mediaFilter","setMediaFilter","searchQuery","setSearchQuery","t2","t3","ChatSettingsPanel[useEffect()]","muted","localStorage","getItem","t4","ChatSettingsPanel[handleMuteToggle]","newMuted","setItem","String","handleMuteToggle","t5","item","filteredMedia","filter","T0","t6","opacity","x","damping","stiffness","charAt","toUpperCase","label","map","tab","ChatSettingsPanel[(anonymous)() > <button>.onClick]","wallpaper","ChatSettingsPanel[WALLPAPER_OPTIONS.map() > <button>.onClick]","e","target","value","icon","length","_ChatSettingsPanelFilteredMediaMap","t7","item_0"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2087, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatMessages.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Message, getMessages, MessagesResponse } from '@/lib/api/chat';\nimport { \n  getSocket, \n  joinChatRoom, \n  leaveChatRoom, \n  markChatAsRead,\n  deleteChatMessage,\n  editChatMessage,\n  reactToChatMessage\n} from '@/lib/socket';\nimport { format, isToday, isYesterday, isSameDay } from 'date-fns';\nimport { cn } from '@/lib/utils';\nimport MessageMenu, { MessageQuickActions } from './MessageMenu';\nimport { WALLPAPER_OPTIONS } from './ChatSettingsPanel';\nimport type { UploadingMessage } from './ChatInput';\n\ninterface ChatMessagesProps {\n  conversationId: string;\n  currentUserId: string;\n  otherUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n  };\n  wallpaper?: string;\n  onReply?: (message: { id: string; content: string; senderName: string }) => void;\n  uploadingMessages?: UploadingMessage[];\n}\n\nconst REACTION_EMOJIS = ['â¤ï¸', 'ðŸ‘', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ™'];\n\nexport default function ChatMessages({\n  conversationId,\n  currentUserId,\n  otherUser,\n  wallpaper = 'default',\n  onReply,\n  uploadingMessages = [],\n}: ChatMessagesProps) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n  const [typingUser, setTypingUser] = useState<string | null>(null);\n  const [highlightedMessageId, setHighlightedMessageId] = useState<string | null>(null);\n  const [viewingImage, setViewingImage] = useState<string | null>(null);\n  const [viewingVideo, setViewingVideo] = useState<string | null>(null);\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const messageRefs = useRef<Map<string, HTMLDivElement>>(new Map());\n  const [shouldAutoScroll, setShouldAutoScroll] = useState(true);\n\n  // Scroll to a specific message and highlight it\n  const scrollToMessage = useCallback((messageId: string) => {\n    const messageElement = messageRefs.current.get(messageId);\n    if (messageElement) {\n      messageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      setHighlightedMessageId(messageId);\n      // Remove highlight after 1.5 seconds\n      setTimeout(() => {\n        setHighlightedMessageId(null);\n      }, 1500);\n    }\n  }, []);\n\n  // Register message ref\n  const registerMessageRef = useCallback((messageId: string, element: HTMLDivElement | null) => {\n    if (element) {\n      messageRefs.current.set(messageId, element);\n    } else {\n      messageRefs.current.delete(messageId);\n    }\n  }, []);\n\n  // Fetch messages\n  const fetchMessages = useCallback(async (cursor?: string) => {\n    try {\n      if (cursor) {\n        setLoadingMore(true);\n      } else {\n        setLoading(true);\n      }\n\n      const result = await getMessages(conversationId, 50, cursor);\n\n      if (cursor) {\n        // Prepend older messages\n        setMessages(prev => [...result.messages, ...prev]);\n      } else {\n        setMessages(result.messages);\n      }\n\n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: any) {\n      console.error('Failed to fetch messages:', err);\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [conversationId]);\n\n  // Initial load and join room\n  useEffect(() => {\n    fetchMessages();\n    joinChatRoom(conversationId);\n    markChatAsRead(conversationId);\n\n    return () => {\n      leaveChatRoom(conversationId);\n    };\n  }, [conversationId, fetchMessages]);\n\n  // Socket event listeners\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleNewMessage = (data: { conversationId: string; message: Message }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => [...prev, data.message]);\n        setShouldAutoScroll(true);\n        \n        // Mark as read if from other user\n        if (data.message.senderId !== currentUserId) {\n          markChatAsRead(conversationId);\n        }\n      }\n    };\n\n    const handleTyping = (data: { conversationId: string; userId: string; isTyping: boolean }) => {\n      if (data.conversationId === conversationId && data.userId !== currentUserId) {\n        setTypingUser(data.isTyping ? data.userId : null);\n      }\n    };\n\n    const handleMessagesRead = (data: { conversationId: string; readBy: string; readAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status !== 'READ'\n              ? { ...m, status: 'READ', readAt: new Date(data.readAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleMessagesDelivered = (data: { conversationId: string; deliveredAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status === 'SENT'\n              ? { ...m, status: 'DELIVERED', deliveredAt: new Date(data.deliveredAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleError = (data: { message: string }) => {\n      console.error('Chat socket error:', data.message);\n    };\n\n    const handleMessageDeleted = (data: { messageId: string; conversationId: string; forEveryone: boolean }) => {\n      if (data.conversationId === conversationId) {\n        if (data.forEveryone) {\n          setMessages(prev => \n            prev.map(m => \n              m.id === data.messageId \n                ? { ...m, isDeleted: true, content: 'This message was deleted' } \n                : m\n            )\n          );\n        } else {\n          setMessages(prev => prev.filter(m => m.id !== data.messageId));\n        }\n      }\n    };\n\n    const handleMessageEdited = (data: { messageId: string; conversationId: string; content: string; editedAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.id === data.messageId \n              ? { ...m, content: data.content, updatedAt: String(data.editedAt) } \n              : m\n          )\n        );\n      }\n    };\n\n    const handleReaction = (data: { messageId: string; conversationId: string; userId: string; emoji: string; action: string }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => {\n            if (m.id !== data.messageId) return m;\n            \n            let reactions = [...(m.reactions || [])];\n            \n            if (data.action === 'removed') {\n              reactions = reactions.filter(r => !(r.userId === data.userId));\n            } else if (data.action === 'added') {\n              reactions.push({\n                id: `temp-${Date.now()}`,\n                userId: data.userId,\n                emoji: data.emoji,\n                user: { id: data.userId, username: '', name: '' }\n              });\n            } else if (data.action === 'updated') {\n              const index = reactions.findIndex(r => r.userId === data.userId);\n              if (index >= 0) {\n                reactions[index] = { ...reactions[index], emoji: data.emoji };\n              }\n            }\n            \n            return { ...m, reactions };\n          })\n        );\n      }\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:user_typing', handleTyping);\n    socket.on('chat:messages_read', handleMessagesRead);\n    socket.on('chat:messages_delivered', handleMessagesDelivered);\n    socket.on('chat:message_deleted', handleMessageDeleted);\n    socket.on('chat:message_edited', handleMessageEdited);\n    socket.on('chat:message_reaction', handleReaction);\n    socket.on('error', handleError);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:user_typing', handleTyping);\n      socket.off('chat:messages_read', handleMessagesRead);\n      socket.off('chat:messages_delivered', handleMessagesDelivered);\n      socket.off('chat:message_deleted', handleMessageDeleted);\n      socket.off('chat:message_edited', handleMessageEdited);\n      socket.off('chat:message_reaction', handleReaction);\n      socket.off('error', handleError);\n    };\n  }, [conversationId, currentUserId, otherUser.id]);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (shouldAutoScroll && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n      setShouldAutoScroll(false);\n    }\n  }, [messages, shouldAutoScroll]);\n\n  // Scroll detection for loading more\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    const target = e.currentTarget;\n    if (target.scrollTop < 100 && hasMore && !loadingMore) {\n      fetchMessages(nextCursor);\n    }\n  };\n\n  // Group messages by date\n  const groupedMessages = messages.reduce((groups, message) => {\n    const date = new Date(message.createdAt);\n    const dateKey = format(date, 'yyyy-MM-dd');\n    \n    if (!groups[dateKey]) {\n      groups[dateKey] = [];\n    }\n    groups[dateKey].push(message);\n    \n    return groups;\n  }, {} as Record<string, Message[]>);\n\n  if (loading) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  // Get wallpaper styles\n  const wallpaperOption = WALLPAPER_OPTIONS.find(w => w.id === wallpaper) || WALLPAPER_OPTIONS[0];\n  const wallpaperClasses = cn(wallpaperOption.color, wallpaperOption.pattern);\n\n  return (\n    <>\n    <div \n      ref={messagesContainerRef}\n      className={cn(\"flex-1 overflow-y-auto p-4 space-y-4\", wallpaperClasses)}\n      onScroll={handleScroll}\n    >\n      {loadingMore && (\n        <div className=\"flex justify-center py-2\">\n          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n        </div>\n      )}\n\n      {Object.entries(groupedMessages).map(([dateKey, dateMessages]) => (\n        <div key={dateKey}>\n          {/* Date separator */}\n          <div className=\"flex items-center justify-center my-4\">\n            <div className=\"bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full text-xs text-gray-600 dark:text-gray-300\">\n              {formatDateSeparator(new Date(dateKey))}\n            </div>\n          </div>\n\n          {/* Messages for this date */}\n          {dateMessages.map((message, index) => {\n            const prevMessage = index > 0 ? dateMessages[index - 1] : null;\n            const showAvatar = !prevMessage || prevMessage.senderId !== message.senderId;\n            \n            return (\n              <MessageBubble\n                key={message.id}\n                message={message}\n                isOwn={message.senderId === currentUserId}\n                showAvatar={showAvatar}\n                otherUser={otherUser}\n                conversationId={conversationId}\n                isHighlighted={highlightedMessageId === message.id}\n                onScrollToReply={scrollToMessage}\n                registerRef={(el) => registerMessageRef(message.id, el)}\n                onReply={onReply ? () => onReply({\n                  id: message.id,\n                  content: message.content,\n                  senderName: message.senderId === currentUserId ? 'You' : otherUser.name,\n                }) : undefined}\n                onViewImage={setViewingImage}\n                onViewVideo={setViewingVideo}\n              />\n            );\n          })}\n        </div>\n      ))}\n\n      {/* Uploading Messages */}\n      {uploadingMessages.map(uploadingMsg => (\n        <div key={uploadingMsg.id} className=\"flex justify-end mb-2\">\n          <div className=\"relative max-w-[70%]\">\n            <div className=\"bg-blue-600 text-white px-4 py-2 rounded-2xl rounded-br-sm\">\n              {/* Preview for images/videos */}\n              {uploadingMsg.preview && (uploadingMsg.type === 'image' || uploadingMsg.type === 'video') && (\n                <div className=\"relative mb-2 rounded-lg overflow-hidden\">\n                  {uploadingMsg.type === 'image' ? (\n                    <img \n                      src={uploadingMsg.preview} \n                      alt=\"Uploading\" \n                      className=\"max-w-full opacity-70\"\n                      style={{ maxHeight: '200px' }}\n                    />\n                  ) : (\n                    <video \n                      src={uploadingMsg.preview}\n                      className=\"max-w-full opacity-70\"\n                      style={{ maxHeight: '200px' }}\n                      muted\n                    />\n                  )}\n                  {/* Overlay with spinner */}\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/30\">\n                    <div className=\"relative\">\n                      <svg className=\"w-12 h-12\" viewBox=\"0 0 36 36\">\n                        <circle\n                          cx=\"18\"\n                          cy=\"18\"\n                          r=\"16\"\n                          fill=\"none\"\n                          stroke=\"rgba(255,255,255,0.3)\"\n                          strokeWidth=\"3\"\n                        />\n                        <circle\n                          cx=\"18\"\n                          cy=\"18\"\n                          r=\"16\"\n                          fill=\"none\"\n                          stroke=\"white\"\n                          strokeWidth=\"3\"\n                          strokeDasharray={`${uploadingMsg.progress}, 100`}\n                          strokeLinecap=\"round\"\n                          transform=\"rotate(-90 18 18)\"\n                        />\n                      </svg>\n                      <span className=\"absolute inset-0 flex items-center justify-center text-white text-xs font-medium\">\n                        {uploadingMsg.progress}%\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* For audio/documents - show icon with progress */}\n              {(uploadingMsg.type === 'audio' || uploadingMsg.type === 'document') && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"relative w-10 h-10\">\n                    <svg className=\"w-10 h-10\" viewBox=\"0 0 36 36\">\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"16\"\n                        fill=\"none\"\n                        stroke=\"rgba(255,255,255,0.3)\"\n                        strokeWidth=\"3\"\n                      />\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"16\"\n                        fill=\"none\"\n                        stroke=\"white\"\n                        strokeWidth=\"3\"\n                        strokeDasharray={`${uploadingMsg.progress}, 100`}\n                        strokeLinecap=\"round\"\n                        transform=\"rotate(-90 18 18)\"\n                      />\n                    </svg>\n                    <span className=\"absolute inset-0 flex items-center justify-center text-white text-xs\">\n                      {uploadingMsg.type === 'audio' ? 'ðŸŽ¤' : 'ðŸ“„'}\n                    </span>\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm truncate\">{uploadingMsg.fileName || 'Uploading...'}</p>\n                    <p className=\"text-xs opacity-70\">Sending... {uploadingMsg.progress}%</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Text label */}\n              {(uploadingMsg.type === 'image' || uploadingMsg.type === 'video') && (\n                <p className=\"text-sm\">\n                  {uploadingMsg.type === 'image' ? 'ðŸ“· Sending photo...' : 'ðŸŽ¥ Sending video...'}\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n\n      {/* Typing indicator */}\n      {typingUser && (\n        <div className=\"flex items-center gap-2 text-gray-500 text-sm\">\n          <div className=\"flex gap-1\">\n            <span className=\"animate-bounce\">â€¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.1s' }}>â€¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.2s' }}>â€¢</span>\n          </div>\n          <span>{otherUser.name} is typing...</span>\n        </div>\n      )}\n\n      <div ref={messagesEndRef} />\n    </div>\n\n    {/* Image Viewer Modal */}\n    {viewingImage && (\n      <div \n        className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\"\n        onClick={() => setViewingImage(null)}\n      >\n        <button\n          onClick={() => setViewingImage(null)}\n          className=\"absolute top-4 right-4 text-white hover:bg-white/10 p-2 rounded-full transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n        <img \n          src={viewingImage} \n          alt=\"Full size image\" \n          className=\"max-w-full max-h-full object-contain rounded-lg\"\n          onClick={(e) => e.stopPropagation()}\n        />\n        <a\n          href={viewingImage}\n          download\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          onClick={(e) => e.stopPropagation()}\n          className=\"absolute bottom-4 right-4 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          Download\n        </a>\n      </div>\n    )}\n\n    {/* Video Viewer Modal */}\n    {viewingVideo && (\n      <div \n        className=\"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4\"\n        onClick={() => setViewingVideo(null)}\n      >\n        <button\n          onClick={() => setViewingVideo(null)}\n          className=\"absolute top-4 right-4 text-white hover:bg-white/10 p-2 rounded-full transition-colors z-10\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n        <video \n          src={viewingVideo} \n          controls\n          autoPlay\n          className=\"max-w-full max-h-full rounded-lg\"\n          style={{ maxHeight: '90vh', maxWidth: '90vw' }}\n          onClick={(e) => e.stopPropagation()}\n        />\n        <a\n          href={viewingVideo}\n          download\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          onClick={(e) => e.stopPropagation()}\n          className=\"absolute bottom-4 right-4 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          Download\n        </a>\n      </div>\n    )}\n    </>\n  );\n}\n\n// ============================================\n// Message Bubble Component\n// ============================================\ninterface MessageBubbleProps {\n  message: Message;\n  isOwn: boolean;\n  showAvatar: boolean;\n  otherUser: {\n    name: string;\n    profileImage?: string | null;\n  };\n  conversationId: string;\n  isHighlighted?: boolean;\n  onScrollToReply?: (messageId: string) => void;\n  registerRef?: (el: HTMLDivElement | null) => void;\n  onReply?: () => void;\n  onViewImage?: (url: string) => void;\n  onViewVideo?: (url: string) => void;\n}\n\nfunction MessageBubble({ \n  message, \n  isOwn, \n  showAvatar, \n  otherUser,\n  conversationId,\n  isHighlighted = false,\n  onScrollToReply,\n  registerRef,\n  onReply,\n  onViewImage,\n  onViewVideo,\n}: MessageBubbleProps) {\n  const [showActions, setShowActions] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showReactions, setShowReactions] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editContent, setEditContent] = useState(message.content);\n  const [copied, setCopied] = useState(false);\n\n  const handleDelete = (forEveryone: boolean) => {\n    deleteChatMessage(message.id, conversationId, forEveryone);\n    setShowActions(false);\n    setShowMenu(false);\n  };\n\n  const handleEdit = () => {\n    if (editContent.trim() && editContent !== message.content) {\n      editChatMessage(message.id, conversationId, editContent);\n    }\n    setIsEditing(false);\n  };\n\n  const handleReaction = (emoji: string) => {\n    reactToChatMessage(message.id, conversationId, emoji);\n    setShowReactions(false);\n  };\n\n  if (message.isDeleted) {\n    return (\n      <div \n        ref={registerRef}\n        className={cn(\n          'flex items-center gap-2',\n          isOwn ? 'justify-end' : 'justify-start'\n        )}\n      >\n        <div className=\"bg-gray-100 dark:bg-gray-800 text-gray-500 italic px-4 py-2 rounded-lg text-sm\">\n          This message was deleted\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={registerRef}\n      className={cn(\n        'flex gap-2 group transition-all duration-300',\n        isOwn ? 'justify-end' : 'justify-start',\n        isHighlighted && 'bg-yellow-100/50 dark:bg-yellow-900/30 -mx-2 px-2 py-1 rounded-lg'\n      )}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => { setShowActions(false); setShowReactions(false); }}\n    >\n      {/* Avatar for received messages */}\n      {!isOwn && (\n        <div className={cn('w-8 h-8 flex-shrink-0', !showAvatar && 'invisible')}>\n          {showAvatar && (\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium\">\n              {otherUser.profileImage ? (\n                <img\n                  src={otherUser.profileImage}\n                  alt={otherUser.name}\n                  className=\"w-8 h-8 rounded-full object-cover\"\n                />\n              ) : (\n                otherUser.name.charAt(0).toUpperCase()\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className={cn('max-w-[70%] relative', isOwn && 'order-first')}>\n        {/* Reply preview - clickable to scroll to original message */}\n        {message.replyTo && (\n          <button\n            onClick={() => onScrollToReply?.(message.replyTo!.id)}\n            className={cn(\n              'text-xs p-2 rounded-t-lg border-l-2 w-full text-left cursor-pointer hover:opacity-80 transition-opacity',\n              isOwn \n                ? 'bg-blue-600/20 border-blue-400' \n                : 'bg-gray-100 dark:bg-gray-800 border-gray-400'\n            )}\n          >\n            <span className=\"text-gray-500 text-[10px]\">â†© Replying to</span>\n            <p className=\"truncate text-gray-700 dark:text-gray-300\">{message.replyTo.content}</p>\n          </button>\n        )}\n\n        {/* Message content */}\n        <div className={cn(\n          'px-4 py-2 rounded-2xl relative',\n          isOwn \n            ? 'bg-blue-600 text-white rounded-br-sm' \n            : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-sm',\n          message.replyTo && 'rounded-t-none'\n        )}>\n          {/* Image content */}\n          {message.mediaUrl && message.contentType === 'image' && (\n            <button \n              onClick={() => onViewImage?.(message.mediaUrl!)}\n              className=\"block w-full text-left\"\n            >\n              <img \n                src={message.mediaUrl} \n                alt=\"Shared image\" \n                className=\"rounded-lg max-w-full mb-2 cursor-pointer hover:opacity-90 transition-opacity\"\n                style={{ maxHeight: '300px' }}\n              />\n            </button>\n          )}\n\n          {/* Video content */}\n          {message.mediaUrl && message.contentType === 'video' && (\n            <div className=\"relative group cursor-pointer mb-2\" onClick={() => onViewVideo?.(message.mediaUrl!)}>\n              <video \n                src={message.mediaUrl}\n                className=\"rounded-lg max-w-full\"\n                style={{ maxHeight: '300px' }}\n              />\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors rounded-lg\">\n                <div className=\"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-gray-900 ml-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M8 5v14l11-7z\"/>\n                  </svg>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Audio content */}\n          {message.mediaUrl && message.contentType === 'audio' && (\n            <div className={cn(\n              'flex items-center gap-3 p-2 rounded-lg mb-2',\n              isOwn ? 'bg-blue-700/50' : 'bg-gray-200 dark:bg-gray-700'\n            )}>\n              <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\">\n                <span className=\"text-white text-lg\">ðŸŽ¤</span>\n              </div>\n              <audio \n                src={message.mediaUrl}\n                controls\n                className=\"flex-1 h-8\"\n                style={{ maxWidth: '200px' }}\n              />\n            </div>\n          )}\n\n          {/* Document content */}\n          {message.mediaUrl && message.contentType === 'document' && (\n            <a \n              href={message.mediaUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className={cn(\n                'flex items-center gap-3 p-3 rounded-lg mb-2 transition-colors',\n                isOwn ? 'bg-blue-700/50 hover:bg-blue-700/70' : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'\n              )}\n            >\n              <div className=\"w-10 h-10 rounded-lg bg-red-500 flex items-center justify-center\">\n                <span className=\"text-white text-lg\">ðŸ“„</span>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className={cn('font-medium truncate text-sm', isOwn ? 'text-white' : 'text-gray-900 dark:text-white')}>\n                  {message.fileName || 'Document'}\n                </p>\n                {message.fileSize && (\n                  <p className={cn('text-xs', isOwn ? 'text-blue-200' : 'text-gray-500')}>\n                    {(message.fileSize / 1024).toFixed(1)} KB\n                  </p>\n                )}\n              </div>\n            </a>\n          )}\n\n          {/* Generic file content */}\n          {message.mediaUrl && message.contentType === 'file' && (\n            <a \n              href={message.mediaUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"flex items-center gap-2 bg-white/10 p-2 rounded mb-2 hover:bg-white/20\"\n            >\n              <span>ðŸ“Ž</span>\n              <span className=\"truncate\">{message.fileName || 'File'}</span>\n            </a>\n          )}\n\n          {/* Text content */}\n          {isEditing ? (\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                className=\"flex-1 bg-white/20 rounded px-2 py-1 text-sm\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleEdit();\n                  if (e.key === 'Escape') setIsEditing(false);\n                }}\n              />\n              <button onClick={handleEdit} className=\"text-xs\">Save</button>\n            </div>\n          ) : (\n            <p className=\"break-words whitespace-pre-wrap\">{message.content}</p>\n          )}\n\n          {/* Edited indicator - only show if updated more than 5 seconds after creation */}\n          {!message.isDeleted && (() => {\n            const created = new Date(message.createdAt).getTime();\n            const updated = new Date(message.updatedAt).getTime();\n            const diffSeconds = (updated - created) / 1000;\n            return diffSeconds > 5;\n          })() && (\n            <span className=\"text-xs opacity-60 ml-1\">(edited)</span>\n          )}\n        </div>\n\n        {/* Reactions */}\n        {message.reactions && message.reactions.length > 0 && (\n          <div className={cn(\n            'flex flex-wrap gap-1 mt-1',\n            isOwn ? 'justify-end' : 'justify-start'\n          )}>\n            {Array.from(new Set(message.reactions.map(r => r.emoji))).map(emoji => {\n              const count = message.reactions.filter(r => r.emoji === emoji).length;\n              return (\n                <button\n                  key={emoji}\n                  onClick={() => handleReaction(emoji)}\n                  className=\"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full text-sm flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700\"\n                >\n                  <span>{emoji}</span>\n                  <span className=\"text-xs text-gray-500\">{count}</span>\n                </button>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Time and status */}\n        <div className={cn(\n          'text-xs text-gray-500 mt-1 flex items-center gap-1',\n          isOwn ? 'justify-end' : 'justify-start'\n        )}>\n          <span>{format(new Date(message.createdAt), 'HH:mm')}</span>\n          {isOwn && (\n            <span className={cn(\n              message.status === 'READ' && 'text-blue-500'\n            )}>\n              {message.status === 'READ' ? 'âœ“âœ“' : message.status === 'DELIVERED' ? 'âœ“âœ“' : 'âœ“'}\n            </span>\n          )}\n        </div>\n\n        {/* Quick Action buttons (Discord-style) */}\n        <MessageQuickActions\n          isVisible={showActions && !isEditing && !showMenu}\n          isOwn={isOwn}\n          onReply={() => onReply?.()}\n          onReact={() => setShowReactions(!showReactions)}\n          onMore={() => setShowMenu(true)}\n        />\n\n        {/* Full Message Menu */}\n        <MessageMenu\n          isOpen={showMenu}\n          onClose={() => setShowMenu(false)}\n          isOwn={isOwn}\n          messageId={message.id}\n          messageContent={message.content}\n          hasMedia={!!message.mediaUrl}\n          mediaUrl={message.mediaUrl}\n          onReply={() => onReply?.()}\n          onEdit={() => setIsEditing(true)}\n          onDelete={handleDelete}\n          onReact={handleReaction}\n          onCopy={() => {\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n          }}\n          anchorPosition={isOwn ? 'right' : 'left'}\n        />\n\n        {/* Reaction picker */}\n        {showReactions && !showMenu && (\n          <div className={cn(\n            'absolute -top-10 flex items-center gap-1 bg-white dark:bg-gray-900 shadow-lg rounded-full px-2 py-1',\n            isOwn ? 'right-0' : 'left-0'\n          )}>\n            {REACTION_EMOJIS.map(emoji => (\n              <button\n                key={emoji}\n                onClick={() => handleReaction(emoji)}\n                className=\"hover:scale-125 transition-transform p-1\"\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        )}\n\n        {/* Copied notification */}\n        {copied && (\n          <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-black/70 text-white text-xs px-2 py-1 rounded\">\n            Copied!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Utility Functions\n// ============================================\nfunction formatDateSeparator(date: Date): string {\n  if (isToday(date)) return 'Today';\n  if (isYesterday(date)) return 'Yesterday';\n  return format(date, 'MMMM d, yyyy');\n}\n"],"names":["c","_c","React","useEffect","useRef","useState","useCallback","Message","getMessages","MessagesResponse","getSocket","joinChatRoom","leaveChatRoom","markChatAsRead","deleteChatMessage","editChatMessage","reactToChatMessage","format","isToday","isYesterday","isSameDay","cn","MessageMenu","MessageQuickActions","WALLPAPER_OPTIONS","UploadingMessage","ChatMessagesProps","conversationId","currentUserId","otherUser","id","name","username","profileImage","isOnline","wallpaper","onReply","message","content","senderName","uploadingMessages","REACTION_EMOJIS","ChatMessages","messages","setMessages","loading","setLoading","loadingMore","setLoadingMore","hasMore","setHasMore","nextCursor","setNextCursor","typingUser","setTypingUser","highlightedMessageId","setHighlightedMessageId","viewingImage","setViewingImage","viewingVideo","setViewingVideo","messagesEndRef","HTMLDivElement","messagesContainerRef","messageRefs","Map","shouldAutoScroll","setShouldAutoScroll","scrollToMessage","messageId","messageElement","current","get","scrollIntoView","behavior","block","setTimeout","registerMessageRef","element","set","delete","fetchMessages","cursor","result","prev","err","console","error","socket","handleNewMessage","data","senderId","handleTyping","userId","isTyping","handleMessagesRead","readBy","readAt","Date","map","m","status","toISOString","handleMessagesDelivered","deliveredAt","handleError","handleMessageDeleted","forEveryone","isDeleted","filter","handleMessageEdited","editedAt","updatedAt","String","handleReaction","emoji","action","reactions","r","push","now","user","index","findIndex","on","off","handleScroll","e","UIEvent","target","currentTarget","scrollTop","groupedMessages","reduce","groups","date","createdAt","dateKey","Record","wallpaperOption","find","w","wallpaperClasses","color","pattern","Object","entries","dateMessages","formatDateSeparator","prevMessage","showAvatar","el","undefined","uploadingMsg","preview","type","maxHeight","progress","fileName","animationDelay","stopPropagation","maxWidth","MessageBubbleProps","isOwn","isHighlighted","onScrollToReply","registerRef","onViewImage","url","onViewVideo","MessageBubble","t0","$","$i","Symbol","for","t1","showActions","setShowActions","showMenu","setShowMenu","showReactions","setShowReactions","isEditing","setIsEditing","editContent","setEditContent","copied","setCopied","t2","handleDelete","t3","MessageBubble[handleEdit]","trim","handleEdit","t4","t5","t6","t7","t8","t9","MessageBubble[<div>.onMouseEnter]","MessageBubble[<div>.onMouseLeave]","t10","charAt","toUpperCase","t11","t12","t13","replyTo","MessageBubble[<button>.onClick]","t14","t15","t16","t17","contentType","mediaUrl","t18","MessageBubble[<div>.onClick]","t19","t20","fileSize","toFixed","t21","t22","value","e_0","key","t23","created","getTime","updated","diffSeconds","t24","t25","length","Array","from","Set","_MessageBubbleMessageReactionsMap","emoji_0","count","r_0","MessageBubble[(anonymous)() > <button>.onClick]","t26","t27","t28","t29","t30","t31","t32","t33","MessageBubble[<MessageQuickActions>.onReply]","t34","MessageBubble[<MessageQuickActions>.onReact]","t35","MessageBubble[<MessageQuickActions>.onMore]","t36","t37","MessageBubble[<MessageMenu>.onClose]","t38","t39","MessageBubble[<MessageMenu>.onReply]","t40","MessageBubble[<MessageMenu>.onEdit]","t41","MessageBubble[<MessageMenu>.onCopy]","MessageBubble[<MessageMenu>.onCopy > setTimeout()]","t42","t43","t44","emoji_1","MessageBubble[REACTION_EMOJIS.map() > <button>.onClick]","t45","t46","t47"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3929, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatInput.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { sendChatMessage, sendChatTyping, getSocket } from '@/lib/socket';\nimport { uploadChatMedia } from '@/lib/api/chat';\nimport { cn } from '@/lib/utils';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Paperclip,\n  Image as ImageIcon,\n  FileText,\n  Video,\n  Mic,\n  X,\n  Send,\n  Smile,\n  File,\n  Square,\n  Trash2,\n} from 'lucide-react';\n\n// File type configurations\nconst ALLOWED_FILE_TYPES = {\n  image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],\n  video: ['video/mp4', 'video/webm', 'video/quicktime'],\n  document: ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/webm'],\n};\n\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nconst MAX_VIDEO_DURATION = 60; // 60 seconds\n\n// Uploading message interface for optimistic UI\nexport interface UploadingMessage {\n  id: string;\n  type: 'image' | 'video' | 'document' | 'audio';\n  preview?: string;\n  fileName?: string;\n  progress: number;\n}\n\ninterface ChatInputProps {\n  conversationId: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    senderName: string;\n  };\n  onCancelReply?: () => void;\n  disabled?: boolean;\n  onUploadingMessagesChange?: (messages: UploadingMessage[]) => void;\n}\n\ninterface FilePreview {\n  file: File;\n  preview: string;\n  type: 'image' | 'video' | 'document' | 'audio';\n}\n\nexport default function ChatInput({\n  conversationId,\n  replyTo,\n  onCancelReply,\n  disabled = false,\n  onUploadingMessagesChange,\n}: ChatInputProps) {\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showEmoji, setShowEmoji] = useState(false);\n  const [showAttachMenu, setShowAttachMenu] = useState(false);\n  const [selectedFiles, setSelectedFiles] = useState<FilePreview[]>([]);\n  const [uploadProgress, setUploadProgress] = useState<number | null>(null);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingDuration, setRecordingDuration] = useState(0);\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n  const [uploadingMessages, setUploadingMessages] = useState<UploadingMessage[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const attachMenuRef = useRef<HTMLDivElement>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const recordingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n    }\n  }, [message]);\n\n  // Close attachment menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (attachMenuRef.current && !attachMenuRef.current.contains(event.target as Node)) {\n        setShowAttachMenu(false);\n      }\n    };\n\n    if (showAttachMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showAttachMenu]);\n\n  // Handle typing indicator\n  const handleTyping = useCallback(() => {\n    if (!isTyping) {\n      setIsTyping(true);\n      sendChatTyping(conversationId, true);\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout to stop typing indicator\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n      sendChatTyping(conversationId, false);\n    }, 2000);\n  }, [conversationId, isTyping]);\n\n  // Clean up typing timeout\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Get file type category\n  const getFileType = (file: File): 'image' | 'video' | 'document' | 'audio' | null => {\n    for (const [type, mimes] of Object.entries(ALLOWED_FILE_TYPES)) {\n      if (mimes.includes(file.type)) {\n        return type as 'image' | 'video' | 'document' | 'audio';\n      }\n    }\n    return null;\n  };\n\n  // Check video duration\n  const checkVideoDuration = (file: File): Promise<boolean> => {\n    return new Promise((resolve) => {\n      const video = document.createElement('video');\n      video.preload = 'metadata';\n      video.onloadedmetadata = () => {\n        URL.revokeObjectURL(video.src);\n        if (video.duration > MAX_VIDEO_DURATION) {\n          alert(`Video \"${file.name}\" is too long. Maximum duration is ${MAX_VIDEO_DURATION} seconds.`);\n          resolve(false);\n        } else {\n          resolve(true);\n        }\n      };\n      video.onerror = () => {\n        URL.revokeObjectURL(video.src);\n        resolve(true); // Allow if we can't check duration\n      };\n      video.src = URL.createObjectURL(file);\n    });\n  };\n\n  // Handle file selection\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>, filterType?: string) => {\n    const files = Array.from(e.target.files || []);\n    \n    const validFiles: FilePreview[] = [];\n    \n    for (const file of files) {\n      // Check file size\n      if (file.size > MAX_FILE_SIZE) {\n        alert(`File \"${file.name}\" is too large. Maximum size is 50MB.`);\n        continue;\n      }\n\n      const fileType = getFileType(file);\n      \n      if (!fileType) {\n        alert(`File type not supported: ${file.name}`);\n        continue;\n      }\n\n      // Check video duration\n      if (fileType === 'video') {\n        const isValidDuration = await checkVideoDuration(file);\n        if (!isValidDuration) {\n          continue;\n        }\n      }\n\n      // Create preview URL\n      let preview = '';\n      if (fileType === 'image' || fileType === 'video') {\n        preview = URL.createObjectURL(file);\n      }\n\n      validFiles.push({\n        file,\n        preview,\n        type: fileType,\n      });\n    }\n\n    setSelectedFiles(prev => [...prev, ...validFiles]);\n    setShowAttachMenu(false);\n    \n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Remove selected file\n  const removeFile = (index: number) => {\n    setSelectedFiles(prev => {\n      const newFiles = [...prev];\n      // Revoke object URL to free memory\n      if (newFiles[index].preview) {\n        URL.revokeObjectURL(newFiles[index].preview);\n      }\n      newFiles.splice(index, 1);\n      return newFiles;\n    });\n  };\n\n  // Open file picker for specific type\n  const openFilePicker = (accept: string) => {\n    if (fileInputRef.current) {\n      fileInputRef.current.accept = accept;\n      fileInputRef.current.click();\n    }\n    setShowAttachMenu(false);\n  };\n\n  // Voice recording functions\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (e) => {\n        if (e.data.size > 0) {\n          audioChunksRef.current.push(e.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n        setAudioBlob(audioBlob);\n        stream.getTracks().forEach(track => track.stop());\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingDuration(0);\n\n      // Update duration every second\n      recordingIntervalRef.current = setInterval(() => {\n        setRecordingDuration(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      console.error('Failed to start recording:', error);\n      alert('Could not access microphone. Please grant permission.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      if (recordingIntervalRef.current) {\n        clearInterval(recordingIntervalRef.current);\n        recordingIntervalRef.current = null;\n      }\n    }\n  };\n\n  const cancelRecording = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n    setIsRecording(false);\n    setAudioBlob(null);\n    setRecordingDuration(0);\n    if (recordingIntervalRef.current) {\n      clearInterval(recordingIntervalRef.current);\n      recordingIntervalRef.current = null;\n    }\n  };\n\n  const formatDuration = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Sync uploading messages to parent via useEffect to avoid setState during render\n  useEffect(() => {\n    onUploadingMessagesChange?.(uploadingMessages);\n  }, [uploadingMessages, onUploadingMessagesChange]);\n\n  const handleSend = async () => {\n    const trimmedMessage = message.trim();\n    const hasFiles = selectedFiles.length > 0;\n    const hasAudio = audioBlob !== null;\n    \n    if (!trimmedMessage && !hasFiles && !hasAudio) return;\n\n    // Immediately clear typing state and stop broadcasting\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = null;\n    }\n    setIsTyping(false);\n    sendChatTyping(conversationId, false);\n\n    // Clear input immediately for better UX\n    const filesToUpload = [...selectedFiles];\n    const audioToUpload = audioBlob;\n    const textToSend = trimmedMessage;\n    const currentReplyTo = replyTo;\n    \n    setMessage('');\n    setSelectedFiles([]);\n    setAudioBlob(null);\n    setRecordingDuration(0);\n    onCancelReply?.();\n    inputRef.current?.focus();\n\n    // Upload and send audio message if exists\n    if (hasAudio && audioToUpload) {\n      const uploadId = `upload-audio-${Date.now()}`;\n      \n      // Add optimistic uploading message\n      setUploadingMessages(prev => [...prev, {\n        id: uploadId,\n        type: 'audio',\n        fileName: 'Voice message',\n        progress: 0,\n      }]);\n\n      try {\n        const audioFile = new globalThis.File([audioToUpload], `voice-${Date.now()}.webm`, { type: 'audio/webm' });\n        \n        const result = await uploadChatMedia(audioFile, 'audio', (progress) => {\n          setUploadingMessages(prev => \n            prev.map(m => m.id === uploadId ? { ...m, progress } : m)\n          );\n        });\n        \n        // Remove uploading message\n        setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n        \n        // Send actual message\n        sendChatMessage({\n          conversationId,\n          content: 'ðŸŽ¤ Voice message',\n          contentType: 'audio',\n          mediaUrl: result.mediaUrl,\n          fileName: result.fileName,\n          fileSize: result.fileSize,\n          replyToId: currentReplyTo?.id,\n        });\n      } catch (error) {\n        console.error('Failed to upload audio:', error);\n        setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n        alert('Failed to send voice message');\n      }\n    }\n\n    // Upload files in parallel with optimistic UI\n    if (hasFiles) {\n      const uploadPromises = filesToUpload.map(async (filePreview, index) => {\n        const uploadId = `upload-${Date.now()}-${index}`;\n        \n        // Add optimistic uploading message immediately\n        setUploadingMessages(prev => [...prev, {\n          id: uploadId,\n          type: filePreview.type,\n          preview: filePreview.preview,\n          fileName: filePreview.file.name,\n          progress: 0,\n        }]);\n\n        try {\n          const result = await uploadChatMedia(filePreview.file, filePreview.type, (progress) => {\n            setUploadingMessages(prev => \n              prev.map(m => m.id === uploadId ? { ...m, progress } : m)\n            );\n          });\n          \n          // Remove uploading message\n          setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n          \n          // Send actual message\n          sendChatMessage({\n            conversationId,\n            content: filePreview.type === 'image' ? 'ðŸ“· Photo' : \n                     filePreview.type === 'video' ? 'ðŸŽ¥ Video' :\n                     filePreview.type === 'document' ? `ðŸ“„ ${filePreview.file.name}` :\n                     `ðŸ“Ž ${filePreview.file.name}`,\n            contentType: filePreview.type,\n            mediaUrl: result.mediaUrl,\n            fileName: result.fileName,\n            fileSize: result.fileSize,\n            replyToId: index === 0 ? currentReplyTo?.id : undefined,\n          });\n          \n          // Clean up preview URL\n          if (filePreview.preview) {\n            URL.revokeObjectURL(filePreview.preview);\n          }\n        } catch (error) {\n          console.error('Failed to upload file:', error);\n          setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n          alert(`Failed to send ${filePreview.file.name}`);\n        }\n      });\n\n      // Don't await - let uploads happen in background\n      Promise.all(uploadPromises);\n    }\n\n    // Send text message immediately\n    if (textToSend) {\n      sendChatMessage({\n        conversationId,\n        content: textToSend,\n        contentType: 'text',\n        replyToId: currentReplyTo?.id,\n      });\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n    handleTyping();\n  };\n\n  const handleEmojiClick = (emoji: string) => {\n    setMessage(prev => prev + emoji);\n    setShowEmoji(false);\n    inputRef.current?.focus();\n  };\n\n  const commonEmojis = ['ðŸ˜€', 'ðŸ˜‚', 'â¤ï¸', 'ðŸ‘', 'ðŸ”¥', 'ðŸŽ‰', 'ðŸ˜Š', 'ðŸ™', 'ðŸ’¯', 'âœ¨', 'ðŸ˜', 'ðŸ¤”', 'ðŸ‘€', 'ðŸ™Œ', 'ðŸ’ª'];\n\n  return (\n    <div className=\"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4\">\n      {/* File input (hidden) */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n\n      {/* File previews */}\n      <AnimatePresence>\n        {selectedFiles.length > 0 && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"mb-3 overflow-hidden\"\n          >\n            <div className=\"flex gap-2 overflow-x-auto py-2\">\n              {selectedFiles.map((file, index) => (\n                <div\n                  key={index}\n                  className=\"relative flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700\"\n                >\n                  {file.type === 'image' ? (\n                    <img\n                      src={file.preview}\n                      alt={file.file.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex flex-col items-center justify-center p-1\">\n                      {file.type === 'video' && <Video className=\"w-6 h-6 text-gray-500\" />}\n                      {file.type === 'document' && <FileText className=\"w-6 h-6 text-gray-500\" />}\n                      {file.type === 'audio' && <Mic className=\"w-6 h-6 text-gray-500\" />}\n                      <span className=\"text-[10px] text-gray-500 truncate w-full text-center mt-1\">\n                        {file.file.name.slice(0, 10)}...\n                      </span>\n                    </div>\n                  )}\n                  <button\n                    onClick={() => removeFile(index)}\n                    className=\"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Upload progress */}\n      {uploadProgress !== null && (\n        <div className=\"mb-3\">\n          <div className=\"h-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden\">\n            <div\n              className=\"h-full bg-blue-600 transition-all duration-300\"\n              style={{ width: `${uploadProgress}%` }}\n            />\n          </div>\n          <p className=\"text-xs text-gray-500 mt-1\">Uploading... {uploadProgress}%</p>\n        </div>\n      )}\n\n      {/* Reply preview */}\n      {replyTo && (\n        <div className=\"flex items-center justify-between mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg\">\n          <div className=\"flex items-center gap-2 min-w-0\">\n            <div className=\"w-1 h-8 bg-blue-500 rounded-full\" />\n            <div className=\"min-w-0\">\n              <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\n                Replying to {replyTo.senderName}\n              </p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">\n                {replyTo.content}\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onCancelReply}\n            className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      {/* Input area */}\n      <div className=\"flex items-end gap-2\">\n        {/* Attachment button with menu */}\n        <div className=\"relative\" ref={attachMenuRef}>\n          <button\n            onClick={() => setShowAttachMenu(!showAttachMenu)}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              showAttachMenu \n                ? \"bg-blue-100 dark:bg-blue-900/30 text-blue-600\" \n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title=\"Attach file\"\n          >\n            <Paperclip className=\"w-5 h-5\" />\n          </button>\n\n          {/* Attachment menu */}\n          <AnimatePresence>\n            {showAttachMenu && (\n              <motion.div\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0, y: 10, scale: 0.95 }}\n                className=\"absolute bottom-full left-0 mb-2 w-48 bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-20\"\n              >\n                <div className=\"p-2 space-y-1\">\n                  <button\n                    onClick={() => openFilePicker('image/*')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center\">\n                      <ImageIcon className=\"w-4 h-4 text-purple-600\" />\n                    </div>\n                    <span>Photos</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => openFilePicker('video/*')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center\">\n                      <Video className=\"w-4 h-4 text-red-600\" />\n                    </div>\n                    <span>Videos</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => openFilePicker('.pdf,.doc,.docx')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center\">\n                      <FileText className=\"w-4 h-4 text-blue-600\" />\n                    </div>\n                    <span>Documents</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      setShowAttachMenu(false);\n                      startRecording();\n                    }}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center\">\n                      <Mic className=\"w-4 h-4 text-orange-600\" />\n                    </div>\n                    <span>Voice Mail</span>\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Emoji button */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowEmoji(!showEmoji)}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              showEmoji\n                ? \"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600\"\n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title=\"Add emoji\"\n          >\n            <Smile className=\"w-5 h-5\" />\n          </button>\n\n          {/* Emoji picker */}\n          <AnimatePresence>\n            {showEmoji && (\n              <motion.div\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0, y: 10, scale: 0.95 }}\n                className=\"absolute bottom-full left-0 mb-2 p-3 bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 z-20\"\n              >\n                <div className=\"grid grid-cols-5 gap-1 w-[200px]\">\n                  {commonEmojis.map(emoji => (\n                    <button\n                      key={emoji}\n                      onClick={() => handleEmojiClick(emoji)}\n                      className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-xl transition-transform hover:scale-110\"\n                    >\n                      {emoji}\n                    </button>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Voice Recording UI */}\n        {isRecording ? (\n          <div className=\"flex-1 flex items-center gap-3 px-4 py-2.5 bg-red-50 dark:bg-red-900/20 rounded-2xl\">\n            <div className=\"w-3 h-3 bg-red-500 rounded-full animate-pulse\" />\n            <span className=\"text-red-600 dark:text-red-400 font-medium\">\n              {formatDuration(recordingDuration)}\n            </span>\n            <span className=\"text-sm text-gray-500 flex-1\">Recording...</span>\n            <button\n              onClick={cancelRecording}\n              className=\"p-2 text-gray-500 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors\"\n              title=\"Cancel\"\n            >\n              <Trash2 className=\"w-5 h-5\" />\n            </button>\n            <button\n              onClick={stopRecording}\n              className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n              title=\"Stop recording\"\n            >\n              <Square className=\"w-4 h-4\" />\n            </button>\n          </div>\n        ) : audioBlob ? (\n          <div className=\"flex-1 flex items-center gap-3 px-4 py-2.5 bg-green-50 dark:bg-green-900/20 rounded-2xl\">\n            <Mic className=\"w-5 h-5 text-green-600\" />\n            <span className=\"text-sm text-green-700 dark:text-green-400 flex-1\">\n              Voice message ({formatDuration(recordingDuration)})\n            </span>\n            <button\n              onClick={() => { setAudioBlob(null); setRecordingDuration(0); }}\n              className=\"p-1.5 text-gray-500 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors\"\n              title=\"Delete recording\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        ) : (\n          /* Text input */\n          <div className=\"flex-1 relative\">\n            <textarea\n              ref={inputRef}\n              value={message}\n              onChange={handleChange}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Type a message...\"\n              disabled={disabled}\n              rows={1}\n              className={cn(\n                'w-full resize-none rounded-2xl px-4 py-2.5',\n                'bg-gray-100 dark:bg-gray-800',\n                'border border-transparent focus:border-blue-500',\n                'focus:outline-none focus:ring-2 focus:ring-blue-500/20',\n                'text-gray-900 dark:text-white placeholder-gray-500',\n                'disabled:opacity-50 disabled:cursor-not-allowed',\n                'max-h-32'\n              )}\n            />\n          </div>\n        )}\n\n        {/* Mic button (show when no text/files) or Send button */}\n        {!message.trim() && selectedFiles.length === 0 && !audioBlob && !isRecording ? (\n          <button\n            onClick={startRecording}\n            disabled={disabled}\n            className={cn(\n              'p-3 rounded-full transition-all',\n              'bg-gray-200 dark:bg-gray-700 text-gray-500 hover:bg-gray-300 dark:hover:bg-gray-600',\n              'disabled:opacity-50 disabled:cursor-not-allowed'\n            )}\n            title=\"Record voice message\"\n          >\n            <Mic className=\"w-5 h-5\" />\n          </button>\n        ) : (\n          <button\n            onClick={handleSend}\n            disabled={(!message.trim() && selectedFiles.length === 0 && !audioBlob) || disabled || isRecording}\n            className={cn(\n              'p-3 rounded-full transition-all',\n              (message.trim() || selectedFiles.length > 0 || audioBlob)\n                ? 'bg-blue-600 text-white hover:bg-blue-700 scale-100'\n                : 'bg-gray-200 dark:bg-gray-700 text-gray-400 scale-95',\n              'disabled:opacity-50 disabled:cursor-not-allowed'\n            )}\n          >\n            <Send className=\"w-5 h-5\" />\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["React","useState","useRef","useEffect","useCallback","sendChatMessage","sendChatTyping","getSocket","uploadChatMedia","cn","motion","AnimatePresence","Paperclip","Image","ImageIcon","FileText","Video","Mic","X","Send","Smile","File","Square","Trash2","ALLOWED_FILE_TYPES","image","video","document","audio","MAX_FILE_SIZE","MAX_VIDEO_DURATION","UploadingMessage","id","type","preview","fileName","progress","ChatInputProps","conversationId","replyTo","content","senderName","onCancelReply","disabled","onUploadingMessagesChange","messages","FilePreview","file","ChatInput","message","setMessage","isTyping","setIsTyping","showEmoji","setShowEmoji","showAttachMenu","setShowAttachMenu","selectedFiles","setSelectedFiles","uploadProgress","setUploadProgress","isRecording","setIsRecording","recordingDuration","setRecordingDuration","audioBlob","setAudioBlob","Blob","uploadingMessages","setUploadingMessages","inputRef","HTMLTextAreaElement","fileInputRef","HTMLInputElement","typingTimeoutRef","NodeJS","Timeout","attachMenuRef","HTMLDivElement","mediaRecorderRef","MediaRecorder","audioChunksRef","recordingIntervalRef","current","style","height","Math","min","scrollHeight","handleClickOutside","event","MouseEvent","contains","target","Node","addEventListener","removeEventListener","handleTyping","clearTimeout","setTimeout","getFileType","mimes","Object","entries","includes","checkVideoDuration","Promise","resolve","createElement","preload","onloadedmetadata","URL","revokeObjectURL","src","duration","alert","name","onerror","createObjectURL","handleFileSelect","e","ChangeEvent","filterType","files","Array","from","validFiles","size","fileType","isValidDuration","push","prev","value","removeFile","index","newFiles","splice","openFilePicker","accept","click","startRecording","stream","navigator","mediaDevices","getUserMedia","mediaRecorder","mimeType","ondataavailable","data","onstop","getTracks","forEach","track","stop","start","setInterval","error","console","stopRecording","clearInterval","cancelRecording","formatDuration","seconds","mins","floor","secs","toString","padStart","handleSend","trimmedMessage","trim","hasFiles","length","hasAudio","filesToUpload","audioToUpload","textToSend","currentReplyTo","focus","uploadId","Date","now","audioFile","globalThis","result","map","m","filter","contentType","mediaUrl","fileSize","replyToId","uploadPromises","filePreview","undefined","all","handleKeyDown","KeyboardEvent","key","shiftKey","preventDefault","handleChange","handleEmojiClick","emoji","commonEmojis","opacity","slice","width","y","scale"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 5069, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatHeader.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { formatDistanceToNow } from 'date-fns';\nimport { getSocket } from '@/lib/socket';\nimport { cn } from '@/lib/utils';\n\ninterface ChatHeaderProps {\n  user: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n    lastActiveAt?: string | null;\n  };\n  onBack?: () => void;\n  onInfo?: () => void;\n}\n\nexport default function ChatHeader({ user, onBack, onInfo }: ChatHeaderProps) {\n  const [isOnline, setIsOnline] = useState(user.isOnline || false);\n  const [lastActive, setLastActive] = useState(user.lastActiveAt);\n\n  // Listen for online/offline status\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleOnline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(true);\n      }\n    };\n\n    const handleOffline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(false);\n        setLastActive(new Date().toISOString());\n      }\n    };\n\n    socket.on('user:online', handleOnline);\n    socket.on('user:offline', handleOffline);\n\n    return () => {\n      socket.off('user:online', handleOnline);\n      socket.off('user:offline', handleOffline);\n    };\n  }, [user.id]);\n\n  // Update initial state when user prop changes\n  useEffect(() => {\n    setIsOnline(user.isOnline || false);\n    setLastActive(user.lastActiveAt);\n  }, [user.isOnline, user.lastActiveAt]);\n\n  return (\n    <div className=\"flex items-center gap-3 p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\">\n      {/* Back button (mobile) */}\n      {onBack && (\n        <button\n          onClick={onBack}\n          className=\"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full md:hidden\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </button>\n      )}\n\n      {/* Avatar */}\n      <Link href={`/profile/${user.username}`} className=\"relative flex-shrink-0\">\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {user.profileImage ? (\n            <img\n              src={user.profileImage}\n              alt={user.name}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n          ) : (\n            user.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </Link>\n\n      {/* User info */}\n      <div className=\"flex-1 min-w-0\">\n        <Link \n          href={`/profile/${user.username}`}\n          className=\"font-semibold text-gray-900 dark:text-white hover:underline truncate block\"\n        >\n          {user.name}\n        </Link>\n        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n          {isOnline ? (\n            <span className=\"text-green-600 dark:text-green-400\">Online</span>\n          ) : lastActive ? (\n            `Last seen ${formatDistanceToNow(new Date(lastActive), { addSuffix: true })}`\n          ) : (\n            `@${user.username}`\n          )}\n        </p>\n      </div>\n\n      {/* Action buttons */}\n      <div className=\"flex items-center gap-2\">\n        {/* Voice call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Voice call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n          </svg>\n        </button>\n\n        {/* Video call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Video call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n          </svg>\n        </button>\n\n        {/* Info button */}\n        {onInfo && (\n          <button\n            onClick={onInfo}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            title=\"Chat info\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["c","_c","React","useState","useEffect","Link","formatDistanceToNow","getSocket","cn","ChatHeaderProps","user","id","name","username","profileImage","isOnline","lastActiveAt","onBack","onInfo","ChatHeader","t0","$","$i","Symbol","for","setIsOnline","lastActive","setLastActive","t1","t2","ChatHeader[useEffect()]","socket","handleOnline","data","userId","handleOffline","data_0","Date","toISOString","on","off","t3","t4","t5","t6","t7","charAt","toUpperCase","t8","t9","t10","t11","t12","t13","addSuffix","t14","t15","t16","t17","t18","t19","t20"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 5499, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/index.ts"],"sourcesContent":["export { default as ChatList } from './ChatList';\nexport { default as ChatMessages } from './ChatMessages';\nexport { default as ChatInput, type UploadingMessage } from './ChatInput';\nexport { default as ChatHeader } from './ChatHeader';\nexport { default as ChatSettingsPanel, WALLPAPER_OPTIONS } from './ChatSettingsPanel';\nexport { default as MessageMenu, MessageQuickActions } from './MessageMenu';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 5555, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/app/messages/%5BconversationId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, use } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { ChatList, ChatMessages, ChatInput, ChatHeader, type UploadingMessage } from '@/components/chat';\nimport ChatSettingsPanel from '@/components/chat/ChatSettingsPanel';\nimport { getConversation, Conversation } from '@/lib/api/chat';\nimport { initializeSocket } from '@/lib/socket';\n\ninterface ConversationPageProps {\n  params: Promise<{ conversationId: string }>;\n}\n\nexport default function ConversationPage({ params }: ConversationPageProps) {\n  const resolvedParams = use(params);\n  const router = useRouter();\n  const { user } = useAuth();\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [replyTo, setReplyTo] = useState<{ id: string; content: string; senderName: string } | null>(null);\n  const [showSettings, setShowSettings] = useState(false);\n  const [wallpaper, setWallpaper] = useState('default');\n  const [uploadingMessages, setUploadingMessages] = useState<UploadingMessage[]>([]);\n\n  // Load wallpaper preference from localStorage\n  useEffect(() => {\n    if (resolvedParams.conversationId) {\n      const savedWallpaper = localStorage.getItem(`chat_wallpaper_${resolvedParams.conversationId}`);\n      if (savedWallpaper) {\n        setWallpaper(savedWallpaper);\n      }\n    }\n  }, [resolvedParams.conversationId]);\n\n  // Save wallpaper preference\n  const handleWallpaperChange = (newWallpaper: string) => {\n    setWallpaper(newWallpaper);\n    localStorage.setItem(`chat_wallpaper_${resolvedParams.conversationId}`, newWallpaper);\n  };\n\n  // Initialize socket\n  useEffect(() => {\n    if (user?.id) {\n      initializeSocket();\n    }\n  }, [user?.id]);\n\n  // Fetch conversation\n  useEffect(() => {\n    const fetchConversation = async () => {\n      try {\n        // Only show loading spinner on initial load, not when switching conversations\n        if (!conversation) {\n          setLoading(true);\n        }\n        setError(null);\n        const conv = await getConversation(resolvedParams.conversationId);\n        setConversation(conv);\n        // Clear reply and uploading messages when switching conversations\n        setReplyTo(null);\n        setUploadingMessages([]);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load conversation');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (resolvedParams.conversationId && user?.id) {\n      fetchConversation();\n    }\n  }, [resolvedParams.conversationId, user?.id]);\n\n  const handleBack = () => {\n    router.push('/messages');\n  };\n\n  const handleSelectConversation = (conv: Conversation) => {\n    // Use replace with scroll:false to prevent full page reload\n    router.replace(`/messages/${conv.id}`, { scroll: false });\n  };\n\n  const otherUser = conversation?.otherParticipant;\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex h-screen\">\n            {/* Sidebar - Chat List (hidden on mobile when viewing a conversation) */}\n            <div className=\"hidden md:flex md:w-96 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex-col\">\n              {/* Header */}\n              <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n                <div className=\"flex items-center justify-between\">\n                  <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Messages</h1>\n                </div>\n              </div>\n\n              {/* Chat list - always visible */}\n              <ChatList \n                selectedConversationId={resolvedParams.conversationId}\n                onSelectConversation={handleSelectConversation}\n                currentUserId={user?.id}\n              />\n            </div>\n\n            {/* Main Chat Area */}\n            <div className=\"flex-1 flex flex-col bg-white dark:bg-gray-900 pb-24\">\n              {/* Loading state - only in chat area */}\n              {loading && (\n                <div className=\"flex-1 flex items-center justify-center\">\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n                </div>\n              )}\n\n              {/* Error state - only in chat area */}\n              {!loading && (error || !conversation) && (\n                <div className=\"flex-1 flex items-center justify-center\">\n                  <div className=\"text-center\">\n                    <p className=\"text-red-500 mb-4\">{error || 'Conversation not found'}</p>\n                    <button\n                      onClick={handleBack}\n                      className=\"text-blue-600 hover:underline\"\n                    >\n                      Go back to messages\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Chat content - only when loaded */}\n              {!loading && conversation && otherUser && (\n                <>\n                  {/* Chat Header */}\n                  <ChatHeader \n                    user={otherUser} \n                    onBack={handleBack}\n                    onInfo={() => setShowSettings(true)}\n                  />\n\n                  {/* Messages */}\n                  <ChatMessages\n                    key={resolvedParams.conversationId}\n                    conversationId={resolvedParams.conversationId}\n                    currentUserId={user!.id}\n                    otherUser={otherUser}\n                    wallpaper={wallpaper}\n                    onReply={(msg) => setReplyTo(msg)}\n                    uploadingMessages={uploadingMessages}\n                  />\n\n                  {/* Input */}\n                  <ChatInput\n                    key={`input-${resolvedParams.conversationId}`}\n                    conversationId={resolvedParams.conversationId}\n                    replyTo={replyTo || undefined}\n                    onCancelReply={() => setReplyTo(null)}\n                    onUploadingMessagesChange={setUploadingMessages}\n                  />\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Settings Panel */}\n        {conversation && otherUser && (\n          <ChatSettingsPanel\n            isOpen={showSettings}\n            onClose={() => setShowSettings(false)}\n            conversationId={resolvedParams.conversationId}\n            otherUser={otherUser}\n            currentWallpaper={wallpaper}\n            onWallpaperChange={handleWallpaperChange}\n          />\n        )}\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["useEffect","useState","use","useRouter","ProtectedRoute","useAuth","ChatList","ChatMessages","ChatInput","ChatHeader","UploadingMessage","ChatSettingsPanel","getConversation","Conversation","initializeSocket","ConversationPageProps","params","Promise","conversationId","ConversationPage","resolvedParams","router","user","conversation","setConversation","loading","setLoading","error","setError","replyTo","setReplyTo","id","content","senderName","showSettings","setShowSettings","wallpaper","setWallpaper","uploadingMessages","setUploadingMessages","savedWallpaper","localStorage","getItem","handleWallpaperChange","newWallpaper","setItem","fetchConversation","conv","err","message","handleBack","push","handleSelectConversation","replace","scroll","otherUser","otherParticipant","msg","undefined"],"mappings":"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","ignoreList":[]}}]
}