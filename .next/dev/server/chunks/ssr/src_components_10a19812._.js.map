{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-neutral-950\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600 dark:text-neutral-400\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAuB;IAC9D,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAO;IAC5C,MAAM,SAAS,IAAA,+IAAS;IAExB,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,WAAW,CAAC,iBAAiB;YAChC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAS;KAAO;IAErC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAA2C;;;;;;;;;;;;;;;;;IAIhE;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/reports/ReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Flag, AlertTriangle, Loader2, CheckCircle } from 'lucide-react';\nimport { reportAPI, ReportReason } from '@/lib/api/reports';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'post' | 'comment' | 'user' | 'group' | 'chat';\n  targetId: string;\n  targetName?: string;\n  conversationId?: string; // For chat reports\n  reportedUserId?: string; // For chat reports\n}\n\nexport default function ReportModal({\n  isOpen,\n  onClose,\n  type,\n  targetId,\n  targetName,\n  conversationId,\n  reportedUserId,\n}: ReportModalProps) {\n  const [reasons, setReasons] = useState<ReportReason[]>([]);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchingReasons, setFetchingReasons] = useState(true);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchReasons = async () => {\n      try {\n        const response = await reportAPI.getReasons();\n        setReasons(response.reasons);\n      } catch (err) {\n        console.error('Failed to fetch report reasons:', err);\n      } finally {\n        setFetchingReasons(false);\n      }\n    };\n\n    if (isOpen) {\n      fetchReasons();\n      // Reset state\n      setSelectedReason('');\n      setDescription('');\n      setSuccess(false);\n      setError('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = async () => {\n    if (!selectedReason) {\n      setError('Please select a reason');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = {\n        reason: selectedReason,\n        description: description.trim() || undefined,\n      };\n\n      switch (type) {\n        case 'post':\n          await reportAPI.reportPost(targetId, data);\n          break;\n        case 'comment':\n          await reportAPI.reportComment(targetId, data);\n          break;\n        case 'user':\n          await reportAPI.reportUser(targetId, data);\n          break;\n        case 'group':\n          await reportAPI.reportGroup(targetId, data);\n          break;\n        case 'chat':\n          if (!conversationId || !reportedUserId) {\n            throw new Error('Missing conversation or user info');\n          }\n          await reportAPI.reportChatUser(conversationId, {\n            ...data,\n            reportedUserId,\n          });\n          break;\n      }\n\n      setSuccess(true);\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTitle = () => {\n    switch (type) {\n      case 'post':\n        return 'Report Post';\n      case 'comment':\n        return 'Report Comment';\n      case 'user':\n        return `Report ${targetName || 'User'}`;\n      case 'group':\n        return 'Report Group';\n      case 'chat':\n        return `Report ${targetName || 'User'}`;\n      default:\n        return 'Report';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        {/* Backdrop */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"relative w-full max-w-md mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-full\">\n                <Flag className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                {getTitle()}\n              </h2>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {success ? (\n              <div className=\"text-center py-8\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\n                  <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Report Submitted\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Thank you for helping keep our community safe. We'll review your report shortly.\n                </p>\n              </div>\n            ) : fetchingReasons ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Why are you reporting this {type}? Your report will be reviewed by our team.\n                </p>\n\n                {/* Reason Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Select a reason <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {reasons.map((reason) => (\n                      <label\n                        key={reason.value}\n                        className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                          selectedReason === reason.value\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"reason\"\n                          value={reason.value}\n                          checked={selectedReason === reason.value}\n                          onChange={(e) => setSelectedReason(e.target.value)}\n                          className=\"mt-1 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <div>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {reason.label}\n                          </span>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                            {reason.description}\n                          </p>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Additional Details */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional details (optional)\n                  </label>\n                  <textarea\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Provide any additional context that might help us review this report...\"\n                    rows={3}\n                    maxLength={500}\n                    className=\"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                  />\n                  <p className=\"text-xs text-gray-400 text-right\">\n                    {description.length}/500\n                  </p>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm\">\n                    <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                    {error}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!success && (\n            <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading || !selectedReason}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>\n                    <Flag className=\"w-4 h-4\" />\n                    Submit Report\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/notifications/Notifications.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport {\n  Bell,\n  Heart,\n  MessageCircle,\n  AtSign,\n  UserPlus,\n  Loader2,\n  CheckCheck,\n  PartyPopper,\n  HandHeart,\n  Lightbulb,\n  HelpCircle,\n  ThumbsUp,\n  Users,\n  Settings,\n} from 'lucide-react';\nimport Link from 'next/link';\nimport { formatDistanceToNow } from 'date-fns';\nimport {\n  getNotifications,\n  getUnreadNotificationCount,\n  markNotificationsAsRead,\n  markAllNotificationsAsRead,\n  type Notification,\n  type NotificationType,\n} from '@/lib/api/notifications';\nimport { initializeSocket } from '@/lib/socket';\n\n// Get icon for notification type\nfunction getNotificationIcon(type: NotificationType, reactionType?: string | null) {\n  switch (type) {\n    case 'POST_REACTION':\n      // Show specific reaction icon\n      switch (reactionType) {\n        case 'CELEBRATE':\n          return <PartyPopper className=\"w-5 h-5 text-yellow-500\" />;\n        case 'SUPPORT':\n          return <HandHeart className=\"w-5 h-5 text-green-500\" />;\n        case 'INSIGHTFUL':\n          return <Lightbulb className=\"w-5 h-5 text-amber-500\" />;\n        case 'CURIOUS':\n          return <HelpCircle className=\"w-5 h-5 text-purple-500\" />;\n        default:\n          return <ThumbsUp className=\"w-5 h-5 text-blue-500\" />;\n      }\n    case 'POST_LIKE':\n      return <ThumbsUp className=\"w-5 h-5 text-blue-500\" />;\n    case 'COMMENT':\n      return <MessageCircle className=\"w-5 h-5 text-green-500\" />;\n    case 'COMMENT_LIKE':\n      return <Heart className=\"w-5 h-5 text-red-500\" />;\n    case 'MENTION':\n      return <AtSign className=\"w-5 h-5 text-purple-500\" />;\n    case 'CONNECTION_REQUEST':\n    case 'CONNECTION_ACCEPTED':\n      return <UserPlus className=\"w-5 h-5 text-blue-500\" />;\n    case 'GROUP_INVITE':\n    case 'GROUP_JOIN_REQUEST':\n    case 'GROUP_JOIN_APPROVED':\n      return <Users className=\"w-5 h-5 text-indigo-500\" />;\n    default:\n      return <Bell className=\"w-5 h-5 text-gray-500\" />;\n  }\n}\n\n// Get notification message\nfunction getNotificationMessage(notification: Notification): string {\n  const actorName = notification.actor?.name || 'Someone';\n  \n  switch (notification.type) {\n    case 'POST_REACTION':\n      const reactionLabels: Record<string, string> = {\n        LIKE: 'liked',\n        CELEBRATE: 'celebrated',\n        SUPPORT: 'supported',\n        INSIGHTFUL: 'found insightful',\n        CURIOUS: 'is curious about',\n      };\n      const action = reactionLabels[notification.reactionType || 'LIKE'] || 'reacted to';\n      return `${actorName} ${action} your post`;\n    case 'POST_LIKE':\n      return `${actorName} liked your post`;\n    case 'COMMENT':\n      return `${actorName} commented on your post`;\n    case 'COMMENT_LIKE':\n      return `${actorName} liked your comment`;\n    case 'MENTION':\n      return `${actorName} mentioned you`;\n    case 'CONNECTION_REQUEST':\n      return `${actorName} sent you a connection request`;\n    case 'CONNECTION_ACCEPTED':\n      return `${actorName} accepted your connection request`;\n    case 'POLL_VOTE':\n      return `${actorName} voted on your poll`;\n    case 'POST_SHARE':\n      return `${actorName} shared your post`;\n    case 'GROUP_INVITE':\n      return `${actorName} invited you to join ${notification.content || 'a group'}`;\n    case 'GROUP_JOIN_REQUEST':\n      return `${actorName} requested to join your group`;\n    case 'GROUP_JOIN_APPROVED':\n      return `Your request to join ${notification.content || 'the group'} was approved`;\n    default:\n      return `${actorName} interacted with your content`;\n  }\n}\n\ninterface NotificationItemProps {\n  notification: Notification;\n  onMarkRead: (id: string) => void;\n}\n\nfunction NotificationItem({ notification, onMarkRead }: NotificationItemProps) {\n  const router = useRouter();\n  \n  const handleClick = () => {\n    // Mark as read\n    if (!notification.isRead) {\n      onMarkRead(notification.id);\n    }\n    \n    // Navigate based on notification type\n    if (notification.type === 'GROUP_INVITE' || notification.type === 'GROUP_JOIN_APPROVED') {\n      router.push('/groups?tab=invites');\n    } else if (notification.reelId) {\n      router.push(`/reels/${notification.reelId}`);\n    } else if (notification.postId) {\n      if (notification.commentId) {\n        router.push(`/post/${notification.postId}?comment=${notification.commentId}`);\n      } else {\n        router.push(`/post/${notification.postId}`);\n      }\n    } else if (notification.type === 'CONNECTION_REQUEST' || notification.type === 'CONNECTION_ACCEPTED') {\n      if (notification.actor) {\n        router.push(`/profile/${notification.actor.username}`);\n      }\n    }\n  };\n  \n  return (\n    <motion.button\n      initial={{ opacity: 0, x: -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      onClick={handleClick}\n      className={`w-full flex items-start gap-3 p-4 text-left transition-colors ${\n        notification.isRead \n          ? 'bg-transparent hover:bg-gray-50 dark:hover:bg-neutral-800/50' \n          : 'bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30'\n      }`}\n    >\n      {/* Avatar */}\n      <div className=\"relative flex-shrink-0\">\n        <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n          {notification.actor?.profileImage ? (\n            <Image\n              src={notification.actor.profileImage}\n              alt={notification.actor.name}\n              width={48}\n              height={48}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center font-bold text-gray-500\">\n              {notification.actor?.name?.charAt(0).toUpperCase() || '?'}\n            </div>\n          )}\n        </div>\n        <div className=\"absolute -bottom-1 -right-1 p-1 rounded-full bg-white dark:bg-neutral-900\">\n          {getNotificationIcon(notification.type, notification.reactionType)}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm text-gray-900 dark:text-white\">\n          {getNotificationMessage(notification)}\n        </p>\n        {notification.content && (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400 line-clamp-2 mt-1\">\n            &quot;{notification.content}&quot;\n          </p>\n        )}\n        {notification.postPreview && !notification.content && (\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400 line-clamp-1 mt-1\">\n            {notification.postPreview}\n          </p>\n        )}\n        <p className=\"text-xs text-gray-400 dark:text-neutral-500 mt-1\">\n          {formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true })}\n        </p>\n      </div>\n      \n      {/* Unread indicator */}\n      {!notification.isRead && (\n        <div className=\"w-2 h-2 rounded-full bg-blue-500 flex-shrink-0 mt-2\" />\n      )}\n    </motion.button>\n  );\n}\n\ninterface NotificationsProps {\n  isOpen?: boolean;\n  onClose?: () => void;\n  isDropdown?: boolean;\n}\n\nexport function Notifications({ isOpen = true, onClose, isDropdown = false }: NotificationsProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [unreadCount, setUnreadCount] = useState(0);\n  \n  // Fetch notifications\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchNotifications = async () => {\n      setLoading(true);\n      try {\n        const [notifResponse, countRes] = await Promise.all([\n          getNotifications(),\n          getUnreadNotificationCount(),\n        ]);\n        setNotifications((notifResponse as { notifications: Notification[] }).notifications);\n        setUnreadCount((countRes as unknown as { count: number }).count);\n      } catch (error) {\n        console.error('Error fetching notifications:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchNotifications();\n  }, [isOpen]);\n\n  // Setup real-time notifications\n  useEffect(() => {\n    const refetch = () => {\n      setUnreadCount(prev => prev + 1);\n      getNotifications().then(res => setNotifications(res.notifications)).catch(console.error);\n    };\n    const socket = initializeSocket({\n      onNotificationNew: refetch,\n      onNotificationMention: refetch,\n      onNotificationComment: refetch,\n      onNotificationLike: refetch,\n      onNotificationReaction: refetch,\n      onNotificationCommentLike: refetch,\n    });\n    \n    return () => {\n      // Cleanup listeners if needed\n    };\n  }, []);\n\n  // Mark notification as read\n  const handleMarkRead = async (id: string) => {\n    try {\n      await markNotificationsAsRead([id]);\n      setNotifications(prev => \n        prev.map(n => n.id === id ? { ...n, isRead: true } : n)\n      );\n      setUnreadCount(prev => Math.max(0, prev - 1));\n    } catch (error) {\n      console.error('Error marking notification as read:', error);\n    }\n  };\n\n  // Mark all as read\n  const handleMarkAllRead = async () => {\n    try {\n      await markAllNotificationsAsRead();\n      setNotifications(prev => prev.map(n => ({ ...n, isRead: true })));\n      setUnreadCount(0);\n    } catch (error) {\n      console.error('Error marking all as read:', error);\n    }\n  };\n\n  const content = (\n    <>\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-2\">\n          <Bell className=\"w-5 h-5 text-gray-600 dark:text-neutral-400\" />\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Notifications</h2>\n          {unreadCount > 0 && (\n            <span className=\"px-2 py-0.5 text-xs font-medium rounded-full bg-blue-500 text-white\">\n              {unreadCount}\n            </span>\n          )}\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          {unreadCount > 0 && (\n            <button\n              onClick={handleMarkAllRead}\n              className=\"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors\"\n            >\n              <CheckCheck className=\"w-4 h-4\" />\n              Mark all read\n            </button>\n          )}\n          {!isDropdown && (\n            <Link\n              href=\"/notifications/settings\"\n              className=\"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <Settings className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n            </Link>\n          )}\n        </div>\n      </div>\n      \n      {/* Notifications List */}\n      <div className={`overflow-y-auto ${isDropdown ? 'max-h-96' : 'flex-1'}`}>\n        {loading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n          </div>\n        ) : notifications.length === 0 ? (\n          <div className=\"text-center py-12 px-4\">\n            <Bell className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n            <p className=\"text-gray-500 dark:text-neutral-400\">No notifications yet</p>\n            <p className=\"text-sm text-gray-400 dark:text-neutral-500\">\n              When someone interacts with your content, it will appear here\n            </p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n            <AnimatePresence>\n              {notifications.map((notification) => (\n                <NotificationItem\n                  key={notification.id}\n                  notification={notification}\n                  onMarkRead={handleMarkRead}\n                />\n              ))}\n            </AnimatePresence>\n          </div>\n        )}\n      </div>\n    </>\n  );\n\n  if (isDropdown) {\n    return (\n      <div className=\"w-80 bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 shadow-xl overflow-hidden\">\n        {content}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950\">\n      <div className=\"max-w-2xl mx-auto bg-white dark:bg-neutral-900 min-h-screen border-x border-gray-200 dark:border-neutral-800\">\n        {content}\n      </div>\n    </div>\n  );\n}\n\n// Notification Bell with Badge for Dock/Header\nexport function NotificationBell() {\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showDropdown, setShowDropdown] = useState(false);\n  \n  // Fetch unread count\n  useEffect(() => {\n    const fetchCount = async () => {\n      try {\n        const res = await getUnreadNotificationCount();\n        setUnreadCount((res as unknown as { count: number }).count);\n      } catch (error) {\n        console.error('Error fetching notification count:', error);\n      }\n    };\n    \n    fetchCount();\n    \n    // Poll for updates every 30 seconds\n    const interval = setInterval(fetchCount, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Real-time updates\n  useEffect(() => {\n    initializeSocket({\n      onNotificationMention: () => setUnreadCount(prev => prev + 1),\n      onNotificationComment: () => setUnreadCount(prev => prev + 1),\n      onNotificationLike: () => setUnreadCount(prev => prev + 1),\n      onNotificationReaction: () => setUnreadCount(prev => prev + 1),\n      onNotificationCommentLike: () => setUnreadCount(prev => prev + 1),\n    });\n  }, []);\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setShowDropdown(!showDropdown)}\n        className=\"relative p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <Bell className=\"w-6 h-6 text-gray-600 dark:text-neutral-400\" />\n        {unreadCount > 0 && (\n          <span className=\"absolute -top-1 -right-1 w-5 h-5 flex items-center justify-center text-xs font-bold text-white bg-red-500 rounded-full\">\n            {unreadCount > 9 ? '9+' : unreadCount}\n          </span>\n        )}\n      </button>\n      \n      {showDropdown && (\n        <>\n          <div\n            className=\"fixed inset-0 z-40\"\n            onClick={() => setShowDropdown(false)}\n          />\n          <div className=\"absolute right-0 top-full mt-2 z-50\">\n            <Notifications isDropdown onClose={() => setShowDropdown(false)} />\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default Notifications;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1245, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/notifications/NotificationPrompt.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Bell, X, BellRing } from 'lucide-react';\nimport { usePushNotifications } from '@/hooks/usePushNotifications';\n\ninterface NotificationPromptProps {\n  userId: string | undefined;\n}\n\n/**\n * NotificationPrompt â€” asks user to enable push notifications\n * Shows after 3rd visit if not already granted/dismissed.\n * Also renders foreground notification toasts.\n */\nexport function NotificationPrompt({ userId }: NotificationPromptProps) {\n  const {\n    isSupported,\n    isPermissionGranted,\n    isTokenRegistered,\n    isLoading,\n    foregroundNotification,\n    requestPermission,\n    dismissNotification,\n  } = usePushNotifications(userId);\n\n  const [showPrompt, setShowPrompt] = useState(false);\n\n  useEffect(() => {\n    if (!isSupported || isPermissionGranted || !userId) return;\n\n    // Show prompt after 3rd visit or 10s delay\n    const dismissed = localStorage.getItem('push_prompt_dismissed');\n    if (dismissed) return;\n\n    const visits = parseInt(localStorage.getItem('visit_count') || '0', 10) + 1;\n    localStorage.setItem('visit_count', visits.toString());\n\n    if (visits >= 3) {\n      const timer = setTimeout(() => setShowPrompt(true), 10000);\n      return () => clearTimeout(timer);\n    }\n  }, [isSupported, isPermissionGranted, userId]);\n\n  const handleEnable = async () => {\n    await requestPermission();\n    setShowPrompt(false);\n  };\n\n  const handleDismiss = () => {\n    setShowPrompt(false);\n    localStorage.setItem('push_prompt_dismissed', new Date().toISOString());\n  };\n\n  return (\n    <>\n      {/* Permission Prompt */}\n      <AnimatePresence>\n        {showPrompt && (\n          <motion.div\n            initial={{ opacity: 0, y: 50, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 50, scale: 0.9 }}\n            className=\"fixed bottom-24 left-4 right-4 md:left-auto md:right-6 md:w-96 z-50 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl border border-gray-200 dark:border-neutral-700 overflow-hidden\"\n          >\n            <div className=\"p-5\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center flex-shrink-0\">\n                  <BellRing className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-1\">\n                    Stay in the loop ðŸ””\n                  </h3>\n                  <p className=\"text-xs text-gray-500 dark:text-neutral-400 leading-relaxed\">\n                    Get notified when someone views your profile, accepts your connection, or when your streak is at risk.\n                  </p>\n                </div>\n                <button\n                  onClick={handleDismiss}\n                  className=\"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n                >\n                  <X className=\"w-4 h-4 text-gray-400\" />\n                </button>\n              </div>\n\n              <div className=\"flex gap-2 mt-4\">\n                <button\n                  onClick={handleDismiss}\n                  className=\"flex-1 py-2 px-4 rounded-lg text-sm font-medium text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n                >\n                  Not now\n                </button>\n                <button\n                  onClick={handleEnable}\n                  disabled={isLoading}\n                  className=\"flex-1 py-2 px-4 rounded-lg text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-1.5\"\n                >\n                  <Bell className=\"w-3.5 h-3.5\" />\n                  {isLoading ? 'Enabling...' : 'Enable'}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Foreground Notification Toast */}\n      <AnimatePresence>\n        {foregroundNotification && (\n          <motion.div\n            initial={{ opacity: 0, y: -50, x: 50 }}\n            animate={{ opacity: 1, y: 0, x: 0 }}\n            exit={{ opacity: 0, y: -50 }}\n            className=\"fixed top-4 right-4 z-[100] w-80 bg-white dark:bg-neutral-900 rounded-xl shadow-2xl border border-gray-200 dark:border-neutral-700 overflow-hidden cursor-pointer\"\n            onClick={dismissNotification}\n          >\n            <div className=\"p-4\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"w-8 h-8 rounded-lg bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center flex-shrink-0\">\n                  <Bell className=\"w-4 h-4 text-blue-500\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-semibold text-gray-900 dark:text-white truncate\">\n                    {foregroundNotification.notification?.title || 'Vormex'}\n                  </p>\n                  <p className=\"text-xs text-gray-500 dark:text-neutral-400 line-clamp-2 mt-0.5\">\n                    {foregroundNotification.notification?.body || ''}\n                  </p>\n                </div>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    dismissNotification();\n                  }}\n                  className=\"p-0.5 rounded hover:bg-gray-100 dark:hover:bg-neutral-800\"\n                >\n                  <X className=\"w-3.5 h-3.5 text-gray-400\" />\n                </button>\n              </div>\n            </div>\n            {/* Auto-dismiss progress bar */}\n            <motion.div\n              initial={{ width: '100%' }}\n              animate={{ width: '0%' }}\n              transition={{ duration: 5, ease: 'linear' }}\n              className=\"h-0.5 bg-blue-500\"\n            />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1556, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/notifications/index.ts"],"sourcesContent":["export { Notifications, NotificationBell } from './Notifications';\nexport { NotificationPrompt } from './NotificationPrompt';\n"],"names":[],"mappings":";AAAA;AACA"}}]
}