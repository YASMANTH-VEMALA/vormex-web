module.exports=[65708,a=>{"use strict";let b,c,d;var e,f,g,h,i,j,k=a.i(72131);let l=function(a){let b=[],c=0;for(let d=0;d<a.length;d++){let e=a.charCodeAt(d);e<128?b[c++]=e:(e<2048?b[c++]=e>>6|192:((64512&e)==55296&&d+1<a.length&&(64512&a.charCodeAt(d+1))==56320?(e=65536+((1023&e)<<10)+(1023&a.charCodeAt(++d)),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=63&e|128)}return b},m=function(a){let b=[],c=0,d=0;for(;c<a.length;){let e=a[c++];if(e<128)b[d++]=String.fromCharCode(e);else if(e>191&&e<224){let f=a[c++];b[d++]=String.fromCharCode((31&e)<<6|63&f)}else if(e>239&&e<365){let f=((7&e)<<18|(63&a[c++])<<12|(63&a[c++])<<6|63&a[c++])-65536;b[d++]=String.fromCharCode(55296+(f>>10)),b[d++]=String.fromCharCode(56320+(1023&f))}else{let f=a[c++],g=a[c++];b[d++]=String.fromCharCode((15&e)<<12|(63&f)<<6|63&g)}}return b.join("")},n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(a,b){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();let c=b?this.byteToCharMapWebSafe_:this.byteToCharMap_,d=[];for(let b=0;b<a.length;b+=3){let e=a[b],f=b+1<a.length,g=f?a[b+1]:0,h=b+2<a.length,i=h?a[b+2]:0,j=e>>2,k=(3&e)<<4|g>>4,l=(15&g)<<2|i>>6,m=63&i;!h&&(m=64,f||(l=64)),d.push(c[j],c[k],c[l],c[m])}return d.join("")},encodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?btoa(a):this.encodeByteArray(l(a),b)},decodeString(a,b){return this.HAS_NATIVE_SUPPORT&&!b?atob(a):m(this.decodeStringToByteArray(a,b))},decodeStringToByteArray(a,b){this.init_();let c=b?this.charToByteMapWebSafe_:this.charToByteMap_,d=[];for(let b=0;b<a.length;){let e=c[a.charAt(b++)],f=b<a.length?c[a.charAt(b)]:0,g=++b<a.length?c[a.charAt(b)]:64,h=++b<a.length?c[a.charAt(b)]:64;if(++b,null==e||null==f||null==g||null==h)throw new o;let i=e<<2|f>>4;if(d.push(i),64!==g){let a=f<<4&240|g>>2;if(d.push(a),64!==h){let a=g<<6&192|h;d.push(a)}}}return d},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let p=function(a){let b=l(a);return n.encodeByteArray(b,!0)},q=function(a){return p(a).replace(/\./g,"")};class r extends Error{constructor(a,b,c){super(b),this.code=a,this.customData=c,this.name="FirebaseError",Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,s.prototype.create)}}class s{constructor(a,b,c){this.service=a,this.serviceName=b,this.errors=c}create(a,...b){var c,d;let e=b[0]||{},f=`${this.service}/${a}`,g=this.errors[a],h=g?(c=g,d=e,c.replace(t,(a,b)=>{let c=d[b];return null!=c?String(c):`<${b}?>`})):"Error",i=`${this.serviceName}: ${h} (${f}).`;return new r(f,i,e)}}let t=/\{\$([^}]+)}/g;class u{constructor(a,b,c){this.name=a,this.instanceFactory=b,this.type=c,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(a){return this.instantiationMode=a,this}setMultipleInstances(a){return this.multipleInstances=a,this}setServiceProps(a){return this.serviceProps=a,this}setInstanceCreatedCallback(a){return this.onInstanceCreated=a,this}}let v=[];(e=h||(h={}))[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT";let w={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},x=h.INFO,y={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},z=(a,b,...c)=>{if(b<a.logLevel)return;let d=new Date().toISOString(),e=y[b];if(e)console[e](`[${d}]  ${a.name}:`,...c);else throw Error(`Attempted to log a message with an invalid logType (value: ${b})`)},A=new WeakMap,B=new WeakMap,C=new WeakMap,D=new WeakMap,E=new WeakMap,F={get(a,b,c){if(a instanceof IDBTransaction){if("done"===b)return B.get(a);if("objectStoreNames"===b)return a.objectStoreNames||C.get(a);if("store"===b)return c.objectStoreNames[1]?void 0:c.objectStore(c.objectStoreNames[0])}return G(a[b])},set:(a,b,c)=>(a[b]=c,!0),has:(a,b)=>a instanceof IDBTransaction&&("done"===b||"store"===b)||b in a};function G(a){if(a instanceof IDBRequest){let b;return(b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("success",e),a.removeEventListener("error",f)},e=()=>{b(G(a.result)),d()},f=()=>{c(a.error),d()};a.addEventListener("success",e),a.addEventListener("error",f)})).then(b=>{b instanceof IDBCursor&&A.set(b,a)}).catch(()=>{}),E.set(b,a),b}if(D.has(a))return D.get(a);let d=function(a){if("function"==typeof a)return a!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(a)?function(...b){return a.apply(H(this),b),G(A.get(this))}:function(...b){return G(a.apply(H(this),b))}:function(b,...c){let d=a.call(H(this),b,...c);return C.set(d,b.sort?b.sort():[b]),G(d)};return a instanceof IDBTransaction&&function(a){if(B.has(a))return;let b=new Promise((b,c)=>{let d=()=>{a.removeEventListener("complete",e),a.removeEventListener("error",f),a.removeEventListener("abort",f)},e=()=>{b(),d()},f=()=>{c(a.error||new DOMException("AbortError","AbortError")),d()};a.addEventListener("complete",e),a.addEventListener("error",f),a.addEventListener("abort",f)});B.set(a,b)}(a),(b||(b=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(b=>a instanceof b)?new Proxy(a,F):a}(a);return d!==a&&(D.set(a,d),E.set(d,a)),d}let H=a=>E.get(a);function I(a,b,{blocked:c,upgrade:d,blocking:e,terminated:f}={}){let g=indexedDB.open(a,b),h=G(g);return d&&g.addEventListener("upgradeneeded",a=>{d(G(g.result),a.oldVersion,a.newVersion,G(g.transaction),a)}),c&&g.addEventListener("blocked",a=>c(a.oldVersion,a.newVersion,a)),h.then(a=>{f&&a.addEventListener("close",()=>f()),e&&a.addEventListener("versionchange",a=>e(a.oldVersion,a.newVersion,a))}).catch(()=>{}),h}function J(a,{blocked:b}={}){let c=indexedDB.deleteDatabase(a);return b&&c.addEventListener("blocked",a=>b(a.oldVersion,a)),G(c).then(()=>void 0)}let K=["get","getKey","getAll","getAllKeys","count"],L=["put","add","delete","clear"],M=new Map;function N(a,b){if(!(a instanceof IDBDatabase&&!(b in a)&&"string"==typeof b))return;if(M.get(b))return M.get(b);let c=b.replace(/FromIndex$/,""),d=b!==c,e=L.includes(c);if(!(c in(d?IDBIndex:IDBObjectStore).prototype)||!(e||K.includes(c)))return;let f=async function(a,...b){let f=this.transaction(a,e?"readwrite":"readonly"),g=f.store;return d&&(g=g.index(b.shift())),(await Promise.all([g[c](...b),e&&f.done]))[0]};return M.set(b,f),f}F={...d=F,get:(a,b,c)=>N(a,b)||d.get(a,b,c),has:(a,b)=>!!N(a,b)||d.has(a,b)};class O{constructor(a){this.container=a}getPlatformInfoString(){return this.container.getProviders().map(a=>{let b;if(b=a.getComponent(),b?.type!=="VERSION")return null;{let b=a.getImmediate();return`${b.library}/${b.version}`}}).filter(a=>a).join(" ")}}let P="@firebase/app",Q="0.14.8",R=new class{constructor(a){this.name=a,this._logLevel=x,this._logHandler=z,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(a){if(!(a in h))throw TypeError(`Invalid value "${a}" assigned to \`logLevel\``);this._logLevel=a}setLogLevel(a){this._logLevel="string"==typeof a?w[a]:a}get logHandler(){return this._logHandler}set logHandler(a){if("function"!=typeof a)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=a}get userLogHandler(){return this._userLogHandler}set userLogHandler(a){this._userLogHandler=a}debug(...a){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...a),this._logHandler(this,h.DEBUG,...a)}log(...a){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...a),this._logHandler(this,h.VERBOSE,...a)}info(...a){this._userLogHandler&&this._userLogHandler(this,h.INFO,...a),this._logHandler(this,h.INFO,...a)}warn(...a){this._userLogHandler&&this._userLogHandler(this,h.WARN,...a),this._logHandler(this,h.WARN,...a)}error(...a){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...a),this._logHandler(this,h.ERROR,...a)}}("@firebase/app"),S={[P]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},T=new Map,U=new Map,V=new Map;function W(a,b){try{a.container.addComponent(b)}catch(c){R.debug(`Component ${b.name} failed to register with FirebaseApp ${a.name}`,c)}}function X(a){let b=a.name;if(V.has(b))return R.debug(`There were multiple attempts to register component ${b}.`),!1;for(let c of(V.set(b,a),T.values()))W(c,a);for(let b of U.values())W(b,a);return!0}function Y(a,b){let c=a.container.getProvider("heartbeat").getImmediate({optional:!0});return c&&c.triggerHeartbeat(),a.container.getProvider(b)}let Z=new s("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});function $(a,b,c){let d=S[a]??a;c&&(d+=`-${c}`);let e=d.match(/\s|\//),f=b.match(/\s|\//);if(e||f){let a=[`Unable to register library "${d}" with version "${b}":`];e&&a.push(`library name "${d}" contains illegal characters (whitespace or "/")`),e&&f&&a.push("and"),f&&a.push(`version name "${b}" contains illegal characters (whitespace or "/")`),R.warn(a.join(" "));return}X(new u(`${d}-version`,()=>({library:d,version:b}),"VERSION"))}let _="firebase-heartbeat-store",aa=null;function ab(){return aa||(aa=I("firebase-heartbeat-database",1,{upgrade:(a,b)=>{if(0===b)try{a.createObjectStore(_)}catch(a){console.warn(a)}}}).catch(a=>{throw Z.create("idb-open",{originalErrorMessage:a.message})})),aa}async function ac(a){try{let b=(await ab()).transaction(_),c=await b.objectStore(_).get(ae(a));return await b.done,c}catch(a){if(a instanceof r)R.warn(a.message);else{let b=Z.create("idb-get",{originalErrorMessage:a?.message});R.warn(b.message)}}}async function ad(a,b){try{let c=(await ab()).transaction(_,"readwrite"),d=c.objectStore(_);await d.put(b,ae(a)),await c.done}catch(a){if(a instanceof r)R.warn(a.message);else{let b=Z.create("idb-set",{originalErrorMessage:a?.message});R.warn(b.message)}}}function ae(a){return`${a.name}!${a.options.appId}`}class af{constructor(a){this.container=a,this._heartbeatsCache=null;const b=this.container.getProvider("app").getImmediate();this._storage=new ah(b),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{let a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),b=ag();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===b||this._heartbeatsCache.heartbeats.some(a=>a.date===b))return;if(this._heartbeatsCache.heartbeats.push({date:b,agent:a}),this._heartbeatsCache.heartbeats.length>30){let a=function(a){if(0===a.length)return -1;let b=0,c=a[0].date;for(let d=1;d<a.length;d++)a[d].date<c&&(c=a[d].date,b=d);return b}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){R.warn(a)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let a=ag(),{heartbeatsToSend:b,unsentEntries:c}=function(a,b=1024){let c=[],d=a.slice();for(let e of a){let a=c.find(a=>a.agent===e.agent);if(a){if(a.dates.push(e.date),ai(c)>b){a.dates.pop();break}}else if(c.push({agent:e.agent,dates:[e.date]}),ai(c)>b){c.pop();break}d=d.slice(1)}return{heartbeatsToSend:c,unsentEntries:d}}(this._heartbeatsCache.heartbeats),d=q(JSON.stringify({version:2,heartbeats:b}));return this._heartbeatsCache.lastSentHeartbeatDate=a,c.length>0?(this._heartbeatsCache.heartbeats=c,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(a){return R.warn(a),""}}}function ag(){return new Date().toISOString().substring(0,10)}class ah{constructor(a){this.app=a,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(a){return!1}}()&&new Promise((a,b)=>{try{let c=!0,d="validate-browser-context-for-indexeddb-analytics-module",e=self.indexedDB.open(d);e.onsuccess=()=>{e.result.close(),c||self.indexedDB.deleteDatabase(d),a(!0)},e.onupgradeneeded=()=>{c=!1},e.onerror=()=>{b(e.error?.message||"")}}catch(a){b(a)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let a=await ac(this.app);return a?.heartbeats?a:{heartbeats:[]}}}async overwrite(a){if(await this._canUseIndexedDBPromise){let b=await this.read();return ad(this.app,{lastSentHeartbeatDate:a.lastSentHeartbeatDate??b.lastSentHeartbeatDate,heartbeats:a.heartbeats})}}async add(a){if(await this._canUseIndexedDBPromise){let b=await this.read();return ad(this.app,{lastSentHeartbeatDate:a.lastSentHeartbeatDate??b.lastSentHeartbeatDate,heartbeats:[...b.heartbeats,...a.heartbeats]})}}}function ai(a){return q(JSON.stringify({version:2,heartbeats:a})).length}X(new u("platform-logger",a=>new O(a),"PRIVATE")),X(new u("heartbeat",a=>new af(a),"PRIVATE")),$(P,Q,""),$(P,Q,"esm2020"),$("fire-js",""),$("firebase","12.9.0","app");let aj="@firebase/installations",ak="0.6.19",al=`w:${ak}`,am="FIS_v2",an=new s("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ao(a){return a instanceof r&&a.code.includes("request-failed")}function ap({projectId:a}){return`https://firebaseinstallations.googleapis.com/v1/projects/${a}/installations`}function aq(a){return{token:a.token,requestStatus:2,expiresIn:Number(a.expiresIn.replace("s","000")),creationTime:Date.now()}}async function ar(a,b){let c=(await b.json()).error;return an.create("request-failed",{requestName:a,serverCode:c.code,serverMessage:c.message,serverStatus:c.status})}function as({apiKey:a}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a})}async function at(a){let b=await a();return b.status>=500&&b.status<600?a():b}async function au({appConfig:a,heartbeatServiceProvider:b},{fid:c}){let d=ap(a),e=as(a),f=b.getImmediate({optional:!0});if(f){let a=await f.getHeartbeatsHeader();a&&e.append("x-firebase-client",a)}let g={method:"POST",headers:e,body:JSON.stringify({fid:c,authVersion:am,appId:a.appId,sdkVersion:al})},h=await at(()=>fetch(d,g));if(h.ok){let a=await h.json();return{fid:a.fid||c,registrationStatus:2,refreshToken:a.refreshToken,authToken:aq(a.authToken)}}throw await ar("Create Installation",h)}function av(a){return new Promise(b=>{setTimeout(b,a)})}let aw=/^[cdef][\w-]{21}$/;function ax(a){return`${a.appName}!${a.appId}`}let ay=new Map;function az(a,b){var c,d;let e,f=ax(a);aA(f,b),c=f,d=b,(e=(!aB&&"BroadcastChannel"in self&&((aB=new BroadcastChannel("[Firebase] FID Change")).onmessage=a=>{aA(a.data.key,a.data.fid)}),aB))&&e.postMessage({key:c,fid:d}),0===ay.size&&aB&&(aB.close(),aB=null)}function aA(a,b){let c=ay.get(a);if(c)for(let a of c)a(b)}let aB=null,aC="firebase-installations-store",aD=null;function aE(){return aD||(aD=I("firebase-installations-database",1,{upgrade:(a,b)=>{0===b&&a.createObjectStore(aC)}})),aD}async function aF(a,b){let c=ax(a),d=(await aE()).transaction(aC,"readwrite"),e=d.objectStore(aC),f=await e.get(c);return await e.put(b,c),await d.done,f&&f.fid===b.fid||az(a,b.fid),b}async function aG(a){let b=ax(a),c=(await aE()).transaction(aC,"readwrite");await c.objectStore(aC).delete(b),await c.done}async function aH(a,b){let c=ax(a),d=(await aE()).transaction(aC,"readwrite"),e=d.objectStore(aC),f=await e.get(c),g=b(f);return void 0===g?await e.delete(c):await e.put(g,c),await d.done,g&&(!f||f.fid!==g.fid)&&az(a,g.fid),g}async function aI(a){let b,c=await aH(a.appConfig,c=>{let d=function(a,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(an.create("app-offline"))};let c={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},d=aJ(a,c);return{installationEntry:c,registrationPromise:d}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:aK(a)}:{installationEntry:b}}(a,aM(c||{fid:function(){try{var a;let b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;let c=(a=b,btoa(String.fromCharCode(...a)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return aw.test(c)?c:""}catch{return""}}(),registrationStatus:0}));return b=d.registrationPromise,d.installationEntry});return""===c.fid?{installationEntry:await b}:{installationEntry:c,registrationPromise:b}}async function aJ(a,b){try{let c=await au(a,b);return aF(a.appConfig,c)}catch(c){throw ao(c)&&409===c.customData.serverCode?await aG(a.appConfig):await aF(a.appConfig,{fid:b.fid,registrationStatus:0}),c}}async function aK(a){let b=await aL(a.appConfig);for(;1===b.registrationStatus;)await av(100),b=await aL(a.appConfig);if(0===b.registrationStatus){let{installationEntry:b,registrationPromise:c}=await aI(a);return c||b}return b}function aL(a){return aH(a,a=>{if(!a)throw an.create("installation-not-found");return aM(a)})}function aM(a){var b;return 1===(b=a).registrationStatus&&b.registrationTime+1e4<Date.now()?{fid:a.fid,registrationStatus:0}:a}async function aN({appConfig:a,heartbeatServiceProvider:b},c){let d=function(a,{fid:b}){return`${ap(a)}/${b}/authTokens:generate`}(a,c),e=function(a,{refreshToken:b}){var c;let d=as(a);return d.append("Authorization",(c=b,`${am} ${c}`)),d}(a,c),f=b.getImmediate({optional:!0});if(f){let a=await f.getHeartbeatsHeader();a&&e.append("x-firebase-client",a)}let g={method:"POST",headers:e,body:JSON.stringify({installation:{sdkVersion:al,appId:a.appId}})},h=await at(()=>fetch(d,g));if(h.ok)return aq(await h.json());throw await ar("Generate Auth Token",h)}async function aO(a,b=!1){let c,d=await aH(a.appConfig,d=>{var e,f,g;let h;if(!aS(d))throw an.create("not-registered");let i=d.authToken;if(!b&&2===(e=i).requestStatus&&(f=e,!((h=Date.now())<f.creationTime)&&!(f.creationTime+f.expiresIn<h+36e5)))return d;if(1===i.requestStatus)return c=aP(a,b),d;{let b;if(!navigator.onLine)throw an.create("app-offline");let e=(g=d,b={requestStatus:1,requestTime:Date.now()},{...g,authToken:b});return c=aR(a,e),e}});return c?await c:d.authToken}async function aP(a,b){let c=await aQ(a.appConfig);for(;1===c.authToken.requestStatus;)await av(100),c=await aQ(a.appConfig);let d=c.authToken;return 0===d.requestStatus?aO(a,b):d}function aQ(a){return aH(a,a=>{var b;if(!aS(a))throw an.create("not-registered");return 1===(b=a.authToken).requestStatus&&b.requestTime+1e4<Date.now()?{...a,authToken:{requestStatus:0}}:a})}async function aR(a,b){try{let c=await aN(a,b),d={...b,authToken:c};return await aF(a.appConfig,d),c}catch(c){if(ao(c)&&(401===c.customData.serverCode||404===c.customData.serverCode))await aG(a.appConfig);else{let c={...b,authToken:{requestStatus:0}};await aF(a.appConfig,c)}throw c}}function aS(a){return void 0!==a&&2===a.registrationStatus}async function aT(a){let{installationEntry:b,registrationPromise:c}=await aI(a);return c?c.catch(console.error):aO(a).catch(console.error),b.fid}async function aU(a,b=!1){return await aV(a),(await aO(a,b)).token}async function aV(a){let{registrationPromise:b}=await aI(a);b&&await b}function aW(a){return an.create("missing-app-config-values",{valueName:a})}let aX="installations";X(new u(aX,a=>{let b=a.getProvider("app").getImmediate(),c=function(a){if(!a||!a.options)throw aW("App Configuration");if(!a.name)throw aW("App Name");for(let b of["projectId","apiKey","appId"])if(!a.options[b])throw aW(b);return{appName:a.name,projectId:a.options.projectId,apiKey:a.options.apiKey,appId:a.options.appId}}(b),d=Y(b,"heartbeat");return{app:b,appConfig:c,heartbeatServiceProvider:d,_delete:()=>Promise.resolve()}},"PUBLIC")),X(new u("installations-internal",a=>{let b=Y(a.getProvider("app").getImmediate(),aX).getImmediate();return{getId:()=>aT(b),getToken:a=>aU(b,a)}},"PRIVATE")),$(aj,ak),$(aj,ak,"esm2020");let aY="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aZ="google.c.a.c_id";function a$(a){return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(f=i||(i={}))[f.DATA_MESSAGE=1]="DATA_MESSAGE",f[f.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(g=j||(j={})).PUSH_RECEIVED="push-received",g.NOTIFICATION_CLICKED="notification-clicked";let a_="fcm_token_details_db",a0="fcm_token_object_Store";async function a1(a){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(a_))return null;let b=null;return(await I(a_,5,{upgrade:async(c,d,e,f)=>{if(d<2||!c.objectStoreNames.contains(a0))return;let g=f.objectStore(a0),h=await g.index("fcmSenderId").get(a);if(await g.clear(),h)if(2===d){if(!h.auth||!h.p256dh||!h.endpoint)return;b={token:h.fcmToken,createTime:h.createTime??Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:"string"==typeof h.vapidKey?h.vapidKey:a$(h.vapidKey)}}}else 3===d?b={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:a$(h.auth),p256dh:a$(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:a$(h.vapidKey)}}:4===d&&(b={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:a$(h.auth),p256dh:a$(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:a$(h.vapidKey)}})}})).close(),await J(a_),await J("fcm_vapid_details_db"),await J("undefined"),!function(a){if(!a||!a.subscriptionOptions)return!1;let{subscriptionOptions:b}=a;return"number"==typeof a.createTime&&a.createTime>0&&"string"==typeof a.token&&a.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}(b)?null:b}let a2="firebase-messaging-store",a3=null;function a4(){return a3||(a3=I("firebase-messaging-database",1,{upgrade:(a,b)=>{0===b&&a.createObjectStore(a2)}})),a3}async function a5(a){let b=function({appConfig:a}){return a.appId}(a),c=await a4(),d=await c.transaction(a2).objectStore(a2).get(b);if(d)return d;{let b=await a1(a.appConfig.senderId);if(b)return await a6(a,b),b}}async function a6(a,b){let c=function({appConfig:a}){return a.appId}(a),d=(await a4()).transaction(a2,"readwrite");return await d.objectStore(a2).put(b,c),await d.done,b}let a7=new s("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function a8(a,b){let c,d={method:"POST",headers:await bc(a),body:JSON.stringify(bd(b))};try{let b=await fetch(bb(a.appConfig),d);c=await b.json()}catch(a){throw a7.create("token-subscribe-failed",{errorInfo:a?.toString()})}if(c.error){let a=c.error.message;throw a7.create("token-subscribe-failed",{errorInfo:a})}if(!c.token)throw a7.create("token-subscribe-no-token");return c.token}async function a9(a,b){let c,d={method:"PATCH",headers:await bc(a),body:JSON.stringify(bd(b.subscriptionOptions))};try{let e=await fetch(`${bb(a.appConfig)}/${b.token}`,d);c=await e.json()}catch(a){throw a7.create("token-update-failed",{errorInfo:a?.toString()})}if(c.error){let a=c.error.message;throw a7.create("token-update-failed",{errorInfo:a})}if(!c.token)throw a7.create("token-update-no-token");return c.token}async function ba(a,b){let c=await bc(a);try{let d=await fetch(`${bb(a.appConfig)}/${b}`,{method:"DELETE",headers:c}),e=await d.json();if(e.error){let a=e.error.message;throw a7.create("token-unsubscribe-failed",{errorInfo:a})}}catch(a){throw a7.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function bb({projectId:a}){return`https://fcmregistrations.googleapis.com/v1/projects/${a}/registrations`}async function bc({appConfig:a,installations:b}){let c=await b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":a.apiKey,"x-goog-firebase-installations-auth":`FIS ${c}`})}function bd({p256dh:a,auth:b,endpoint:c,vapidKey:d}){let e={web:{endpoint:c,auth:b,p256dh:a}};return d!==aY&&(e.web.applicationPubKey=d),e}async function be(a){var b,c;let d,e,f,g,h=await bh(a.swRegistration,a.vapidKey),i={vapidKey:a.vapidKey,swScope:a.swRegistration.scope,endpoint:h.endpoint,auth:a$(h.getKey("auth")),p256dh:a$(h.getKey("p256dh"))},j=await a5(a.firebaseDependencies);if(!j)return bg(a.firebaseDependencies,i);if(b=j.subscriptionOptions,d=(c=i).vapidKey===b.vapidKey,e=c.endpoint===b.endpoint,f=c.auth===b.auth,g=c.p256dh===b.p256dh,d&&e&&f&&g)if(Date.now()>=j.createTime+6048e5)return bf(a,{token:j.token,createTime:Date.now(),subscriptionOptions:i});else return j.token;try{await ba(a.firebaseDependencies,j.token)}catch(a){console.warn(a)}return bg(a.firebaseDependencies,i)}async function bf(a,b){try{let c=await a9(a.firebaseDependencies,b),d={...b,token:c,createTime:Date.now()};return await a6(a.firebaseDependencies,d),c}catch(a){throw a}}async function bg(a,b){let c={token:await a8(a,b),createTime:Date.now(),subscriptionOptions:b};return await a6(a,c),c.token}async function bh(a,b){let c=await a.pushManager.getSubscription();return c||a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(a){let b="=".repeat((4-a.length%4)%4),c=atob((a+b).replace(/\-/g,"+").replace(/_/g,"/")),d=new Uint8Array(c.length);for(let a=0;a<c.length;++a)d[a]=c.charCodeAt(a);return d}(b)})}function bi(a){var b,c;let d={from:a.from,collapseKey:a.collapse_key,messageId:a.fcmMessageId};return function(a,b){if(!b.notification)return;a.notification={};let c=b.notification.title;c&&(a.notification.title=c);let d=b.notification.body;d&&(a.notification.body=d);let e=b.notification.image;e&&(a.notification.image=e);let f=b.notification.icon;f&&(a.notification.icon=f)}(d,a),b=d,(c=a).data&&(b.data=c.data),function(a,b){if(!b.fcmOptions&&!b.notification?.click_action)return;a.fcmOptions={};let c=b.fcmOptions?.link??b.notification?.click_action;c&&(a.fcmOptions.link=c);let d=b.fcmOptions?.analytics_label;d&&(a.fcmOptions.analyticsLabel=d)}(d,a),d}var bj="AzSCbw63g1R0nCw85jG8",bk="Iaya3yLKwmgvh7cF0q4";let bl=[];for(let a=0;a<bj.length;a++)bl.push(bj.charAt(a)),a<bk.length&&bl.push(bk.charAt(a));function bm(a){return a7.create("missing-app-config-values",{valueName:a})}bl.join("");class bn{constructor(a,b,c){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const d=function(a){if(!a||!a.options)throw bm("App Configuration Object");if(!a.name)throw bm("App Name");let{options:b}=a;for(let a of["projectId","apiKey","appId","messagingSenderId"])if(!b[a])throw bm(a);return{appName:a.name,projectId:b.projectId,apiKey:b.apiKey,appId:b.appId,senderId:b.messagingSenderId}}(a);this.firebaseDependencies={app:a,appConfig:d,installations:b,analyticsProvider:c}}_delete(){return Promise.resolve()}}async function bo(a){try{a.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),a.swRegistration.update().catch(()=>{}),await bp(a.swRegistration)}catch(a){throw a7.create("failed-service-worker-registration",{browserErrorMessage:a?.message})}}async function bp(a){return new Promise((b,c)=>{let d=setTimeout(()=>c(Error("Service worker not registered after 10000 ms")),1e4),e=a.installing||a.waiting;a.active?(clearTimeout(d),b()):e?e.onstatechange=a=>{a.target?.state==="activated"&&(e.onstatechange=null,clearTimeout(d),b())}:(clearTimeout(d),c(Error("No incoming service worker found.")))})}async function bq(a,b){if(b||a.swRegistration||await bo(a),b||!a.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw a7.create("invalid-sw-registration");a.swRegistration=b}}async function br(a,b){b?a.vapidKey=b:a.vapidKey||(a.vapidKey=aY)}async function bs(a,b){if(!navigator)throw a7.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw a7.create("permission-blocked");return await br(a,b?.vapidKey),await bq(a,b?.serviceWorkerRegistration),be(a)}async function bt(a,b,c){let d=function(a){switch(a){case j.NOTIFICATION_CLICKED:return"notification_open";case j.PUSH_RECEIVED:return"notification_foreground";default:throw Error()}}(b);(await a.firebaseDependencies.analyticsProvider.get()).logEvent(d,{message_id:c[aZ],message_name:c["google.c.a.c_l"],message_time:c["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function bu(a,b){let c=b.data;if(!c.isFirebaseMessaging)return;a.onMessageHandler&&c.messageType===j.PUSH_RECEIVED&&("function"==typeof a.onMessageHandler?a.onMessageHandler(bi(c)):a.onMessageHandler.next(bi(c)));let d=c.data;"object"==typeof d&&d&&aZ in d&&"1"===d["google.c.a.e"]&&await bt(a,c.messageType,d)}let bv="@firebase/messaging",bw="0.12.23";async function bx(a,b){var c;return bs(a=(c=a)&&c._delegate?c._delegate:c,b)}async function by(){return null}async function bz(){try{let a=await Notification.requestPermission();if("granted"!==a)return null;let b=await by();if(!b)return null;let c=process.env.NEXT_PUBLIC_FIREBASE_VAPID_KEY;if(!c)return console.warn("NEXT_PUBLIC_FIREBASE_VAPID_KEY not set"),null;return await bx(b,{vapidKey:c,serviceWorkerRegistration:await navigator.serviceWorker.register("/firebase-messaging-sw.js")})}catch(a){return console.error("Failed to get notification token:",a),null}}X(new u("messaging",a=>{let b=new bn(a.getProvider("app").getImmediate(),a.getProvider("installations-internal").getImmediate(),a.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",a=>bu(b,a)),b},"PUBLIC")),X(new u("messaging-internal",a=>{let b=a.getProvider("messaging").getImmediate();return{getToken:a=>bs(b,a)}},"PRIVATE")),$(bv,bw),$(bv,bw,"esm2020"),process.env.NEXT_PUBLIC_FIREBASE_API_KEY,process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,process.env.NEXT_PUBLIC_FIREBASE_APP_ID;var bA=a.i(92415);function bB(a){let[b,c]=(0,k.useState)({isSupported:!1,isPermissionGranted:!1,isTokenRegistered:!1,isLoading:!1}),[d,e]=(0,k.useState)(null),f=(0,k.useRef)(!1),g=(0,k.useRef)(null);(0,k.useEffect)(()=>{},[a]),(0,k.useEffect)(()=>{if(!b.isPermissionGranted)return;let a=(a=>{e(a),setTimeout(()=>e(null),5e3)},null);return()=>{a&&a()}},[b.isPermissionGranted]);let h=(0,k.useCallback)(async()=>{if(!f.current&&!b.isLoading){c(a=>({...a,isLoading:!0}));try{let a=await bz();if(!a)return void c(a=>({...a,isLoading:!1}));await bA.default.post("/devices/register",{token:a,platform:"web",deviceId:`web-${navigator.userAgent.slice(0,50)}`}),f.current=!0,g.current=a,c(a=>({...a,isPermissionGranted:!0,isTokenRegistered:!0,isLoading:!1})),localStorage.setItem("push_token_registered","true")}catch(a){console.error("Push notification registration failed:",a),c(a=>({...a,isLoading:!1}))}}},[b.isLoading]),i=(0,k.useCallback)(async()=>{if(!b.isSupported)return!1;c(a=>({...a,isLoading:!0}));try{let a=await Notification.requestPermission();if("granted"===a)return c(a=>({...a,isPermissionGranted:!0})),await h(),c(a=>({...a,isLoading:!1})),f.current;return c(a=>({...a,isLoading:!1})),!1}catch{return c(a=>({...a,isLoading:!1})),!1}},[b.isSupported,h]),j=(0,k.useCallback)(()=>{e(null)},[]),l=(0,k.useCallback)(async()=>i(),[i]),m=(0,k.useCallback)(async()=>{let a=g.current;if(a)try{await bA.default.delete("/devices/unregister",{data:{token:a}}),f.current=!1,g.current=null,localStorage.removeItem("push_token_registered"),c(a=>({...a,isTokenRegistered:!1,isPermissionGranted:!1}))}catch(a){console.error("Push notification unregister failed:",a)}},[]);return{...b,isSubscribed:b.isTokenRegistered,foregroundNotification:d,requestPermission:i,dismissNotification:j,subscribe:l,unsubscribe:m}}a.s(["usePushNotifications",()=>bB],65708)}];

//# sourceMappingURL=src_hooks_usePushNotifications_ts_b2b2c579._.js.map