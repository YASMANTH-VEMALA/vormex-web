{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":["c","_c","React","useRouter","useAuth","ProtectedRouteProps","children","ReactNode","ProtectedRoute","t0","$","$i","Symbol","for","isAuthenticated","loading","router","t1","t2","ProtectedRoute[useEffect()]","push","useEffect","t3"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;;AAJ5C,YAAY;;;;;AAUL,wBAAAK,EAAA;;IAAA,MAAAC,CAAA,OAAAT,gLAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAJ,QAAAA,EAAA,GAAAG,EAAiC;IAC9D,MAAA,EAAAK,eAAA,EAAAC,OAAAA,EAAA;IACA,MAAAC,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAI,eAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAK,OAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,MAAA,EAAA;QAEXC,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACd,IAAI,CAACJ,OAA2B,IAA5B,CAAaD,eAAe,EAAA;oBAC9BE,MAAM,CAAAI,IAAK,CAAC,QAAQ,CAAC;gBAAA;YACtB;SAAA,CAAA,CAAA,8BACF;QAAEF,EAAA,GAAA;YAACJ,eAAe;YAAEC,OAAO;YAAEC,MAAM;SAAC;QAAAN,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,OAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,MAAA;QAAAN,CAAA,CAAA,EAAA,GAAAO,EAAA;QAAAP,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAP,CAAA,CAAA,EAAA;QAAAQ,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAJrCR,wKAAK,CAAAmB,SAAU,CAACJ,EAIf,EAAEC,EAAkC,CAAC;IAEtC,IAAIH,OAAO,EAAA;QAAA,IAAAO,EAAA;QAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPS,EAAA,iBAAA,6LAAA,GAKM;gBALS,SAA+C,EAA/C,+CAA+C;wCAC5D,6LAAA,GAGM;oBAHS,SAAa,EAAb,aAAa;;sCAC1B,6LAAA,GAA8F;4BAA/E,SAAwE,EAAxE,wEAAwE;;;;;;sCACvF,6LAAA,CAAgD;4BAAnC,SAAoB,EAApB,oBAAoB;sCAAC,UAAU,EAA5C,CAAgD,CAClD,EAHA,GAGM,CACR,EALA,GAKM;;;;;;;;;;;;;;;;;YAAAZ,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;QAAA;QAAA,OALNY,EAKM;IAAA;IAIV,IAAI,CAACR,eAAe,EAAA;QAAA,OACX,IAAI;IAAA;IACZ,IAAAQ,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAEMgB,EAAA,iBAAA,EAAGhB;sBAAAA,QAAO,CAAC,GAAI;;QAAAI,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAfY,EAAe;AAAA;;;QAxBelB,2IAAO,CAAC,CAAC;QAC/BD,kJAAS,CAAC,CAAC;;;KAFrBK","ignoreList":[]}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ReactionPicker.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ThumbsUp, \n  PartyPopper, \n  Heart, \n  Lightbulb, \n  HelpCircle \n} from 'lucide-react';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface ReactionPickerProps {\n  isOpen: boolean;\n  currentReaction?: ReactionType | null;\n  onSelect: (reaction: ReactionType) => void;\n  onClose: () => void;\n}\n\n// Reaction configurations with LinkedIn-style icons\nexport const REACTIONS: {\n  type: ReactionType;\n  icon: React.ElementType;\n  label: string;\n  color: string;\n  bgColor: string;\n  hoverScale: number;\n}[] = [\n  { \n    type: 'LIKE', \n    icon: ThumbsUp, \n    label: 'Like', \n    color: 'text-blue-600',\n    bgColor: 'bg-blue-100 dark:bg-blue-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CELEBRATE', \n    icon: PartyPopper, \n    label: 'Celebrate', \n    color: 'text-green-600',\n    bgColor: 'bg-green-100 dark:bg-green-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'SUPPORT', \n    icon: Heart, \n    label: 'Support', \n    color: 'text-purple-600',\n    bgColor: 'bg-purple-100 dark:bg-purple-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'INSIGHTFUL', \n    icon: Lightbulb, \n    label: 'Insightful', \n    color: 'text-amber-600',\n    bgColor: 'bg-amber-100 dark:bg-amber-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CURIOUS', \n    icon: HelpCircle, \n    label: 'Curious', \n    color: 'text-pink-600',\n    bgColor: 'bg-pink-100 dark:bg-pink-900/30',\n    hoverScale: 1.3,\n  },\n];\n\n// Helper to get reaction config by type\nexport function getReactionConfig(type: ReactionType) {\n  return REACTIONS.find(r => r.type === type) || REACTIONS[0];\n}\n\n// Reaction icons for summary display\nexport function ReactionIcon({ \n  type, \n  size = 16,\n  className = '' \n}: { \n  type: ReactionType; \n  size?: number;\n  className?: string;\n}) {\n  const config = getReactionConfig(type);\n  const Icon = config.icon;\n  \n  return (\n    <div className={`inline-flex items-center justify-center rounded-full p-1 ${config.bgColor} ${className}`}>\n      <Icon className={`${config.color}`} size={size} />\n    </div>\n  );\n}\n\nexport function ReactionPicker({ \n  isOpen, \n  currentReaction,\n  onSelect, \n  onClose \n}: ReactionPickerProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Reaction picker */}\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"absolute bottom-full left-0 mb-2 z-50\"\n          >\n            <div className=\"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1\">\n              {REACTIONS.map((reaction) => {\n                const Icon = reaction.icon;\n                const isSelected = currentReaction === reaction.type;\n                \n                return (\n                  <motion.button\n                    key={reaction.type}\n                    whileHover={{ scale: reaction.hoverScale, y: -8 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => {\n                      onSelect(reaction.type);\n                      onClose();\n                    }}\n                    className={`relative p-2 rounded-full transition-colors group ${\n                      isSelected \n                        ? reaction.bgColor \n                        : 'hover:bg-gray-100 dark:hover:bg-neutral-700'\n                    }`}\n                    title={reaction.label}\n                  >\n                    <Icon \n                      className={`w-6 h-6 transition-transform ${\n                        isSelected ? reaction.color : 'text-gray-500 dark:text-neutral-400'\n                      } group-hover:${reaction.color}`}\n                    />\n                    \n                    {/* Tooltip */}\n                    <motion.span\n                      initial={{ opacity: 0, y: 5 }}\n                      whileHover={{ opacity: 1, y: 0 }}\n                      className=\"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none\"\n                    >\n                      {reaction.label}\n                    </motion.span>\n                  </motion.button>\n                );\n              })}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Summary of reactions (shows top 3 reaction icons)\nexport function ReactionSummaryDisplay({ \n  reactionSummary,\n  totalCount,\n  onClick,\n}: { \n  reactionSummary: ReactionSummaryType[];\n  totalCount: number;\n  onClick?: () => void;\n}) {\n  if (totalCount === 0) return null;\n  \n  // Get top 3 unique reaction types\n  const topReactions = reactionSummary.slice(0, 3);\n  \n  return (\n    <button \n      onClick={onClick}\n      className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline\"\n    >\n      <div className=\"flex -space-x-1\">\n        {topReactions.map((reaction, index) => (\n          <ReactionIcon \n            key={reaction.type} \n            type={reaction.type} \n            size={14}\n            className=\"border-2 border-white dark:border-neutral-900\"\n          />\n        ))}\n      </div>\n      <span>{totalCount}</span>\n    </button>\n  );\n}\n"],"names":["c","_c","React","motion","AnimatePresence","ThumbsUp","PartyPopper","Heart","Lightbulb","HelpCircle","ReactionType","ReactionSummary","ReactionSummaryType","ReactionPickerProps","isOpen","currentReaction","onSelect","reaction","onClose","REACTIONS","type","icon","ElementType","label","color","bgColor","hoverScale","getReactionConfig","find","r","ReactionIcon","t0","$","$i","Symbol","for","size","t1","className","t2","undefined","t3","config","Icon","t4","t5","t6","t7","ReactionPicker","opacity","y","scale","damping","stiffness","map","isSelected","ReactionPicker[REACTIONS.map() > <motion.button>.onClick]","ReactionSummaryDisplay","reactionSummary","totalCount","onClick","topReactions","slice","_ReactionSummaryDisplayTopReactionsMap","index"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 503, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/FormattedContent.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface FormattedContentProps {\n  content: string;\n  className?: string;\n}\n\n/**\n * Renders formatted post content with support for:\n * - **bold** text\n * - *italic* text\n * - `code` inline\n * - @mentions (clickable links)\n * - [color:red]colored text[/color]\n * - URLs (auto-linked)\n * - Line breaks\n */\nexport function FormattedContent({ content, className = '' }: FormattedContentProps) {\n  if (!content) return null;\n\n  const renderFormattedText = (text: string): React.ReactNode[] => {\n    const elements: React.ReactNode[] = [];\n    let remaining = text;\n    let key = 0;\n\n    while (remaining.length > 0) {\n      // Check for color tags: [color:red]text[/color]\n      const colorMatch = remaining.match(/^\\[color:([a-zA-Z]+|#[0-9a-fA-F]{3,6})\\]([\\s\\S]*?)\\[\\/color\\]/);\n      if (colorMatch) {\n        const [fullMatch, color, innerText] = colorMatch;\n        elements.push(\n          <span key={key++} style={{ color }}>\n            {renderFormattedText(innerText)}\n          </span>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: **text**\n      const boldMatch = remaining.match(/^\\*\\*(.+?)\\*\\*/);\n      if (boldMatch) {\n        const [fullMatch, innerText] = boldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for italic: *text* (but not **)\n      const italicMatch = remaining.match(/^\\*([^*]+?)\\*/);\n      if (italicMatch) {\n        const [fullMatch, innerText] = italicMatch;\n        elements.push(\n          <em key={key++} className=\"italic\">\n            {renderFormattedText(innerText)}\n          </em>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for inline code: `code`\n      const codeMatch = remaining.match(/^`([^`]+?)`/);\n      if (codeMatch) {\n        const [fullMatch, innerText] = codeMatch;\n        elements.push(\n          <code \n            key={key++} \n            className=\"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm\"\n          >\n            {innerText}\n          </code>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for mentions: @username\n      const mentionMatch = remaining.match(/^@([a-zA-Z0-9_]+)/);\n      if (mentionMatch) {\n        const [fullMatch, username] = mentionMatch;\n        elements.push(\n          <Link \n            key={key++}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\n          >\n            @{username}\n          </Link>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for URLs\n      const urlMatch = remaining.match(/^(https?:\\/\\/[^\\s]+)/);\n      if (urlMatch) {\n        const [fullMatch] = urlMatch;\n        elements.push(\n          <a \n            key={key++}\n            href={fullMatch}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline break-all\"\n          >\n            {fullMatch}\n          </a>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for line breaks\n      if (remaining.startsWith('\\n')) {\n        elements.push(<br key={key++} />);\n        remaining = remaining.slice(1);\n        continue;\n      }\n\n      // Find next special character or take the rest\n      const nextSpecialIndex = remaining.search(/[\\*`@\\[\\n]|https?:\\/\\//);\n      if (nextSpecialIndex === -1) {\n        // No more special chars, add rest as plain text\n        elements.push(<span key={key++}>{remaining}</span>);\n        break;\n      } else if (nextSpecialIndex === 0) {\n        // Special char at start but didn't match pattern - add single char\n        elements.push(<span key={key++}>{remaining[0]}</span>);\n        remaining = remaining.slice(1);\n      } else {\n        // Add text before special char\n        elements.push(<span key={key++}>{remaining.slice(0, nextSpecialIndex)}</span>);\n        remaining = remaining.slice(nextSpecialIndex);\n      }\n    }\n\n    return elements;\n  };\n\n  return (\n    <div className={`whitespace-pre-wrap break-words ${className}`}>\n      {renderFormattedText(content)}\n    </div>\n  );\n}\n\n// Color presets for the color picker\nexport const COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n  { name: 'Cyan', value: '#06b6d4' },\n];\n"],"names":["c","_c","React","Link","FormattedContentProps","content","className","FormattedContent","t0","$","$i","Symbol","for","t1","undefined","t2","t3","renderFormattedText","text","elements","remaining","key","length","colorMatch","match","fullMatch","color","innerText","push","slice","boldMatch","fullMatch_0","innerText_0","italicMatch","fullMatch_1","innerText_1","codeMatch","fullMatch_2","innerText_2","mentionMatch","fullMatch_3","username","urlMatch","fullMatch_4","startsWith","nextSpecialIndex","search","t4","COLOR_PRESETS","name","value"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 747, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/EditPostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { updatePost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { Post, PostVisibility, MentionUser } from '@/types/post';\n\ninterface EditPostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  post: Post;\n  onPostUpdated?: (updatedPost: Post) => void;\n}\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Teal', value: '#14b8a6' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n];\n\nexport function EditPostModal({ isOpen, onClose, post, onPostUpdated }: EditPostModalProps) {\n  const { user } = useAuth();\n  const [content, setContent] = useState(post.content || '');\n  const [visibility, setVisibility] = useState<PostVisibility>(post.visibility);\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Update content when post prop changes\n  useEffect(() => {\n    setContent(post.content || '');\n    setVisibility(post.visibility);\n  }, [post]);\n\n  // Mention search\n  useEffect(() => {\n    const searchMentions = async () => {\n      if (mentionQuery.length >= 2) {\n        try {\n          const results = await searchUsersForMention(mentionQuery);\n          setMentionResults(results);\n          setShowMentionDropdown(true);\n        } catch (error) {\n          console.error('Error searching mentions:', error);\n        }\n      } else {\n        setMentionResults([]);\n        setShowMentionDropdown(false);\n      }\n    };\n\n    const debounce = setTimeout(searchMentions, 300);\n    return () => clearTimeout(debounce);\n  }, [mentionQuery]);\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n\n    // Check for @ mentions\n    const cursorPos = e.target.selectionStart;\n    const textBeforeCursor = value.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (lastAtIndex !== -1) {\n      const textAfterAt = textBeforeCursor.slice(lastAtIndex + 1);\n      if (!textAfterAt.includes(' ') && textAfterAt.length >= 1) {\n        setMentionQuery(textAfterAt);\n      } else {\n        setMentionQuery('');\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setMentionQuery('');\n      setShowMentionDropdown(false);\n    }\n  };\n\n  const insertMention = (user: MentionUser) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const cursorPos = textarea.selectionStart;\n    const textBeforeCursor = content.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n    const textAfterCursor = content.slice(cursorPos);\n\n    const newContent = \n      content.slice(0, lastAtIndex) + \n      `@${user.username} ` + \n      textAfterCursor;\n\n    setContent(newContent);\n    setMentionQuery('');\n    setShowMentionDropdown(false);\n\n    setTimeout(() => {\n      const newCursorPos = lastAtIndex + user.username.length + 2;\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Text formatting helpers\n  const formatText = (wrapper: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + wrapper + selectedText + wrapper + content.slice(end);\n      newCursorPos = end + wrapper.length * 2;\n    } else {\n      newContent = content.slice(0, start) + wrapper + wrapper + content.slice(end);\n      newCursorPos = start + wrapper.length;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleBold = () => formatText('**');\n  const handleItalic = () => formatText('*');\n  const handleCode = () => formatText('`');\n\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (lineContent.startsWith('- ')) {\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Submit update\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const updatedPost = await updatePost(post.id, {\n        content,\n        visibility,\n      });\n      \n      onPostUpdated?.(updatedPost);\n      onClose();\n    } catch (err: any) {\n      console.error('Update post error:', err);\n      setError(err.message || 'Failed to update post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const selectedVisibility = VISIBILITY_OPTIONS.find(v => v.value === visibility) || VISIBILITY_OPTIONS[0];\n  const VisibilityIcon = selectedVisibility.icon;\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl\"\n            style={{\n              background: '#ecf0f3',\n              boxShadow: '20px 20px 60px #c9ccd1, -20px -20px 60px #ffffff',\n            }}\n          >\n            {/* Header */}\n            <div \n              className=\"flex items-center justify-between p-6 border-b\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div \n                  className=\"p-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <Pencil className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <h2 \n                  className=\"text-xl font-bold\"\n                  style={{\n                    fontFamily: \"'Montserrat', sans-serif\",\n                    color: '#2d3748',\n                  }}\n                >\n                  Edit Post\n                </h2>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* User Info & Visibility */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div \n                    className=\"w-12 h-12 rounded-full overflow-hidden\"\n                    style={{\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {user?.profileImage ? (\n                      <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold\">\n                        {user?.name?.charAt(0).toUpperCase() || 'U'}\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n                    <div className=\"relative\">\n                      <button\n                        onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                        className=\"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700\"\n                      >\n                        <VisibilityIcon className=\"w-3 h-3\" />\n                        <span>{selectedVisibility.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </button>\n                      \n                      {showVisibilityDropdown && (\n                        <div \n                          className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-20 min-w-[140px]\"\n                          style={{\n                            background: '#ecf0f3',\n                            boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                          }}\n                        >\n                          {VISIBILITY_OPTIONS.map((option) => (\n                            <button\n                              key={option.value}\n                              onClick={() => {\n                                setVisibility(option.value);\n                                setShowVisibilityDropdown(false);\n                              }}\n                              className=\"flex items-center gap-2 w-full px-4 py-2 text-left text-sm hover:bg-gray-100\"\n                            >\n                              <option.icon className=\"w-4 h-4 text-gray-500\" />\n                              <span className=\"text-gray-700\">{option.label}</span>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <span className=\"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded\">\n                  {post.type}\n                </span>\n              </div>\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"p-3 rounded-lg bg-red-50 text-red-600 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* Rich Text Editor Area */}\n              <div className=\"relative\">\n                {/* Formatting Toolbar */}\n                <div \n                  className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                  }}\n                >\n                  <button \n                    type=\"button\"\n                    onClick={handleBold}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bold (**text**)\"\n                  >\n                    <Bold className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleItalic}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Italic (*text*)\"\n                  >\n                    <Italic className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleList}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bullet List\"\n                  >\n                    <List className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleCode}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Code (`code`)\"\n                  >\n                    <Code className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                  <button \n                    type=\"button\"\n                    onClick={handleMentionClick}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Mention someone (@)\"\n                  >\n                    <AtSign className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"relative\" ref={colorPickerRef}>\n                    <button \n                      type=\"button\"\n                      onClick={() => setShowColorPicker(!showColorPicker)}\n                      className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                      title=\"Text Color\"\n                    >\n                      <Palette className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n                    {/* Color Picker Dropdown */}\n                    {showColorPicker && (\n                      <div \n                        className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                        }}\n                      >\n                        <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                        <div className=\"grid grid-cols-4 gap-2\">\n                          {COLOR_PRESETS.map((color) => (\n                            <button\n                              key={color.value}\n                              type=\"button\"\n                              onClick={() => handleColorInsert(color.value)}\n                              className=\"group flex flex-col items-center gap-1\"\n                            >\n                              <div \n                                className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                                style={{ backgroundColor: color.value }}\n                              />\n                              <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Content Textarea */}\n                <div className=\"relative\">\n                  <textarea\n                    ref={contentRef}\n                    value={content}\n                    onChange={handleContentChange}\n                    placeholder=\"What do you want to share?\"\n                    className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      fontFamily: \"'Montserrat', sans-serif\",\n                    }}\n                  />\n                  \n                  {/* Mention Dropdown */}\n                  {showMentionDropdown && (\n                    <div \n                      className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      {mentionResults.map((user) => (\n                        <button\n                          key={user.id}\n                          onClick={() => insertMention(user)}\n                          className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                        >\n                          <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                            {user.profileImage && (\n                              <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                            )}\n                          </div>\n                          <div className=\"text-left\">\n                            <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                            <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Post type note */}\n              <p className=\"text-xs text-gray-400 text-center\">\n                Note: Only text content and visibility can be edited. Media, polls, and links cannot be changed.\n              </p>\n            </div>\n\n            {/* Footer */}\n            <div \n              className=\"flex justify-end gap-3 p-6 border-t\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2.5 rounded-xl text-gray-600 font-medium transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={isSubmitting || !content.trim()}\n                className=\"px-8 py-2.5 rounded-xl text-white font-semibold transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                style={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center gap-2\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Saving...\n                  </span>\n                ) : (\n                  'Save Changes'\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useRef","useEffect","motion","AnimatePresence","X","Globe","Users","Lock","ChevronDown","Loader2","Bold","Italic","List","Code","AtSign","Palette","Pencil","useAuth","updatePost","searchUsersForMention","Post","PostVisibility","MentionUser","EditPostModalProps","isOpen","onClose","post","onPostUpdated","updatedPost","VISIBILITY_OPTIONS","value","label","icon","ElementType","COLOR_PRESETS","name","EditPostModal","user","content","setContent","visibility","setVisibility","showVisibilityDropdown","setShowVisibilityDropdown","isSubmitting","setIsSubmitting","error","setError","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","showColorPicker","setShowColorPicker","colorPickerRef","HTMLDivElement","contentRef","HTMLTextAreaElement","handleClickOutside","event","MouseEvent","current","contains","target","Node","document","addEventListener","removeEventListener","searchMentions","length","results","console","debounce","setTimeout","clearTimeout","handleContentChange","e","ChangeEvent","cursorPos","selectionStart","textBeforeCursor","slice","lastAtIndex","lastIndexOf","textAfterAt","includes","insertMention","textarea","textAfterCursor","newContent","username","newCursorPos","focus","setSelectionRange","formatText","wrapper","start","end","selectionEnd","selectedText","handleBold","handleItalic","handleCode","handleList","beforeCursor","afterCursor","lineStart","lineContent","startsWith","handleMentionClick","handleColorInsert","colorValue","openTag","closeTag","handleSubmit","id","err","message","selectedVisibility","find","v","VisibilityIcon","opacity","backgroundColor","scale","stopPropagation","background","boxShadow","borderColor","fontFamily","color","profileImage","charAt","toUpperCase","map","option","type","trim"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1700, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/LikeListModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getReactionConfig, REACTIONS } from './ReactionPicker';\nimport type { ReactionType } from '@/types/post';\nimport apiClient from '@/lib/api/client';\n\ninterface LikeUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  headline: string | null;\n  reactionType: ReactionType;\n  createdAt: string;\n}\n\ninterface LikeListModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  totalCount: number;\n}\n\nexport function LikeListModal({ isOpen, onClose, postId, totalCount }: LikeListModalProps) {\n  const [likes, setLikes] = useState<LikeUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedFilter, setSelectedFilter] = useState<ReactionType | 'ALL'>('ALL');\n  const [reactionCounts, setReactionCounts] = useState<Record<ReactionType, number>>({\n    LIKE: 0,\n    CELEBRATE: 0,\n    SUPPORT: 0,\n    INSIGHTFUL: 0,\n    CURIOUS: 0,\n  });\n\n  useEffect(() => {\n    if (!isOpen || !postId) return;\n\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        // apiClient already extracts response.data, so response IS the data\n        const data = await apiClient.get(`/posts/${postId}/likes`) as any;\n        setLikes(data.likes || []);\n        \n        // Calculate reaction counts\n        const counts: Record<ReactionType, number> = {\n          LIKE: 0,\n          CELEBRATE: 0,\n          SUPPORT: 0,\n          INSIGHTFUL: 0,\n          CURIOUS: 0,\n        };\n        data.likes?.forEach((like: LikeUser) => {\n          if (like.reactionType && counts[like.reactionType] !== undefined) {\n            counts[like.reactionType]++;\n          }\n        });\n        setReactionCounts(counts);\n      } catch (error) {\n        console.error('Error fetching likes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [isOpen, postId]);\n\n  const filteredLikes = selectedFilter === 'ALL' \n    ? likes \n    : likes.filter(like => like.reactionType === selectedFilter);\n\n  // Get reactions with counts > 0\n  const activeReactions = REACTIONS.filter(r => reactionCounts[r.type] > 0);\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Reactions\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n              </button>\n            </div>\n\n            {/* Reaction Filter Tabs */}\n            <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedFilter('ALL')}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                  selectedFilter === 'ALL'\n                    ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                }`}\n              >\n                All\n                <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                  {totalCount}\n                </span>\n              </button>\n\n              {activeReactions.map((reaction) => {\n                const Icon = reaction.icon;\n                const count = reactionCounts[reaction.type];\n                \n                return (\n                  <button\n                    key={reaction.type}\n                    onClick={() => setSelectedFilter(reaction.type)}\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                      selectedFilter === reaction.type\n                        ? `${reaction.bgColor} ${reaction.color}`\n                        : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                      {count}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* User List */}\n            <div className=\"overflow-y-auto max-h-[50vh]\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filteredLikes.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-neutral-400\">\n                  No reactions yet\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n                  {filteredLikes.map((like) => {\n                    const reactionConfig = getReactionConfig(like.reactionType);\n                    const Icon = reactionConfig.icon;\n                    \n                    return (\n                      <Link\n                        key={like.id}\n                        href={`/profile/${like.username}`}\n                        onClick={onClose}\n                        className=\"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n                      >\n                        {/* Avatar with Reaction Badge */}\n                        <div className=\"relative\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                            {like.profileImage ? (\n                              <Image\n                                src={like.profileImage}\n                                alt={like.name}\n                                width={48}\n                                height={48}\n                                className=\"object-cover w-full h-full\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300\">\n                                {like.name.charAt(0).toUpperCase()}\n                              </div>\n                            )}\n                          </div>\n                          {/* Reaction Badge */}\n                          <div className={`absolute -bottom-1 -right-1 p-1 rounded-full ${reactionConfig.bgColor} border-2 border-white dark:border-neutral-900`}>\n                            <Icon className={`w-3 h-3 ${reactionConfig.color}`} />\n                          </div>\n                        </div>\n\n                        {/* User Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n                            {like.name}\n                          </p>\n                          {like.headline && (\n                            <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">\n                              {like.headline}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Connect Button (optional, can be added later) */}\n                        {/* <button className=\"px-4 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors\">\n                          Connect\n                        </button> */}\n                      </Link>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useEffect","motion","AnimatePresence","X","Loader2","Image","Link","getReactionConfig","REACTIONS","ReactionType","apiClient","LikeUser","id","username","name","profileImage","headline","reactionType","createdAt","LikeListModalProps","isOpen","onClose","postId","totalCount","LikeListModal","likes","setLikes","loading","setLoading","selectedFilter","setSelectedFilter","reactionCounts","setReactionCounts","Record","LIKE","CELEBRATE","SUPPORT","INSIGHTFUL","CURIOUS","fetchLikes","data","get","counts","forEach","like","undefined","error","console","filteredLikes","filter","activeReactions","r","type","opacity","scale","y","damping","stiffness","map","reaction","Icon","icon","count","bgColor","color","length","reactionConfig","charAt","toUpperCase"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2057, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/reports/ReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Flag, AlertTriangle, Loader2, CheckCircle } from 'lucide-react';\nimport { reportAPI, ReportReason } from '@/lib/api/reports';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'post' | 'comment' | 'user' | 'group' | 'chat';\n  targetId: string;\n  targetName?: string;\n  conversationId?: string; // For chat reports\n  reportedUserId?: string; // For chat reports\n}\n\nexport default function ReportModal({\n  isOpen,\n  onClose,\n  type,\n  targetId,\n  targetName,\n  conversationId,\n  reportedUserId,\n}: ReportModalProps) {\n  const [reasons, setReasons] = useState<ReportReason[]>([]);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchingReasons, setFetchingReasons] = useState(true);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchReasons = async () => {\n      try {\n        const response = await reportAPI.getReasons();\n        setReasons(response.reasons);\n      } catch (err) {\n        console.error('Failed to fetch report reasons:', err);\n      } finally {\n        setFetchingReasons(false);\n      }\n    };\n\n    if (isOpen) {\n      fetchReasons();\n      // Reset state\n      setSelectedReason('');\n      setDescription('');\n      setSuccess(false);\n      setError('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = async () => {\n    if (!selectedReason) {\n      setError('Please select a reason');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = {\n        reason: selectedReason,\n        description: description.trim() || undefined,\n      };\n\n      switch (type) {\n        case 'post':\n          await reportAPI.reportPost(targetId, data);\n          break;\n        case 'comment':\n          await reportAPI.reportComment(targetId, data);\n          break;\n        case 'user':\n          await reportAPI.reportUser(targetId, data);\n          break;\n        case 'group':\n          await reportAPI.reportGroup(targetId, data);\n          break;\n        case 'chat':\n          if (!conversationId || !reportedUserId) {\n            throw new Error('Missing conversation or user info');\n          }\n          await reportAPI.reportChatUser(conversationId, {\n            ...data,\n            reportedUserId,\n          });\n          break;\n      }\n\n      setSuccess(true);\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTitle = () => {\n    switch (type) {\n      case 'post':\n        return 'Report Post';\n      case 'comment':\n        return 'Report Comment';\n      case 'user':\n        return `Report ${targetName || 'User'}`;\n      case 'group':\n        return 'Report Group';\n      case 'chat':\n        return `Report ${targetName || 'User'}`;\n      default:\n        return 'Report';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        {/* Backdrop */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"relative w-full max-w-md mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-full\">\n                <Flag className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                {getTitle()}\n              </h2>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {success ? (\n              <div className=\"text-center py-8\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\n                  <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Report Submitted\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Thank you for helping keep our community safe. We'll review your report shortly.\n                </p>\n              </div>\n            ) : fetchingReasons ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Why are you reporting this {type}? Your report will be reviewed by our team.\n                </p>\n\n                {/* Reason Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Select a reason <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {reasons.map((reason) => (\n                      <label\n                        key={reason.value}\n                        className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                          selectedReason === reason.value\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"reason\"\n                          value={reason.value}\n                          checked={selectedReason === reason.value}\n                          onChange={(e) => setSelectedReason(e.target.value)}\n                          className=\"mt-1 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <div>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {reason.label}\n                          </span>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                            {reason.description}\n                          </p>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Additional Details */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional details (optional)\n                  </label>\n                  <textarea\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Provide any additional context that might help us review this report...\"\n                    rows={3}\n                    maxLength={500}\n                    className=\"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                  />\n                  <p className=\"text-xs text-gray-400 text-right\">\n                    {description.length}/500\n                  </p>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm\">\n                    <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                    {error}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!success && (\n            <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading || !selectedReason}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>\n                    <Flag className=\"w-4 h-4\" />\n                    Submit Report\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":["useState","useEffect","X","Flag","AlertTriangle","Loader2","CheckCircle","reportAPI","ReportReason","motion","AnimatePresence","ReportModalProps","isOpen","onClose","type","targetId","targetName","conversationId","reportedUserId","ReportModal","reasons","setReasons","selectedReason","setSelectedReason","description","setDescription","loading","setLoading","fetchingReasons","setFetchingReasons","success","setSuccess","error","setError","fetchReasons","response","getReasons","err","console","handleSubmit","data","reason","trim","undefined","reportPost","reportComment","reportUser","reportGroup","Error","reportChatUser","setTimeout","getTitle","opacity","scale","map","value","e","target","label","length"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2560, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  ThumbsUp,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n  Pencil,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { toggleSavePost } from '@/lib/api/saved';\nimport { \n  likePost as socketLikePost, \n  reactToPost as socketReactToPost,\n  votePoll as socketVotePoll,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { \n  ReactionPicker, \n  ReactionSummaryDisplay, \n  getReactionConfig,\n} from './ReactionPicker';\nimport { FormattedContent } from './FormattedContent';\nimport { EditPostModal } from './EditPostModal';\nimport { LikeListModal } from './LikeListModal';\nimport ReportModal from '@/components/reports/ReportModal';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number, reactionType?: ReactionType | null, reactionSummary?: ReactionSummaryType[]) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onEdit?: (postId: string, updatedPost: Post) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onEdit,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [currentReaction, setCurrentReaction] = useState<ReactionType | null>(post.userReactionType || null);\n  const [reactionSummary, setReactionSummary] = useState<ReactionSummaryType[]>(post.reactionSummary || []);\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\n  const [showLikeListModal, setShowLikeListModal] = useState(false);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n  \n  // Sync like state with real-time updates from parent\n  useEffect(() => {\n    setIsLiked(post.isLiked);\n    setLikesCount(post.likesCount);\n    setCurrentReaction(post.userReactionType || null);\n    setReactionSummary(post.reactionSummary || []);\n  }, [post.isLiked, post.likesCount, post.userReactionType, post.reactionSummary]);\n  \n  // Sync poll options with real-time updates from parent\n  useEffect(() => {\n    if (post.pollOptions) {\n      setPollOptions(post.pollOptions);\n    }\n  }, [post.pollOptions]);\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle quick like (default LIKE reaction)\n  const handleLike = async () => {\n    if (currentReaction === 'LIKE') {\n      // Remove reaction\n      handleReaction('LIKE');\n    } else {\n      // Add LIKE reaction\n      handleReaction('LIKE');\n    }\n  };\n\n  // Handle reaction selection\n  const handleReaction = async (reactionType: ReactionType) => {\n    const wasLiked = isLiked;\n    const oldReaction = currentReaction;\n    const oldCount = likesCount;\n    \n    let newLiked: boolean;\n    let newCount: number;\n    let newReaction: ReactionType | null;\n    \n    if (currentReaction === reactionType) {\n      // Remove reaction (clicking same reaction again)\n      newLiked = false;\n      newCount = likesCount - 1;\n      newReaction = null;\n    } else if (currentReaction) {\n      // Change reaction (already reacted, changing type)\n      newLiked = true;\n      newCount = likesCount; // Count stays same\n      newReaction = reactionType;\n    } else {\n      // Add new reaction\n      newLiked = true;\n      newCount = likesCount + 1;\n      newReaction = reactionType;\n    }\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    setCurrentReaction(newReaction);\n    onLikeUpdate?.(post.id, newLiked, newCount, newReaction, reactionSummary);\n    \n    try {\n      // Use WebSocket for real-time\n      socketReactToPost(post.id, reactionType);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(wasLiked);\n        setLikesCount(oldCount);\n        setCurrentReaction(oldReaction);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share\n  const handleShare = async () => {\n    const url = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: post.articleTitle || `Post by ${post.author.name}`,\n          text: post.content?.slice(0, 100) || '',\n          url,\n        });\n      } catch (err) {\n        // User cancelled or error\n      }\n    } else {\n      // Copy to clipboard\n      await navigator.clipboard.writeText(url);\n      // Could show a toast here\n    }\n  };\n\n  // Handle save/unsave\n  const handleSave = async () => {\n    try {\n      const response = await toggleSavePost(post.id);\n      if (response && typeof response.saved === 'boolean') {\n        setIsSaved(response.saved);\n      } else {\n        // Fallback: toggle local state\n        setIsSaved(!isSaved);\n      }\n    } catch (error) {\n      console.error('Error toggling save:', error);\n      // Optimistically toggle on error for better UX\n      setIsSaved(!isSaved);\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[600px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>\n              {post.linkDomain || (post.linkUrl ? (() => {\n                try {\n                  return new URL(post.linkUrl).hostname;\n                } catch {\n                  return 'Link';\n                }\n              })() : 'Link')}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: '',\n      PROMOTION: '',\n      GRADUATION: '',\n      CERTIFICATION: '',\n      WORK_ANNIVERSARY: '',\n      BIRTHDAY: '',\n      JOB_CHANGE: '',\n      NEW_POSITION: '',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || '' : '';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()}  {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? `  ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost && (\n                <>\n                  <button\n                    onClick={() => {\n                      setShowEditModal(true);\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                    Edit post\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleDelete();\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete post\n                  </button>\n                </>\n              )}\n              \n              {!isOwnPost && (\n                <button\n                  onClick={() => {\n                    setShowReportModal(true);\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <FormattedContent \n            content={post.content} \n            className=\"text-gray-900 dark:text-white\"\n          />\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <ReactionSummaryDisplay \n              reactionSummary={reactionSummary}\n              totalCount={likesCount}\n              onClick={() => setShowLikeListModal(true)}\n            />\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {post.commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {post.commentsCount} comment{post.commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        {/* Reaction Button with Picker */}\n        <div \n          className=\"relative\"\n          onMouseEnter={() => setShowReactionPicker(true)}\n          onMouseLeave={() => setShowReactionPicker(false)}\n        >\n          <button\n            onClick={handleLike}\n            className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n              isLiked && currentReaction\n                ? `${getReactionConfig(currentReaction).color} ${getReactionConfig(currentReaction).bgColor}`\n                : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n            }`}\n          >\n            {currentReaction ? (\n              <>\n                {React.createElement(getReactionConfig(currentReaction).icon, { \n                  className: `w-5 h-5 ${isLiked ? 'fill-current' : ''}` \n                })}\n                <span className=\"text-sm font-medium\">{getReactionConfig(currentReaction).label}</span>\n              </>\n            ) : (\n              <>\n                <ThumbsUp className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">Like</span>\n              </>\n            )}\n          </button>\n          \n          <ReactionPicker\n            isOpen={showReactionPicker}\n            currentReaction={currentReaction}\n            onSelect={handleReaction}\n            onClose={() => setShowReactionPicker(false)}\n          />\n        </div>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={handleSave}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n\n      {/* Like List Modal */}\n      <LikeListModal\n        isOpen={showLikeListModal}\n        onClose={() => setShowLikeListModal(false)}\n        postId={post.id}\n        totalCount={likesCount}\n      />\n\n      {/* Edit Post Modal */}\n      <EditPostModal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        post={post}\n        onPostUpdated={(updatedPost) => {\n          onEdit?.(post.id, updatedPost);\n        }}\n      />\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"post\"\n        targetId={post.id}\n        targetName={`Post by ${post.author.name}`}\n      />\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":["React","useState","useRef","useEffect","motion","Link","ThumbsUp","MessageCircle","Share2","Bookmark","MoreHorizontal","ExternalLink","FileText","Play","Pause","Volume2","VolumeX","ChevronLeft","ChevronRight","Trash2","Flag","Copy","Pencil","formatDistanceToNow","Post","PollOption","toggleLike","votePoll","deletePost","toggleSavePost","likePost","socketLikePost","reactToPost","socketReactToPost","socketVotePoll","useAuth","ReactionPicker","ReactionSummaryDisplay","getReactionConfig","FormattedContent","EditPostModal","LikeListModal","ReportModal","ReactionType","ReactionSummary","ReactionSummaryType","PostCardProps","post","onLikeUpdate","postId","liked","count","reactionType","reactionSummary","onPollUpdate","options","onDelete","onEdit","updatedPost","onCommentClick","highlightCommentId","PostCard","user","isLiked","setIsLiked","likesCount","setLikesCount","currentReaction","setCurrentReaction","userReactionType","setReactionSummary","showReactionPicker","setShowReactionPicker","showLikeListModal","setShowLikeListModal","isSaved","setIsSaved","showMenu","setShowMenu","showEditModal","setShowEditModal","showReportModal","setShowReportModal","selectedPollOption","setSelectedPollOption","userVotedOptionId","pollOptions","setPollOptions","currentImageIndex","setCurrentImageIndex","videoRef","HTMLVideoElement","isPlaying","setIsPlaying","isMuted","setIsMuted","isVideoInView","setIsVideoInView","isOwnPost","id","author","type","current","observer","IntersectionObserver","entry","isIntersecting","play","catch","pause","threshold","observe","disconnect","handleLike","handleReaction","wasLiked","oldReaction","oldCount","newLiked","newCount","newReaction","error","err","handlePollVote","optionId","showResultsBeforeVote","updatedOptions","map","opt","votes","totalVotes","reduce","sum","optionsWithPercentage","percentage","Math","round","console","handleDelete","confirm","handleShare","url","window","location","origin","navigator","share","title","articleTitle","name","text","content","slice","clipboard","writeText","handleSave","response","saved","renderContent","renderImageContent","renderVideoContent","renderLinkContent","renderPollContent","renderArticleContent","renderCelebrationContent","renderDocumentContent","images","mediaUrls","length","display","mainImage","thumbnails","filter","_","i","prev","img","index","actualIndex","videoUrl","videoThumbnail","undefined","e","stopPropagation","muted","videoDuration","floor","String","padStart","linkUrl","linkImage","linkTitle","linkDescription","linkDomain","URL","hostname","hasVoted","some","showResults","isPollEnded","pollEndsAt","Date","option","isSelected","width","duration","addSuffix","articleCoverImage","articleTags","tag","articleReadTime","celebrationEmojis","Record","NEW_JOB","PROMOTION","GRADUATION","CERTIFICATION","WORK_ANNIVERSARY","BIRTHDAY","JOB_CHANGE","NEW_POSITION","emoji","celebrationType","replace","toLowerCase","c","toUpperCase","documentUrl","documentName","documentType","documentSize","toFixed","documentPages","opacity","y","username","profileImage","charAt","headline","createdAt","commentsCount","color","bgColor","createElement","icon","className","label"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3913, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/Comments.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  ChevronDown,\n  ChevronUp,\n  Send,\n  Loader2,\n  X,\n  CornerDownRight,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Comment } from '@/types/post';\nimport { getComments, searchUsersForMention } from '@/lib/api/posts';\nimport { createComment, likeComment as socketLikeComment, joinPostRoom, leavePostRoom, initializeSocket, getSocket } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { MentionUser } from '@/types/post';\n\ninterface CommentsProps {\n  postId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  highlightCommentId?: string;\n  onCommentCountChange?: (count: number) => void;\n}\n\ninterface CommentItemProps {\n  comment: Comment;\n  postId: string;\n  depth: number;\n  highlightId?: string;\n  onReply: (parentId: string, parentAuthor: string) => void;\n}\n\nfunction CommentItem({ comment, postId, depth, highlightId, onReply }: CommentItemProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(comment.isLiked);\n  const [likesCount, setLikesCount] = useState(comment.likesCount);\n  const [showReplies, setShowReplies] = useState(depth < 2);\n  const [replies, setReplies] = useState<Comment[]>([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [hasMoreReplies, setHasMoreReplies] = useState(comment.replyCount > 0);\n  const [replyCount, setReplyCount] = useState(comment.replyCount);\n  \n  const commentRef = useRef<HTMLDivElement>(null);\n  const isHighlighted = highlightId === comment.id;\n\n  // Sync with parent state when comment prop changes (from real-time updates)\n  useEffect(() => {\n    setIsLiked(comment.isLiked);\n    setLikesCount(comment.likesCount);\n  }, [comment.isLiked, comment.likesCount]);\n\n  // Listen for real-time reply updates\n  useEffect(() => {\n    const socket = getSocket();\n    \n    const handleCommentCreated = (data: { postId: string; comment: any; commentsCount: number }) => {\n      if (data.postId !== postId || data.comment.parentId !== comment.id) return;\n      \n      // New reply to this comment\n      setReplies(prev => {\n        if (prev.some(r => r.id === data.comment.id)) return prev;\n        return [data.comment, ...prev];\n      });\n      setReplyCount(prev => prev + 1);\n      setHasMoreReplies(true);\n    };\n    \n    const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n      // Update this comment's likes\n      if (data.commentId === comment.id) {\n        setLikesCount(data.likesCount);\n        if (data.userId === user?.id) {\n          setIsLiked(data.liked);\n        }\n      }\n      // Update nested replies' likes\n      setReplies(prev => prev.map(r => \n        r.id === data.commentId \n          ? { ...r, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : r.isLiked }\n          : r\n      ));\n    };\n    \n    socket?.on('comment:created', handleCommentCreated);\n    socket?.on('comment:liked', handleCommentLiked);\n    \n    return () => {\n      socket?.off('comment:created', handleCommentCreated);\n      socket?.off('comment:liked', handleCommentLiked);\n    };\n  }, [postId, comment.id, user?.id]);\n\n  // Scroll to highlighted comment\n  useEffect(() => {\n    if (isHighlighted && commentRef.current) {\n      commentRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }, [isHighlighted]);\n\n  // Load replies\n  const loadReplies = async () => {\n    if (loadingReplies || replies.length >= comment.replyCount) return;\n    \n    setLoadingReplies(true);\n    try {\n      const response = await getComments(postId, comment.id, 1, 10);\n      setReplies(response.comments);\n      setHasMoreReplies(response.hasMore);\n    } catch (error) {\n      console.error('Error loading replies:', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  // Handle like\n  const handleLike = () => {\n    const newLiked = !isLiked;\n    setIsLiked(newLiked);\n    setLikesCount(prev => newLiked ? prev + 1 : prev - 1);\n    \n    try {\n      socketLikeComment(comment.id, postId);\n    } catch (error) {\n      // Revert on error\n      setIsLiked(!newLiked);\n      setLikesCount(likesCount);\n    }\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    const parts = text.split(/(@\\w+)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        return (\n          <Link\n            key={index}\n            href={`/profile/${part.slice(1)}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <div\n      ref={commentRef}\n      className={`${depth > 0 ? 'ml-8 border-l-2 border-gray-100 dark:border-neutral-800 pl-4' : ''}`}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`py-3 transition-colors ${\n          isHighlighted ? 'bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 rounded-lg' : ''\n        }`}\n      >\n        <div className=\"flex gap-3\">\n          {/* Avatar */}\n          <Link href={`/profile/${comment.author.username}`} className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n              {comment.author.profileImage ? (\n                <img\n                  src={comment.author.profileImage}\n                  alt={comment.author.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                  {comment.author.name.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n          </Link>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"bg-gray-100 dark:bg-neutral-800 rounded-2xl px-4 py-2\">\n              <Link\n                href={`/profile/${comment.author.username}`}\n                className=\"font-semibold text-sm text-gray-900 dark:text-white hover:underline\"\n              >\n                {comment.author.name}\n              </Link>\n              <p className=\"text-sm text-gray-700 dark:text-neutral-300 whitespace-pre-wrap\">\n                {parseContent(comment.content)}\n              </p>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center gap-4 mt-1 ml-2 text-xs\">\n              <span className=\"text-gray-500 dark:text-neutral-500\">\n                {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n              </span>\n              \n              <button\n                onClick={handleLike}\n                className={`font-semibold transition-colors ${\n                  isLiked ? 'text-red-500' : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n                }`}\n              >\n                Like{likesCount > 0 && ` (${likesCount})`}\n              </button>\n              \n              <button\n                onClick={() => onReply(comment.id, comment.author.username)}\n                className=\"font-semibold text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors\"\n              >\n                Reply\n              </button>\n            </div>\n            \n            {/* Replies toggle */}\n            {replyCount > 0 && (\n              <button\n                onClick={() => {\n                  setShowReplies(!showReplies);\n                  if (!showReplies && replies.length === 0) {\n                    loadReplies();\n                  }\n                }}\n                className=\"flex items-center gap-1 mt-2 ml-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300\"\n              >\n                <CornerDownRight className=\"w-3 h-3\" />\n                {showReplies ? 'Hide' : 'View'} {replyCount} {replyCount === 1 ? 'reply' : 'replies'}\n                {showReplies ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Replies */}\n        <AnimatePresence>\n          {showReplies && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-2\"\n            >\n              {loadingReplies && replies.length === 0 ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\n                </div>\n              ) : (\n                replies.map((reply) => (\n                  <CommentItem\n                    key={reply.id}\n                    comment={reply}\n                    postId={postId}\n                    depth={depth + 1}\n                    highlightId={highlightId}\n                    onReply={onReply}\n                  />\n                ))\n              )}\n              \n              {hasMoreReplies && replies.length > 0 && (\n                <button\n                  onClick={loadReplies}\n                  disabled={loadingReplies}\n                  className=\"ml-8 mt-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700\"\n                >\n                  {loadingReplies ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    'Load more replies'\n                  )}\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n\nexport function Comments({ postId, isOpen, onClose, highlightCommentId, onCommentCountChange }: CommentsProps) {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  \n  // Reply state\n  const [replyingTo, setReplyingTo] = useState<{ id: string; username: string } | null>(null);\n  \n  // Input state\n  const [newComment, setNewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const commentsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Join post room for real-time updates\n  useEffect(() => {\n    if (isOpen) {\n      joinPostRoom(postId);\n      \n      // Set up real-time comment listeners\n      const socket = getSocket();\n      \n      const handleCommentCreated = (data: { postId: string; comment: any; commentsCount: number }) => {\n        if (data.postId !== postId) return;\n        \n        // Add new comment to the list (avoid duplicates)\n        setComments(prev => {\n          // Check if comment already exists (from optimistic update)\n          const exists = prev.some(c => c.id === data.comment.id || c.id.startsWith('temp-'));\n          if (exists) {\n            // Replace temp comment with real one\n            return prev.map(c => c.id.startsWith('temp-') ? data.comment : c);\n          }\n          // Add to top if it's a new top-level comment\n          if (!data.comment.parentId) {\n            return [data.comment, ...prev];\n          }\n          return prev;\n        });\n        \n        onCommentCountChange?.(data.commentsCount);\n      };\n      \n      const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n        // Update comment likes in real-time\n        setComments(prev => prev.map(c => \n          c.id === data.commentId \n            ? { ...c, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : c.isLiked }\n            : c\n        ));\n      };\n      \n      socket?.on('comment:created', handleCommentCreated);\n      socket?.on('comment:liked', handleCommentLiked);\n      \n      return () => {\n        leavePostRoom(postId);\n        socket?.off('comment:created', handleCommentCreated);\n        socket?.off('comment:liked', handleCommentLiked);\n      };\n    }\n  }, [isOpen, postId, user?.id, onCommentCountChange]);\n\n  // Fetch comments\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getComments(postId, undefined, 1, 20);\n        setComments(response.comments);\n        setHasMore(response.hasMore);\n        setPage(1);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchComments();\n  }, [isOpen, postId]);\n\n  // Load more comments\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    try {\n      const nextPage = page + 1;\n      const response = await getComments(postId, undefined, nextPage, 20);\n      setComments(prev => [...prev, ...response.comments]);\n      setHasMore(response.hasMore);\n      setPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more comments:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Handle reply click\n  const handleReply = (parentId: string, username: string) => {\n    setReplyingTo({ id: parentId, username });\n    setNewComment(`@${username} `);\n    setMentions([]);\n    inputRef.current?.focus();\n  };\n\n  // Cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n    setNewComment('');\n    setMentions([]);\n  };\n\n  // Search mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (error) {\n      console.error('Error searching mentions:', error);\n    }\n  }, []);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setNewComment(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : '';\n      \n      if (query) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (mentionUser: MentionUser) => {\n    const lastAtIndex = newComment.lastIndexOf('@');\n    const updatedComment = newComment.slice(0, lastAtIndex) + `@${mentionUser.username} `;\n    setNewComment(updatedComment);\n    setMentions([...mentions, mentionUser.id]);\n    setShowMentionDropdown(false);\n    inputRef.current?.focus();\n  };\n\n  // Submit comment\n  const handleSubmit = async () => {\n    if (!newComment.trim() || isSubmitting) return;\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Use WebSocket for real-time\n      createComment(postId, newComment.trim(), replyingTo?.id, mentions);\n      \n      // Optimistic update\n      const tempComment: Comment = {\n        id: `temp-${Date.now()}`,\n        postId,\n        parentId: replyingTo?.id || null,\n        author: {\n          id: user!.id,\n          username: user!.username!,\n          name: user!.name!,\n          profileImage: user?.profileImage || null,\n          headline: null,\n        },\n        content: newComment.trim(),\n        contentType: 'text',\n        mentions,\n        likesCount: 0,\n        replyCount: 0,\n        isLiked: false,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n      \n      if (replyingTo) {\n        // Add to replies - will be handled by real-time update\n      } else {\n        setComments(prev => [tempComment, ...prev]);\n      }\n      \n      onCommentCountChange?.(comments.length + 1);\n      setNewComment('');\n      setMentions([]);\n      setReplyingTo(null);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Panel */}\n        <motion.div\n          initial={{ y: '100%' }}\n          animate={{ y: 0 }}\n          exit={{ y: '100%' }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full sm:max-w-xl h-[80vh] sm:h-[70vh] sm:rounded-t-2xl sm:rounded-b-2xl bg-white dark:bg-neutral-900 flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Comments</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n          \n          {/* Comments List */}\n          <div\n            ref={commentsContainerRef}\n            className=\"flex-1 overflow-y-auto p-4\"\n          >\n            {loading ? (\n              <div className=\"flex justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n              </div>\n            ) : comments.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageCircle className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n                <p className=\"text-gray-500 dark:text-neutral-400\">No comments yet</p>\n                <p className=\"text-sm text-gray-400 dark:text-neutral-500\">Be the first to comment!</p>\n              </div>\n            ) : (\n              <>\n                {comments.map((comment) => (\n                  <CommentItem\n                    key={comment.id}\n                    comment={comment}\n                    postId={postId}\n                    depth={0}\n                    highlightId={highlightCommentId}\n                    onReply={handleReply}\n                  />\n                ))}\n                \n                {hasMore && (\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"w-full py-3 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 transition-colors\"\n                  >\n                    {loadingMore ? (\n                      <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" />\n                    ) : (\n                      'Load more comments'\n                    )}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n          \n          {/* Reply indicator */}\n          {replyingTo && (\n            <div className=\"px-4 py-2 bg-gray-50 dark:bg-neutral-800/50 border-t border-gray-200 dark:border-neutral-800 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                Replying to <span className=\"font-semibold text-gray-700 dark:text-neutral-300\">@{replyingTo.username}</span>\n              </span>\n              <button onClick={cancelReply} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          \n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n            <div className=\"relative\">\n              {/* Mention Dropdown */}\n              {showMentionDropdown && (\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 max-h-40 overflow-y-auto bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg z-10\">\n                  {mentionResults.map((mentionUser) => (\n                    <button\n                      key={mentionUser.id}\n                      onClick={() => insertMention(mentionUser)}\n                      className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors\"\n                    >\n                      <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-600\">\n                        {mentionUser.profileImage && (\n                          <img src={mentionUser.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                        )}\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{mentionUser.name}</p>\n                        <p className=\"text-xs text-gray-500\">@{mentionUser.username}</p>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              <div className=\"flex items-end gap-2\">\n                <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user?.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={newComment}\n                  onChange={handleInputChange}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSubmit();\n                    }\n                  }}\n                  placeholder=\"Write a comment...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 resize-none outline-none focus:ring-2 focus:ring-blue-500 max-h-24\"\n                  style={{ minHeight: '40px' }}\n                />\n                \n                <button\n                  onClick={handleSubmit}\n                  disabled={!newComment.trim() || isSubmitting}\n                  className=\"p-2 rounded-full bg-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors\"\n                >\n                  {isSubmitting ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Send className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default Comments;\n"],"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","Link","Heart","MessageCircle","ChevronDown","ChevronUp","Send","Loader2","X","CornerDownRight","formatDistanceToNow","Comment","getComments","searchUsersForMention","createComment","likeComment","socketLikeComment","joinPostRoom","leavePostRoom","initializeSocket","getSocket","useAuth","MentionUser","CommentsProps","postId","isOpen","onClose","highlightCommentId","onCommentCountChange","count","CommentItemProps","comment","depth","highlightId","onReply","parentId","parentAuthor","CommentItem","user","isLiked","setIsLiked","likesCount","setLikesCount","showReplies","setShowReplies","replies","setReplies","loadingReplies","setLoadingReplies","hasMoreReplies","setHasMoreReplies","replyCount","setReplyCount","commentRef","HTMLDivElement","isHighlighted","id","socket","handleCommentCreated","data","commentsCount","prev","some","r","handleCommentLiked","commentId","userId","liked","map","on","off","current","scrollIntoView","behavior","block","loadReplies","length","response","comments","hasMore","error","console","handleLike","newLiked","parseContent","text","parts","split","part","index","startsWith","slice","opacity","y","author","username","profileImage","name","charAt","toUpperCase","content","Date","createdAt","addSuffix","height","reply","Comments","setComments","loading","setLoading","setHasMore","page","setPage","loadingMore","setLoadingMore","replyingTo","setReplyingTo","newComment","setNewComment","isSubmitting","setIsSubmitting","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","mentions","setMentions","inputRef","HTMLTextAreaElement","commentsContainerRef","exists","c","fetchComments","undefined","loadMore","nextPage","handleReply","focus","cancelReply","searchMentions","query","results","handleInputChange","e","ChangeEvent","value","target","lastAtIndex","lastIndexOf","textAfterAt","spaceIndex","indexOf","insertMention","mentionUser","updatedComment","handleSubmit","trim","tempComment","now","headline","contentType","toISOString","updatedAt","type","damping","stiffness","stopPropagation","key","shiftKey","preventDefault","minHeight"],"mappings":";;;;;;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;;AACvD,OAAOC,IAAI,MAAM,WAAW;;;;AAC5B,SACEC,KAAK,EACLC,aAAa,EACbC,WAAW,EACXC,SAAS,EACTC,IAAI,EACJC,OAAO,EACPC,CAAC,EACDC,eAAe,QACV,cAAc;;;;AACrB,SAASC,mBAAmB,QAAQ,UAAU;AAE9C,SAASE,WAAW,EAAEC,qBAAqB,QAAQ,iBAAiB;AACpE,SAASC,aAAa,EAAEC,WAAW,IAAIC,iBAAiB,EAAEC,YAAY,EAAEC,aAAa,EAAEC,gBAAgB,EAAEC,SAAS,QAAQ,cAAc;AACxI,SAASC,OAAO,QAAQ,oBAAoB;;;AAnB5C,YAAY;;;;;;;;;AAsCZ,qBAAqB,EAAEU,OAAO,EAAEP,MAAM,EAAEQ,KAAK,EAAEC,WAAW,EAAEC,OAAAA,EAA2B,EAAE;;IACvF,MAAM,EAAEI,IAAAA,EAAM,OAAGjB;IACjB,MAAM,CAACkB,OAAO,EAAEC,UAAU,CAAC,GAAG7C,6KAAQ,EAACoC,OAAO,CAACQ,OAAO,CAAC;IACvD,MAAM,CAACE,UAAU,EAAEC,aAAa,CAAC,GAAG/C,6KAAQ,EAACoC,OAAO,CAACU,UAAU,CAAC;IAChE,MAAM,CAACE,WAAW,EAAEC,cAAc,CAAC,OAAGjD,yKAAQ,EAACqC,KAAK,GAAG,CAAC,CAAC;IACzD,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,OAAGnD,yKAAQ,CAACgB,CAAW,EAAE,CAAC,GAAP,EAAE,CAAC;IACjD,MAAM,CAACoC,cAAc,EAAEC,iBAAiB,CAAC,OAAGrD,yKAAQ,EAAC,KAAK,CAAC;IAC3D,MAAM,CAACsD,cAAc,EAAEC,iBAAiB,CAAC,OAAGvD,yKAAQ,EAACoC,OAAO,CAACoB,UAAU,GAAG,CAAC,CAAC;IAC5E,MAAM,CAACA,UAAU,EAAEC,aAAa,CAAC,OAAGzD,yKAAQ,EAACoC,OAAO,CAACoB,UAAU,CAAC;IAEhE,MAAME,UAAU,OAAGxD,uKAAM,CAACyD,CAAgB,IAAI,CAAC,QAAP,CAAC;IACzC,MAAMC,aAAa,GAAGtB,WAAW,KAAKF,OAAO,CAACyB,EAAE;IAEhD,4EAAA;IACA5D,8KAAS;iCAAC,MAAM;YACd4C,UAAU,CAACT,OAAO,CAACQ,OAAO,CAAC;YAC3BG,aAAa,CAACX,OAAO,CAACU,UAAU,CAAC;QACnC,CAAC;gCAAE;QAACV,OAAO,CAACQ,OAAO;QAAER,OAAO,CAACU,UAAU;KAAC,CAAC;IAEzC,qCAAA;IACA7C,8KAAS;iCAAC,MAAM;YACd,MAAM6D,MAAM,OAAGrC,oIAAS,CAAC,CAAC;YAE1B,MAAMsC,oBAAoB;8DAAGA,CAACC,IAAI,EAAE;oBAClC,IAAIA,IAAI,CAACnC,MAAM,KAAKA,MAAM,IAAImC,IAAI,CAAC5B,OAAO,CAACI,QAAQ,KAAKJ,OAAO,CAACyB,EAAE,EAAE;oBAEpE,4BAAA;oBACAV,UAAU;uEAACe,IAAI,IAAI;4BACjB,IAAIA,IAAI,CAACC,IAAI;+EAACC,CAAC,GAAIA,CAAC,CAACP,EAAE,KAAKG,IAAI,CAAC5B,OAAO,CAACyB,EAAE,CAAC;8EAAE,OAAOK,IAAI;4BACzD,OAAO;gCAACF,IAAI,CAAC5B,OAAO,EAAE;mCAAG8B,IAAI;6BAAC;wBAChC,CAAC,CAAC;;oBACFT,aAAa;uEAACS,MAAI,GAAIA,MAAI,GAAG,CAAC,CAAC;;oBAC/BX,iBAAiB,CAAC,IAAI,CAAC;gBACzB,CAAC;;YAED,MAAMc,kBAAkB;4DAAGA,CAACL,MAAI,EAAE;oBAChC,8BAAA;oBACA,IAAIA,MAAI,CAACM,SAAS,KAAKlC,OAAO,CAACyB,EAAE,EAAE;wBACjCd,aAAa,CAACiB,MAAI,CAAClB,UAAU,CAAC;wBAC9B,IAAIkB,MAAI,CAACO,MAAM,KAAK5B,IAAI,EAAEkB,EAAE,EAAE;4BAC5BhB,UAAU,CAACmB,MAAI,CAACQ,KAAK,CAAC;wBACxB;oBACF;oBACA,+BAAA;oBACArB,UAAU;qEAACe,MAAI,GAAIA,MAAI,CAACO,GAAG;4EAACL,GAAC,IAC3BA,GAAC,CAACP,EAAE,KAAKG,MAAI,CAACM,SAAS,GACnB;wCAAE,GAAGF,GAAC;wCAAEtB,UAAU,EAAEkB,MAAI,CAAClB,UAAU;wCAAEF,OAAO,EAAEoB,MAAI,CAACO,MAAM,KAAK5B,IAAI,EAAEkB,EAAE,GAAGG,MAAI,CAACQ,KAAK,GAAGJ,GAAC,CAACxB,OAAAA;oCAAQ,CAAC,GACjGwB,GACN,CAAC,CAAC;;;gBACJ,CAAC;;YAEDN,MAAM,EAAEY,EAAE,CAAC,iBAAiB,EAAEX,oBAAoB,CAAC;YACnDD,MAAM,EAAEY,EAAE,CAAC,eAAe,EAAEL,kBAAkB,CAAC;YAE/C;yCAAO,MAAM;oBACXP,MAAM,EAAEa,GAAG,CAAC,iBAAiB,EAAEZ,oBAAoB,CAAC;oBACpDD,MAAM,EAAEa,GAAG,CAAC,eAAe,EAAEN,kBAAkB,CAAC;gBAClD,CAAC;;QACH,CAAC;gCAAE;QAACxC,MAAM;QAAEO,OAAO,CAACyB,EAAE;QAAElB,IAAI,EAAEkB,EAAE;KAAC,CAAC;IAElC,gCAAA;IACA5D,8KAAS;iCAAC,MAAM;YACd,IAAI2D,aAAa,IAAIF,UAAU,CAACkB,OAAO,EAAE;gBACvClB,UAAU,CAACkB,OAAO,CAACC,cAAc,CAAC;oBAAEC,QAAQ,EAAE,QAAQ;oBAAEC,KAAK,EAAE;gBAAS,CAAC,CAAC;YAC5E;QACF,CAAC;gCAAE;QAACnB,aAAa;KAAC,CAAC;IAEnB,eAAA;IACA,MAAMoB,WAAW,GAAG,MAAAA,CAAA,KAAY;QAC9B,IAAI5B,cAAc,IAAIF,OAAO,CAAC+B,MAAM,IAAI7C,OAAO,CAACoB,UAAU,EAAE;QAE5DH,iBAAiB,CAAC,IAAI,CAAC;QACvB,IAAI;YACF,MAAM6B,QAAQ,GAAG,UAAMjE,4IAAW,EAACY,MAAM,EAAEO,OAAO,CAACyB,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;YAC7DV,UAAU,CAAC+B,QAAQ,CAACC,QAAQ,CAAC;YAC7B5B,iBAAiB,CAAC2B,QAAQ,CAACE,OAAO,CAAC;QACrC,CAAC,CAAC,OAAOC,KAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAChD,CAAC,QAAS;YACRhC,iBAAiB,CAAC,KAAK,CAAC;QAC1B;IACF,CAAC;IAED,cAAA;IACA,MAAMkC,UAAU,GAAGA,CAAA,KAAM;QACvB,MAAMC,QAAQ,GAAG,CAAC5C,OAAO;QACzBC,UAAU,CAAC2C,QAAQ,CAAC;QACpBzC,aAAa,EAACmB,MAAI,GAAIsB,QAAQ,GAAGtB,MAAI,GAAG,CAAC,GAAGA,MAAI,GAAG,CAAC,CAAC;QAErD,IAAI;gBACF7C,sIAAiB,EAACe,OAAO,CAACyB,EAAE,EAAEhC,MAAM,CAAC;QACvC,CAAC,CAAC,OAAOwD,OAAK,EAAE;YACd,kBAAA;YACAxC,UAAU,CAAC,CAAC2C,QAAQ,CAAC;YACrBzC,aAAa,CAACD,UAAU,CAAC;QAC3B;IACF,CAAC;IAED,6BAAA;IACA,MAAM2C,YAAY,GAAGA,CAACC,IAAI,EAAE,MAAM,KAAK;QACrC,MAAMC,KAAK,GAAGD,IAAI,CAACE,KAAK,CAAC,SAAS,CAAC;QACnC,OAAOD,KAAK,CAAClB,GAAG,CAAC,CAACoB,IAAI,EAAEC,KAAK,KAAK;YAChC,IAAID,IAAI,CAACE,UAAU,CAAC,GAAG,CAAC,EAAE;gBACxB,qBACE,6LAAC,0KAAI,CACH,GAAG,CAAC;oBACJ,IAAI,CAAC,CAAC,CAAA,SAAA,EAAYF,IAAI,CAACG,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC;oBAClC,SAAS,EAAC,kDAAkD;8BAE3DH,IAAI;mBAJAC,KAAK,CAAC;;;;;YAOjB;YACA,qBAAO,6LAAC,IAAI,CAAC,GAAG,CAAC;0BAASD,IAAI,CAAC,EAAE,IAAI,CAAC;eAApBC,KAAK,CAAC,CAAC;;;;;QAC3B,CAAC,CAAC;IACJ,CAAC;IAED,qBACE,6LAAC,GAAG;QACF,GAAG,CAAC,CAACpC,UAAU,CAAC;QAChB,SAAS,CAAC,CAAC,GAAGrB,KAAK,GAAG,CAAC,GAAG,8DAA8D,GAAG,EAAE,EAAE,CAAC;gCAEhG,6LAAC,uMAAM,CAAC,GAAG;YACT,OAAO,CAAC,CAAC;gBAAE4D,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;YAAG,CAAC,CAAC;YAC/B,OAAO,CAAC,CAAC;gBAAED,OAAO,EAAE,CAAC;gBAAEC,CAAC,EAAE;YAAE,CAAC,CAAC;YAC9B,SAAS,CAAC,CAAC,CAAA,uBAAA,EACTtC,aAAa,GAAG,0DAA0D,GAAG,EAAE,EAC/E,CAAC;;8BAEH,6LAAC,GAAG;oBAAC,SAAS,EAAC,YAAY;;sCAEzB,6LAAC,0KAAI;4BAAC,IAAI,CAAC,CAAC,CAAA,SAAA,EAAYxB,OAAO,CAAC+D,MAAM,CAACC,QAAQ,EAAE,CAAC;4BAAC,SAAS,EAAC,eAAe;oDAC1E,6LAAC,GAAG;gCAAC,SAAS,EAAC,sEAAsE;0CAClFhE,OAAO,CAAC+D,MAAM,CAACE,YAAY,iBAC1B,6LAAC,GAAG;oCACF,GAAG,CAAC,CAACjE,OAAO,CAAC+D,MAAM,CAACE,YAAY,CAAC;oCACjC,GAAG,CAAC,CAACjE,OAAO,CAAC+D,MAAM,CAACG,IAAI,CAAC;oCACzB,SAAS,EAAC,4BAA4B,GACtC;;;;;yDAEF,6LAAC,GAAG;oCAAC,SAAS,EAAC,gFAAgF;8CAC5FlE,OAAO,CAAC+D,MAAM,CAACG,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;;;;;;;;;;;;;;;;sCAOpD,6LAAC,GAAG;4BAAC,SAAS,EAAC,gBAAgB;;8CAC7B,6LAAC,GAAG;oCAAC,SAAS,EAAC,uDAAuD;;sDACpE,6LAAC,0KAAI;4CACH,IAAI,CAAC,CAAC,CAAA,SAAA,EAAYpE,OAAO,CAAC+D,MAAM,CAACC,QAAQ,EAAE,CAAC;4CAC5C,SAAS,EAAC,qEAAqE;sDAE9EhE,OAAO,CAAC+D,MAAM,CAACG,IAAI;;;;;;sDAEtB,6LAAC,CAAC;4CAAC,SAAS,EAAC,iEAAiE;sDAC3Eb,YAAY,CAACrD,OAAO,CAACqE,OAAO,CAAC;;;;;;;;;;;;8CAKlC,6LAAC,GAAG;oCAAC,SAAS,EAAC,2CAA2C;;sDACxD,6LAAC,IAAI;4CAAC,SAAS,EAAC,qCAAqC;0DAClD1F,4KAAmB,EAAC,IAAI2F,IAAI,CAACtE,OAAO,CAACuE,SAAS,CAAC,EAAE;gDAAEC,SAAS,EAAE;4CAAK,CAAC,CAAC;;;;;;sDAGxE,6LAAC,MAAM;4CACL,OAAO,CAAC,CAACrB,UAAU,CAAC;4CACpB,SAAS,CAAC,CAAC,CAAA,gCAAA,EACT3C,OAAO,GAAG,cAAc,GAAG,qFAAqF,EAChH,CAAC;;gDAAA;gDAEEE,UAAU,GAAG,CAAC,IAAI,CAAA,EAAA,EAAKA,UAAU,CAAA,CAAA,CAAG;;;;;;;sDAG3C,6LAAC,MAAM;4CACL,OAAO,CAAC,CAAC,IAAMP,OAAO,CAACH,OAAO,CAACyB,EAAE,EAAEzB,OAAO,CAAC+D,MAAM,CAACC,QAAQ,CAAC,CAAC;4CAC5D,SAAS,EAAC,qHAAqH;sDAAA;;;;;;;;;;;;gCAOlI5C,UAAU,GAAG,CAAC,kBACb,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC,MAAM;wCACbP,cAAc,CAAC,CAACD,WAAW,CAAC;wCAC5B,IAAI,CAACA,WAAW,IAAIE,OAAO,CAAC+B,MAAM,KAAK,CAAC,EAAE;4CACxCD,WAAW,CAAC,CAAC;wCACf;oCACF,CAAC,CAAC;oCACF,SAAS,EAAC,uIAAuI;;sDAEjJ,6LAAC,sPAAe;4CAAC,SAAS,EAAC,SAAS;;;;;;wCACnChC,WAAW,GAAG,MAAM,GAAG,MAAM;wCAAC,CAAC;wCAACQ,UAAU;wCAAC,CAAC;wCAACA,UAAU,KAAK,CAAC,GAAG,OAAO,GAAG,SAAS;wCACnFR,WAAW,iBAAG,6LAAC,gOAAS;4CAAC,SAAS,EAAC,SAAS,GAAG;;;;;iEAAG,6LAAC,sOAAW;4CAAC,SAAS,EAAC,SAAS,GAAG;;;;;;;;;;;;;;;;;;;;;;;;8BAO9F,6LAAC,+MAAe;8BACbA,WAAW,kBACV,6LAAC,uMAAM,CAAC,GAAG;wBACT,OAAO,CAAC,CAAC;4BAAEiD,OAAO,EAAE,CAAC;4BAAEY,MAAM,EAAE;wBAAE,CAAC,CAAC;wBACnC,OAAO,CAAC,CAAC;4BAAEZ,OAAO,EAAE,CAAC;4BAAEY,MAAM,EAAE;wBAAO,CAAC,CAAC;wBACxC,IAAI,CAAC,CAAC;4BAAEZ,OAAO,EAAE,CAAC;4BAAEY,MAAM,EAAE;wBAAE,CAAC,CAAC;wBAChC,SAAS,EAAC,MAAM;;4BAEfzD,cAAc,IAAIF,OAAO,CAAC+B,MAAM,KAAK,CAAC,iBACrC,6LAAC,GAAG;gCAAC,SAAS,EAAC,0BAA0B;wDACvC,6LAAC,+NAAO;oCAAC,SAAS,EAAC,oCAAoC;;;;;;;;;;uCAGzD/B,OAAO,CAACuB,GAAG,EAAEqC,KAAK,iBAChB,6LAAC,WAAW,CACV,GAAG,CAAC;oCACJ,OAAO,CAAC,CAACA,KAAK,CAAC;oCACf,MAAM,CAAC,CAACjF,MAAM,CAAC;oCACf,KAAK,CAAC,CAACQ,KAAK,GAAG,CAAC,CAAC;oCACjB,WAAW,CAAC,CAACC,WAAW,CAAC;oCACzB,OAAO,CAAC,CAACC,OAAO,CAAC,GAEpB,CACF;mCARUuE,KAAK,CAACjD,EAAE,CAAC;;;;;4BAUnBP,cAAc,IAAIJ,OAAO,CAAC+B,MAAM,GAAG,CAAC,kBACnC,6LAAC,MAAM;gCACL,OAAO,CAAC,CAACD,WAAW,CAAC;gCACrB,QAAQ,CAAC,CAAC5B,cAAc,CAAC;gCACzB,SAAS,EAAC,sFAAsF;0CAE/FA,cAAc,iBACb,6LAAC,+NAAO;oCAAC,SAAS,EAAC,sBAAsB,GAAG;;;;;2CAE5C,mBACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnB;;;mJAvP0B,CAAC,CAAC;;;KADnBV,WAAWA;AA0Pb,kBAAkB,EAAEb,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,kBAAkB,EAAEC,oBAAAA,EAAqC,EAAE;;IAC7G,MAAM,EAAEU,IAAAA,EAAM;IACd,MAAM,CAACwC,QAAQ,EAAE6B,WAAW,CAAC,OAAGhH,yKAAQ,CAACgB,CAAW,EAAE,CAAC,GAAP,EAAE,CAAC;IACnD,MAAM,CAACiG,OAAO,EAAEC,UAAU,CAAC,OAAGlH,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACoF,OAAO,EAAE+B,UAAU,CAAC,OAAGnH,yKAAQ,EAAC,KAAK,CAAC;IAC7C,MAAM,CAACoH,IAAI,EAAEC,OAAO,CAAC,OAAGrH,yKAAQ,EAAC,CAAC,CAAC;IACnC,MAAM,CAACsH,WAAW,EAAEC,cAAc,CAAC,OAAGvH,yKAAQ,EAAC,KAAK,CAAC;IAErD,cAAA;IACA,MAAM,CAACwH,UAAU,EAAEC,aAAa,CAAC,GAAGzH,6KAAQ,CAAC,CAAyC,IAAI,CAAC;IAE3F,cAAA;IACA,MAAM,CAAC0H,UAAU,EAAEC,aAAa,CAAC,OAAG3H,yKAAQ,EAAC,EAAE,CAAC;IAChD,MAAM,CAAC4H,YAAY,EAAEC,eAAe,CAAC,OAAG7H,yKAAQ,EAAC,KAAK,CAAC;IAEvD,gBAAA;IACA,MAAM,CAAC8H,YAAY,EAAEC,eAAe,CAAC,OAAG/H,yKAAQ,EAAC,EAAE,CAAC;IACpD,MAAM,CAACgI,cAAc,EAAEC,iBAAiB,CAAC,OAAGjI,yKAAQ,CAAC2B,CAAe,EAAE,CAAC,OAAP,EAAE,CAAC;IACnE,MAAM,CAACuG,mBAAmB,EAAEC,sBAAsB,CAAC,OAAGnI,yKAAQ,EAAC,KAAK,CAAC;IACrE,MAAM,CAACoI,QAAQ,EAAEC,WAAW,CAAC,OAAGrI,yKAAQ,CAAC,CAAU,EAAE,CAAC,EAAP,EAAE,CAAC;IAElD,MAAMsI,QAAQ,OAAGpI,uKAAM,CAACqI,CAAqB,IAAI,CAAC,aAAP,CAAC;IAC5C,MAAMC,oBAAoB,OAAGtI,uKAAM,CAACyD,CAAgB,IAAI,CAAC,QAAP,CAAC;IAEnD,uCAAA;QACA1D,0KAAS;8BAAC,MAAM;YACd,IAAI6B,MAAM,EAAE;oBACVR,uIAAY,EAACO,MAAM,CAAC;gBAEpB,qCAAA;gBACA,MAAMiC,MAAM,OAAGrC,oIAAS,CAAC,CAAC;gBAE1B,MAAMsC,oBAAoB;+DAAGA,CAACC,IAAI,EAAE;wBAClC,IAAIA,IAAI,CAACnC,MAAM,KAAKA,MAAM,EAAE;wBAE5B,iDAAA;wBACAmF,WAAW;wEAAC9C,IAAI,IAAI;gCAClB,2DAAA;gCACA,MAAMuE,MAAM,GAAGvE,IAAI,CAACC,IAAI;uFAACuE,CAAC,GAAIA,CAAC,CAAC7E,EAAE,KAAKG,IAAI,CAAC5B,OAAO,CAACyB,EAAE,IAAI6E,CAAC,CAAC7E,EAAE,CAACkC,UAAU,CAAC,OAAO,CAAC,CAAC;;gCACnF,IAAI0C,MAAM,EAAE;oCACV,qCAAA;oCACA,OAAOvE,IAAI,CAACO,GAAG;oFAACiE,GAAC,GAAIA,GAAC,CAAC7E,EAAE,CAACkC,UAAU,CAAC,OAAO,CAAC,GAAG/B,IAAI,CAAC5B,OAAO,GAAGsG,GAAC,CAAC;;gCACnE;gCACA,6CAAA;gCACA,IAAI,CAAC1E,IAAI,CAAC5B,OAAO,CAACI,QAAQ,EAAE;oCAC1B,OAAO;wCAACwB,IAAI,CAAC5B,OAAO,EAAE;2CAAG8B,IAAI;qCAAC;gCAChC;gCACA,OAAOA,IAAI;4BACb,CAAC,CAAC;;wBAEFjC,oBAAoB,GAAG+B,IAAI,CAACC,aAAa,CAAC;oBAC5C,CAAC;;gBAED,MAAMI,kBAAkB;6DAAGA,CAACL,MAAI,EAAE;wBAChC,oCAAA;wBACAgD,WAAW;qEAAC9C,MAAI,IAAIA,MAAI,CAACO,GAAG;8EAACiE,GAAC,GAC5BA,GAAC,CAAC7E,EAAE,KAAKG,MAAI,CAACM,SAAS,GACnB;4CAAE,GAAGoE,GAAC;4CAAE5F,UAAU,EAAEkB,MAAI,CAAClB,UAAU;4CAAEF,OAAO,EAAEoB,MAAI,CAACO,MAAM,KAAK5B,IAAI,EAAEkB,EAAE,GAAGG,MAAI,CAACQ,KAAK,GAAGkE,GAAC,CAAC9F,OAAAA;wCAAQ,CAAC,GACjG8F,GACN,CAAC,CAAC;;;oBACJ,CAAC;;gBAED5E,MAAM,EAAEY,EAAE,CAAC,iBAAiB,EAAEX,oBAAoB,CAAC;gBACnDD,MAAM,EAAEY,EAAE,CAAC,eAAe,EAAEL,kBAAkB,CAAC;gBAE/C;0CAAO,MAAM;4BACX9C,wIAAa,EAACM,MAAM,CAAC;wBACrBiC,MAAM,EAAEa,GAAG,CAAC,iBAAiB,EAAEZ,oBAAoB,CAAC;wBACpDD,MAAM,EAAEa,GAAG,CAAC,eAAe,EAAEN,kBAAkB,CAAC;oBAClD,CAAC;;YACH;QACF,CAAC;6BAAE;QAACvC,MAAM;QAAED,MAAM;QAAEc,IAAI,EAAEkB,EAAE;QAAE5B,oBAAoB;KAAC,CAAC;IAEpD,iBAAA;IACAhC,8KAAS;8BAAC,MAAM;YACd,IAAI,CAAC6B,MAAM,EAAE;YAEb,MAAM6G,aAAa;oDAAG,MAAAA,CAAA,KAAY;oBAChCzB,UAAU,CAAC,IAAI,CAAC;oBAChB,IAAI;wBACF,MAAMhC,QAAQ,GAAG,UAAMjE,4IAAW,EAACY,MAAM,EAAE+G,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC;wBAC5D5B,WAAW,CAAC9B,QAAQ,CAACC,QAAQ,CAAC;wBAC9BgC,UAAU,CAACjC,QAAQ,CAACE,OAAO,CAAC;wBAC5BiC,OAAO,CAAC,CAAC,CAAC;oBACZ,CAAC,CAAC,OAAOhC,KAAK,EAAE;wBACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;oBAClD,CAAC,QAAS;wBACR6B,UAAU,CAAC,KAAK,CAAC;oBACnB;gBACF,CAAC;;YAEDyB,aAAa,CAAC,CAAC;QACjB,CAAC;6BAAE;QAAC7G,MAAM;QAAED,MAAM;KAAC,CAAC;IAEpB,qBAAA;IACA,MAAMgH,QAAQ,GAAG,MAAAA,CAAA,KAAY;QAC3B,IAAIvB,WAAW,IAAI,CAAClC,OAAO,EAAE;QAE7BmC,cAAc,CAAC,IAAI,CAAC;QACpB,IAAI;YACF,MAAMuB,QAAQ,GAAG1B,IAAI,GAAG,CAAC;YACzB,MAAMlC,UAAQ,GAAG,UAAMjE,4IAAW,EAACY,MAAM,EAAE+G,SAAS,EAAEE,QAAQ,EAAE,EAAE,CAAC;YACnE9B,WAAW,EAAC9C,MAAI,GAAI,CAAC;uBAAGA,MAAI,EAAE;uBAAGgB,UAAQ,CAACC,QAAQ;iBAAC,CAAC;YACpDgC,UAAU,CAACjC,UAAQ,CAACE,OAAO,CAAC;YAC5BiC,OAAO,CAACyB,QAAQ,CAAC;QACnB,CAAC,CAAC,OAAOzD,OAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,OAAK,CAAC;QACtD,CAAC,QAAS;YACRkC,cAAc,CAAC,KAAK,CAAC;QACvB;IACF,CAAC;IAED,qBAAA;IACA,MAAMwB,WAAW,GAAGA,CAACvG,QAAQ,EAAE,AAAQ4D,MAAF,EAAU,EAAE,MAAM,KAAK;QAC1DqB,aAAa,CAAC;YAAE5D,EAAE,EAAErB,QAAQ;YAAE4D;QAAS,CAAC,CAAC;QACzCuB,aAAa,CAAC,CAAA,CAAA,EAAIvB,QAAQ,CAAA,CAAA,CAAG,CAAC;QAC9BiC,WAAW,CAAC,EAAE,CAAC;QACfC,QAAQ,CAAC1D,OAAO,EAAEoE,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED,eAAA;IACA,MAAMC,WAAW,GAAGA,CAAA,KAAM;QACxBxB,aAAa,CAAC,IAAI,CAAC;QACnBE,aAAa,CAAC,EAAE,CAAC;QACjBU,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC;IAED,kBAAA;IACA,MAAMa,cAAc,OAAG/I,4KAAW;gDAAC,OAAOgJ,KAAK,EAAE,MAAM,KAAK;YAC1D,IAAIA,KAAK,CAAClE,MAAM,GAAG,CAAC,EAAE;gBACpBgD,iBAAiB,CAAC,EAAE,CAAC;gBACrBE,sBAAsB,CAAC,KAAK,CAAC;gBAC7B;YACF;YAEA,IAAI;gBACF,MAAMiB,OAAO,GAAG,UAAMlI,sJAAqB,EAACiI,KAAK,CAAC;gBAClDlB,iBAAiB,CAACmB,OAAO,CAAC;gBAC1BjB,sBAAsB,CAACiB,OAAO,CAACnE,MAAM,GAAG,CAAC,CAAC;YAC5C,CAAC,CAAC,OAAOI,OAAK,EAAE;gBACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,OAAK,CAAC;YACnD;QACF,CAAC;+CAAE,EAAE,CAAC;IAEN,sBAAA;IACA,MAAMgE,iBAAiB,GAAGA,CAACC,CAAC,EAAEvJ,KAAK,CAACwJ,WAAW,CAAChB,mBAAmB,CAAC,KAAK;QACvE,MAAMiB,KAAK,GAAGF,CAAC,CAACG,MAAM,CAACD,KAAK;QAC5B7B,aAAa,CAAC6B,KAAK,CAAC;QAEpB,kBAAA;QACA,MAAME,WAAW,GAAGF,KAAK,CAACG,WAAW,CAAC,GAAG,CAAC;QAC1C,IAAID,WAAW,KAAK,CAAC,CAAC,EAAE;YACtB,MAAME,WAAW,GAAGJ,KAAK,CAACxD,KAAK,CAAC0D,WAAW,GAAG,CAAC,CAAC;YAChD,MAAMG,UAAU,GAAGD,WAAW,CAACE,OAAO,CAAC,GAAG,CAAC;YAC3C,MAAMX,OAAK,GAAGU,UAAU,KAAK,CAAC,CAAC,GAAGD,WAAW,GAAG,EAAE;YAElD,IAAIT,OAAK,EAAE;gBACTpB,eAAe,CAACoB,OAAK,CAAC;gBACtBD,cAAc,CAACC,OAAK,CAAC;YACvB,CAAC,MAAM;gBACLhB,sBAAsB,CAAC,KAAK,CAAC;YAC/B;QACF,CAAC,MAAM;YACLA,sBAAsB,CAAC,KAAK,CAAC;QAC/B;IACF,CAAC;IAED,iBAAA;IACA,MAAM4B,aAAa,GAAGA,CAACC,WAAW,EAAErI,WAAW,KAAK;QAClD,MAAM+H,aAAW,GAAGhC,UAAU,CAACiC,WAAW,CAAC,GAAG,CAAC;QAC/C,MAAMM,cAAc,GAAGvC,UAAU,CAAC1B,KAAK,CAAC,CAAC,EAAE0D,aAAW,CAAC,GAAG,CAAA,CAAA,EAAIM,WAAW,CAAC5D,QAAQ,CAAA,CAAA,CAAG;QACrFuB,aAAa,CAACsC,cAAc,CAAC;QAC7B5B,WAAW,CAAC,CAAC;eAAGD,QAAQ;YAAE4B,WAAW,CAACnG,EAAE;SAAC,CAAC;QAC1CsE,sBAAsB,CAAC,KAAK,CAAC;QAC7BG,QAAQ,CAAC1D,OAAO,EAAEoE,KAAK,CAAC,CAAC;IAC3B,CAAC;IAED,iBAAA;IACA,MAAMkB,YAAY,GAAG,MAAAA,CAAA,KAAY;QAC/B,IAAI,CAACxC,UAAU,CAACyC,IAAI,CAAC,CAAC,IAAIvC,YAAY,EAAE;QAExCC,eAAe,CAAC,IAAI,CAAC;QAErB,IAAI;YACF,8BAAA;gBACA1G,wIAAa,EAACU,MAAM,EAAE6F,UAAU,CAACyC,IAAI,CAAC,CAAC,EAAE3C,UAAU,EAAE3D,EAAE,EAAEuE,QAAQ,CAAC;YAElE,oBAAA;YACA,MAAMgC,WAAW,EAAEpJ,CAAU,MAAH;gBACxB6C,EAAE,EAAE,CAAA,KAAA,EAAQ6C,IAAI,CAAC2D,GAAG,CAAC,CAAC,EAAE;gBACxBxI,MAAM;gBACNW,QAAQ,EAAEgF,UAAU,EAAE3D,EAAE,IAAI,IAAI;gBAChCsC,MAAM,EAAE;oBACNtC,EAAE,EAAElB,IAAI,CAAC,AAACkB,EAAE;oBACZuC,QAAQ,EAAEzD,IAAI,CAAC,AAACyD,QAAQ,CAAC;oBACzBE,IAAI,EAAE3D,IAAI,CAAE2D,AAAD,IAAK,CAAC;oBACjBD,YAAY,EAAE1D,IAAI,EAAE0D,YAAY,IAAI,IAAI;oBACxCiE,QAAQ,EAAE;gBACZ,CAAC;gBACD7D,OAAO,EAAEiB,UAAU,CAACyC,IAAI,CAAC,CAAC;gBAC1BI,WAAW,EAAE,MAAM;gBACnBnC,QAAQ;gBACRtF,UAAU,EAAE,CAAC;gBACbU,UAAU,EAAE,CAAC;gBACbZ,OAAO,EAAE,KAAK;gBACd+D,SAAS,EAAE,IAAID,IAAI,CAAC,CAAC,CAAC8D,WAAW,CAAC,CAAC;gBACnCC,SAAS,EAAE,IAAI/D,IAAI,CAAC,CAAC,CAAC8D,WAAW,CAAC;YACpC,CAAC;YAED,IAAIhD,UAAU,EAAE;YACd,uDAAA;YAAA,CACD,MAAM;gBACLR,WAAW,CAAC9C,MAAI,IAAI;wBAACkG,WAAW,EAAE;2BAAGlG,MAAI;qBAAC,CAAC;YAC7C;YAEAjC,oBAAoB,GAAGkD,QAAQ,CAACF,MAAM,GAAG,CAAC,CAAC;YAC3C0C,aAAa,CAAC,EAAE,CAAC;YACjBU,WAAW,CAAC,EAAE,CAAC;YACfZ,aAAa,CAAC,IAAI,CAAC;QACrB,CAAC,CAAC,OAAOpC,OAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,OAAK,CAAC;QACjD,CAAC,QAAS;YACRwC,eAAe,CAAC,KAAK,CAAC;QACxB;IACF,CAAC;IAED,IAAI,CAAC/F,MAAM,EAAE,OAAO,IAAI;IAExB,qBACE,6LAAC,+MAAe;gCACd,6LAAC,uMAAM,CAAC,GAAG;YACT,OAAO,CAAC,CAAC;gBAAEmE,OAAO,EAAE;YAAE,CAAC,CAAC;YACxB,OAAO,CAAC,CAAC;gBAAEA,OAAO,EAAE;YAAE,CAAC,CAAC;YACxB,IAAI,CAAC,CAAC;gBAAEA,OAAO,EAAE;YAAE,CAAC,CAAC;YACrB,SAAS,EAAC,kEAAkE;YAC5E,OAAO,CAAC,CAAClE,OAAO,CAAC;;8BAGjB,6LAAC,GAAG;oBAAC,SAAS,EAAC,8BAA8B;;;;;;8BAG7C,6LAAC,uMAAM,CAAC,GAAG;oBACT,OAAO,CAAC,CAAC;wBAAEmE,CAAC,EAAE;oBAAO,CAAC,CAAC;oBACvB,OAAO,CAAC,CAAC;wBAAEA,CAAC,EAAE;oBAAE,CAAC,CAAC;oBAClB,IAAI,CAAC,CAAC;wBAAEA,CAAC,EAAE;oBAAO,CAAC,CAAC;oBACpB,UAAU,CAAC,CAAC;wBAAEwE,IAAI,EAAE,QAAQ;wBAAEC,OAAO,EAAE,EAAE;wBAAEC,SAAS,EAAE;oBAAI,CAAC,CAAC;oBAC5D,OAAO,CAAC,EAAEtB,GAAC,GAAKA,GAAC,CAACuB,eAAe,CAAC,CAAC,CAAC;oBACpC,SAAS,EAAC,+HAA+H;;sCAGzI,6LAAC,GAAG;4BAAC,SAAS,EAAC,wFAAwF;;8CACrG,6LAAC,EAAE;oCAAC,SAAS,EAAC,qDAAqD;8CAAC,QAAQ,EAAE,EAAE;;;;;;8CAChF,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC9I,OAAO,CAAC;oCACjB,SAAS,EAAC,gFAAgF;4DAE1F,6LAAC,oMAAC;wCAAC,SAAS,EAAC,uBAAuB;;;;;;;;;;;;;;;;;sCAKxC,6LAAC,GAAG;4BACF,GAAG,CAAC,CAACyG,oBAAoB,CAAC;4BAC1B,SAAS,EAAC,4BAA4B;sCAErCvB,OAAO,iBACN,6LAAC,GAAG;gCAAC,SAAS,EAAC,0BAA0B;wDACvC,6LAAC,+NAAO;oCAAC,SAAS,EAAC,oCAAoC;;;;;;;;;;uCAEvD9B,QAAQ,CAACF,MAAM,KAAK,CAAC,iBACvB,6LAAC,GAAG;gCAAC,SAAS,EAAC,kBAAkB;;kDAC/B,6LAAC,4OAAa;wCAAC,SAAS,EAAC,4DAA4D;;;;;;kDACrF,6LAAC,CAAC;wCAAC,SAAS,EAAC,qCAAqC;kDAAC,eAAe,EAAE,CAAC;;;;;;kDACrE,6LAAC,CAAC;wCAAC,SAAS,EAAC,6CAA6C;kDAAC,wBAAwB,EAAE,CAAC;;;;;;;;;;;qDAGxF;;oCACGE,QAAQ,CAACV,GAAG,EAAErC,OAAO,iBACpB,6LAAC,WAAW,CACV,GAAG,CAAC;4CACJ,OAAO,CAAC,CAACA,OAAO,CAAC;4CACjB,MAAM,CAAC,CAACP,MAAM,CAAC;4CACf,KAAK,CAAC,CAAC,CAAC,CAAC;4CACT,WAAW,CAAC,CAACG,kBAAkB,CAAC;4CAChC,OAAO,CAAC,CAAC+G,WAAW,CAAC,GAExB,CAAC;2CAPO3G,OAAO,CAACyB,EAAE,CAAC;;;;;oCASnBuB,OAAO,kBACN,6LAAC,MAAM;wCACL,OAAO,CAAC,CAACyD,QAAQ,CAAC;wCAClB,QAAQ,CAAC,CAACvB,WAAW,CAAC;wCACtB,SAAS,EAAC,0GAA0G;kDAEnHA,WAAW,iBACV,6LAAC,+NAAO;4CAAC,SAAS,EAAC,8BAA8B,GAAG;;;;;mDAEpD,oBACD;;;;;;;;;;;;;wBAQVE,UAAU,kBACT,6LAAC,GAAG;4BAAC,SAAS,EAAC,gIAAgI;;8CAC7I,6LAAC,IAAI;oCAAC,SAAS,EAAC,6CAA6C;;wCAAA;sDAC/C,6LAAC,IAAI;4CAAC,SAAS,EAAC,mDAAmD;;gDAAC,CAAC;gDAACA,UAAU,CAACpB,QAAQ,CAAC,EAAE,IAAI;;;;;;;;;;;;;8CAE9G,6LAAC,MAAM;oCAAC,OAAO,CAAC,CAAC6C,WAAW,CAAC;oCAAC,SAAS,EAAC,mCAAmC;4DACzE,6LAAC,oMAAC;wCAAC,SAAS,EAAC,SAAS;;;;;;;;;;;;;;;;;sCAM5B,6LAAC,GAAG;4BAAC,SAAS,EAAC,sDAAsD;oDACnE,6LAAC,GAAG;gCAAC,SAAS,EAAC,UAAU;;oCAEtBf,mBAAmB,kBAClB,6LAAC,GAAG;wCAAC,SAAS,EAAC,yKAAyK;kDACrLF,cAAc,CAACvD,GAAG,EAAEuF,aAAW,iBAC9B,6LAAC,MAAM,CACL,GAAG,CAAC;gDACJ,OAAO,CAAC,CAAC,IAAMD,aAAa,CAACC,aAAW,CAAC,CAAC;gDAC1C,SAAS,EAAC,wGAAwG;;kEAElH,6LAAC,GAAG;wDAAC,SAAS,EAAC,sEAAsE;kEAClFA,aAAW,CAAC3D,YAAY,kBACvB,6LAAC,GAAG;4DAAC,GAAG,CAAC,CAAC2D,aAAW,CAAC3D,YAAY,CAAC;4DAAC,GAAG,EAAC,EAAE;4DAAC,SAAS,EAAC,4BAA4B,GAClF;;;;;;;;;;;kEAEH,6LAAC,GAAG;wDAAC,SAAS,EAAC,WAAW;;0EACxB,6LAAC,CAAC;gEAAC,SAAS,EAAC,mDAAmD,CAAC;0EAAC2D,aAAW,CAAC1D,IAAI,CAAC,EAAE,CAAC;;;;;;0EACtF,6LAAC,CAAC;gEAAC,SAAS,EAAC,uBAAuB;;oEAAC,CAAC;oEAAC0D,aAAW,CAAC5D,QAAQ,CAAC,EAAE,CAAC;;;;;;;;;;;;;;+CAX5D4D,aAAW,CAACnG,EAAE,CAAC;;;;;;;;;;kDAkB5B,6LAAC,GAAG;wCAAC,SAAS,EAAC,sBAAsB;;0DACnC,6LAAC,GAAG;gDAAC,SAAS,EAAC,oFAAoF;0DAChGlB,IAAI,EAAE0D,YAAY,iBACjB,6LAAC,GAAG;oDAAC,GAAG,CAAC,CAAC1D,IAAI,CAAC0D,YAAY,CAAC;oDAAC,GAAG,EAAC,EAAE;oDAAC,SAAS,EAAC,4BAA4B,GAAG;;;;;yEAE7E,6LAAC,GAAG;oDAAC,SAAS,EAAC,gFAAgF;8DAC5F1D,IAAI,EAAE2D,IAAI,EAAEC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;;;;;;;;;;;0DAK1C,6LAAC,QAAQ;gDACP,GAAG,CAAC,CAAC8B,QAAQ,CAAC;gDACd,KAAK,CAAC,CAACZ,UAAU,CAAC;gDAClB,QAAQ,CAAC,CAAC2B,iBAAiB,CAAC;gDAC5B,SAAS,CAAC,EAAEC,GAAC,IAAK;oDAChB,IAAIA,GAAC,CAACwB,GAAG,KAAK,OAAO,IAAI,CAACxB,GAAC,CAACyB,QAAQ,EAAE;wDACpCzB,GAAC,CAAC0B,cAAc,CAAC,CAAC;wDAClBd,YAAY,CAAC,CAAC;oDAChB;gDACF,CAAC,CAAC;gDACF,WAAW,EAAC,oBAAoB;gDAChC,IAAI,CAAC,CAAC,CAAC,CAAC;gDACR,SAAS,EAAC,qLAAqL;gDAC/L,KAAK,CAAC,CAAC;oDAAEe,SAAS,EAAE;gDAAO,CAAC,CAAC;;;;;;0DAG/B,6LAAC,MAAM;gDACL,OAAO,CAAC,CAACf,YAAY,CAAC;gDACtB,QAAQ,CAAC,CAAC,CAACxC,UAAU,CAACyC,IAAI,CAAC,CAAC,IAAIvC,YAAY,CAAC;gDAC7C,SAAS,EAAC,6HAA6H;0DAEtIA,YAAY,iBACX,6LAAC,+NAAO;oDAAC,SAAS,EAAC,sBAAsB,GAAG;;;;;yEAE5C,6LAAC,6MAAI;oDAAC,SAAS,EAAC,SAAS,GAC1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASnB;;;QAnYmBlG,2IAAO,CAAC,CAAC;;;MADZqF,QAAQA;uCAsYTA,QAAQ","ignoreList":[]}},
    {"offset": {"line": 4975, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ImageEditor.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  RotateCw,\n  RotateCcw,\n  FlipHorizontal,\n  FlipVertical,\n  Crop,\n  Sun,\n  Contrast,\n  Droplets,\n  Check,\n  Undo2,\n  Download,\n} from 'lucide-react';\n\ninterface ImageEditorProps {\n  isOpen: boolean;\n  imageUrl: string;\n  onClose: () => void;\n  onSave: (editedImage: Blob) => void;\n}\n\ninterface ImageFilters {\n  brightness: number;\n  contrast: number;\n  saturation: number;\n}\n\nexport function ImageEditor({ isOpen, imageUrl, onClose, onSave }: ImageEditorProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [image, setImage] = useState<HTMLImageElement | null>(null);\n  const [rotation, setRotation] = useState(0);\n  const [flipH, setFlipH] = useState(false);\n  const [flipV, setFlipV] = useState(false);\n  const [filters, setFilters] = useState<ImageFilters>({\n    brightness: 100,\n    contrast: 100,\n    saturation: 100,\n  });\n  const [activeTab, setActiveTab] = useState<'adjust' | 'filters'>('adjust');\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Preset filters\n  const presetFilters = [\n    { name: 'Original', brightness: 100, contrast: 100, saturation: 100 },\n    { name: 'Vivid', brightness: 105, contrast: 115, saturation: 130 },\n    { name: 'Warm', brightness: 105, contrast: 100, saturation: 110 },\n    { name: 'Cool', brightness: 100, contrast: 105, saturation: 90 },\n    { name: 'B&W', brightness: 100, contrast: 110, saturation: 0 },\n    { name: 'Vintage', brightness: 95, contrast: 90, saturation: 80 },\n    { name: 'Drama', brightness: 90, contrast: 130, saturation: 110 },\n    { name: 'Fade', brightness: 110, contrast: 85, saturation: 90 },\n  ];\n\n  // Load image when URL changes\n  useEffect(() => {\n    if (!imageUrl) return;\n    \n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => {\n      setImage(img);\n    };\n    img.src = imageUrl;\n  }, [imageUrl]);\n\n  // Draw image on canvas with transformations\n  useEffect(() => {\n    if (!image || !canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Calculate dimensions based on rotation\n    const isRotated90or270 = rotation === 90 || rotation === 270;\n    const displayWidth = isRotated90or270 ? image.height : image.width;\n    const displayHeight = isRotated90or270 ? image.width : image.height;\n\n    // Set canvas size\n    const maxWidth = 600;\n    const maxHeight = 500;\n    const scale = Math.min(maxWidth / displayWidth, maxHeight / displayHeight, 1);\n    \n    canvas.width = displayWidth * scale;\n    canvas.height = displayHeight * scale;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Apply transformations\n    ctx.save();\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate((rotation * Math.PI) / 180);\n    ctx.scale(flipH ? -1 : 1, flipV ? -1 : 1);\n\n    // Apply filters\n    ctx.filter = `brightness(${filters.brightness}%) contrast(${filters.contrast}%) saturate(${filters.saturation}%)`;\n\n    // Draw image centered\n    const drawWidth = image.width * scale;\n    const drawHeight = image.height * scale;\n    ctx.drawImage(image, -drawWidth / 2, -drawHeight / 2, drawWidth, drawHeight);\n\n    ctx.restore();\n  }, [image, rotation, flipH, flipV, filters]);\n\n  const handleRotateRight = () => {\n    setRotation((prev) => (prev + 90) % 360);\n  };\n\n  const handleRotateLeft = () => {\n    setRotation((prev) => (prev - 90 + 360) % 360);\n  };\n\n  const handleFlipHorizontal = () => {\n    setFlipH((prev) => !prev);\n  };\n\n  const handleFlipVertical = () => {\n    setFlipV((prev) => !prev);\n  };\n\n  const handleReset = () => {\n    setRotation(0);\n    setFlipH(false);\n    setFlipV(false);\n    setFilters({ brightness: 100, contrast: 100, saturation: 100 });\n  };\n\n  const handleSave = async () => {\n    if (!canvasRef.current || !image) return;\n    \n    setIsSaving(true);\n    \n    try {\n      // Create a full-resolution canvas for export\n      const exportCanvas = document.createElement('canvas');\n      const ctx = exportCanvas.getContext('2d');\n      if (!ctx) return;\n\n      const isRotated90or270 = rotation === 90 || rotation === 270;\n      exportCanvas.width = isRotated90or270 ? image.height : image.width;\n      exportCanvas.height = isRotated90or270 ? image.width : image.height;\n\n      ctx.translate(exportCanvas.width / 2, exportCanvas.height / 2);\n      ctx.rotate((rotation * Math.PI) / 180);\n      ctx.scale(flipH ? -1 : 1, flipV ? -1 : 1);\n      ctx.filter = `brightness(${filters.brightness}%) contrast(${filters.contrast}%) saturate(${filters.saturation}%)`;\n      ctx.drawImage(image, -image.width / 2, -image.height / 2);\n\n      exportCanvas.toBlob((blob) => {\n        if (blob) {\n          onSave(blob);\n        }\n        setIsSaving(false);\n      }, 'image/jpeg', 0.9);\n    } catch (error) {\n      console.error('Error saving image:', error);\n      setIsSaving(false);\n    }\n  };\n\n  const applyPresetFilter = (preset: typeof presetFilters[0]) => {\n    setFilters({\n      brightness: preset.brightness,\n      contrast: preset.contrast,\n      saturation: preset.saturation,\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.8)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-3xl max-h-[90vh] overflow-hidden rounded-2xl\"\n            style={{\n              background: '#1a1a1a',\n            }}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n              <h2 className=\"text-lg font-semibold text-white\">Edit Image</h2>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handleReset}\n                  className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors\"\n                >\n                  <Undo2 className=\"w-4 h-4\" />\n                  Reset\n                </button>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 rounded-full hover:bg-gray-700 transition-colors\"\n                >\n                  <X className=\"w-5 h-5 text-gray-300\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Canvas Preview */}\n            <div className=\"flex items-center justify-center p-6 bg-gray-900 min-h-[350px]\">\n              <canvas\n                ref={canvasRef}\n                className=\"max-w-full max-h-[350px] rounded-lg\"\n                style={{ boxShadow: '0 4px 20px rgba(0,0,0,0.5)' }}\n              />\n            </div>\n\n            {/* Transform Tools */}\n            <div className=\"flex items-center justify-center gap-4 p-4 border-t border-gray-700\">\n              <button\n                onClick={handleRotateLeft}\n                className=\"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                <RotateCcw className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Rotate Left</span>\n              </button>\n              <button\n                onClick={handleRotateRight}\n                className=\"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                <RotateCw className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Rotate Right</span>\n              </button>\n              <button\n                onClick={handleFlipHorizontal}\n                className={`flex flex-col items-center gap-1 p-3 rounded-lg transition-colors ${\n                  flipH ? 'bg-blue-600' : 'hover:bg-gray-700'\n                }`}\n              >\n                <FlipHorizontal className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Flip H</span>\n              </button>\n              <button\n                onClick={handleFlipVertical}\n                className={`flex flex-col items-center gap-1 p-3 rounded-lg transition-colors ${\n                  flipV ? 'bg-blue-600' : 'hover:bg-gray-700'\n                }`}\n              >\n                <FlipVertical className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Flip V</span>\n              </button>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"flex border-t border-gray-700\">\n              <button\n                onClick={() => setActiveTab('adjust')}\n                className={`flex-1 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'adjust'\n                    ? 'text-blue-400 border-b-2 border-blue-400'\n                    : 'text-gray-400 hover:text-gray-200'\n                }`}\n              >\n                Adjust\n              </button>\n              <button\n                onClick={() => setActiveTab('filters')}\n                className={`flex-1 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'filters'\n                    ? 'text-blue-400 border-b-2 border-blue-400'\n                    : 'text-gray-400 hover:text-gray-200'\n                }`}\n              >\n                Filters\n              </button>\n            </div>\n\n            {/* Adjustment Controls */}\n            {activeTab === 'adjust' && (\n              <div className=\"p-4 space-y-4\">\n                {/* Brightness */}\n                <div className=\"flex items-center gap-4\">\n                  <Sun className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Brightness</span>\n                      <span className=\"text-xs text-gray-400\">{filters.brightness}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"50\"\n                      max=\"150\"\n                      value={filters.brightness}\n                      onChange={(e) => setFilters({ ...filters, brightness: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n\n                {/* Contrast */}\n                <div className=\"flex items-center gap-4\">\n                  <Contrast className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Contrast</span>\n                      <span className=\"text-xs text-gray-400\">{filters.contrast}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"50\"\n                      max=\"150\"\n                      value={filters.contrast}\n                      onChange={(e) => setFilters({ ...filters, contrast: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n\n                {/* Saturation */}\n                <div className=\"flex items-center gap-4\">\n                  <Droplets className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Saturation</span>\n                      <span className=\"text-xs text-gray-400\">{filters.saturation}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"200\"\n                      value={filters.saturation}\n                      onChange={(e) => setFilters({ ...filters, saturation: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Filter Presets */}\n            {activeTab === 'filters' && (\n              <div className=\"p-4\">\n                <div className=\"grid grid-cols-4 gap-2\">\n                  {presetFilters.map((preset) => (\n                    <button\n                      key={preset.name}\n                      onClick={() => applyPresetFilter(preset)}\n                      className={`p-2 rounded-lg text-center transition-all ${\n                        filters.brightness === preset.brightness &&\n                        filters.contrast === preset.contrast &&\n                        filters.saturation === preset.saturation\n                          ? 'bg-blue-600 ring-2 ring-blue-400'\n                          : 'bg-gray-700 hover:bg-gray-600'\n                      }`}\n                    >\n                      <div \n                        className=\"w-full aspect-square rounded-lg mb-1 bg-gray-600\"\n                        style={{\n                          filter: `brightness(${preset.brightness}%) contrast(${preset.contrast}%) saturate(${preset.saturation}%)`,\n                          backgroundImage: image ? `url(${imageUrl})` : undefined,\n                          backgroundSize: 'cover',\n                          backgroundPosition: 'center',\n                        }}\n                      />\n                      <span className=\"text-xs text-gray-300\">{preset.name}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Footer */}\n            <div className=\"flex justify-end gap-3 p-4 border-t border-gray-700\">\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                disabled={isSaving}\n                className=\"flex items-center gap-2 px-6 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors disabled:opacity-50\"\n              >\n                {isSaving ? (\n                  <>Saving...</>\n                ) : (\n                  <>\n                    <Check className=\"w-4 h-4\" />\n                    Apply Changes\n                  </>\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useRef","useCallback","useEffect","motion","AnimatePresence","X","RotateCw","RotateCcw","FlipHorizontal","FlipVertical","Crop","Sun","Contrast","Droplets","Check","Undo2","Download","ImageEditorProps","isOpen","imageUrl","onClose","onSave","editedImage","Blob","ImageFilters","brightness","contrast","saturation","ImageEditor","canvasRef","HTMLCanvasElement","image","setImage","HTMLImageElement","rotation","setRotation","flipH","setFlipH","flipV","setFlipV","filters","setFilters","activeTab","setActiveTab","isSaving","setIsSaving","presetFilters","name","img","Image","crossOrigin","onload","src","current","canvas","ctx","getContext","isRotated90or270","displayWidth","height","width","displayHeight","maxWidth","maxHeight","scale","Math","min","clearRect","save","translate","rotate","PI","filter","drawWidth","drawHeight","drawImage","restore","handleRotateRight","prev","handleRotateLeft","handleFlipHorizontal","handleFlipVertical","handleReset","handleSave","exportCanvas","document","createElement","toBlob","blob","error","console","applyPresetFilter","preset","opacity","backgroundColor","e","stopPropagation","background","boxShadow","Number","target","value","map","backgroundImage","undefined","backgroundSize","backgroundPosition"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 5751, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/CreatePostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  FileText,\n  Link as LinkIcon,\n  BarChart3,\n  Sparkles,\n  Trophy,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Plus,\n  Trash2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { createPost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport { ImageEditor } from './ImageEditor';\nimport type { PostType, PostVisibility, CelebrationType, MentionUser } from '@/types/post';\n\ninterface CreatePostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onPostCreated?: () => void;\n}\n\nconst POST_TYPES = [\n  { type: 'TEXT' as PostType, icon: FileText, label: 'Text' },\n  { type: 'IMAGE' as PostType, icon: ImageIcon, label: 'Image' },\n  { type: 'VIDEO' as PostType, icon: Video, label: 'Video' },\n  { type: 'LINK' as PostType, icon: LinkIcon, label: 'Link' },\n  { type: 'POLL' as PostType, icon: BarChart3, label: 'Poll' },\n  { type: 'ARTICLE' as PostType, icon: Sparkles, label: 'Article' },\n  { type: 'CELEBRATION' as PostType, icon: Trophy, label: 'Celebration' },\n];\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst CELEBRATION_TYPES: { value: CelebrationType; label: string; emoji: string }[] = [\n  { value: 'NEW_JOB', label: 'Started a new job', emoji: '' },\n  { value: 'PROMOTION', label: 'Got promoted', emoji: '' },\n  { value: 'GRADUATION', label: 'Graduated', emoji: '' },\n  { value: 'CERTIFICATION', label: 'Earned a certification', emoji: '' },\n  { value: 'WORK_ANNIVERSARY', label: 'Work anniversary', emoji: '' },\n  { value: 'BIRTHDAY', label: 'Birthday', emoji: '' },\n];\n\nexport function CreatePostModal({ isOpen, onClose, onPostCreated }: CreatePostModalProps) {\n  const { user } = useAuth();\n  const [postType, setPostType] = useState<PostType>('TEXT');\n  const [content, setContent] = useState('');\n  const [visibility, setVisibility] = useState<PostVisibility>('PUBLIC');\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Image state\n  const [images, setImages] = useState<File[]>([]);\n  const [imagePreviews, setImagePreviews] = useState<string[]>([]);\n  const [editingImageIndex, setEditingImageIndex] = useState<number | null>(null);\n  \n  // Video state\n  const [video, setVideo] = useState<File | null>(null);\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\n  \n  // Link state\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkPreview, setLinkPreview] = useState<any>(null);\n  const [fetchingLinkPreview, setFetchingLinkPreview] = useState(false);\n  \n  // Poll state\n  const [pollOptions, setPollOptions] = useState<string[]>(['', '']);\n  const [pollDuration, setPollDuration] = useState(24); // hours\n  const [showResultsBeforeVote, setShowResultsBeforeVote] = useState(false);\n  \n  // Article state\n  const [articleTitle, setArticleTitle] = useState('');\n  const [articleCoverImage, setArticleCoverImage] = useState<File | null>(null);\n  const [articleCoverPreview, setArticleCoverPreview] = useState<string | null>(null);\n  const [articleTags, setArticleTags] = useState<string[]>([]);\n  const [tagInput, setTagInput] = useState('');\n  \n  // Celebration state\n  const [celebrationType, setCelebrationType] = useState<CelebrationType | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoInputRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Reset form when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      resetForm();\n    }\n  }, [isOpen]);\n\n  const resetForm = () => {\n    setPostType('TEXT');\n    setContent('');\n    setVisibility('PUBLIC');\n    setImages([]);\n    setImagePreviews([]);\n    setVideo(null);\n    setVideoPreview(null);\n    setLinkUrl('');\n    setLinkPreview(null);\n    setPollOptions(['', '']);\n    setPollDuration(24);\n    setShowResultsBeforeVote(false);\n    setArticleTitle('');\n    setArticleCoverImage(null);\n    setArticleCoverPreview(null);\n    setArticleTags([]);\n    setCelebrationType(null);\n    setMentions([]);\n    setError(null);\n  };\n\n  // Handle image selection\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (images.length + files.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    const validFiles = files.filter(file => {\n      if (file.size > 10 * 1024 * 1024) {\n        setError('Image size must be under 10MB');\n        return false;\n      }\n      return true;\n    });\n    \n    setImages(prev => [...prev, ...validFiles]);\n    \n    validFiles.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreviews(prev => [...prev, e.target?.result as string]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // Handle video selection\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    if (file.size > 500 * 1024 * 1024) {\n      setError('Video size must be under 500MB');\n      return;\n    }\n    \n    setVideo(file);\n    setVideoPreview(URL.createObjectURL(file));\n  };\n\n  // Remove image\n  const removeImage = (index: number) => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Handle edited image save\n  const handleEditedImageSave = (blob: Blob) => {\n    if (editingImageIndex === null) return;\n    \n    // Create a new File from the blob\n    const editedFile = new File([blob], images[editingImageIndex].name, { type: 'image/jpeg' });\n    \n    // Update the images array\n    setImages(prev => {\n      const newImages = [...prev];\n      newImages[editingImageIndex] = editedFile;\n      return newImages;\n    });\n    \n    // Update the preview\n    const newPreviewUrl = URL.createObjectURL(blob);\n    setImagePreviews(prev => {\n      const newPreviews = [...prev];\n      newPreviews[editingImageIndex] = newPreviewUrl;\n      return newPreviews;\n    });\n    \n    setEditingImageIndex(null);\n  };\n\n  // Handle poll option change\n  const handlePollOptionChange = (index: number, value: string) => {\n    const newOptions = [...pollOptions];\n    newOptions[index] = value;\n    setPollOptions(newOptions);\n  };\n\n  // Add poll option\n  const addPollOption = () => {\n    if (pollOptions.length < 6) {\n      setPollOptions([...pollOptions, '']);\n    }\n  };\n\n  // Remove poll option\n  const removePollOption = (index: number) => {\n    if (pollOptions.length > 2) {\n      setPollOptions(pollOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  // Handle article tag add\n  const handleAddTag = () => {\n    if (tagInput.trim() && articleTags.length < 5) {\n      setArticleTags([...articleTags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  // Search for mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (err) {\n      console.error('Error searching mentions:', err);\n    }\n  }, []);\n\n  // Handle content change with mention detection\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : textAfterAt.slice(0, spaceIndex);\n      \n      if (query && !textAfterAt.includes(' ')) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (user: MentionUser) => {\n    const lastAtIndex = content.lastIndexOf('@');\n    const newContent = content.slice(0, lastAtIndex) + `@${user.username} `;\n    setContent(newContent);\n    setMentions([...mentions, user.id]);\n    setShowMentionDropdown(false);\n    contentRef.current?.focus();\n  };\n\n  // Text formatting helper - wraps selected text or inserts at cursor\n  const formatText = (prefix: string, suffix: string = prefix) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      // Wrap selected text\n      newContent = content.slice(0, start) + prefix + selectedText + suffix + content.slice(end);\n      newCursorPos = end + prefix.length + suffix.length;\n    } else {\n      // Insert placeholder at cursor\n      newContent = content.slice(0, start) + prefix + suffix + content.slice(end);\n      newCursorPos = start + prefix.length;\n    }\n\n    setContent(newContent);\n    \n    // Restore focus and cursor position\n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Format bold: **text**\n  const handleBold = () => {\n    formatText('**');\n  };\n\n  // Format italic: *text*\n  const handleItalic = () => {\n    formatText('*');\n  };\n\n  // Format code: `code`\n  const handleCode = () => {\n    formatText('`');\n  };\n\n  // Format list: add \"- \" at start of line\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    \n    // Find the start of the current line\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    // Check if line already starts with \"- \"\n    if (lineContent.startsWith('- ')) {\n      // Remove the list marker\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      // Add the list marker\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Trigger mention search\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  // Color presets for the color picker\n  const COLOR_PRESETS = [\n    { name: 'Red', value: '#ef4444' },\n    { name: 'Orange', value: '#f97316' },\n    { name: 'Yellow', value: '#eab308' },\n    { name: 'Green', value: '#22c55e' },\n    { name: 'Teal', value: '#14b8a6' },\n    { name: 'Blue', value: '#3b82f6' },\n    { name: 'Purple', value: '#a855f7' },\n    { name: 'Pink', value: '#ec4899' },\n  ];\n\n  // Insert color formatting: [color:#hex]text[/color]\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      // Wrap selected text\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      // Insert placeholder and position cursor between tags\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      if (selectedText) {\n        textarea.setSelectionRange(newCursorPos, newCursorPos);\n      } else {\n        textarea.setSelectionRange(newCursorPos, newCursorPos);\n      }\n    }, 0);\n  };\n\n  // Submit post\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const formData = new FormData();\n      formData.append('type', postType);\n      formData.append('visibility', visibility);\n      \n      if (content) {\n        formData.append('content', content);\n      }\n      \n      if (mentions.length > 0) {\n        formData.append('mentions', JSON.stringify(mentions));\n      }\n      \n      switch (postType) {\n        case 'IMAGE':\n          if (images.length === 0) {\n            setError('Please add at least one image');\n            setIsSubmitting(false);\n            return;\n          }\n          images.forEach((img) => {\n            formData.append('media', img);\n          });\n          break;\n          \n        case 'VIDEO':\n          if (!video) {\n            setError('Please add a video');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('video', video);\n          break;\n          \n        case 'LINK':\n          if (!linkUrl) {\n            setError('Please add a link');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('linkUrl', linkUrl);\n          break;\n          \n        case 'POLL':\n          const validOptions = pollOptions.filter(opt => opt.trim());\n          if (validOptions.length < 2) {\n            setError('Please add at least 2 poll options');\n            setIsSubmitting(false);\n            return;\n          }\n          validOptions.forEach((option) => {\n            formData.append('pollOptions', option);\n          });\n          formData.append('pollDuration', String(pollDuration));\n          break;\n          \n        case 'ARTICLE':\n          if (!articleTitle) {\n            setError('Please add an article title');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('articleTitle', articleTitle);\n          if (articleCoverImage) {\n            formData.append('articleCoverImage', articleCoverImage);\n          }\n          if (articleTags.length > 0) {\n            articleTags.forEach((tag) => {\n              formData.append('articleTags', tag);\n            });\n          }\n          break;\n          \n        case 'CELEBRATION':\n          if (!celebrationType) {\n            setError('Please select a celebration type');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('celebrationType', celebrationType);\n          break;\n          \n        case 'TEXT':\n        default:\n          if (!content.trim()) {\n            setError('Please add some content');\n            setIsSubmitting(false);\n            return;\n          }\n          break;\n      }\n      \n      await createPost(formData);\n      onPostCreated?.();\n      onClose();\n    } catch (err: any) {\n      console.error('Error creating post:', err);\n      setError(err.response?.data?.error || 'Failed to create post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" />\n        \n        {/* Modal */}\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0, y: 20 }}\n          animate={{ scale: 1, opacity: 1, y: 0 }}\n          exit={{ scale: 0.9, opacity: 0, y: 20 }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full max-w-3xl max-h-[85vh] flex flex-col\"\n          style={{\n            background: '#ecf0f3',\n            borderRadius: '24px',\n            boxShadow: '10px 10px 20px #d1d9e6, -10px -10px 20px #f9f9f9',\n          }}\n        >\n          {/* Header */}\n          <div \n            className=\"flex items-center justify-between p-5 border-b flex-shrink-0\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <h2 className=\"text-2xl font-bold text-gray-800\">Create Post</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2.5 rounded-full transition-all hover:scale-105\"\n              style={{\n                background: '#ecf0f3',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              <X className=\"w-6 h-6 text-gray-600\" />\n            </button>\n          </div>\n          \n          {/* User Info */}\n          <div className=\"flex items-center gap-4 p-5 flex-shrink-0\">\n            <div \n              className=\"w-14 h-14 rounded-full overflow-hidden\"\n              style={{\n                boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {user?.profileImage ? (\n                <img \n                  src={user.profileImage} \n                  alt={user.name} \n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-bold\">\n                  {user?.name?.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n              {/* Visibility Dropdown */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                  className=\"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n                >\n                  {(() => {\n                    const opt = VISIBILITY_OPTIONS.find(o => o.value === visibility);\n                    const Icon = opt?.icon || Globe;\n                    return (\n                      <>\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{opt?.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </>\n                    );\n                  })()}\n                </button>\n                \n                {showVisibilityDropdown && (\n                  <div \n                    className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-10\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => {\n                          setVisibility(opt.value);\n                          setShowVisibilityDropdown(false);\n                        }}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors\"\n                      >\n                        <opt.icon className=\"w-4 h-4\" />\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Post Type Tabs */}\n          <div \n            className=\"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide flex-shrink-0\"\n            style={{ scrollbarWidth: 'none' }}\n          >\n            {POST_TYPES.map(({ type, icon: Icon, label }) => (\n              <button\n                key={type}\n                onClick={() => setPostType(type)}\n                className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${\n                  postType === type ? 'text-blue-600' : 'text-gray-600 hover:text-gray-800'\n                }`}\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: postType === type \n                    ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                    : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {label}\n              </button>\n            ))}\n          </div>\n          \n          {/* Content Area */}\n          <div className=\"flex-1 p-5 overflow-y-auto\">\n            {/* Error Message */}\n            {error && (\n              <div className=\"mb-4 p-3 rounded-lg bg-red-100 text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Rich Text Editor Area */}\n            <div className=\"relative\">\n              {/* Formatting Toolbar */}\n              <div \n                className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                }}\n              >\n                <button \n                  type=\"button\"\n                  onClick={handleBold}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Bold (**text**)\"\n                >\n                  <Bold className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleItalic}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Italic (*text*)\"\n                >\n                  <Italic className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleList}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Bullet List\"\n                >\n                  <List className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleCode}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Code (`code`)\"\n                >\n                  <Code className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                <button \n                  type=\"button\"\n                  onClick={handleMentionClick}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Mention someone (@)\"\n                >\n                  <AtSign className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"relative\" ref={colorPickerRef}>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowColorPicker(!showColorPicker)}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Text Color\"\n                  >\n                    <Palette className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  {/* Color Picker Dropdown */}\n                  {showColorPicker && (\n                    <div \n                      className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                      }}\n                    >\n                      <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                      <div className=\"grid grid-cols-4 gap-2\">\n                        {COLOR_PRESETS.map((color) => (\n                          <button\n                            key={color.value}\n                            type=\"button\"\n                            onClick={() => handleColorInsert(color.value)}\n                            className=\"group flex flex-col items-center gap-1\"\n                          >\n                            <div \n                              className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                              style={{ backgroundColor: color.value }}\n                            />\n                            <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              {/* Content Textarea */}\n              <div className=\"relative\">\n                <textarea\n                  ref={contentRef}\n                  value={content}\n                  onChange={handleContentChange}\n                  placeholder=\"What do you want to share?\"\n                  className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                    fontFamily: \"'Montserrat', sans-serif\",\n                  }}\n                />\n                \n                {/* Mention Dropdown */}\n                {showMentionDropdown && (\n                  <div \n                    className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {mentionResults.map((user) => (\n                      <button\n                        key={user.id}\n                        onClick={() => insertMention(user)}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                      >\n                        <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                          {user.profileImage && (\n                            <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                          )}\n                        </div>\n                        <div className=\"text-left\">\n                          <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                          <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Post Type Specific Content */}\n            {postType === 'IMAGE' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleImageSelect}\n                  className=\"hidden\"\n                />\n                \n                {imagePreviews.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {imagePreviews.map((preview, index) => (\n                      <div key={index} className=\"relative rounded-xl overflow-hidden bg-gray-100\">\n                        <img \n                          src={preview} \n                          alt=\"\" \n                          className=\"w-full max-h-[400px] object-contain mx-auto\"\n                          style={{ display: 'block' }}\n                        />\n                        <div className=\"absolute top-2 right-2 flex gap-2\">\n                          <button\n                            onClick={() => setEditingImageIndex(index)}\n                            className=\"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-colors shadow-lg\"\n                            title=\"Edit image\"\n                          >\n                            <Pencil className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => removeImage(index)}\n                            className=\"p-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors shadow-lg\"\n                            title=\"Remove image\"\n                          >\n                            <X className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                        <div className=\"absolute bottom-2 left-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n                          {index + 1} / {imagePreviews.length}\n                        </div>\n                      </div>\n                    ))}\n                    {images.length < 10 && (\n                      <button\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"w-full py-8 rounded-xl flex items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                        }}\n                      >\n                        <Plus className=\"w-6 h-6 text-gray-400\" />\n                        <span className=\"text-gray-500\">Add more images</span>\n                      </button>\n                    )}\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <ImageIcon className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add images (max 10)</span>\n                    <span className=\"text-xs text-gray-400\">Up to 10MB each</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'VIDEO' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={videoInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleVideoSelect}\n                  className=\"hidden\"\n                />\n                \n                {videoPreview ? (\n                  <div className=\"relative rounded-xl overflow-hidden\">\n                    <video src={videoPreview} controls className=\"w-full max-h-64 object-contain bg-black\" />\n                    <button\n                      onClick={() => {\n                        setVideo(null);\n                        setVideoPreview(null);\n                      }}\n                      className=\"absolute top-2 right-2 p-2 rounded-full bg-red-500 text-white\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => videoInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <Video className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add video</span>\n                    <span className=\"text-xs text-gray-400\">Up to 500MB</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'LINK' && (\n              <div className=\"mt-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://example.com\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                  />\n                </div>\n                \n                {linkPreview && (\n                  <div className=\"mt-4 rounded-xl overflow-hidden\" style={{ boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9' }}>\n                    {linkPreview.image && (\n                      <img src={linkPreview.image} alt=\"\" className=\"w-full h-40 object-cover\" />\n                    )}\n                    <div className=\"p-3 bg-white/50\">\n                      <p className=\"font-semibold text-gray-800\">{linkPreview.title}</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">{linkPreview.description}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">{linkPreview.domain}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {postType === 'POLL' && (\n              <div className=\"mt-4 space-y-3\">\n                {pollOptions.map((option, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <div\n                      className=\"flex-1 rounded-xl p-3\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      <input\n                        type=\"text\"\n                        value={option}\n                        onChange={(e) => handlePollOptionChange(index, e.target.value)}\n                        placeholder={`Option ${index + 1}`}\n                        className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                      />\n                    </div>\n                    {pollOptions.length > 2 && (\n                      <button\n                        onClick={() => removePollOption(index)}\n                        className=\"p-2 rounded-full text-red-500 hover:bg-red-50 transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    )}\n                  </div>\n                ))}\n                \n                {pollOptions.length < 6 && (\n                  <button\n                    onClick={addPollOption}\n                    className=\"flex items-center gap-2 text-blue-600 text-sm font-medium hover:text-blue-700 transition-colors\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Add option\n                  </button>\n                )}\n                \n                <div className=\"flex items-center gap-4 pt-4 border-t\" style={{ borderColor: '#d1d9e6' }}>\n                  <div className=\"flex-1\">\n                    <label className=\"text-sm text-gray-600\">Poll duration</label>\n                    <select\n                      value={pollDuration}\n                      onChange={(e) => setPollDuration(Number(e.target.value))}\n                      className=\"w-full mt-1 p-2 rounded-lg bg-transparent text-gray-800 outline-none\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                      }}\n                    >\n                      <option value={1}>1 hour</option>\n                      <option value={6}>6 hours</option>\n                      <option value={12}>12 hours</option>\n                      <option value={24}>1 day</option>\n                      <option value={72}>3 days</option>\n                      <option value={168}>1 week</option>\n                    </select>\n                  </div>\n                  \n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={showResultsBeforeVote}\n                      onChange={(e) => setShowResultsBeforeVote(e.target.checked)}\n                      className=\"w-4 h-4 rounded\"\n                    />\n                    <span className=\"text-sm text-gray-600\">Show results before voting</span>\n                  </label>\n                </div>\n              </div>\n            )}\n            \n            {postType === 'ARTICLE' && (\n              <div className=\"mt-4 space-y-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    value={articleTitle}\n                    onChange={(e) => setArticleTitle(e.target.value)}\n                    placeholder=\"Article title\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400 text-lg font-semibold\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  {articleTags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700\"\n                    >\n                      {tag}\n                      <button onClick={() => setArticleTags(tags => tags.filter((_, i) => i !== index))}>\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </span>\n                  ))}\n                  {articleTags.length < 5 && (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                        placeholder=\"Add tag\"\n                        className=\"px-3 py-1 rounded-full text-sm bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                        style={{\n                          boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {postType === 'CELEBRATION' && (\n              <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                {CELEBRATION_TYPES.map(({ value, label, emoji }) => (\n                  <button\n                    key={value}\n                    onClick={() => setCelebrationType(value)}\n                    className={`p-4 rounded-xl text-left transition-all ${\n                      celebrationType === value ? 'ring-2 ring-blue-500' : ''\n                    }`}\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: celebrationType === value\n                        ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                        : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <span className=\"text-2xl\">{emoji}</span>\n                    <p className=\"mt-2 text-sm font-medium text-gray-800\">{label}</p>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Footer */}\n          <div \n            className=\"flex items-center justify-between p-5 border-t flex-shrink-0\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <div className=\"flex items-center gap-3\">\n              {/* Quick add buttons */}\n              <button\n                onClick={() => setPostType('IMAGE')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add image\"\n              >\n                <ImageIcon className=\"w-6 h-6 text-green-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('VIDEO')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add video\"\n              >\n                <Video className=\"w-6 h-6 text-purple-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('POLL')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Create poll\"\n              >\n                <BarChart3 className=\"w-6 h-6 text-orange-600\" />\n              </button>\n            </div>\n            \n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"px-8 py-2.5 rounded-full font-semibold text-white transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-base\"\n              style={{\n                background: 'linear-gradient(145deg, #4B70E2, #3a5bc7)',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              ) : (\n                'Post'\n              )}\n            </button>\n          </div>\n        </motion.div>\n      </motion.div>\n\n      {/* Image Editor Modal */}\n      {editingImageIndex !== null && (\n        <ImageEditor\n          isOpen={editingImageIndex !== null}\n          imageUrl={imagePreviews[editingImageIndex]}\n          onClose={() => setEditingImageIndex(null)}\n          onSave={handleEditedImageSave}\n        />\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default CreatePostModal;\n"],"names":["React","useState","useRef","useCallback","useEffect","motion","AnimatePresence","X","Image","ImageIcon","Video","FileText","Link","LinkIcon","BarChart3","Sparkles","Trophy","Globe","Users","Lock","ChevronDown","Loader2","Plus","Trash2","Bold","Italic","List","Code","AtSign","Palette","Pencil","useAuth","createPost","searchUsersForMention","ImageEditor","PostType","PostVisibility","CelebrationType","MentionUser","CreatePostModalProps","isOpen","onClose","onPostCreated","POST_TYPES","type","icon","label","VISIBILITY_OPTIONS","value","ElementType","CELEBRATION_TYPES","emoji","CreatePostModal","user","postType","setPostType","content","setContent","visibility","setVisibility","showVisibilityDropdown","setShowVisibilityDropdown","isSubmitting","setIsSubmitting","error","setError","images","setImages","File","imagePreviews","setImagePreviews","editingImageIndex","setEditingImageIndex","video","setVideo","videoPreview","setVideoPreview","linkUrl","setLinkUrl","linkPreview","setLinkPreview","fetchingLinkPreview","setFetchingLinkPreview","pollOptions","setPollOptions","pollDuration","setPollDuration","showResultsBeforeVote","setShowResultsBeforeVote","articleTitle","setArticleTitle","articleCoverImage","setArticleCoverImage","articleCoverPreview","setArticleCoverPreview","articleTags","setArticleTags","tagInput","setTagInput","celebrationType","setCelebrationType","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","mentions","setMentions","showColorPicker","setShowColorPicker","colorPickerRef","HTMLDivElement","fileInputRef","HTMLInputElement","videoInputRef","contentRef","HTMLTextAreaElement","handleClickOutside","event","MouseEvent","current","contains","target","Node","document","addEventListener","removeEventListener","resetForm","handleImageSelect","e","ChangeEvent","files","Array","from","length","validFiles","filter","file","size","prev","forEach","reader","FileReader","onload","result","readAsDataURL","handleVideoSelect","URL","createObjectURL","removeImage","index","_","i","handleEditedImageSave","blob","Blob","editedFile","name","newImages","newPreviewUrl","newPreviews","handlePollOptionChange","newOptions","addPollOption","removePollOption","handleAddTag","trim","searchMentions","query","results","err","console","handleContentChange","lastAtIndex","lastIndexOf","textAfterAt","slice","spaceIndex","indexOf","includes","insertMention","newContent","username","id","focus","formatText","prefix","suffix","textarea","start","selectionStart","end","selectionEnd","selectedText","newCursorPos","setTimeout","setSelectionRange","handleBold","handleItalic","handleCode","handleList","beforeCursor","afterCursor","lineStart","lineContent","startsWith","handleMentionClick","COLOR_PRESETS","handleColorInsert","colorValue","openTag","closeTag","handleSubmit","formData","FormData","append","JSON","stringify","img","validOptions","opt","option","String","tag","response","data","opacity","scale","y","damping","stiffness","stopPropagation","background","borderRadius","boxShadow","borderColor","profileImage","charAt","toUpperCase","find","o","Icon","map","scrollbarWidth","color","backgroundColor","fontFamily","preview","display","click","image","title","description","domain","Number","checked","tags","key","preventDefault"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 7733, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryCarousel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Plus, ChevronLeft, ChevronRight } from 'lucide-react';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { getStoriesFeed, type StoryGroup, type Story } from '@/lib/api/stories';\nimport { getSocket } from '@/lib/socket';\n\ninterface StoryCarouselProps {\n  onOpenStory: (group: StoryGroup, startIndex?: number) => void;\n  onCreateStory: () => void;\n}\n\nexport function StoryCarousel({ onOpenStory, onCreateStory }: StoryCarouselProps) {\n  const { user, loading: authLoading } = useAuth();\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const [storyGroups, setStoryGroups] = useState<StoryGroup[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(false);\n\n  // Fetch stories on mount (only after auth is ready)\n  const fetchStories = useCallback(async () => {\n    if (authLoading) return; // Wait for auth to complete\n    \n    try {\n      const response = await getStoriesFeed();\n      console.log(' Stories feed response:', response);\n      setStoryGroups(response?.storyGroups || []);\n    } catch (error: any) {\n      console.error('Error fetching stories:', error);\n      // Don't clear stories on 401 - user might just need to re-auth\n      if (error?.response?.status !== 401) {\n        setStoryGroups([]);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [authLoading]);\n\n  useEffect(() => {\n    if (!authLoading) {\n      fetchStories();\n    }\n  }, [authLoading, fetchStories]);\n\n  // Listen for real-time story updates\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    // Handle new story created\n    const handleStoryCreated = (data: { story: Story; author: any; timestamp: Date }) => {\n      console.log(' Real-time: New story received', data);\n      \n      setStoryGroups(prev => {\n        // Check if author already has stories\n        const existingGroupIndex = prev.findIndex(g => g.user.id === data.author.id);\n        \n        if (existingGroupIndex >= 0) {\n          // Add story to existing group\n          const updated = [...prev];\n          updated[existingGroupIndex] = {\n            ...updated[existingGroupIndex],\n            stories: [data.story, ...updated[existingGroupIndex].stories],\n            hasUnviewed: true,\n            lastStoryAt: data.story.createdAt,\n          };\n          return updated;\n        } else {\n          // Create new group for this author\n          const newGroup: StoryGroup = {\n            user: data.author,\n            stories: [data.story],\n            hasUnviewed: true,\n            lastStoryAt: data.story.createdAt,\n            isOwnStory: data.author.id === user?.id,\n          };\n          \n          // Add at beginning (after own stories if exists)\n          const ownGroupIndex = prev.findIndex(g => g.isOwnStory);\n          if (newGroup.isOwnStory) {\n            return [newGroup, ...prev.filter(g => !g.isOwnStory)];\n          } else if (ownGroupIndex >= 0) {\n            return [prev[ownGroupIndex], newGroup, ...prev.filter((g, i) => !g.isOwnStory && i !== ownGroupIndex)];\n          }\n          return [newGroup, ...prev];\n        }\n      });\n    };\n\n    // Handle story deleted\n    const handleStoryDeleted = (data: { storyId: string; authorId: string; timestamp: Date }) => {\n      console.log(' Real-time: Story deleted', data);\n      \n      setStoryGroups(prev => {\n        return prev.map(group => {\n          if (group.user.id === data.authorId) {\n            const filteredStories = group.stories.filter(s => s.id !== data.storyId);\n            if (filteredStories.length === 0) {\n              return null; // Remove group entirely\n            }\n            return {\n              ...group,\n              stories: filteredStories,\n            };\n          }\n          return group;\n        }).filter(Boolean) as StoryGroup[];\n      });\n    };\n\n    socket.on('story:created', handleStoryCreated);\n    socket.on('story:deleted', handleStoryDeleted);\n\n    return () => {\n      socket.off('story:created', handleStoryCreated);\n      socket.off('story:deleted', handleStoryDeleted);\n    };\n  }, [user?.id]);\n\n  useEffect(() => {\n    const checkScroll = () => {\n      if (scrollRef.current) {\n        const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current;\n        setCanScrollLeft(scrollLeft > 0);\n        setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 10);\n      }\n    };\n\n    checkScroll();\n    scrollRef.current?.addEventListener('scroll', checkScroll);\n    window.addEventListener('resize', checkScroll);\n\n    return () => {\n      scrollRef.current?.removeEventListener('scroll', checkScroll);\n      window.removeEventListener('resize', checkScroll);\n    };\n  }, [storyGroups]);\n\n  const scroll = (direction: 'left' | 'right') => {\n    if (scrollRef.current) {\n      const scrollAmount = direction === 'left' ? -300 : 300;\n      scrollRef.current.scrollBy({ left: scrollAmount, behavior: 'smooth' });\n    }\n  };\n\n  const ownStoryGroup = storyGroups.find(g => g.isOwnStory);\n  const otherStoryGroups = storyGroups.filter(g => !g.isOwnStory);\n\n  // Show loading skeleton while auth is loading or stories are loading\n  if (authLoading || loading) {\n    return (\n      <div className=\"w-full py-4 px-4\">\n        <div className=\"flex gap-3 overflow-hidden\">\n          {/* Skeleton for create story */}\n          <div className=\"flex-shrink-0 w-28 h-40 bg-gray-200 dark:bg-neutral-800 rounded-2xl animate-pulse\" />\n          {/* Skeletons for stories */}\n          {[...Array(4)].map((_, i) => (\n            <div\n              key={i}\n              className=\"flex-shrink-0 w-28 h-40 bg-gray-200 dark:bg-neutral-800 rounded-2xl animate-pulse\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative w-full py-4 group\">\n      {/* Left Scroll Button */}\n      <AnimatePresence>\n        {canScrollLeft && (\n          <motion.button\n            initial={{ opacity: 0, x: 10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: 10 }}\n            onClick={() => scroll('left')}\n            className=\"absolute left-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 bg-white dark:bg-neutral-800 rounded-full shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n          >\n            <ChevronLeft className=\"w-5 h-5 text-gray-700 dark:text-neutral-300\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Right Scroll Button */}\n      <AnimatePresence>\n        {canScrollRight && (\n          <motion.button\n            initial={{ opacity: 0, x: -10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -10 }}\n            onClick={() => scroll('right')}\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 bg-white dark:bg-neutral-800 rounded-full shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n          >\n            <ChevronRight className=\"w-5 h-5 text-gray-700 dark:text-neutral-300\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Story Cards */}\n      <div\n        ref={scrollRef}\n        className=\"flex gap-3 overflow-x-auto scrollbar-hide px-4 scroll-smooth\"\n        style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\n      >\n        {/* Create Story Card */}\n        <motion.button\n          onClick={onCreateStory}\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          className=\"flex-shrink-0 relative w-28 h-40 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 shadow-lg\"\n        >\n          {/* User Avatar Background */}\n          {user?.profileImage ? (\n            <div className=\"absolute inset-0\">\n              <Image\n                src={user.profileImage}\n                alt=\"Your story\"\n                fill\n                className=\"object-cover opacity-30\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black/60\" />\n            </div>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600\" />\n          )}\n\n          {/* Content */}\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n            <div className=\"w-11 h-11 rounded-full bg-white dark:bg-neutral-900 flex items-center justify-center shadow-lg mb-2\">\n              <Plus className=\"w-6 h-6 text-blue-500\" />\n            </div>\n            <span className=\"text-white text-xs font-semibold text-center px-2\">\n              {ownStoryGroup ? 'Add to Story' : 'Create Story'}\n            </span>\n          </div>\n\n          {/* Glassmorphic overlay */}\n          <div className=\"absolute bottom-0 left-0 right-0 h-12 bg-white/10 backdrop-blur-sm\" />\n        </motion.button>\n\n        {/* Own Story (if exists) */}\n        {ownStoryGroup && (\n          <StoryCard\n            group={ownStoryGroup}\n            onClick={() => onOpenStory(ownStoryGroup)}\n            isOwn\n          />\n        )}\n\n        {/* Other Stories */}\n        {otherStoryGroups.map((group) => (\n          <StoryCard\n            key={group.user.id}\n            group={group}\n            onClick={() => onOpenStory(group)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface StoryCardProps {\n  group: StoryGroup;\n  onClick: () => void;\n  isOwn?: boolean;\n}\n\nfunction StoryCard({ group, onClick, isOwn }: StoryCardProps) {\n  const { user, stories, hasUnviewed } = group;\n  const latestStory = stories[0];\n\n  return (\n    <motion.button\n      onClick={onClick}\n      whileHover={{ scale: 1.02, y: -2 }}\n      whileTap={{ scale: 0.98 }}\n      className=\"flex-shrink-0 relative w-28 h-40 rounded-2xl overflow-hidden shadow-lg group/card\"\n    >\n      {/* Background Image */}\n      <div className=\"absolute inset-0\">\n        {latestStory.thumbnailUrl || latestStory.mediaUrl ? (\n          <Image\n            src={latestStory.thumbnailUrl || latestStory.mediaUrl}\n            alt={`${user.name}'s story`}\n            fill\n            className=\"object-cover transition-transform duration-300 group-hover/card:scale-105\"\n          />\n        ) : (\n          <div \n            className=\"w-full h-full\"\n            style={{ backgroundColor: latestStory.backgroundColor || '#3B82F6' }}\n          />\n        )}\n        \n        {/* Gradient Overlay */}\n        <div className=\"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/70\" />\n      </div>\n\n      {/* Ring Border - Gradient for unviewed, gray for viewed */}\n      <div \n        className={`absolute inset-0 rounded-2xl transition-all duration-300 ${\n          hasUnviewed\n            ? 'ring-[3px] ring-offset-2 ring-offset-white dark:ring-offset-neutral-950'\n            : 'ring-2 ring-gray-300 dark:ring-neutral-700'\n        }`}\n        style={hasUnviewed ? {\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',\n          WebkitMask: 'linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)',\n          WebkitMaskComposite: 'xor',\n          maskComposite: 'exclude',\n          padding: '3px',\n        } : undefined}\n      />\n\n      {/* Avatar */}\n      <div className=\"absolute top-2 left-2 z-10\">\n        <div className={`w-9 h-9 rounded-full overflow-hidden ring-2 ${\n          hasUnviewed \n            ? 'ring-purple-500 ring-offset-1 ring-offset-black/50' \n            : 'ring-white/50'\n        }`}>\n          {user.profileImage ? (\n            <Image\n              src={user.profileImage}\n              alt={user.name}\n              width={36}\n              height={36}\n              className=\"object-cover\"\n            />\n          ) : (\n            <div className=\"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center\">\n              <span className=\"text-white text-xs font-bold\">\n                {user.name.charAt(0).toUpperCase()}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Story Count Badge */}\n      {stories.length > 1 && (\n        <div className=\"absolute top-2 right-2 bg-black/50 backdrop-blur-sm px-1.5 py-0.5 rounded-full\">\n          <span className=\"text-white text-[10px] font-medium\">{stories.length}</span>\n        </div>\n      )}\n\n      {/* Text Content Preview */}\n      {latestStory.textContent && (\n        <div className=\"absolute inset-x-2 top-1/2 -translate-y-1/2 text-center\">\n          <p className=\"text-white text-xs font-medium line-clamp-3 drop-shadow-lg\">\n            {latestStory.textContent}\n          </p>\n        </div>\n      )}\n\n      {/* Bottom Info */}\n      <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 to-transparent\">\n        <p className=\"text-white text-xs font-semibold truncate\">\n          {isOwn ? 'Your Story' : user.name.split(' ')[0]}\n        </p>\n        {/* Time ago */}\n        <p className=\"text-white/70 text-[10px]\">\n          {formatTimeAgo(new Date(latestStory.createdAt))}\n        </p>\n      </div>\n\n      {/* Category Badge */}\n      {latestStory.category && latestStory.category !== 'GENERAL' && (\n        <div className=\"absolute bottom-10 left-2 right-2\">\n          <span className=\"text-[9px] text-white/80 bg-white/20 backdrop-blur-sm px-1.5 py-0.5 rounded-full\">\n            {formatCategory(latestStory.category)}\n          </span>\n        </div>\n      )}\n    </motion.button>\n  );\n}\n\nfunction formatTimeAgo(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m`;\n  if (hours < 24) return `${hours}h`;\n  return '1d';\n}\n\nfunction formatCategory(category: string): string {\n  const map: Record<string, string> = {\n    DAY_AT_WORK: ' Work',\n    LEARNING: ' Learning',\n    ACHIEVEMENT: ' Achievement',\n    PROJECT: ' Project',\n    EVENT: ' Event',\n    BEHIND_SCENES: ' BTS',\n    TIPS: ' Tips',\n    QNA: ' Q&A',\n  };\n  return map[category] || category;\n}\n"],"names":["c","_c","React","useRef","useState","useEffect","useCallback","motion","AnimatePresence","Plus","ChevronLeft","ChevronRight","Image","useAuth","getStoriesFeed","StoryGroup","Story","getSocket","StoryCarouselProps","onOpenStory","group","startIndex","onCreateStory","StoryCarousel","user","loading","authLoading","scrollRef","HTMLDivElement","storyGroups","setStoryGroups","setLoading","canScrollLeft","setCanScrollLeft","canScrollRight","setCanScrollRight","fetchStories","response","console","log","error","status","socket","handleStoryCreated","data","story","author","timestamp","Date","prev","existingGroupIndex","findIndex","g","id","updated","stories","hasUnviewed","lastStoryAt","createdAt","newGroup","isOwnStory","ownGroupIndex","filter","i","handleStoryDeleted","storyId","authorId","map","filteredStories","s","length","Boolean","on","off","checkScroll","current","scrollLeft","scrollWidth","clientWidth","addEventListener","window","removeEventListener","scroll","direction","scrollAmount","scrollBy","left","behavior","ownStoryGroup","find","otherStoryGroups","Array","_","opacity","x","scrollbarWidth","msOverflowStyle","scale","profileImage","StoryCardProps","onClick","isOwn","StoryCard","t0","$","$i","Symbol","for","latestStory","t1","t2","y","t3","backgroundColor","mediaUrl","thumbnailUrl","name","t4","t5","t6","t7","background","WebkitMask","WebkitMaskComposite","maskComposite","padding","undefined","t8","t9","t10","charAt","toUpperCase","t11","t12","t13","textContent","t14","split","t15","t16","formatTimeAgo","t17","t18","t19","category","formatCategory","t20","date","now","diff","getTime","minutes","Math","floor","hours","Record","DAY_AT_WORK","LEARNING","ACHIEVEMENT","PROJECT","EVENT","BEHIND_SCENES","TIPS","QNA"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 8553, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryViewer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence, PanInfo } from 'framer-motion';\nimport {\n  X,\n  ChevronUp,\n  ChevronDown,\n  Eye,\n  Heart,\n  Send,\n  MoreHorizontal,\n  Pause,\n  Play,\n  Volume2,\n  VolumeX,\n  Link2,\n  Trash2,\n  Archive,\n  Share2,\n} from 'lucide-react';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { getSocket } from '@/lib/socket';\nimport {\n  viewStory,\n  reactToStory,\n  removeReaction,\n  replyToStory,\n  deleteStory,\n  archiveStory,\n  type StoryGroup,\n  type Story,\n} from '@/lib/api/stories';\n\ninterface StoryViewerProps {\n  storyGroups: StoryGroup[];\n  initialGroupIndex: number;\n  initialStoryIndex?: number;\n  onClose: () => void;\n  onStoryEnd?: () => void;\n}\n\nconst REACTIONS = ['', '', '', '', '', ''];\n\nexport function StoryViewer({\n  storyGroups,\n  initialGroupIndex,\n  initialStoryIndex = 0,\n  onClose,\n  onStoryEnd,\n}: StoryViewerProps) {\n  const { user } = useAuth();\n  const [currentGroupIndex, setCurrentGroupIndex] = useState(initialGroupIndex);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(initialStoryIndex);\n  const [progress, setProgress] = useState(0);\n  const [isPaused, setIsPaused] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [showReactions, setShowReactions] = useState(false);\n  const [showReplyInput, setShowReplyInput] = useState(false);\n  const [replyText, setReplyText] = useState('');\n  const [showMenu, setShowMenu] = useState(false);\n  const [viewStartTime, setViewStartTime] = useState<number>(Date.now());\n  const [selectedReaction, setSelectedReaction] = useState<string | null>(null);\n  \n  const progressIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const currentGroup = storyGroups[currentGroupIndex];\n  const currentStory = currentGroup?.stories[currentStoryIndex];\n  const isOwnStory = currentGroup?.isOwnStory;\n\n  // Mark story as viewed on mount and story change\n  useEffect(() => {\n    if (currentStory && !isOwnStory) {\n      setViewStartTime(Date.now());\n      \n      // Record view via socket for real-time updates\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:view', { storyId: currentStory.id });\n      }\n    }\n  }, [currentStory?.id, isOwnStory]);\n\n  // Record view duration when leaving story\n  const recordView = useCallback(async () => {\n    if (currentStory && !isOwnStory) {\n      const duration = Date.now() - viewStartTime;\n      \n      // Use socket for real-time view tracking\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:view', { storyId: currentStory.id, duration });\n      } else {\n        // Fallback to HTTP\n        try {\n          await viewStory(currentStory.id, duration);\n        } catch (error) {\n          console.error('Error recording view:', error);\n        }\n      }\n    }\n  }, [currentStory, isOwnStory, viewStartTime]);\n\n  // Progress timer\n  useEffect(() => {\n    if (!currentStory || isPaused) return;\n\n    const duration = currentStory.mediaType === 'VIDEO' \n      ? (currentStory.duration || 15000) \n      : (currentStory.duration || 5000);\n\n    const interval = 50; // Update every 50ms for smooth progress\n    const increment = (100 / duration) * interval;\n\n    progressIntervalRef.current = setInterval(() => {\n      setProgress((prev) => {\n        if (prev >= 100) {\n          goToNextStory();\n          return 0;\n        }\n        return prev + increment;\n      });\n    }, interval);\n\n    return () => {\n      if (progressIntervalRef.current) {\n        clearInterval(progressIntervalRef.current);\n      }\n    };\n  }, [currentStory?.id, isPaused]);\n\n  // Reset progress when story changes\n  useEffect(() => {\n    setProgress(0);\n    setSelectedReaction(currentStory?.userReaction || null);\n  }, [currentStory?.id]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'ArrowUp':\n        case 'ArrowLeft':\n          goToPreviousStory();\n          break;\n        case 'ArrowDown':\n        case 'ArrowRight':\n          goToNextStory();\n          break;\n        case ' ':\n          e.preventDefault();\n          setIsPaused((prev) => !prev);\n          break;\n        case 'Escape':\n          handleClose();\n          break;\n        case 'm':\n          setIsMuted((prev) => !prev);\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const goToNextStory = useCallback(async () => {\n    await recordView();\n\n    if (currentStoryIndex < currentGroup.stories.length - 1) {\n      setCurrentStoryIndex((prev) => prev + 1);\n    } else if (currentGroupIndex < storyGroups.length - 1) {\n      setCurrentGroupIndex((prev) => prev + 1);\n      setCurrentStoryIndex(0);\n    } else {\n      handleClose();\n      onStoryEnd?.();\n    }\n  }, [currentStoryIndex, currentGroupIndex, currentGroup, storyGroups.length, recordView, onStoryEnd]);\n\n  const goToPreviousStory = useCallback(async () => {\n    await recordView();\n\n    if (currentStoryIndex > 0) {\n      setCurrentStoryIndex((prev) => prev - 1);\n    } else if (currentGroupIndex > 0) {\n      setCurrentGroupIndex((prev) => prev - 1);\n      const prevGroup = storyGroups[currentGroupIndex - 1];\n      setCurrentStoryIndex(prevGroup.stories.length - 1);\n    }\n  }, [currentStoryIndex, currentGroupIndex, storyGroups, recordView]);\n\n  const handleClose = async () => {\n    await recordView();\n    onClose();\n  };\n\n  // Swipe handling for vertical navigation\n  const handleDragEnd = (event: any, info: PanInfo) => {\n    const threshold = 50;\n    const velocity = 500;\n\n    if (info.offset.y < -threshold || info.velocity.y < -velocity) {\n      goToNextStory();\n    } else if (info.offset.y > threshold || info.velocity.y > velocity) {\n      goToPreviousStory();\n    }\n  };\n\n  const handleReaction = async (reaction: string) => {\n    if (!currentStory) return;\n\n    try {\n      if (selectedReaction === reaction) {\n        await removeReaction(currentStory.id);\n        setSelectedReaction(null);\n      } else {\n        await reactToStory(currentStory.id, reaction);\n        setSelectedReaction(reaction);\n      }\n      \n      // Also emit via socket for real-time updates\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:react', { storyId: currentStory.id, reaction });\n      }\n    } catch (error) {\n      console.error('Error reacting to story:', error);\n    }\n    setShowReactions(false);\n  };\n\n  const handleSendReply = async () => {\n    if (!currentStory || !replyText.trim()) return;\n\n    try {\n      // Emit via socket for real-time delivery\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:reply', { \n          storyId: currentStory.id, \n          content: replyText.trim() \n        });\n      } else {\n        // Fallback to HTTP\n        await replyToStory(currentStory.id, replyText.trim());\n      }\n      \n      setReplyText('');\n      setShowReplyInput(false);\n      // Show success toast or animation\n    } catch (error) {\n      console.error('Error sending reply:', error);\n    }\n  };\n\n  const handleDeleteStory = async () => {\n    if (!currentStory) return;\n\n    try {\n      await deleteStory(currentStory.id);\n      goToNextStory();\n    } catch (error) {\n      console.error('Error deleting story:', error);\n    }\n    setShowMenu(false);\n  };\n\n  const handleArchiveStory = async () => {\n    if (!currentStory) return;\n\n    try {\n      await archiveStory(currentStory.id);\n      // Show success message\n    } catch (error) {\n      console.error('Error archiving story:', error);\n    }\n    setShowMenu(false);\n  };\n\n  if (!currentGroup || !currentStory) {\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] bg-black\"\n      >\n        {/* Main Content Container */}\n        <motion.div\n          ref={containerRef}\n          drag=\"y\"\n          dragConstraints={{ top: 0, bottom: 0 }}\n          dragElastic={0.2}\n          onDragEnd={handleDragEnd}\n          className=\"relative w-full h-full flex items-center justify-center\"\n          onClick={(e) => {\n            // Tap left/right to navigate\n            const rect = containerRef.current?.getBoundingClientRect();\n            if (rect) {\n              const clickX = e.clientX - rect.left;\n              if (clickX < rect.width / 3) {\n                goToPreviousStory();\n              } else if (clickX > (rect.width * 2) / 3) {\n                goToNextStory();\n              } else {\n                setIsPaused((prev) => !prev);\n              }\n            }\n          }}\n        >\n          {/* Story Content */}\n          <div className=\"relative w-full h-full max-w-lg mx-auto\">\n            {/* Background */}\n            <div className=\"absolute inset-0\">\n              {currentStory.mediaType === 'VIDEO' ? (\n                <video\n                  ref={videoRef}\n                  src={currentStory.mediaUrl}\n                  className=\"w-full h-full object-cover\"\n                  autoPlay\n                  loop\n                  muted={isMuted}\n                  playsInline\n                />\n              ) : currentStory.mediaType === 'TEXT' ? (\n                <div\n                  className=\"w-full h-full flex items-center justify-center p-8\"\n                  style={{ backgroundColor: currentStory.backgroundColor || '#3B82F6' }}\n                >\n                  <p\n                    className=\"text-white text-2xl font-bold text-center leading-relaxed\"\n                    style={{\n                      fontSize: currentStory.textStyle?.fontSize || 24,\n                      fontWeight: currentStory.textStyle?.fontWeight || 'bold',\n                      color: currentStory.textStyle?.color || 'white',\n                    }}\n                  >\n                    {currentStory.textContent}\n                  </p>\n                </div>\n              ) : (\n                <Image\n                  src={currentStory.mediaUrl}\n                  alt=\"Story\"\n                  fill\n                  className=\"object-cover\"\n                  priority\n                />\n              )}\n\n              {/* Text Overlay */}\n              {currentStory.mediaType !== 'TEXT' && currentStory.textContent && (\n                <div\n                  className=\"absolute p-4\"\n                  style={{\n                    left: currentStory.textPosition?.x || '50%',\n                    top: currentStory.textPosition?.y || '50%',\n                    transform: 'translate(-50%, -50%)',\n                  }}\n                >\n                  <p\n                    className=\"text-white text-lg font-semibold drop-shadow-lg\"\n                    style={currentStory.textStyle || {}}\n                  >\n                    {currentStory.textContent}\n                  </p>\n                </div>\n              )}\n\n              {/* Gradient overlays */}\n              <div className=\"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60 pointer-events-none\" />\n            </div>\n\n            {/* Top Section - Progress & Header */}\n            <div className=\"absolute top-0 left-0 right-0 p-4 z-10\">\n              {/* Progress Bars */}\n              <div className=\"flex gap-1 mb-4\">\n                {currentGroup.stories.map((_, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex-1 h-[3px] bg-white/30 rounded-full overflow-hidden\"\n                  >\n                    <motion.div\n                      className=\"h-full bg-white rounded-full\"\n                      style={{\n                        width:\n                          idx < currentStoryIndex\n                            ? '100%'\n                            : idx === currentStoryIndex\n                            ? `${progress}%`\n                            : '0%',\n                      }}\n                    />\n                  </div>\n                ))}\n              </div>\n\n              {/* Header */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  {/* User Avatar with gradient ring */}\n                  <div className=\"relative\">\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden ring-2 ring-white\">\n                      {currentGroup.user.profileImage ? (\n                        <Image\n                          src={currentGroup.user.profileImage}\n                          alt={currentGroup.user.name}\n                          width={40}\n                          height={40}\n                          className=\"object-cover\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\n                          <span className=\"text-white font-bold\">\n                            {currentGroup.user.name.charAt(0)}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div>\n                    <p className=\"text-white font-semibold text-sm\">\n                      {currentGroup.user.name}\n                    </p>\n                    <p className=\"text-white/60 text-xs\">\n                      {formatTimeAgo(new Date(currentStory.createdAt))}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  {/* Pause/Play */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setIsPaused((prev) => !prev);\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    {isPaused ? (\n                      <Play className=\"w-4 h-4 text-white\" fill=\"white\" />\n                    ) : (\n                      <Pause className=\"w-4 h-4 text-white\" fill=\"white\" />\n                    )}\n                  </button>\n\n                  {/* Mute (for video) */}\n                  {currentStory.mediaType === 'VIDEO' && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setIsMuted((prev) => !prev);\n                      }}\n                      className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                    >\n                      {isMuted ? (\n                        <VolumeX className=\"w-4 h-4 text-white\" />\n                      ) : (\n                        <Volume2 className=\"w-4 h-4 text-white\" />\n                      )}\n                    </button>\n                  )}\n\n                  {/* More Options */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setShowMenu(true);\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    <MoreHorizontal className=\"w-4 h-4 text-white\" />\n                  </button>\n\n                  {/* Close */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleClose();\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    <X className=\"w-4 h-4 text-white\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Navigation Indicators */}\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 pointer-events-none\">\n              <ChevronUp className=\"w-6 h-6 text-white/40 animate-pulse\" />\n            </div>\n            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 pointer-events-none\">\n              <ChevronDown className=\"w-6 h-6 text-white/40 animate-pulse\" />\n            </div>\n\n            {/* Link Preview */}\n            {currentStory.linkUrl && (\n              <div className=\"absolute bottom-32 left-4 right-4 z-10\">\n                <a\n                  href={currentStory.linkUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  onClick={(e) => e.stopPropagation()}\n                  className=\"flex items-center gap-2 bg-white/10 backdrop-blur-md rounded-full px-4 py-2\"\n                >\n                  <Link2 className=\"w-4 h-4 text-white\" />\n                  <span className=\"text-white text-sm truncate\">\n                    {currentStory.linkTitle || currentStory.linkUrl}\n                  </span>\n                </a>\n              </div>\n            )}\n\n            {/* Bottom Section - Actions */}\n            <div className=\"absolute bottom-0 left-0 right-0 p-4 z-10\">\n              {/* View Count (for own stories) */}\n              {isOwnStory && (\n                <div className=\"flex items-center gap-4 mb-4 text-white/80\">\n                  <div className=\"flex items-center gap-1\">\n                    <Eye className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">{currentStory.viewsCount}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Heart className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">{currentStory.reactionsCount}</span>\n                  </div>\n                </div>\n              )}\n\n              {/* Reply Input or Actions */}\n              {!isOwnStory && (\n                <div className=\"flex items-center gap-2\">\n                  {showReplyInput ? (\n                    <div className=\"flex-1 flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={replyText}\n                        onChange={(e) => setReplyText(e.target.value)}\n                        placeholder=\"Send a message...\"\n                        className=\"flex-1 bg-white/10 backdrop-blur-md text-white placeholder-white/50 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-white/30\"\n                        autoFocus\n                        onClick={(e) => e.stopPropagation()}\n                        onKeyDown={(e) => {\n                          e.stopPropagation();\n                          if (e.key === 'Enter') handleSendReply();\n                          if (e.key === 'Escape') setShowReplyInput(false);\n                        }}\n                      />\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleSendReply();\n                        }}\n                        className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center\"\n                      >\n                        <Send className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setShowReplyInput(true);\n                          setIsPaused(true);\n                        }}\n                        className=\"flex-1 bg-white/10 backdrop-blur-md text-white/70 rounded-full px-4 py-2 text-sm text-left\"\n                      >\n                        Reply to {currentGroup.user.name.split(' ')[0]}...\n                      </button>\n\n                      {/* Reaction Button */}\n                      <div className=\"relative\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setShowReactions(!showReactions);\n                            setIsPaused(true);\n                          }}\n                          className={`w-10 h-10 rounded-full ${\n                            selectedReaction\n                              ? 'bg-pink-500/30'\n                              : 'bg-white/10'\n                          } backdrop-blur-md flex items-center justify-center`}\n                        >\n                          {selectedReaction ? (\n                            <span className=\"text-xl\">{selectedReaction}</span>\n                          ) : (\n                            <Heart className=\"w-5 h-5 text-white\" />\n                          )}\n                        </button>\n\n                        {/* Reaction Picker */}\n                        <AnimatePresence>\n                          {showReactions && (\n                            <motion.div\n                              initial={{ opacity: 0, scale: 0.8, y: 10 }}\n                              animate={{ opacity: 1, scale: 1, y: 0 }}\n                              exit={{ opacity: 0, scale: 0.8, y: 10 }}\n                              className=\"absolute bottom-12 right-0 bg-white/10 backdrop-blur-xl rounded-2xl p-2 flex gap-1\"\n                            >\n                              {REACTIONS.map((reaction) => (\n                                <motion.button\n                                  key={reaction}\n                                  whileHover={{ scale: 1.3 }}\n                                  whileTap={{ scale: 0.9 }}\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleReaction(reaction);\n                                  }}\n                                  className={`w-10 h-10 rounded-full flex items-center justify-center text-2xl ${\n                                    selectedReaction === reaction\n                                      ? 'bg-white/20'\n                                      : ''\n                                  }`}\n                                >\n                                  {reaction}\n                                </motion.button>\n                              ))}\n                            </motion.div>\n                          )}\n                        </AnimatePresence>\n                      </div>\n\n                      {/* Share Button */}\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          // Handle share\n                        }}\n                        className=\"w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center\"\n                      >\n                        <Share2 className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Menu Modal */}\n        <AnimatePresence>\n          {showMenu && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"absolute inset-0 z-20 bg-black/50 flex items-end justify-center\"\n              onClick={() => setShowMenu(false)}\n            >\n              <motion.div\n                initial={{ y: '100%' }}\n                animate={{ y: 0 }}\n                exit={{ y: '100%' }}\n                className=\"w-full max-w-lg bg-neutral-900 rounded-t-3xl p-4\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className=\"w-12 h-1 bg-neutral-700 rounded-full mx-auto mb-4\" />\n\n                {isOwnStory && (\n                  <>\n                    <button\n                      onClick={handleDeleteStory}\n                      className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-neutral-800 transition-colors text-red-500\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                      <span>Delete Story</span>\n                    </button>\n                    <button\n                      onClick={handleArchiveStory}\n                      className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-neutral-800 transition-colors text-white\"\n                    >\n                      <Archive className=\"w-5 h-5\" />\n                      <span>Save to Archive</span>\n                    </button>\n                  </>\n                )}\n\n                <button\n                  onClick={() => setShowMenu(false)}\n                  className=\"w-full mt-2 py-3 bg-neutral-800 rounded-xl text-white font-medium\"\n                >\n                  Cancel\n                </button>\n              </motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nfunction formatTimeAgo(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  if (hours < 24) return `${hours}h ago`;\n  return '1d ago';\n}\n"],"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","PanInfo","X","ChevronUp","ChevronDown","Eye","Heart","Send","MoreHorizontal","Pause","Play","Volume2","VolumeX","Link2","Trash2","Archive","Share2","Image","useAuth","getSocket","viewStory","reactToStory","removeReaction","replyToStory","deleteStory","archiveStory","StoryGroup","Story","StoryViewerProps","storyGroups","initialGroupIndex","initialStoryIndex","onClose","onStoryEnd","REACTIONS","StoryViewer","user","currentGroupIndex","setCurrentGroupIndex","currentStoryIndex","setCurrentStoryIndex","progress","setProgress","isPaused","setIsPaused","isMuted","setIsMuted","showReactions","setShowReactions","showReplyInput","setShowReplyInput","replyText","setReplyText","showMenu","setShowMenu","viewStartTime","setViewStartTime","Date","now","selectedReaction","setSelectedReaction","progressIntervalRef","NodeJS","Timeout","videoRef","HTMLVideoElement","containerRef","HTMLDivElement","currentGroup","currentStory","stories","isOwnStory","socket","emit","storyId","id","recordView","duration","error","console","mediaType","interval","increment","current","setInterval","prev","goToNextStory","clearInterval","userReaction","handleKeyDown","e","KeyboardEvent","key","goToPreviousStory","preventDefault","handleClose","window","addEventListener","removeEventListener","length","prevGroup","handleDragEnd","event","info","threshold","velocity","offset","y","handleReaction","reaction","handleSendReply","trim","content","handleDeleteStory","handleArchiveStory","opacity","top","bottom","rect","getBoundingClientRect","clickX","clientX","left","width","mediaUrl","backgroundColor","fontSize","textStyle","fontWeight","color","textContent","textPosition","x","transform","map","_","idx","profileImage","name","charAt","formatTimeAgo","createdAt","stopPropagation","linkUrl","linkTitle","viewsCount","reactionsCount","target","value","split","scale","date","diff","getTime","minutes","Math","floor","hours"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 9657, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryCreator.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  Type,\n  Sparkles,\n  Link2,\n  Users,\n  Globe,\n  Lock,\n  Check,\n  ChevronLeft,\n  ChevronRight,\n  Upload,\n  Loader2,\n  Trash2,\n} from 'lucide-react';\nimport Image from 'next/image';\nimport { createStory, createStoryWithMedia, type CreateStoryInput, type StoryCategory, type StoryVisibility } from '@/lib/api/stories';\n\ninterface StoryCreatorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStoryCreated?: () => void;\n}\n\ntype StoryType = 'image' | 'video' | 'text';\ntype CreatorStep = 'select-type' | 'upload-media' | 'edit' | 'details';\n\nconst STORY_CATEGORIES: { value: StoryCategory; label: string; icon: string }[] = [\n  { value: 'DAY_AT_WORK', label: 'Day at Work', icon: '' },\n  { value: 'LEARNING', label: 'Learning', icon: '' },\n  { value: 'ACHIEVEMENT', label: 'Achievement', icon: '' },\n  { value: 'PROJECT', label: 'Project', icon: '' },\n  { value: 'BEHIND_SCENES', label: 'Behind the Scenes', icon: '' },\n  { value: 'TIPS', label: 'Tips', icon: '' },\n  { value: 'EVENT', label: 'Event', icon: '' },\n  { value: 'QNA', label: 'Q&A', icon: '' },\n  { value: 'GENERAL', label: 'General', icon: '' },\n];\n\nconst VISIBILITY_OPTIONS: { value: StoryVisibility; label: string; icon: React.ReactNode; desc: string }[] = [\n  { value: 'PUBLIC', label: 'Public', icon: <Globe className=\"w-5 h-5\" />, desc: 'Anyone can view' },\n  { value: 'CONNECTIONS', label: 'Connections', icon: <Users className=\"w-5 h-5\" />, desc: 'Only connections' },\n  { value: 'CLOSE_FRIENDS', label: 'Close Friends', icon: <Lock className=\"w-5 h-5\" />, desc: 'Selected people only' },\n];\n\nconst TEXT_BACKGROUNDS = [\n  'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n  'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n  'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n  'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',\n  'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n  'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',\n  'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',\n  'linear-gradient(135deg, #ff0844 0%, #ffb199 100%)',\n];\n\nexport function StoryCreator({ isOpen, onClose, onStoryCreated }: StoryCreatorProps) {\n  const [step, setStep] = useState<CreatorStep>('select-type');\n  const [storyType, setStoryType] = useState<StoryType | null>(null);\n  const [mediaFile, setMediaFile] = useState<File | null>(null);\n  const [mediaPreview, setMediaPreview] = useState<string | null>(null);\n  const [textContent, setTextContent] = useState('');\n  const [textBackground, setTextBackground] = useState(TEXT_BACKGROUNDS[0]);\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkTitle, setLinkTitle] = useState('');\n  const [category, setCategory] = useState<StoryCategory>('GENERAL');\n  const [visibility, setVisibility] = useState<StoryVisibility>('PUBLIC');\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n\n    if (storyType === 'image' && !isImage) {\n      setError('Please select an image file');\n      return;\n    }\n    if (storyType === 'video' && !isVideo) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Validate file size (50MB max for video, 10MB for image)\n    const maxSize = isVideo ? 50 * 1024 * 1024 : 10 * 1024 * 1024;\n    if (file.size > maxSize) {\n      setError(`File too large. Max size: ${isVideo ? '50MB' : '10MB'}`);\n      return;\n    }\n\n    setMediaFile(file);\n    setMediaPreview(URL.createObjectURL(file));\n    setError(null);\n    setStep('edit');\n  }, [storyType]);\n\n  const handleTypeSelect = (type: StoryType) => {\n    setStoryType(type);\n    if (type === 'text') {\n      setStep('edit');\n    } else {\n      setStep('upload-media');\n    }\n  };\n\n  const handleRemoveMedia = () => {\n    if (mediaPreview) {\n      URL.revokeObjectURL(mediaPreview);\n    }\n    setMediaFile(null);\n    setMediaPreview(null);\n    setStep('upload-media');\n  };\n\n  const handleSubmit = async () => {\n    setIsUploading(true);\n    setError(null);\n\n    try {\n      if (storyType === 'text') {\n        // Text-only story - use JSON API\n        await createStory({\n          mediaType: 'TEXT',\n          textContent,\n          backgroundColor: textBackground,\n          category,\n          visibility,\n          linkUrl: linkUrl || undefined,\n          linkTitle: linkTitle || undefined,\n        });\n      } else {\n        // Media story - use FormData for file upload\n        const formData = new FormData();\n        formData.append('mediaType', storyType === 'video' ? 'VIDEO' : 'IMAGE');\n        \n        if (mediaFile) {\n          formData.append('media', mediaFile);\n        }\n        if (textContent) {\n          formData.append('textContent', textContent);\n        }\n        \n        formData.append('category', category);\n        formData.append('visibility', visibility);\n\n        if (linkUrl) {\n          formData.append('linkUrl', linkUrl);\n          if (linkTitle) {\n            formData.append('linkTitle', linkTitle);\n          }\n        }\n\n        await createStoryWithMedia(formData);\n      }\n      \n      onStoryCreated?.();\n      handleClose();\n    } catch (err: any) {\n      setError(err.message || 'Failed to create story');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Cleanup\n    if (mediaPreview) {\n      URL.revokeObjectURL(mediaPreview);\n    }\n    setStep('select-type');\n    setStoryType(null);\n    setMediaFile(null);\n    setMediaPreview(null);\n    setTextContent('');\n    setTextBackground(TEXT_BACKGROUNDS[0]);\n    setLinkUrl('');\n    setLinkTitle('');\n    setCategory('GENERAL');\n    setVisibility('PUBLIC');\n    setError(null);\n    onClose();\n  };\n\n  const goBack = () => {\n    switch (step) {\n      case 'upload-media':\n        setStep('select-type');\n        setStoryType(null);\n        break;\n      case 'edit':\n        if (storyType === 'text') {\n          setStep('select-type');\n          setStoryType(null);\n        } else {\n          handleRemoveMedia();\n        }\n        break;\n      case 'details':\n        setStep('edit');\n        break;\n    }\n  };\n\n  const canProceed = () => {\n    if (step === 'edit') {\n      if (storyType === 'text') {\n        return textContent.trim().length > 0;\n      }\n      return !!mediaFile;\n    }\n    return true;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center\"\n        onClick={handleClose}\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          className=\"relative w-full max-w-lg h-[90vh] max-h-[700px] bg-neutral-900 rounded-3xl overflow-hidden flex flex-col\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-neutral-800\">\n            <div className=\"flex items-center gap-2\">\n              {step !== 'select-type' && (\n                <button\n                  onClick={goBack}\n                  className=\"w-8 h-8 rounded-full hover:bg-neutral-800 flex items-center justify-center\"\n                >\n                  <ChevronLeft className=\"w-5 h-5 text-neutral-400\" />\n                </button>\n              )}\n              <h2 className=\"text-lg font-semibold text-white\">\n                {step === 'select-type' && 'Create Story'}\n                {step === 'upload-media' && 'Upload Media'}\n                {step === 'edit' && 'Edit Story'}\n                {step === 'details' && 'Story Details'}\n              </h2>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"w-8 h-8 rounded-full hover:bg-neutral-800 flex items-center justify-center\"\n            >\n              <X className=\"w-5 h-5 text-neutral-400\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto\">\n            {/* Step 1: Select Type */}\n            {step === 'select-type' && (\n              <div className=\"p-6\">\n                <p className=\"text-neutral-400 text-sm mb-6\">\n                  Choose how you want to share your moment\n                </p>\n                \n                <div className=\"grid grid-cols-1 gap-4\">\n                  {/* Image Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('image')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-blue-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                      <ImageIcon className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-blue-400 transition-colors\">\n                        Photo\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share an image from your gallery\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-blue-400 transition-colors\" />\n                  </motion.button>\n\n                  {/* Video Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('video')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-pink-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-pink-500 to-red-600 flex items-center justify-center\">\n                      <Video className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-pink-400 transition-colors\">\n                        Video\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share a short video clip\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-pink-400 transition-colors\" />\n                  </motion.button>\n\n                  {/* Text Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('text')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-green-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center\">\n                      <Type className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-green-400 transition-colors\">\n                        Text\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share a thought or quote\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-green-400 transition-colors\" />\n                  </motion.button>\n                </div>\n\n                {/* AI Story Suggestion */}\n                <div className=\"mt-8 p-4 bg-gradient-to-br from-purple-900/30 to-blue-900/30 rounded-2xl border border-purple-500/20\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Sparkles className=\"w-5 h-5 text-purple-400\" />\n                    <h4 className=\"text-white font-medium\">AI Story Ideas</h4>\n                  </div>\n                  <p className=\"text-neutral-400 text-sm\">\n                    Coming soon: Let AI help you create engaging professional stories!\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Upload Media */}\n            {step === 'upload-media' && (\n              <div className=\"p-6\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept={storyType === 'video' ? 'video/*' : 'image/*'}\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n\n                <motion.button\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"w-full aspect-[9/16] max-h-[400px] rounded-2xl border-2 border-dashed border-neutral-700 hover:border-blue-500 transition-colors flex flex-col items-center justify-center gap-4 bg-neutral-800/30\"\n                >\n                  <div className=\"w-16 h-16 rounded-full bg-neutral-800 flex items-center justify-center\">\n                    <Upload className=\"w-8 h-8 text-neutral-400\" />\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-white font-medium\">\n                      Tap to upload {storyType === 'video' ? 'video' : 'image'}\n                    </p>\n                    <p className=\"text-neutral-500 text-sm mt-1\">\n                      {storyType === 'video' ? 'MP4, MOV up to 50MB' : 'JPG, PNG up to 10MB'}\n                    </p>\n                  </div>\n                </motion.button>\n\n                {error && (\n                  <p className=\"mt-4 text-red-400 text-sm text-center\">{error}</p>\n                )}\n              </div>\n            )}\n\n            {/* Step 3: Edit */}\n            {step === 'edit' && (\n              <div className=\"flex flex-col h-full\">\n                {/* Preview */}\n                <div className=\"relative flex-1 min-h-[300px]\">\n                  {storyType === 'text' ? (\n                    <div\n                      className=\"absolute inset-0 flex items-center justify-center p-8\"\n                      style={{ background: textBackground }}\n                    >\n                      <textarea\n                        value={textContent}\n                        onChange={(e) => setTextContent(e.target.value)}\n                        placeholder=\"Type your story...\"\n                        className=\"w-full h-full bg-transparent text-white text-2xl font-bold text-center resize-none focus:outline-none placeholder-white/50\"\n                        maxLength={280}\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"absolute inset-0 bg-black flex items-center justify-center\">\n                      {storyType === 'video' && mediaPreview ? (\n                        <video\n                          src={mediaPreview}\n                          className=\"max-w-full max-h-full object-contain\"\n                          controls\n                        />\n                      ) : mediaPreview ? (\n                        <Image\n                          src={mediaPreview}\n                          alt=\"Preview\"\n                          fill\n                          className=\"object-contain\"\n                        />\n                      ) : null}\n\n                      {/* Remove button */}\n                      <button\n                        onClick={handleRemoveMedia}\n                        className=\"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 flex items-center justify-center\"\n                      >\n                        <Trash2 className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* Text Background Picker (for text stories) */}\n                {storyType === 'text' && (\n                  <div className=\"p-4 border-t border-neutral-800\">\n                    <p className=\"text-neutral-400 text-sm mb-3\">Background</p>\n                    <div className=\"flex gap-2 overflow-x-auto pb-2\">\n                      {TEXT_BACKGROUNDS.map((bg, idx) => (\n                        <button\n                          key={idx}\n                          onClick={() => setTextBackground(bg)}\n                          className={`w-10 h-10 rounded-xl flex-shrink-0 ${\n                            textBackground === bg ? 'ring-2 ring-white ring-offset-2 ring-offset-neutral-900' : ''\n                          }`}\n                          style={{ background: bg }}\n                        />\n                      ))}\n                    </div>\n                    <p className=\"text-neutral-500 text-xs mt-2\">\n                      {textContent.length}/280 characters\n                    </p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Step 4: Details */}\n            {step === 'details' && (\n              <div className=\"p-6 space-y-6\">\n                {/* Category */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 block\">Category</label>\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {STORY_CATEGORIES.map((cat) => (\n                      <button\n                        key={cat.value}\n                        onClick={() => setCategory(cat.value)}\n                        className={`p-3 rounded-xl border transition-colors flex flex-col items-center gap-1 ${\n                          category === cat.value\n                            ? 'bg-blue-500/20 border-blue-500 text-blue-400'\n                            : 'bg-neutral-800/50 border-neutral-700 text-neutral-400 hover:border-neutral-600'\n                        }`}\n                      >\n                        <span className=\"text-xl\">{cat.icon}</span>\n                        <span className=\"text-xs\">{cat.label}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Visibility */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 block\">Who can view</label>\n                  <div className=\"space-y-2\">\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => setVisibility(opt.value)}\n                        className={`w-full p-3 rounded-xl border transition-colors flex items-center gap-3 ${\n                          visibility === opt.value\n                            ? 'bg-blue-500/20 border-blue-500'\n                            : 'bg-neutral-800/50 border-neutral-700 hover:border-neutral-600'\n                        }`}\n                      >\n                        <div className={`${visibility === opt.value ? 'text-blue-400' : 'text-neutral-400'}`}>\n                          {opt.icon}\n                        </div>\n                        <div className=\"flex-1 text-left\">\n                          <p className={`font-medium ${visibility === opt.value ? 'text-blue-400' : 'text-white'}`}>\n                            {opt.label}\n                          </p>\n                          <p className=\"text-neutral-500 text-sm\">{opt.desc}</p>\n                        </div>\n                        {visibility === opt.value && (\n                          <Check className=\"w-5 h-5 text-blue-400\" />\n                        )}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Link (optional) */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 flex items-center gap-2\">\n                    <Link2 className=\"w-4 h-4\" />\n                    Add Link (optional)\n                  </label>\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://...\"\n                    className=\"w-full px-4 py-3 bg-neutral-800 border border-neutral-700 rounded-xl text-white placeholder-neutral-500 focus:outline-none focus:border-blue-500\"\n                  />\n                  {linkUrl && (\n                    <input\n                      type=\"text\"\n                      value={linkTitle}\n                      onChange={(e) => setLinkTitle(e.target.value)}\n                      placeholder=\"Link title (optional)\"\n                      className=\"w-full px-4 py-3 mt-2 bg-neutral-800 border border-neutral-700 rounded-xl text-white placeholder-neutral-500 focus:outline-none focus:border-blue-500\"\n                    />\n                  )}\n                </div>\n\n                {error && (\n                  <p className=\"text-red-400 text-sm\">{error}</p>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {(step === 'edit' || step === 'details') && (\n            <div className=\"p-4 border-t border-neutral-800\">\n              {step === 'edit' ? (\n                <button\n                  onClick={() => setStep('details')}\n                  disabled={!canProceed()}\n                  className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                >\n                  Continue\n                  <ChevronRight className=\"w-5 h-5\" />\n                </button>\n              ) : (\n                <button\n                  onClick={handleSubmit}\n                  disabled={isUploading}\n                  className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                >\n                  {isUploading ? (\n                    <>\n                      <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      Sharing...\n                    </>\n                  ) : (\n                    <>\n                      <Sparkles className=\"w-5 h-5\" />\n                      Share Story\n                    </>\n                  )}\n                </button>\n              )}\n            </div>\n          )}\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useRef","useCallback","motion","AnimatePresence","X","Image","ImageIcon","Video","Type","Sparkles","Link2","Users","Globe","Lock","Check","ChevronLeft","ChevronRight","Upload","Loader2","Trash2","createStory","createStoryWithMedia","CreateStoryInput","StoryCategory","StoryVisibility","StoryCreatorProps","isOpen","onClose","onStoryCreated","StoryType","CreatorStep","STORY_CATEGORIES","value","label","icon","VISIBILITY_OPTIONS","ReactNode","desc","TEXT_BACKGROUNDS","StoryCreator","step","setStep","storyType","setStoryType","mediaFile","setMediaFile","File","mediaPreview","setMediaPreview","textContent","setTextContent","textBackground","setTextBackground","linkUrl","setLinkUrl","linkTitle","setLinkTitle","category","setCategory","visibility","setVisibility","isUploading","setIsUploading","error","setError","fileInputRef","HTMLInputElement","handleFileSelect","e","ChangeEvent","file","target","files","isImage","type","startsWith","isVideo","maxSize","size","URL","createObjectURL","handleTypeSelect","handleRemoveMedia","revokeObjectURL","handleSubmit","mediaType","backgroundColor","undefined","formData","FormData","append","handleClose","err","message","goBack","canProceed","trim","length","opacity","scale","stopPropagation","current","click","background","map","bg","idx","cat","opt"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 10768, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryHighlights.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Play, Lock } from 'lucide-react';\nimport Image from 'next/image';\nimport { getUserHighlights, getHighlightStories, type StoryHighlight, type Story } from '@/lib/api/stories';\n\ninterface StoryHighlightsProps {\n  userId: string;\n  isOwnProfile?: boolean;\n  onCreateHighlight?: () => void;\n}\n\nexport function StoryHighlights({ userId, isOwnProfile = false, onCreateHighlight }: StoryHighlightsProps) {\n  const [highlights, setHighlights] = useState<StoryHighlight[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedHighlight, setSelectedHighlight] = useState<StoryHighlight | null>(null);\n  const [highlightStories, setHighlightStories] = useState<Story[]>([]);\n\n  useEffect(() => {\n    fetchHighlights();\n  }, [userId]);\n\n  const fetchHighlights = async () => {\n    try {\n      const response = await getUserHighlights(userId);\n      setHighlights(response.highlights);\n    } catch (error) {\n      console.error('Error fetching highlights:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleHighlightClick = async (highlight: StoryHighlight) => {\n    setSelectedHighlight(highlight);\n    try {\n      const response = await getHighlightStories(highlight.id);\n      setHighlightStories(response.highlight.stories);\n      // Open story viewer with these stories\n    } catch (error) {\n      console.error('Error fetching highlight stories:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex gap-4 overflow-x-auto pb-4 scrollbar-hide\">\n        {[...Array(4)].map((_, i) => (\n          <div key={i} className=\"flex flex-col items-center gap-2 flex-shrink-0 animate-pulse\">\n            <div className=\"w-16 h-16 rounded-2xl bg-neutral-800\" />\n            <div className=\"w-12 h-3 rounded bg-neutral-800\" />\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  if (highlights.length === 0 && !isOwnProfile) {\n    return null;\n  }\n\n  return (\n    <div className=\"mb-6\">\n      <h3 className=\"text-white font-semibold mb-4\">Story Highlights</h3>\n      \n      <div className=\"flex gap-4 overflow-x-auto pb-2 scrollbar-hide\">\n        {/* Create New Highlight Button (for own profile) */}\n        {isOwnProfile && (\n          <motion.button\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={onCreateHighlight}\n            className=\"flex flex-col items-center gap-2 flex-shrink-0\"\n          >\n            <div className=\"w-16 h-16 rounded-2xl bg-neutral-800/50 border-2 border-dashed border-neutral-700 flex items-center justify-center hover:border-blue-500/50 transition-colors\">\n              <Plus className=\"w-6 h-6 text-neutral-400\" />\n            </div>\n            <span className=\"text-xs text-neutral-500\">New</span>\n          </motion.button>\n        )}\n\n        {/* Highlights */}\n        {highlights.map((highlight, index) => (\n          <motion.button\n            key={highlight.id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.05 }}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={() => handleHighlightClick(highlight)}\n            className=\"flex flex-col items-center gap-2 flex-shrink-0 group\"\n          >\n            {/* Highlight Cover */}\n            <div className=\"relative w-16 h-16 rounded-2xl overflow-hidden ring-2 ring-neutral-700 group-hover:ring-blue-500 transition-all\">\n              {highlight.coverImage ? (\n                <Image\n                  src={highlight.coverImage}\n                  alt={highlight.title}\n                  fill\n                  className=\"object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                  <span className=\"text-white text-xl\">\n                    {highlight.title.charAt(0)}\n                  </span>\n                </div>\n              )}\n\n              {/* Story Count Badge */}\n              <div className=\"absolute bottom-1 right-1 flex items-center gap-0.5 bg-black/60 rounded-full px-1.5 py-0.5\">\n                <Play className=\"w-2.5 h-2.5 text-white\" fill=\"white\" />\n                <span className=\"text-[10px] text-white font-medium\">{highlight.storiesCount}</span>\n              </div>\n\n              {/* Privacy Indicator */}\n              {!highlight.isPublic && (\n                <div className=\"absolute top-1 left-1 w-4 h-4 bg-black/60 rounded-full flex items-center justify-center\">\n                  <Lock className=\"w-2.5 h-2.5 text-white\" />\n                </div>\n              )}\n\n              {/* Hover Overlay */}\n              <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                <Play className=\"w-6 h-6 text-white\" fill=\"white\" />\n              </div>\n            </div>\n\n            {/* Highlight Title */}\n            <span className=\"text-xs text-neutral-400 truncate max-w-16 group-hover:text-white transition-colors\">\n              {highlight.title}\n            </span>\n          </motion.button>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":["React","useState","useEffect","motion","Plus","Play","Lock","Image","getUserHighlights","getHighlightStories","StoryHighlight","Story","StoryHighlightsProps","userId","isOwnProfile","onCreateHighlight","StoryHighlights","highlights","setHighlights","loading","setLoading","selectedHighlight","setSelectedHighlight","highlightStories","setHighlightStories","fetchHighlights","response","error","console","handleHighlightClick","highlight","id","stories","Array","map","_","i","length","scale","index","opacity","y","delay","coverImage","title","charAt","storiesCount","isPublic"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 11056, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/index.ts"],"sourcesContent":["// Stories Components\nexport { StoryCarousel } from './StoryCarousel';\nexport { StoryViewer } from './StoryViewer';\nexport { StoryCreator } from './StoryCreator';\nexport { StoryHighlights } from './StoryHighlights';\n"],"names":[],"mappings":"AAAA,qBAAqB;;AACrB;AACA;AACA;AACA"}},
    {"offset": {"line": 11073, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/StreakCounter.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Flame, Trophy, Target, TrendingUp, X, LogIn, FileText, MessageCircle, ChevronRight } from 'lucide-react';\nimport Link from 'next/link';\nimport { getStreaks, type StreakData } from '@/lib/api/engagement';\n\n/**\n * StreakCounter - Professional streak badge with clean detail panel\n */\nexport default function StreakCounter() {\n  const [streak, setStreak] = useState<StreakData | null>(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStreaks = async () => {\n      try {\n        const data = await getStreaks();\n        setStreak(data);\n      } catch (error) {\n        console.error('Failed to fetch streaks:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStreaks();\n  }, []);\n\n  if (loading || !streak) return null;\n\n  const bestCurrentStreak = Math.max(\n    streak.connectionStreak,\n    streak.loginStreak,\n    streak.postingStreak,\n    streak.messagingStreak\n  );\n  const hasStreak = bestCurrentStreak > 0;\n  const anyAtRisk = streak.isAtRisk ? Object.values(streak.isAtRisk).some(Boolean) : false;\n\n  return (\n    <>\n      {/* Compact Badge */}\n      <button\n        onClick={() => setIsExpanded(true)}\n        className={`flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${\n          hasStreak\n            ? 'bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 hover:bg-orange-100 dark:hover:bg-orange-900/30'\n            : 'bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400 hover:bg-gray-200 dark:hover:bg-neutral-700'\n        }`}\n      >\n        <Flame className=\"w-4 h-4\" />\n        <span>{bestCurrentStreak}</span>\n        {anyAtRisk && hasStreak && (\n          <span className=\"w-1.5 h-1.5 rounded-full bg-amber-500\" />\n        )}\n      </button>\n\n      {/* Detail Panel */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            transition={{ duration: 0.15 }}\n            className=\"fixed inset-0 bg-black/30 z-50 flex items-center justify-center p-4\"\n            onClick={() => setIsExpanded(false)}\n          >\n            <motion.div\n              initial={{ opacity: 0, scale: 0.95 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.95 }}\n              transition={{ duration: 0.15 }}\n              className=\"bg-white dark:bg-neutral-900 rounded-xl w-full max-w-sm shadow-lg border border-gray-200 dark:border-neutral-800\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              {/* Header */}\n              <div className=\"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-neutral-800\">\n                <h3 className=\"text-base font-semibold text-gray-900 dark:text-white\">Your Streaks</h3>\n                <button onClick={() => setIsExpanded(false)} className=\"p-1 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg transition-colors\">\n                  <X className=\"w-4 h-4 text-gray-400\" />\n                </button>\n              </div>\n\n              <div className=\"p-5 space-y-4\">\n                {/* Streak rows */}\n                {[\n                  { label: 'Networking', value: streak.connectionStreak, longest: streak.longestConnectionStreak, icon: Flame, color: 'text-orange-500', bg: 'bg-orange-50 dark:bg-orange-900/20', riskKey: 'connection' },\n                  { label: 'Login', value: streak.loginStreak, longest: streak.longestLoginStreak, icon: LogIn, color: 'text-blue-500', bg: 'bg-blue-50 dark:bg-blue-900/20', riskKey: 'login' },\n                  { label: 'Posting', value: streak.postingStreak, longest: streak.longestPostingStreak, icon: FileText, color: 'text-green-500', bg: 'bg-green-50 dark:bg-green-900/20', riskKey: 'posting' },\n                  { label: 'Messaging', value: streak.messagingStreak, longest: streak.longestMessagingStreak, icon: MessageCircle, color: 'text-purple-500', bg: 'bg-purple-50 dark:bg-purple-900/20', riskKey: 'messaging' },\n                ].map((item) => {\n                  const Icon = item.icon;\n                  const atRisk = streak.isAtRisk?.[item.riskKey] ?? false;\n                  return (\n                    <div key={item.riskKey} className=\"flex items-center gap-3\">\n                      <div className={`w-9 h-9 rounded-lg ${item.bg} flex items-center justify-center flex-shrink-0`}>\n                        <Icon className={`w-4 h-4 ${item.color}`} />\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"text-sm font-semibold text-gray-900 dark:text-white leading-tight\">\n                          {item.value} <span className=\"text-xs font-normal text-gray-400 dark:text-neutral-500\">/ best {item.longest}</span>\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-neutral-400\">{item.label}</p>\n                      </div>\n                      {atRisk && (\n                        <span className=\"px-1.5 py-0.5 bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 text-[10px] rounded font-medium\">\n                          At risk\n                        </span>\n                      )}\n                    </div>\n                  );\n                })}\n\n                {/* Stats Row */}\n                <div className=\"grid grid-cols-2 gap-3 pt-2 border-t border-gray-100 dark:border-neutral-800\">\n                  <div className=\"py-3 text-center\">\n                    <Trophy className=\"w-4 h-4 text-amber-500 mx-auto mb-1.5\" />\n                    <p className=\"text-base font-semibold text-gray-900 dark:text-white\">{streak.overallBestStreak}</p>\n                    <p className=\"text-[11px] text-gray-400 dark:text-neutral-500 mt-0.5\">Best ever</p>\n                  </div>\n                  <div className=\"py-3 text-center\">\n                    <Target className=\"w-4 h-4 text-blue-500 mx-auto mb-1.5\" />\n                    <p className=\"text-base font-semibold text-gray-900 dark:text-white\">\n                      {streak.weeklyConnectionsMade}/{streak.weeklyConnectionsGoal}\n                    </p>\n                    <p className=\"text-[11px] text-gray-400 dark:text-neutral-500 mt-0.5\">This week</p>\n                  </div>\n                </div>\n\n                {/* View Full Dashboard Link */}\n                <Link\n                  href=\"/streaks\"\n                  onClick={() => setIsExpanded(false)}\n                  className=\"flex items-center justify-center gap-1.5 w-full py-2.5 text-sm font-medium text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/10 rounded-lg transition-colors\"\n                >\n                  View Full Dashboard\n                  <ChevronRight className=\"w-3.5 h-3.5\" />\n                </Link>\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":["useState","useEffect","AnimatePresence","motion","Flame","Trophy","Target","TrendingUp","X","LogIn","FileText","MessageCircle","ChevronRight","Link","getStreaks","StreakData","StreakCounter","streak","setStreak","isExpanded","setIsExpanded","loading","setLoading","fetchStreaks","data","error","console","bestCurrentStreak","Math","max","connectionStreak","loginStreak","postingStreak","messagingStreak","hasStreak","anyAtRisk","isAtRisk","Object","values","some","Boolean","opacity","duration","scale","e","stopPropagation","label","value","longest","longestConnectionStreak","icon","color","bg","riskKey","longestLoginStreak","longestPostingStreak","longestMessagingStreak","map","item","Icon","atRisk","overallBestStreak","weeklyConnectionsMade","weeklyConnectionsGoal"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 11471, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/SocialProofBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { getLiveActivity, type LiveActivity } from '@/lib/api/engagement';\n\n/**\n * SocialProofBar - Subtle live activity ticker\n * Clean, minimal design  single line of text with a green dot\n */\nexport default function SocialProofBar({ location }: { location?: string }) {\n  const [activity, setActivity] = useState<LiveActivity | null>(null);\n  const [currentStat, setCurrentStat] = useState(0);\n\n  const fetchActivity = useCallback(async () => {\n    try {\n      const data = await getLiveActivity(location);\n      setActivity(data);\n    } catch (error) {\n      console.error('Failed to fetch live activity:', error);\n    }\n  }, [location]);\n\n  useEffect(() => {\n    fetchActivity();\n    const interval = setInterval(fetchActivity, 30000);\n    return () => clearInterval(interval);\n  }, [fetchActivity]);\n\n  useEffect(() => {\n    if (!activity) return;\n    const interval = setInterval(() => {\n      setCurrentStat((prev) => (prev + 1) % 3);\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [activity]);\n\n  if (!activity) return null;\n\n  const stats = [\n    `${activity.activeUsersNow ?? 0} ${(activity.activeUsersNow ?? 0) === 1 ? 'person' : 'people'} networking${activity.locationLabel ? ` ${activity.locationLabel}` : ''}`,\n    `${activity.connectionsToday ?? 0} connections made today`,\n    `${activity.newUsersToday ?? 0} new ${(activity.newUsersToday ?? 0) === 1 ? 'member' : 'members'} joined today`,\n  ];\n\n  return (\n    <div className=\"flex items-center gap-2 px-1 py-1 overflow-hidden\">\n      <span className=\"relative flex h-1.5 w-1.5 flex-shrink-0\">\n        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-500 opacity-60\" />\n        <span className=\"relative inline-flex rounded-full h-1.5 w-1.5 bg-green-500\" />\n      </span>\n      <AnimatePresence mode=\"wait\">\n        <motion.span\n          key={currentStat}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          transition={{ duration: 0.25 }}\n          className=\"text-xs text-gray-500 dark:text-neutral-400\"\n        >\n          {stats[currentStat]}\n        </motion.span>\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":["c","_c","useState","useEffect","useCallback","AnimatePresence","motion","getLiveActivity","LiveActivity","SocialProofBar","t0","$","$i","Symbol","for","location","activity","setActivity","currentStat","setCurrentStat","t1","SocialProofBar[fetchActivity]","data","t2","error","console","fetchActivity","t3","SocialProofBar[useEffect()]","interval","setInterval","clearInterval","t4","t5","interval_0","SocialProofBar[useEffect() > setInterval()]","_SocialProofBarUseEffectSetIntervalSetCurrentStat","t6","activeUsersNow","locationLabel","t7","connectionsToday","t8","newUsersToday","t9","stats","t10","t11","t12","t13","t14","opacity","duration","t15","t16","prev"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 11699, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ProgressNudges.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Target, MessageSquare, FileText, Users, CheckCircle, X } from 'lucide-react';\nimport { getWeeklyGoals, getNudges, type WeeklyGoals, type ProgressNudge } from '@/lib/api/engagement';\n\n/**\n * ProgressNudges - Weekly goals + nudge cards\n * Clean, professional design with subtle progress indicators\n */\nexport default function ProgressNudges() {\n  const [goals, setGoals] = useState<WeeklyGoals | null>(null);\n  const [nudges, setNudges] = useState<ProgressNudge[]>([]);\n  const [dismissedNudges, setDismissedNudges] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [goalsData, nudgesData] = await Promise.all([\n          getWeeklyGoals(),\n          getNudges(),\n        ]);\n        setGoals(goalsData);\n        setNudges(nudgesData);\n      } catch (error) {\n        console.error('Failed to fetch progress:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  const dismissNudge = (type: string) => {\n    setDismissedNudges(prev => new Set([...prev, type]));\n  };\n\n  if (loading) return null;\n\n  const visibleNudges = nudges.filter(n => !dismissedNudges.has(n.type));\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Weekly Goals */}\n      {goals && !goals.isCompleted && (\n        <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n          <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-neutral-800\">\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Weekly Goals</h3>\n            {goals.isCompleted && (\n              <span className=\"flex items-center gap-1 text-xs text-green-600 dark:text-green-400 font-medium\">\n                <CheckCircle className=\"w-3.5 h-3.5\" /> Completed\n              </span>\n            )}\n          </div>\n\n          <div className=\"px-4 py-3 space-y-3\">\n            <GoalBar\n              icon={<Users className=\"w-3.5 h-3.5 text-gray-400\" />}\n              label=\"Connections\"\n              current={goals.connectionsMade}\n              target={goals.connectionsTarget}\n              progress={goals.connectionsProgress}\n            />\n            <GoalBar\n              icon={<FileText className=\"w-3.5 h-3.5 text-gray-400\" />}\n              label=\"Posts\"\n              current={goals.postsMade}\n              target={goals.postsTarget}\n              progress={goals.postsProgress}\n            />\n            <GoalBar\n              icon={<MessageSquare className=\"w-3.5 h-3.5 text-gray-400\" />}\n              label=\"Messages\"\n              current={goals.messagesSent}\n              target={goals.messagesTarget}\n              progress={goals.messagesProgress}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Nudges */}\n      <AnimatePresence>\n        {visibleNudges.map((nudge) => (\n          <motion.div\n            key={nudge.type}\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.15 }}\n            className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 p-3\"\n          >\n            <div className=\"flex items-start gap-2.5\">\n              <span className=\"text-base mt-0.5\">{nudge.icon}</span>\n              <p className=\"flex-1 text-sm text-gray-600 dark:text-neutral-300 leading-relaxed\">{nudge.message}</p>\n              <button\n                onClick={() => dismissNudge(nudge.type)}\n                className=\"p-0.5 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors flex-shrink-0\"\n              >\n                <X className=\"w-3.5 h-3.5 text-gray-300 dark:text-neutral-500\" />\n              </button>\n            </div>\n\n            {nudge.target > 0 && nudge.progress >= 0 && (\n              <div className=\"mt-2 ml-7\">\n                <div className=\"w-full bg-gray-100 dark:bg-neutral-800 rounded-full h-1\">\n                  <motion.div\n                    className=\"bg-blue-500 h-1 rounded-full\"\n                    initial={{ width: 0 }}\n                    animate={{ width: `${Math.min((nudge.progress / nudge.target) * 100, 100)}%` }}\n                    transition={{ duration: 0.8, delay: 0.2 }}\n                  />\n                </div>\n              </div>\n            )}\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nfunction GoalBar({\n  icon,\n  label,\n  current,\n  target,\n  progress,\n}: {\n  icon: React.ReactNode;\n  label: string;\n  current: number;\n  target: number;\n  progress: number;\n}) {\n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-1.5\">\n        <div className=\"flex items-center gap-1.5\">\n          {icon}\n          <span className=\"text-xs text-gray-500 dark:text-neutral-400\">{label}</span>\n        </div>\n        <span className=\"text-xs font-medium text-gray-700 dark:text-neutral-300 tabular-nums\">\n          {current}/{target}\n        </span>\n      </div>\n      <div className=\"w-full bg-gray-100 dark:bg-neutral-800 rounded-full h-1.5\">\n        <motion.div\n          className=\"bg-blue-500 h-1.5 rounded-full\"\n          initial={{ width: 0 }}\n          animate={{ width: `${Math.min(progress, 100)}%` }}\n          transition={{ duration: 0.8, delay: 0.1 }}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":["c","_c","useState","useEffect","motion","AnimatePresence","Target","MessageSquare","FileText","Users","CheckCircle","X","getWeeklyGoals","getNudges","WeeklyGoals","ProgressNudge","ProgressNudges","goals","setGoals","nudges","setNudges","dismissedNudges","setDismissedNudges","Set","loading","setLoading","fetchData","goalsData","nudgesData","Promise","all","error","console","dismissNudge","type","prev","visibleNudges","filter","n","has","isCompleted","connectionsMade","connectionsTarget","connectionsProgress","postsMade","postsTarget","postsProgress","messagesSent","messagesTarget","messagesProgress","map","nudge","opacity","height","duration","icon","message","target","progress","width","Math","min","delay","GoalBar","t0","$","$i","Symbol","for","label","current","t1","t2","t3","t4","t5","t6","t7","t8","t9","t10"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 12140, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ConnectionCelebration.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Check, Flame, Zap } from 'lucide-react';\nimport { getConnectionCelebration, type CelebrationData } from '@/lib/api/engagement';\n\n/**\n * ConnectionCelebration - Enhanced connection confirmation overlay\n * Supports confetti animation and streak reward display\n */\n\ninterface ConnectionCelebrationProps {\n  connectionId: string | null;\n  onClose: () => void;\n}\n\nexport default function ConnectionCelebration({ connectionId, onClose }: ConnectionCelebrationProps) {\n  const [celebration, setCelebration] = useState<CelebrationData | null>(null);\n\n  const fireConfetti = useCallback(async () => {\n    try {\n      const confetti = (await import('canvas-confetti')).default;\n      // Burst from both sides\n      confetti({\n        particleCount: 80,\n        spread: 60,\n        origin: { x: 0.25, y: 0.6 },\n        colors: ['#f97316', '#eab308', '#22c55e', '#3b82f6', '#a855f7'],\n      });\n      confetti({\n        particleCount: 80,\n        spread: 60,\n        origin: { x: 0.75, y: 0.6 },\n        colors: ['#f97316', '#eab308', '#22c55e', '#3b82f6', '#a855f7'],\n      });\n    } catch {\n      // canvas-confetti not available, skip silently\n    }\n  }, []);\n\n  useEffect(() => {\n    if (!connectionId) return;\n\n    const fetchCelebration = async () => {\n      try {\n        const data = await getConnectionCelebration(connectionId);\n        if (data) {\n          setCelebration(data);\n          if (data.showConfetti) {\n            setTimeout(fireConfetti, 300);\n          }\n          setTimeout(() => {\n            onClose();\n          }, 5000);\n        }\n      } catch (error) {\n        console.error('Failed to fetch celebration:', error);\n      }\n    };\n\n    fetchCelebration();\n  }, [connectionId, onClose, fireConfetti]);\n\n  if (!connectionId || !celebration) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        transition={{ duration: 0.15 }}\n        className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/40\"\n        onClick={onClose}\n      >\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          transition={{ duration: 0.2 }}\n          className=\"bg-white dark:bg-neutral-900 rounded-xl p-6 max-w-xs w-full mx-4 shadow-lg border border-gray-200 dark:border-neutral-800 text-center relative\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <button\n            onClick={onClose}\n            className=\"absolute top-3 right-3 p-0.5 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors\"\n          >\n            <X className=\"w-4 h-4 text-gray-300 dark:text-neutral-500\" />\n          </button>\n\n          {/* Success icon */}\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ type: 'spring', stiffness: 400, damping: 15, delay: 0.1 }}\n            className=\"w-12 h-12 mx-auto mb-4 rounded-full bg-green-50 dark:bg-green-900/20 flex items-center justify-center\"\n          >\n            <Check className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\n          </motion.div>\n\n          {/* Profile */}\n          <div className=\"flex items-center justify-center mb-3\">\n            {celebration.otherUser.profileImage ? (\n              <img\n                src={celebration.otherUser.profileImage}\n                alt={celebration.otherUser.name}\n                className=\"w-14 h-14 rounded-full object-cover border-2 border-white dark:border-neutral-800 shadow-sm\"\n              />\n            ) : (\n              <div className=\"w-14 h-14 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-gray-500 dark:text-neutral-400 text-lg font-semibold border-2 border-white dark:border-neutral-800 shadow-sm\">\n                {celebration.otherUser.name.charAt(0)}\n              </div>\n            )}\n          </div>\n\n          {/* Message */}\n          <h2 className=\"text-base font-semibold text-gray-900 dark:text-white mb-1\">\n            {celebration.celebrationMessage}\n          </h2>\n\n          {celebration.mutualConnections > 0 && (\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500 mb-3\">\n              {celebration.mutualConnections} mutual connection{celebration.mutualConnections > 1 ? 's' : ''}\n            </p>\n          )}\n\n          {/* Streak & reward info */}\n          {celebration.showConfetti && (\n            <motion.div\n              initial={{ opacity: 0, y: 5 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: 0.3 }}\n              className=\"flex items-center justify-center gap-3 mb-3 px-3 py-2 bg-orange-50 dark:bg-orange-900/10 rounded-lg\"\n            >\n              <div className=\"flex items-center gap-1 text-orange-600 dark:text-orange-400\">\n                <Flame className=\"w-3.5 h-3.5\" />\n                <span className=\"text-xs font-medium\">Streak extended!</span>\n              </div>\n            </motion.div>\n          )}\n\n          <button\n            onClick={onClose}\n            className=\"mt-2 px-5 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-full transition-colors\"\n          >\n            Continue\n          </button>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":["useEffect","useState","useCallback","motion","AnimatePresence","X","Check","Flame","Zap","getConnectionCelebration","CelebrationData","ConnectionCelebrationProps","connectionId","onClose","ConnectionCelebration","celebration","setCelebration","fireConfetti","confetti","default","particleCount","spread","origin","x","y","colors","fetchCelebration","data","showConfetti","setTimeout","error","console","opacity","duration","scale","e","stopPropagation","type","stiffness","damping","delay","otherUser","profileImage","name","charAt","celebrationMessage","mutualConnections"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 12431, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ConnectionLimitBanner.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Clock, Info } from 'lucide-react';\nimport { getConnectionLimit, type ConnectionLimit } from '@/lib/api/engagement';\n\n/**\n * ConnectionLimitBanner - Subtle info bar for daily connection limits\n * Professional, non-alarming design\n */\nexport default function ConnectionLimitBanner() {\n  const [limit, setLimit] = useState<ConnectionLimit | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        const data = await getConnectionLimit();\n        setLimit(data);\n      } catch (error) {\n        console.error('Failed to fetch connection limit:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLimit();\n  }, []);\n\n  if (loading || !limit) return null;\n  if (limit.remaining > 5) return null;\n\n  const isDepleted = limit.remaining === 0;\n\n  const resetTime = new Date(limit.resetsAt);\n  const now = new Date();\n  const hoursUntilReset = Math.max(1, Math.ceil((resetTime.getTime() - now.getTime()) / (1000 * 60 * 60)));\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      transition={{ duration: 0.2 }}\n      className=\"flex items-center gap-2.5 px-4 py-2.5 bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800\"\n    >\n      <Info className=\"w-4 h-4 text-gray-400 flex-shrink-0\" />\n      <p className=\"flex-1 text-xs text-gray-600 dark:text-neutral-400\">\n        {isDepleted\n          ? 'Daily connection limit reached'\n          : `${limit.remaining} connection request${limit.remaining !== 1 ? 's' : ''} remaining today`}\n      </p>\n      {isDepleted && (\n        <span className=\"flex items-center gap-1 text-xs text-gray-400 dark:text-neutral-500 flex-shrink-0\">\n          <Clock className=\"w-3 h-3\" />\n          Resets in {hoursUntilReset}h\n        </span>\n      )}\n    </motion.div>\n  );\n}\n"],"names":["useState","useEffect","motion","Clock","Info","getConnectionLimit","ConnectionLimit","ConnectionLimitBanner","limit","setLimit","loading","setLoading","fetchLimit","data","error","console","remaining","isDepleted","resetTime","Date","resetsAt","now","hoursUntilReset","Math","max","ceil","getTime","opacity","duration"],"mappings":";;;;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,eAAe;AACtC,SAASC,KAAK,EAAEC,IAAI,QAAQ,cAAc;;AAC1C,SAASC,kBAAkB,EAAE,KAAKC,eAAe,QAAQ,sBAAsB;;;AAL/E,YAAY;;;;;AAWG;;IACb,MAAM,CAACE,KAAK,EAAEC,QAAQ,CAAC,OAAGT,yKAAQ,CAACM,CAAwB,IAAI,CAAC,SAAd,GAAG,IAAI,CAAC;IAC1D,MAAM,CAACI,OAAO,EAAEC,UAAU,CAAC,OAAGX,yKAAQ,EAAC,IAAI,CAAC;QAE5CC,0KAAS;2CAAC,MAAM;YACd,MAAMW,UAAU;8DAAG,MAAAA,CAAA,KAAY;oBAC7B,IAAI;wBACF,MAAMC,IAAI,GAAG,UAAMR,wJAAkB,CAAC,CAAC;wBACvCI,QAAQ,CAACI,IAAI,CAAC;oBAChB,CAAC,CAAC,OAAOC,KAAK,EAAE;wBACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;oBAC3D,CAAC,QAAS;wBACRH,UAAU,CAAC,KAAK,CAAC;oBACnB;gBACF,CAAC;;YACDC,UAAU,CAAC,CAAC;QACd,CAAC;0CAAE,EAAE,CAAC;IAEN,IAAIF,OAAO,IAAI,CAACF,KAAK,EAAE,OAAO,IAAI;IAClC,IAAIA,KAAK,CAACQ,SAAS,GAAG,CAAC,EAAE,OAAO,IAAI;IAEpC,MAAMC,UAAU,GAAGT,KAAK,CAACQ,SAAS,KAAK,CAAC;IAExC,MAAME,SAAS,GAAG,IAAIC,IAAI,CAACX,KAAK,CAACY,QAAQ,CAAC;IAC1C,MAAMC,GAAG,GAAG,IAAIF,IAAI,CAAC,CAAC;IACtB,MAAMG,eAAe,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,IAAI,CAAC,CAACP,SAAS,CAACQ,OAAO,CAAC,CAAC,GAAGL,GAAG,CAACK,OAAO,CAAC,CAAC,IAAA,CAAK,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;IAExG,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,OAAO,CAAC,CAAC;YAAEC,OAAO,EAAE;QAAE,CAAC,CAAC;QACxB,OAAO,CAAC,CAAC;YAAEA,OAAO,EAAE;QAAE,CAAC,CAAC;QACxB,UAAU,CAAC,CAAC;YAAEC,QAAQ,EAAE;QAAI,CAAC,CAAC;QAC9B,SAAS,EAAC,8HAA8H;;0BAExI,6LAAC,6MAAI;gBAAC,SAAS,EAAC,qCAAqC;;;;;;0BACrD,6LAAC,CAAC;gBAAC,SAAS,EAAC,oDAAoD;0BAC9DX,UAAU,GACP,gCAAgC,GAChC,GAAGT,KAAK,CAACQ,SAAS,CAAA,mBAAA,EAAsBR,KAAK,CAACQ,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAA,gBAAA,CAAkB;;;;;;YAE/FC,UAAU,kBACT,6LAAC,IAAI;gBAAC,SAAS,EAAC,mFAAmF;;kCACjG,6LAAC,gNAAK;wBAAC,SAAS,EAAC,SAAS;;;;;;oBAAA;oBACfK,eAAe;oBAAC;;;;;;;;;;;;;AAKrC;;KAhDwBf,qBAAqBA,CAAA,EAAG","ignoreList":[]}},
    {"offset": {"line": 12539, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/Leaderboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { getLeaderboard, type LeaderboardEntry } from '@/lib/api/engagement';\nimport Link from 'next/link';\n\n/**\n * Leaderboard - Clean top networkers list\n * Professional design with week/month toggle\n */\nexport default function Leaderboard() {\n  const [entries, setEntries] = useState<LeaderboardEntry[]>([]);\n  const [period, setPeriod] = useState<'weekly' | 'monthly'>('weekly');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchLeaderboard = async () => {\n      setLoading(true);\n      try {\n        const data = await getLeaderboard(period, 10);\n        setEntries(data?.leaderboard ?? []);\n      } catch (error) {\n        console.error('Failed to fetch leaderboard:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLeaderboard();\n  }, [period]);\n\n  return (\n    <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-neutral-800\">\n        <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Top Networkers</h3>\n        <div className=\"flex bg-gray-100 dark:bg-neutral-800 rounded-lg p-0.5\">\n          <button\n            onClick={() => setPeriod('weekly')}\n            className={`px-2.5 py-1 text-xs rounded-md transition-colors ${\n              period === 'weekly'\n                ? 'bg-white dark:bg-neutral-700 text-gray-900 dark:text-white shadow-sm'\n                : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n            }`}\n          >\n            Week\n          </button>\n          <button\n            onClick={() => setPeriod('monthly')}\n            className={`px-2.5 py-1 text-xs rounded-md transition-colors ${\n              period === 'monthly'\n                ? 'bg-white dark:bg-neutral-700 text-gray-900 dark:text-white shadow-sm'\n                : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n            }`}\n          >\n            Month\n          </button>\n        </div>\n      </div>\n\n      {/* Content */}\n      {loading ? (\n        <div className=\"flex items-center justify-center py-10\">\n          <div className=\"animate-spin rounded-full h-5 w-5 border-2 border-gray-300 border-t-gray-600 dark:border-neutral-600 dark:border-t-neutral-300\" />\n        </div>\n      ) : entries.length === 0 ? (\n        <div className=\"text-center py-10 text-sm text-gray-400 dark:text-neutral-500\">\n          No data yet\n        </div>\n      ) : (\n        <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n          {entries.map((entry, index) => (\n            <Link\n              key={entry.id}\n              href={`/profile/${entry.username}`}\n              className=\"flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n            >\n              {/* Rank */}\n              <span className={`w-5 text-xs font-semibold text-center tabular-nums ${\n                index === 0 ? 'text-amber-500' : index === 1 ? 'text-gray-400' : index === 2 ? 'text-amber-600' : 'text-gray-400 dark:text-neutral-500'\n              }`}>\n                {index + 1}\n              </span>\n\n              {/* Avatar */}\n              {entry.profileImage ? (\n                <img\n                  src={entry.profileImage}\n                  alt={entry.name}\n                  className=\"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n                />\n              ) : (\n                <div className=\"w-8 h-8 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-gray-500 dark:text-neutral-400 text-xs font-semibold flex-shrink-0\">\n                  {entry.name.charAt(0)}\n                </div>\n              )}\n\n              {/* Info */}\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">{entry.name}</p>\n                {entry.college && (\n                  <p className=\"text-xs text-gray-400 dark:text-neutral-500 truncate\">{entry.college}</p>\n                )}\n              </div>\n\n              {/* Count */}\n              <span className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 tabular-nums flex-shrink-0\">\n                {entry.connectionCount}\n              </span>\n            </Link>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["useState","useEffect","getLeaderboard","LeaderboardEntry","Link","Leaderboard","entries","setEntries","period","setPeriod","loading","setLoading","fetchLeaderboard","data","leaderboard","error","console","length","map","entry","index","id","username","profileImage","name","charAt","college","connectionCount"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 12737, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/DailyMatchCard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { UserPlus, ChevronRight, X, MessageCircle, Check, Loader2 } from 'lucide-react';\nimport { getDailyMatches, getHiddenGem, type DailyMatch, type DailyMatchesResponse } from '@/lib/api/engagement';\nimport { sendConnectionRequest } from '@/lib/api/connections';\nimport Link from 'next/link';\n\n/**\n * DailyMatchCard - Professional \"People you may know\" card\n * Clean LinkedIn-style suggestion list with functional Connect button\n */\nexport default function DailyMatchCard() {\n  const [matchData, setMatchData] = useState<DailyMatchesResponse | null>(null);\n  const [hiddenGem, setHiddenGem] = useState<{ match: DailyMatch; message: string } | null>(null);\n  const [dismissed, setDismissed] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [connectingIds, setConnectingIds] = useState<Set<string>>(new Set());\n  const [connectedIds, setConnectedIds] = useState<Set<string>>(new Set());\n\n  useEffect(() => {\n    const fetchMatches = async () => {\n      try {\n        const [matches, gem] = await Promise.all([\n          getDailyMatches(),\n          getHiddenGem(),\n        ]);\n        setMatchData(matches);\n        if (gem) setHiddenGem(gem as { match: DailyMatch; message: string });\n      } catch (error) {\n        console.error('Failed to fetch daily matches:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMatches();\n  }, []);\n\n  const handleConnect = async (e: React.MouseEvent, userId: string) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (connectingIds.has(userId) || connectedIds.has(userId)) return;\n    \n    setConnectingIds(prev => new Set([...prev, userId]));\n    try {\n      await sendConnectionRequest(userId);\n      setConnectedIds(prev => new Set([...prev, userId]));\n    } catch (error) {\n      console.error('Failed to send connection request:', error);\n    } finally {\n      setConnectingIds(prev => {\n        const next = new Set(prev);\n        next.delete(userId);\n        return next;\n      });\n    }\n  };\n\n  if (loading || dismissed || !matchData || matchData.matches.length === 0) return null;\n\n  const ConnectButton = ({ userId }: { userId: string }) => {\n    const isConnecting = connectingIds.has(userId);\n    const isConnected = connectedIds.has(userId);\n    \n    if (isConnected) {\n      return (\n        <span className=\"flex items-center gap-1 px-3 py-1.5 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 text-xs font-medium rounded-full flex-shrink-0\">\n          <Check className=\"w-3 h-3\" />\n          Sent\n        </span>\n      );\n    }\n    \n    return (\n      <button\n        onClick={(e) => handleConnect(e, userId)}\n        disabled={isConnecting}\n        className=\"flex items-center gap-1 px-3 py-1.5 border border-blue-500 text-blue-600 dark:text-blue-400 text-xs font-medium rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex-shrink-0 disabled:opacity-50\"\n      >\n        {isConnecting ? (\n          <Loader2 className=\"w-3 h-3 animate-spin\" />\n        ) : (\n          <UserPlus className=\"w-3 h-3\" />\n        )}\n        Connect\n      </button>\n    );\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-100 dark:border-neutral-800\">\n        <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n          People you may know\n        </h3>\n        <button onClick={() => setDismissed(true)} className=\"p-0.5 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded transition-colors\">\n          <X className=\"w-4 h-4 text-gray-300 dark:text-neutral-500\" />\n        </button>\n      </div>\n\n      {/* Surprise message  subtle info bar */}\n      <AnimatePresence>\n        {matchData.surpriseMessage && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"px-4 py-2 bg-blue-50 dark:bg-blue-900/10 border-b border-blue-100 dark:border-blue-900/20\"\n          >\n            <p className=\"text-xs text-blue-600 dark:text-blue-400\">{matchData.surpriseMessage}</p>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Match List */}\n      <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n        {matchData.matches.map((match) => (\n          <Link\n            key={match.id}\n            href={`/profile/${match.username}`}\n            className=\"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n          >\n            {match.profileImage ? (\n              <img\n                src={match.profileImage}\n                alt={match.name}\n                className=\"w-10 h-10 rounded-full object-cover flex-shrink-0\"\n              />\n            ) : (\n              <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-gray-500 dark:text-neutral-400 text-sm font-semibold flex-shrink-0\">\n                {match.name.charAt(0)}\n              </div>\n            )}\n\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-1.5\">\n                <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">{match.name}</p>\n                {match.isOnline && (\n                  <span className=\"w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0\" />\n                )}\n              </div>\n              {match.headline && (\n                <p className=\"text-xs text-gray-500 dark:text-neutral-400 truncate mt-0.5\">{match.headline}</p>\n              )}\n              <div className=\"flex items-center gap-2 mt-0.5\">\n                {match.college && (\n                  <p className=\"text-xs text-gray-400 dark:text-neutral-500 truncate\">{match.college}</p>\n                )}\n                {match.replyRate !== undefined && (\n                  <span className={`inline-flex items-center gap-0.5 text-[10px] font-medium px-1.5 py-0.5 rounded-full ${\n                    match.replyRate >= 80\n                      ? 'bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400'\n                      : match.replyRate >= 50\n                        ? 'bg-yellow-50 dark:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400'\n                        : 'bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400'\n                  }`}>\n                    <MessageCircle className=\"w-2.5 h-2.5\" />\n                    {match.replyRate}%\n                  </span>\n                )}\n              </div>\n            </div>\n\n            <ConnectButton userId={match.id} />\n          </Link>\n        ))}\n      </div>\n\n      {/* Hidden Gem  integrated as a highlighted row */}\n      {hiddenGem && (\n        <Link\n          href={`/profile/${hiddenGem.match.username}`}\n          className=\"flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-neutral-800/30 border-t border-gray-100 dark:border-neutral-800 hover:bg-gray-100 dark:hover:bg-neutral-800/60 transition-colors\"\n        >\n          {hiddenGem.match.profileImage ? (\n            <img\n              src={hiddenGem.match.profileImage}\n              alt={hiddenGem.match.name}\n              className=\"w-10 h-10 rounded-full object-cover flex-shrink-0\"\n            />\n          ) : (\n            <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center text-gray-500 dark:text-neutral-400 text-sm font-semibold flex-shrink-0\">\n              {hiddenGem.match.name.charAt(0)}\n            </div>\n          )}\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium mb-0.5\">{hiddenGem.message}</p>\n            <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">{hiddenGem.match.name}</p>\n            <p className=\"text-xs text-gray-500 dark:text-neutral-400 truncate\">{hiddenGem.match.headline || hiddenGem.match.college}</p>\n          </div>\n          <ConnectButton userId={hiddenGem.match.id} />\n        </Link>\n      )}\n\n      {/* Footer */}\n      <Link\n        href=\"/find-people\"\n        className=\"flex items-center justify-center gap-1 px-4 py-2.5 text-xs text-blue-600 dark:text-blue-400 font-medium hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors border-t border-gray-100 dark:border-neutral-800\"\n      >\n        Show more <ChevronRight className=\"w-3 h-3\" />\n      </Link>\n    </div>\n  );\n}\n"],"names":["useState","useEffect","motion","AnimatePresence","UserPlus","ChevronRight","X","MessageCircle","Check","Loader2","getDailyMatches","getHiddenGem","DailyMatch","DailyMatchesResponse","sendConnectionRequest","Link","DailyMatchCard","matchData","setMatchData","hiddenGem","setHiddenGem","match","message","dismissed","setDismissed","loading","setLoading","connectingIds","setConnectingIds","Set","connectedIds","setConnectedIds","fetchMatches","matches","gem","Promise","all","error","console","handleConnect","e","React","MouseEvent","userId","preventDefault","stopPropagation","has","prev","next","delete","length","ConnectButton","isConnecting","isConnected","surpriseMessage","opacity","height","map","id","username","profileImage","name","charAt","isOnline","headline","college","replyRate","undefined"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 13151, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/index.ts"],"sourcesContent":["export { default as StreakCounter } from './StreakCounter';\nexport { default as SocialProofBar } from './SocialProofBar';\nexport { default as ProgressNudges } from './ProgressNudges';\nexport { default as ExitMessage } from './ExitMessage';\nexport { default as ConnectionCelebration } from './ConnectionCelebration';\nexport { default as ConnectionLimitBanner } from './ConnectionLimitBanner';\nexport { default as Leaderboard } from './Leaderboard';\nexport { default as DailyMatchCard } from './DailyMatchCard';\nexport { default as EngagementProvider } from './EngagementProvider';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 13265, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/Feed.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Loader2, Plus } from 'lucide-react';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { Comments } from '@/components/feed/Comments';\nimport { CreatePostModal } from '@/components/feed/CreatePostModal';\nimport { StoryCarousel, StoryViewer, StoryCreator } from '@/components/stories';\nimport { getFeed } from '@/lib/api/posts';\nimport { type StoryGroup } from '@/lib/api/stories';\nimport { \n  initializeSocket, \n  disconnectSocket, \n  getSocket,\n  joinPostRoom,\n  leavePostRoom,\n  removeSocketHandlers,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { recordLogin } from '@/lib/api/engagement';\nimport { SocialProofBar, StreakCounter, ProgressNudges, DailyMatchCard, ConnectionLimitBanner, Leaderboard, TodayMatchesSection, RewardPopup } from '@/components/engagement';\nimport { StreakWidget, WeeklyGoalsWidget, NudgeCard } from '@/components/engagement/FeedWidgets';\nimport { useRewards } from '@/hooks/useRewards';\nimport type { Post, PollOption } from '@/types/post';\n\nexport function Feed() {\n  const { user, loading: authLoading } = useAuth();\n  const { rewards, dismissReward } = useRewards(user?.id);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [cursor, setCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal states\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedPostForComments, setSelectedPostForComments] = useState<string | null>(null);\n  const [highlightCommentId, setHighlightCommentId] = useState<string | undefined>(undefined);\n  \n  // Stories states\n  const [showStoryCreator, setShowStoryCreator] = useState(false);\n  const [showStoryViewer, setShowStoryViewer] = useState(false);\n  const [selectedStoryGroup, setSelectedStoryGroup] = useState<StoryGroup | null>(null);\n  \n  // Refs for infinite scroll\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Initialize Socket.IO\n  useEffect(() => {\n    if (!user) return;\n    \n    // Define handlers\n    const handlePostCreated = ({ post }: { post: Post }) => {\n      console.log('Feed: New post received via socket:', post.id);\n      // Add new post to the top of the feed in real-time\n      setPosts(prev => {\n        // Check if post already exists to avoid duplicates\n        if (prev.some(p => p.id === post.id)) return prev;\n        return [post, ...prev];\n      });\n    };\n    \n    const handlePostLiked = ({ postId, userId: likerUserId, liked, likesCount, reactionType, reactionSummary }: any) => {\n      setPosts(prev => prev.map(post => {\n        if (post.id !== postId) return post;\n        // Only update isLiked/reactionType if the current user performed the action\n        const isCurrentUser = likerUserId === user.id;\n        return {\n          ...post,\n          likesCount,\n          isLiked: isCurrentUser ? liked : post.isLiked,\n          userReactionType: isCurrentUser ? reactionType : post.userReactionType,\n          reactionSummary: reactionSummary || post.reactionSummary,\n        };\n      }));\n    };\n    \n    const handlePostReacted = ({ postId, userId: reactorUserId, liked, reactionType, likesCount, reactionSummary }: any) => {\n      setPosts(prev => prev.map(post => {\n        if (post.id !== postId) return post;\n        // Only update isLiked/reactionType if the current user performed the action\n        const isCurrentUser = reactorUserId === user.id;\n        return {\n          ...post,\n          likesCount,\n          isLiked: isCurrentUser ? liked : post.isLiked,\n          userReactionType: isCurrentUser ? reactionType : post.userReactionType,\n          reactionSummary: reactionSummary || post.reactionSummary,\n        };\n      }));\n    };\n    \n    const handleCommentCreated = ({ postId, commentsCount }: { postId: string; commentsCount: number }) => {\n      setPosts(prev => prev.map(post => \n        post.id === postId ? { ...post, commentsCount } : post\n      ));\n    };\n    \n    const handlePollUpdated = ({ postId, pollOptions }: { postId: string; pollOptions: any[] }) => {\n      setPosts(prev => prev.map(post => \n        post.id === postId ? { ...post, pollOptions } : post\n      ));\n    };\n    \n    // Initialize socket with handlers\n    const socket = initializeSocket({\n      onConnect: () => {\n        console.log('Feed: Socket connected');\n      },\n      onPostCreated: handlePostCreated,\n      onPostLiked: handlePostLiked,\n      onPostReacted: handlePostReacted,\n      onCommentCreated: handleCommentCreated,\n      onPollUpdated: handlePollUpdated,\n    });\n    \n    // Also directly attach handlers to ensure they're registered\n    const sock = getSocket();\n    if (sock) {\n      sock.on('post:created', handlePostCreated);\n      sock.on('post:liked', handlePostLiked);\n      sock.on('post:reacted', handlePostReacted);\n      sock.on('comment:created', handleCommentCreated);\n      sock.on('poll:updated', handlePollUpdated);\n    }\n    \n    return () => {\n      // Clean up handlers on unmount\n      const sock = getSocket();\n      if (sock) {\n        sock.off('post:created', handlePostCreated);\n        sock.off('post:liked', handlePostLiked);\n        sock.off('post:reacted', handlePostReacted);\n        sock.off('comment:created', handleCommentCreated);\n        sock.off('poll:updated', handlePollUpdated);\n      }\n    };\n  }, [user]);\n\n  // Fetch initial feed\n  useEffect(() => {\n    if (authLoading) return;\n    \n    const fetchFeed = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const response = await getFeed(undefined, 20);\n        setPosts(response.posts);\n        setCursor(response.nextCursor);\n        setHasMore(response.hasMore ?? response.nextCursor !== null);\n      } catch (err: any) {\n        console.error('Error fetching feed:', err);\n        setError(err.response?.data?.error || 'Failed to load feed');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchFeed();\n  }, [authLoading]);\n\n  // Handle opening a story group\n  const handleOpenStory = (group: StoryGroup) => {\n    setSelectedStoryGroup(group);\n    setShowStoryViewer(true);\n  };\n\n  // Load more posts\n  const loadMore = useCallback(async () => {\n    if (loadingMore || !hasMore || !cursor) return;\n    \n    setLoadingMore(true);\n    \n    try {\n      const response = await getFeed(cursor, 20);\n      setPosts(prev => [...prev, ...response.posts]);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error loading more posts:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  }, [cursor, hasMore, loadingMore]);\n\n  // Infinite scroll observer\n  useEffect(() => {\n    if (loading) return;\n    \n    observerRef.current = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && hasMore && !loadingMore) {\n          loadMore();\n        }\n      },\n      { threshold: 0.1 }\n    );\n    \n    if (loadMoreRef.current) {\n      observerRef.current.observe(loadMoreRef.current);\n    }\n    \n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, hasMore, loadingMore, loadMore]);\n\n  // Retry loading feed on error\n  const retryFeed = async () => {\n    setLoading(true);\n    setError(null);\n    setCursor(null);\n    \n    try {\n      const response = await getFeed(undefined, 20);\n      setPosts(response.posts);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error loading feed:', err);\n      setError(err.response?.data?.error || 'Failed to load feed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle post created - no need to refresh, real-time updates handle it\n  const handlePostCreated = () => {\n    // Post will be added via WebSocket real-time event\n  };\n\n  // Handle post deleted\n  const handlePostDeleted = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n  };\n\n  // Handle post edited\n  const handlePostEdited = (postId: string, updatedPost: Post) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, ...updatedPost } : post\n    ));\n  };\n\n  // Handle like update\n  const handleLikeUpdate = (postId: string, liked: boolean, count: number) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, isLiked: liked, likesCount: count } : post\n    ));\n  };\n\n  // Handle poll update\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, pollOptions: options } : post\n    ));\n  };\n\n  // Handle comment click\n  const handleCommentClick = (postId: string) => {\n    setSelectedPostForComments(postId);\n    setHighlightCommentId(undefined);\n    joinPostRoom(postId);\n  };\n\n  // Close comments\n  const closeComments = () => {\n    if (selectedPostForComments) {\n      leavePostRoom(selectedPostForComments);\n    }\n    setSelectedPostForComments(null);\n    setHighlightCommentId(undefined);\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-5xl mx-auto pb-24\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-40 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"flex items-center justify-between px-4 py-3\">\n          <div className=\"flex items-center gap-3\">\n            <h1 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Feed</h1>\n            {user && <SocialProofBar />}\n          </div>\n          {user && <StreakCounter />}\n        </div>\n      </div>\n\n      {/* Stories Carousel */}\n      {user && (\n        <StoryCarousel\n          onOpenStory={handleOpenStory}\n          onCreateStory={() => setShowStoryCreator(true)}\n        />\n      )}\n\n      {/* Today's Matches  horizontal scrollable section */}\n      {user && !loading && (\n        <div className=\"px-4 lg:px-4\">\n          <TodayMatchesSection />\n        </div>\n      )}\n\n      {/* Create Post Card */}\n      {user && (\n        <div className=\"m-4\">\n          <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n            {/* Main input area */}\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"w-full p-5 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors text-left\"\n            >\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-14 h-14 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-xl font-bold text-gray-500\">\n                      {user.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-1 py-3 px-5 rounded-full border border-gray-300 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800/50\">\n                  <span className=\"text-gray-500 dark:text-neutral-400 text-base\">What's on your mind, {user.name?.split(' ')[0]}?</span>\n                </div>\n              </div>\n            </button>\n            \n            {/* Action buttons */}\n            <div className=\"flex items-center justify-around border-t border-gray-100 dark:border-neutral-800 px-4 py-3\">\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Photo</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Video</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-orange-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Article</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Two-column layout: Feed + Sidebar */}\n      <div className=\"lg:grid lg:grid-cols-[1fr_300px] lg:gap-6 lg:px-4\">\n        {/*  Left Column: Posts  */}\n        <div className=\"min-w-0\">\n          {/* Error State */}\n          {error && (\n            <div className=\"m-4 lg:mx-0 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-center\">\n              <p>{error}</p>\n              <button\n                onClick={retryFeed}\n                className=\"mt-2 text-sm font-semibold underline\"\n              >\n                Try again\n              </button>\n            </div>\n          )}\n\n          {/* Connection Limit Notice */}\n          {user && !loading && (\n            <div className=\"px-4 lg:px-0 mb-3\">\n              <ConnectionLimitBanner />\n            </div>\n          )}\n\n          {/* Loading State */}\n          {loading && (\n            <div className=\"flex items-center justify-center py-12\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n            </div>\n          )}\n\n          {/* Empty State */}\n          {!loading && posts.length === 0 && !error && (\n            <div className=\"text-center py-12 px-4\">\n              <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center\">\n                <Plus className=\"w-10 h-10 text-gray-400\" />\n              </div>\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n                Your feed is empty\n              </h2>\n              <p className=\"text-gray-500 dark:text-neutral-400 mb-4\">\n                Start by creating your first post or follow some people!\n              </p>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"px-6 py-2 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors\"\n              >\n                Create Post\n              </button>\n            </div>\n          )}\n\n          {/* Posts List */}\n          <div className=\"space-y-4 px-4 lg:px-0\">\n            <AnimatePresence>\n              {posts.map((post) => (\n                <PostCard\n                  key={post.id}\n                  post={post}\n                  onLikeUpdate={handleLikeUpdate}\n                  onPollUpdate={handlePollUpdate}\n                  onDelete={handlePostDeleted}\n                  onEdit={handlePostEdited}\n                  onCommentClick={() => handleCommentClick(post.id)}\n                />\n              ))}\n            </AnimatePresence>\n          </div>\n\n          {/* Load More Trigger */}\n          <div ref={loadMoreRef} className=\"h-20 flex items-center justify-center\">\n            {loadingMore && (\n              <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n            )}\n            {!hasMore && posts.length > 0 && (\n              <p className=\"text-sm text-gray-400 dark:text-neutral-500\">\n                You've reached the end\n              </p>\n            )}\n          </div>\n\n          {/* Mobile-only: Show widgets below posts on small screens */}\n          {user && !loading && (\n            <div className=\"px-4 space-y-3 mb-4 lg:hidden\">\n              <ProgressNudges />\n              <DailyMatchCard />\n              <Leaderboard />\n            </div>\n          )}\n        </div>\n\n        {/*  Right Sidebar: Engagement Widgets (desktop only)  */}\n        {user && !loading && (\n          <aside className=\"hidden lg:block\">\n            <div className=\"sticky top-14 space-y-4 pt-3\">\n              <ProgressNudges />\n              <DailyMatchCard />\n              <Leaderboard />\n            </div>\n          </aside>\n        )}\n      </div>\n\n      {/* Floating Create Button (mobile) */}\n      <button\n        onClick={() => setShowCreateModal(true)}\n        className=\"fixed bottom-24 right-4 lg:hidden p-3.5 bg-blue-600 text-white rounded-full shadow-md hover:bg-blue-700 transition-colors z-40\"\n      >\n        <Plus className=\"w-5 h-5\" />\n      </button>\n\n      {/* Create Post Modal */}\n      <CreatePostModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onPostCreated={handlePostCreated}\n      />\n\n      {/* Comments Panel */}\n      {selectedPostForComments && (\n        <Comments\n          postId={selectedPostForComments}\n          isOpen={!!selectedPostForComments}\n          onClose={closeComments}\n          highlightCommentId={highlightCommentId}\n          onCommentCountChange={(count) => {\n            setPosts(prev => prev.map(post => \n              post.id === selectedPostForComments ? { ...post, commentsCount: count } : post\n            ));\n          }}\n        />\n      )}\n\n      {/* Story Creator Modal */}\n      <StoryCreator\n        isOpen={showStoryCreator}\n        onClose={() => setShowStoryCreator(false)}\n        onStoryCreated={() => {\n          setShowStoryCreator(false);\n          // StoryCarousel will auto-refresh on next render\n        }}\n      />\n\n      {/* Story Viewer */}\n      {showStoryViewer && selectedStoryGroup && (\n        <StoryViewer\n          storyGroups={[selectedStoryGroup]}\n          initialGroupIndex={0}\n          onClose={() => {\n            setShowStoryViewer(false);\n            setSelectedStoryGroup(null);\n          }}\n          onStoryEnd={() => {\n            setShowStoryViewer(false);\n            setSelectedStoryGroup(null);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n"],"names":["React","useState","useEffect","useCallback","useRef","motion","AnimatePresence","Loader2","Plus","PostCard","Comments","CreatePostModal","StoryCarousel","StoryViewer","StoryCreator","getFeed","StoryGroup","initializeSocket","disconnectSocket","getSocket","joinPostRoom","leavePostRoom","removeSocketHandlers","useAuth","recordLogin","SocialProofBar","StreakCounter","ProgressNudges","DailyMatchCard","ConnectionLimitBanner","Leaderboard","TodayMatchesSection","RewardPopup","StreakWidget","WeeklyGoalsWidget","NudgeCard","useRewards","Post","PollOption","Feed","user","loading","authLoading","rewards","dismissReward","id","posts","setPosts","setLoading","loadingMore","setLoadingMore","cursor","setCursor","hasMore","setHasMore","error","setError","showCreateModal","setShowCreateModal","selectedPostForComments","setSelectedPostForComments","highlightCommentId","setHighlightCommentId","undefined","showStoryCreator","setShowStoryCreator","showStoryViewer","setShowStoryViewer","selectedStoryGroup","setSelectedStoryGroup","observerRef","IntersectionObserver","loadMoreRef","HTMLDivElement","handlePostCreated","post","console","log","prev","some","p","handlePostLiked","postId","userId","likerUserId","liked","likesCount","reactionType","reactionSummary","map","isCurrentUser","isLiked","userReactionType","handlePostReacted","reactorUserId","handleCommentCreated","commentsCount","handlePollUpdated","pollOptions","socket","onConnect","onPostCreated","onPostLiked","onPostReacted","onCommentCreated","onPollUpdated","sock","on","off","fetchFeed","response","nextCursor","err","data","handleOpenStory","group","loadMore","current","entries","isIntersecting","threshold","observe","disconnect","retryFeed","handlePostDeleted","filter","handlePostEdited","updatedPost","handleLikeUpdate","count","handlePollUpdate","options","handleCommentClick","closeComments","profileImage","name","charAt","toUpperCase","split","length"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 14199, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/index.ts"],"sourcesContent":["// Feed Components - Export all feed-related components\n\nexport { Feed } from './Feed';\nexport { PostCard } from './PostCard';\nexport { Comments } from './Comments';\nexport { CreatePostModal } from './CreatePostModal';\n"],"names":[],"mappings":"AAAA,uDAAuD;;AAEvD;AACA;AACA;AACA"}}]
}