{"version":3,"sources":["../../../../src/components/feed/PostCard.tsx","../../../../src/lib/api/saved.ts","../../../../src/components/feed/ReactionPicker.tsx","../../../../src/components/feed/FormattedContent.tsx","../../../../src/components/feed/LikeListModal.tsx","../../../../src/components/feed/ShareModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  ThumbsUp,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n  Pencil,\n  X,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { toggleSavePost } from '@/lib/api/saved';\nimport { \n  likePost as socketLikePost, \n  reactToPost as socketReactToPost,\n  votePoll as socketVotePoll,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { \n  ReactionPicker, \n  ReactionSummaryDisplay, \n  getReactionConfig,\n} from './ReactionPicker';\nimport { FormattedContent } from './FormattedContent';\nimport { EditPostModal } from './EditPostModal';\nimport { LikeListModal } from './LikeListModal';\nimport { ShareModal } from './ShareModal';\nimport ReportModal from '@/components/reports/ReportModal';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number, reactionType?: ReactionType | null, reactionSummary?: ReactionSummaryType[]) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onEdit?: (postId: string, updatedPost: Post) => void;\n  onUnsave?: (postId: string) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onEdit,\n  onUnsave,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [commentsCount, setCommentsCount] = useState(post.commentsCount);\n  const [sharesCount, setSharesCount] = useState(post.sharesCount);\n  const [currentReaction, setCurrentReaction] = useState<ReactionType | null>(post.userReactionType || null);\n  const [reactionSummary, setReactionSummary] = useState<ReactionSummaryType[]>(post.reactionSummary || []);\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\n  const [showLikeListModal, setShowLikeListModal] = useState(false);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [showMediaLightbox, setShowMediaLightbox] = useState(false);\n  const [lightboxMediaType, setLightboxMediaType] = useState<'image' | 'video'>('image');\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n  \n  // Sync like state with real-time updates from parent\n  useEffect(() => {\n    setIsLiked(post.isLiked);\n    setLikesCount(post.likesCount);\n    setCommentsCount(post.commentsCount);\n    setSharesCount(post.sharesCount);\n    setCurrentReaction(post.userReactionType || null);\n    setReactionSummary(post.reactionSummary || []);\n  }, [post.isLiked, post.likesCount, post.commentsCount, post.sharesCount, post.userReactionType, post.reactionSummary]);\n  \n  // Sync poll options with real-time updates from parent\n  useEffect(() => {\n    if (post.pollOptions) {\n      setPollOptions(post.pollOptions);\n    }\n  }, [post.pollOptions]);\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle quick like (default LIKE reaction)\n  const handleLike = async () => {\n    if (currentReaction === 'LIKE') {\n      // Remove reaction\n      handleReaction('LIKE');\n    } else {\n      // Add LIKE reaction\n      handleReaction('LIKE');\n    }\n  };\n\n  // Handle reaction selection\n  const handleReaction = async (reactionType: ReactionType) => {\n    const wasLiked = isLiked;\n    const oldReaction = currentReaction;\n    const oldCount = likesCount;\n    const oldSummary = reactionSummary;\n    \n    let newLiked: boolean;\n    let newCount: number;\n    let newReaction: ReactionType | null;\n    \n    if (currentReaction === reactionType) {\n      // Remove reaction (clicking same reaction again)\n      newLiked = false;\n      newCount = likesCount - 1;\n      newReaction = null;\n    } else if (currentReaction) {\n      // Change reaction (already reacted, changing type)\n      newLiked = true;\n      newCount = likesCount; // Count stays same\n      newReaction = reactionType;\n    } else {\n      // Add new reaction\n      newLiked = true;\n      newCount = likesCount + 1;\n      newReaction = reactionType;\n    }\n    \n    // Calculate updated reaction summary\n    let newSummary = [...reactionSummary];\n    if (oldReaction && oldReaction !== reactionType) {\n      // Decrement old reaction count\n      newSummary = newSummary.map(s => \n        s.type === oldReaction ? { ...s, count: Math.max(0, s.count - 1) } : s\n      ).filter(s => s.count > 0);\n    }\n    if (newReaction) {\n      const existingIdx = newSummary.findIndex(s => s.type === newReaction);\n      if (existingIdx >= 0) {\n        newSummary[existingIdx] = { ...newSummary[existingIdx], count: newSummary[existingIdx].count + (oldReaction === newReaction ? 0 : 1) };\n      } else if (!oldReaction || oldReaction !== reactionType) {\n        newSummary.push({ type: newReaction, count: 1 });\n      }\n    } else if (oldReaction) {\n      // Removing reaction entirely\n      newSummary = newSummary.map(s => \n        s.type === oldReaction ? { ...s, count: Math.max(0, s.count - 1) } : s\n      ).filter(s => s.count > 0);\n    }\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    setCurrentReaction(newReaction);\n    setReactionSummary(newSummary);\n    onLikeUpdate?.(post.id, newLiked, newCount, newReaction, newSummary);\n    \n    try {\n      // Use WebSocket for real-time\n      socketReactToPost(post.id, reactionType);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(wasLiked);\n        setLikesCount(oldCount);\n        setCurrentReaction(oldReaction);\n        setReactionSummary(oldSummary);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share - open share modal\n  const handleShare = () => {\n    setShowShareModal(true);\n  };\n\n  // Handle save/unsave\n  const handleSave = async () => {\n    try {\n      const response = await toggleSavePost(post.id);\n      if (response && typeof response.saved === 'boolean') {\n        setIsSaved(response.saved);\n        if (!response.saved) onUnsave?.(post.id);\n      } else {\n        setIsSaved(!isSaved);\n        if (isSaved) onUnsave?.(post.id);\n      }\n    } catch (error) {\n      console.error('Error toggling save:', error);\n      setIsSaved(!isSaved);\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800\">\n          <button\n            onClick={() => {\n              setLightboxMediaType('image');\n              setCurrentImageIndex(0);\n              setShowMediaLightbox(true);\n            }}\n            className=\"w-full block cursor-zoom-in\"\n          >\n            <img\n              src={images[0]}\n              alt=\"\"\n              className=\"w-full max-h-[600px] object-contain mx-auto\"\n              loading=\"lazy\"\n              style={{ display: 'block' }}\n            />\n          </button>\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative bg-gray-100 dark:bg-neutral-800\">\n          <button\n            onClick={() => {\n              setLightboxMediaType('image');\n              setShowMediaLightbox(true);\n            }}\n            className=\"w-full block cursor-zoom-in\"\n          >\n            <img\n              src={mainImage}\n              alt=\"\"\n              className=\"w-full max-h-[500px] object-contain mx-auto\"\n              loading=\"lazy\"\n              style={{ display: 'block' }}\n            />\n          </button>\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <div\n          role=\"button\"\n          tabIndex={0}\n          onClick={() => {\n            setLightboxMediaType('video');\n            setShowMediaLightbox(true);\n          }}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter') {\n              setLightboxMediaType('video');\n              setShowMediaLightbox(true);\n            }\n          }}\n          className=\"w-full block cursor-zoom-in relative\"\n        >\n          <video\n            ref={videoRef}\n            src={post.videoUrl}\n            poster={post.videoThumbnail || undefined}\n            className=\"w-full max-h-[500px] object-contain\"\n            loop\n            muted={isMuted}\n            playsInline\n          />\n        </div>\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between pointer-events-auto\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>\n              {post.linkDomain || (post.linkUrl ? (() => {\n                try {\n                  return new URL(post.linkUrl).hostname;\n                } catch {\n                  return 'Link';\n                }\n              })() : 'Link')}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: 'ðŸŽ‰',\n      PROMOTION: 'ðŸš€',\n      GRADUATION: 'ðŸŽ“',\n      CERTIFICATION: 'ðŸ“œ',\n      WORK_ANNIVERSARY: 'ðŸŽŠ',\n      BIRTHDAY: 'ðŸŽ‚',\n      JOB_CHANGE: 'âœ¨',\n      NEW_POSITION: 'ðŸŒŸ',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || 'ðŸŽ‰' : 'ðŸŽ‰';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()} â€¢ {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? ` â€¢ ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost && (\n                <>\n                  <button\n                    onClick={() => {\n                      setShowEditModal(true);\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                    Edit post\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleDelete();\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete post\n                  </button>\n                </>\n              )}\n              \n              {!isOwnPost && (\n                <button\n                  onClick={() => {\n                    setShowReportModal(true);\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <FormattedContent \n            content={post.content} \n            className=\"text-gray-900 dark:text-white\"\n          />\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <ReactionSummaryDisplay \n              reactionSummary={reactionSummary}\n              totalCount={likesCount}\n              onClick={() => setShowLikeListModal(true)}\n            />\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {commentsCount} comment{commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        {/* Reaction Button with Picker */}\n        <div \n          className=\"relative\"\n          onMouseEnter={() => setShowReactionPicker(true)}\n          onMouseLeave={() => setShowReactionPicker(false)}\n        >\n          <button\n            onClick={handleLike}\n            className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n              isLiked && currentReaction\n                ? `${getReactionConfig(currentReaction).color} ${getReactionConfig(currentReaction).bgColor}`\n                : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n            }`}\n          >\n            {currentReaction ? (\n              <>\n                {React.createElement(getReactionConfig(currentReaction).icon, { \n                  className: `w-5 h-5 ${isLiked ? 'fill-current' : ''}` \n                })}\n                <span className=\"text-sm font-medium\">{getReactionConfig(currentReaction).label}</span>\n              </>\n            ) : (\n              <>\n                <ThumbsUp className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">Like</span>\n              </>\n            )}\n          </button>\n          \n          <ReactionPicker\n            isOpen={showReactionPicker}\n            currentReaction={currentReaction}\n            onSelect={handleReaction}\n            onClose={() => setShowReactionPicker(false)}\n          />\n        </div>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={handleSave}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n\n      {/* Like List Modal */}\n      <LikeListModal\n        isOpen={showLikeListModal}\n        onClose={() => setShowLikeListModal(false)}\n        postId={post.id}\n        totalCount={likesCount}\n      />\n\n      {/* Edit Post Modal */}\n      <EditPostModal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        post={post}\n        onPostUpdated={(updatedPost) => {\n          onEdit?.(post.id, updatedPost);\n        }}\n      />\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"post\"\n        targetId={post.id}\n        targetName={`Post by ${post.author.name}`}\n      />\n\n      {/* Share Modal */}\n      <ShareModal\n        isOpen={showShareModal}\n        onClose={() => setShowShareModal(false)}\n        postId={post.id}\n        postPreview={post.content || undefined}\n        postAuthor={{\n          name: post.author.name,\n          username: post.author.username,\n          profileImage: post.author.profileImage,\n        }}\n        postMediaUrl={post.mediaUrls?.[0] || post.videoUrl || null}\n      />\n\n      {/* Fullscreen Media Lightbox */}\n      {showMediaLightbox && (\n        <div\n          className=\"fixed inset-0 z-[9999] bg-black flex items-center justify-center\"\n          onClick={() => setShowMediaLightbox(false)}\n        >\n          <button\n            onClick={() => setShowMediaLightbox(false)}\n            className=\"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            <X className=\"w-8 h-8\" />\n          </button>\n          <div\n            className=\"max-w-[95vw] max-h-[95vh] flex items-center justify-center\"\n            onClick={(e) => e.stopPropagation()}\n          >\n            {lightboxMediaType === 'image' && post.mediaUrls && post.mediaUrls.length > 0 ? (\n              <div className=\"relative\">\n                <img\n                  src={post.mediaUrls[currentImageIndex]}\n                  alt=\"\"\n                  className=\"max-w-full max-h-[95vh] object-contain\"\n                  onClick={(e) => e.stopPropagation()}\n                />\n                {post.mediaUrls.length > 1 && (\n                  <>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setCurrentImageIndex((prev) => (prev === 0 ? post.mediaUrls!.length - 1 : prev - 1));\n                      }}\n                      className=\"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70\"\n                    >\n                      <ChevronLeft className=\"w-6 h-6\" />\n                    </button>\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setCurrentImageIndex((prev) => (prev === post.mediaUrls!.length - 1 ? 0 : prev + 1));\n                      }}\n                      className=\"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70\"\n                    >\n                      <ChevronRight className=\"w-6 h-6\" />\n                    </button>\n                    <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-black/50 text-white text-sm\">\n                      {currentImageIndex + 1} / {post.mediaUrls.length}\n                    </div>\n                  </>\n                )}\n              </div>\n            ) : lightboxMediaType === 'video' && post.videoUrl ? (\n              <video\n                src={post.videoUrl}\n                controls\n                autoPlay\n                className=\"max-w-full max-h-[95vh]\"\n                onClick={(e) => e.stopPropagation()}\n              />\n            ) : null}\n          </div>\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n","import apiClient from './client';\nimport type { Post } from '@/types/post';\n\nexport interface SavedPostsResponse {\n  posts: (Post & { savedAt?: string })[];\n  nextCursor: string | null;\n  hasMore: boolean;\n  pagination?: {\n    page: number;\n    limit: number;\n    totalCount: number;\n    totalPages: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface ToggleSaveResponse {\n  message: string;\n  saved: boolean;\n  savesCount: number;\n}\n\n// Get all saved posts (cursor-based pagination)\nexport const getSavedPosts = async (\n  cursor?: string | null,\n  limit = 20\n): Promise<SavedPostsResponse> => {\n  const params: Record<string, string | number> = { limit };\n  if (cursor) params.cursor = cursor;\n  const res = (await apiClient.get('/saved', { params })) as unknown as SavedPostsResponse;\n  return {\n    posts: res.posts || [],\n    nextCursor: res.nextCursor ?? null,\n    hasMore: res.hasMore ?? false,\n    pagination: {\n      page: 1,\n      limit,\n      totalCount: res.posts?.length ?? 0,\n      totalPages: res.hasMore ? 2 : 1,\n      hasMore: res.hasMore ?? false,\n    },\n  };\n};\n\n// Toggle save status\nexport const toggleSavePost = async (postId: string): Promise<ToggleSaveResponse> => {\n  return apiClient.post(`/saved/${postId}/toggle`);\n};\n\n// Save a post\nexport const savePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.post(`/saved/${postId}`);\n};\n\n// Unsave a post\nexport const unsavePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/saved/${postId}`);\n};\n\n// Check if post is saved\nexport const checkPostSaved = async (postId: string): Promise<{ saved: boolean }> => {\n  return apiClient.get(`/saved/${postId}/check`);\n};\n","'use client';\n\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ThumbsUp, \n  PartyPopper, \n  Heart, \n  Lightbulb, \n  HelpCircle \n} from 'lucide-react';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface ReactionPickerProps {\n  isOpen: boolean;\n  currentReaction?: ReactionType | null;\n  onSelect: (reaction: ReactionType) => void;\n  onClose: () => void;\n}\n\n// Reaction configurations with LinkedIn-style icons\nexport const REACTIONS: {\n  type: ReactionType;\n  icon: React.ElementType;\n  label: string;\n  color: string;\n  bgColor: string;\n  hoverScale: number;\n}[] = [\n  { \n    type: 'LIKE', \n    icon: ThumbsUp, \n    label: 'Like', \n    color: 'text-blue-600',\n    bgColor: 'bg-blue-100 dark:bg-blue-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CELEBRATE', \n    icon: PartyPopper, \n    label: 'Celebrate', \n    color: 'text-green-600',\n    bgColor: 'bg-green-100 dark:bg-green-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'SUPPORT', \n    icon: Heart, \n    label: 'Support', \n    color: 'text-purple-600',\n    bgColor: 'bg-purple-100 dark:bg-purple-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'INSIGHTFUL', \n    icon: Lightbulb, \n    label: 'Insightful', \n    color: 'text-amber-600',\n    bgColor: 'bg-amber-100 dark:bg-amber-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CURIOUS', \n    icon: HelpCircle, \n    label: 'Curious', \n    color: 'text-pink-600',\n    bgColor: 'bg-pink-100 dark:bg-pink-900/30',\n    hoverScale: 1.3,\n  },\n];\n\n// Helper to get reaction config by type\nexport function getReactionConfig(type: ReactionType) {\n  return REACTIONS.find(r => r.type === type) || REACTIONS[0];\n}\n\n// Reaction icons for summary display\nexport function ReactionIcon({ \n  type, \n  size = 16,\n  className = '' \n}: { \n  type: ReactionType; \n  size?: number;\n  className?: string;\n}) {\n  const config = getReactionConfig(type);\n  const Icon = config.icon;\n  \n  return (\n    <div className={`inline-flex items-center justify-center rounded-full p-1 ${config.bgColor} ${className}`}>\n      <Icon className={`${config.color}`} size={size} />\n    </div>\n  );\n}\n\nexport function ReactionPicker({ \n  isOpen, \n  currentReaction,\n  onSelect, \n  onClose \n}: ReactionPickerProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Reaction picker */}\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"absolute bottom-full left-0 mb-2 z-50\"\n          >\n            <div className=\"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1\">\n              {REACTIONS.map((reaction) => {\n                const Icon = reaction.icon;\n                const isSelected = currentReaction === reaction.type;\n                \n                return (\n                  <motion.button\n                    key={reaction.type}\n                    whileHover={{ scale: reaction.hoverScale, y: -8 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => {\n                      onSelect(reaction.type);\n                      onClose();\n                    }}\n                    className={`relative p-2 rounded-full transition-colors group ${\n                      isSelected \n                        ? reaction.bgColor \n                        : 'hover:bg-gray-100 dark:hover:bg-neutral-700'\n                    }`}\n                    title={reaction.label}\n                  >\n                    <Icon \n                      className={`w-6 h-6 transition-transform ${\n                        isSelected ? reaction.color : 'text-gray-500 dark:text-neutral-400'\n                      } group-hover:${reaction.color}`}\n                    />\n                    \n                    {/* Tooltip */}\n                    <motion.span\n                      initial={{ opacity: 0, y: 5 }}\n                      whileHover={{ opacity: 1, y: 0 }}\n                      className=\"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none\"\n                    >\n                      {reaction.label}\n                    </motion.span>\n                  </motion.button>\n                );\n              })}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Summary of reactions (shows top 3 reaction icons)\nexport function ReactionSummaryDisplay({ \n  reactionSummary,\n  totalCount,\n  onClick,\n}: { \n  reactionSummary: ReactionSummaryType[];\n  totalCount: number;\n  onClick?: () => void;\n}) {\n  if (totalCount === 0) return null;\n  \n  // Get top 3 unique reaction types\n  const topReactions = reactionSummary.slice(0, 3);\n  \n  return (\n    <button \n      onClick={onClick}\n      className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline\"\n    >\n      <div className=\"flex -space-x-1\">\n        {topReactions.map((reaction, index) => (\n          <ReactionIcon \n            key={reaction.type} \n            type={reaction.type} \n            size={14}\n            className=\"border-2 border-white dark:border-neutral-900\"\n          />\n        ))}\n      </div>\n      <span>{totalCount}</span>\n    </button>\n  );\n}\n","'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface FormattedContentProps {\n  content: string;\n  className?: string;\n}\n\n/**\n * Renders formatted post content with support for:\n * - **bold** text\n * - *italic* text\n * - `code` inline\n * - @mentions (clickable links)\n * - [color:red]colored text[/color]\n * - URLs (auto-linked)\n * - Line breaks\n */\nexport function FormattedContent({ content, className = '' }: FormattedContentProps) {\n  if (!content) return null;\n\n  const renderFormattedText = (text: string): React.ReactNode[] => {\n    const elements: React.ReactNode[] = [];\n    let remaining = text;\n    let key = 0;\n\n    while (remaining.length > 0) {\n      // Check for color tags: [color:red], [color:#22c55e], [color: #hex] (optional space)\n      const colorMatch = remaining.match(/^\\[color:\\s*([a-zA-Z]+|#[0-9a-fA-F]{3,8})\\]([\\s\\S]*?)\\[\\/color\\]/i);\n      if (colorMatch) {\n        const [fullMatch, color, innerText] = colorMatch;\n        const safeColor = /^#[0-9a-fA-F]{3,8}$/.test(color) || /^[a-zA-Z]+$/.test(color) ? color : '#000';\n        elements.push(\n          <span key={key++} style={{ color: safeColor }}>\n            {renderFormattedText(innerText)}\n          </span>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: [b]text[/b] (BBCode style)\n      const bbBoldMatch = remaining.match(/^\\[b\\]([\\s\\S]*?)\\[\\/b\\]/i);\n      if (bbBoldMatch) {\n        const [fullMatch, innerText] = bbBoldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: **text**\n      const boldMatch = remaining.match(/^\\*\\*(.+?)\\*\\*/);\n      if (boldMatch) {\n        const [fullMatch, innerText] = boldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for italic: *text* (but not **)\n      const italicMatch = remaining.match(/^\\*([^*]+?)\\*/);\n      if (italicMatch) {\n        const [fullMatch, innerText] = italicMatch;\n        elements.push(\n          <em key={key++} className=\"italic\">\n            {renderFormattedText(innerText)}\n          </em>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for inline code: `code`\n      const codeMatch = remaining.match(/^`([^`]+?)`/);\n      if (codeMatch) {\n        const [fullMatch, innerText] = codeMatch;\n        elements.push(\n          <code \n            key={key++} \n            className=\"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm\"\n          >\n            {innerText}\n          </code>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for mentions: @username\n      const mentionMatch = remaining.match(/^@([a-zA-Z0-9_]+)/);\n      if (mentionMatch) {\n        const [fullMatch, username] = mentionMatch;\n        elements.push(\n          <Link \n            key={key++}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\n          >\n            @{username}\n          </Link>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for URLs\n      const urlMatch = remaining.match(/^(https?:\\/\\/[^\\s]+)/);\n      if (urlMatch) {\n        const [fullMatch] = urlMatch;\n        elements.push(\n          <a \n            key={key++}\n            href={fullMatch}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline break-all\"\n          >\n            {fullMatch}\n          </a>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for line breaks\n      if (remaining.startsWith('\\n')) {\n        elements.push(<br key={key++} />);\n        remaining = remaining.slice(1);\n        continue;\n      }\n\n      // Find next special character or take the rest\n      const nextSpecialIndex = remaining.search(/[\\*`@\\[\\n]|https?:\\/\\//);\n      if (nextSpecialIndex === -1) {\n        // No more special chars, add rest as plain text\n        elements.push(<span key={key++}>{remaining}</span>);\n        break;\n      } else if (nextSpecialIndex === 0) {\n        // Special char at start but didn't match pattern - add single char\n        elements.push(<span key={key++}>{remaining[0]}</span>);\n        remaining = remaining.slice(1);\n      } else {\n        // Add text before special char\n        elements.push(<span key={key++}>{remaining.slice(0, nextSpecialIndex)}</span>);\n        remaining = remaining.slice(nextSpecialIndex);\n      }\n    }\n\n    return elements;\n  };\n\n  return (\n    <div className={`whitespace-pre-wrap break-words ${className}`}>\n      {renderFormattedText(content)}\n    </div>\n  );\n}\n\n// Color presets for the color picker\nexport const COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n  { name: 'Cyan', value: '#06b6d4' },\n];\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getReactionConfig, REACTIONS } from './ReactionPicker';\nimport type { ReactionType } from '@/types/post';\nimport apiClient from '@/lib/api/client';\n\ninterface LikeUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  headline: string | null;\n  reactionType: ReactionType;\n  createdAt: string;\n}\n\ninterface LikeListModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  totalCount: number;\n}\n\nexport function LikeListModal({ isOpen, onClose, postId, totalCount }: LikeListModalProps) {\n  const [likes, setLikes] = useState<LikeUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedFilter, setSelectedFilter] = useState<ReactionType | 'ALL'>('ALL');\n  const [reactionCounts, setReactionCounts] = useState<Record<ReactionType, number>>({\n    LIKE: 0,\n    CELEBRATE: 0,\n    SUPPORT: 0,\n    INSIGHTFUL: 0,\n    CURIOUS: 0,\n  });\n\n  useEffect(() => {\n    if (!isOpen || !postId) return;\n\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        // apiClient already extracts response.data, so response IS the data\n        const data = await apiClient.get(`/posts/${postId}/likes`) as any;\n        setLikes(data.likes || []);\n        \n        // Calculate reaction counts\n        const counts: Record<ReactionType, number> = {\n          LIKE: 0,\n          CELEBRATE: 0,\n          SUPPORT: 0,\n          INSIGHTFUL: 0,\n          CURIOUS: 0,\n        };\n        data.likes?.forEach((like: LikeUser) => {\n          if (like.reactionType && counts[like.reactionType] !== undefined) {\n            counts[like.reactionType]++;\n          }\n        });\n        setReactionCounts(counts);\n      } catch (error) {\n        console.error('Error fetching likes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [isOpen, postId]);\n\n  const filteredLikes = selectedFilter === 'ALL' \n    ? likes \n    : likes.filter(like => like.reactionType === selectedFilter);\n\n  // Get reactions with counts > 0\n  const activeReactions = REACTIONS.filter(r => reactionCounts[r.type] > 0);\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Reactions\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n              </button>\n            </div>\n\n            {/* Reaction Filter Tabs */}\n            <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedFilter('ALL')}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                  selectedFilter === 'ALL'\n                    ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                }`}\n              >\n                All\n                <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                  {totalCount}\n                </span>\n              </button>\n\n              {activeReactions.map((reaction) => {\n                const Icon = reaction.icon;\n                const count = reactionCounts[reaction.type];\n                \n                return (\n                  <button\n                    key={reaction.type}\n                    onClick={() => setSelectedFilter(reaction.type)}\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                      selectedFilter === reaction.type\n                        ? `${reaction.bgColor} ${reaction.color}`\n                        : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                      {count}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* User List */}\n            <div className=\"overflow-y-auto max-h-[50vh]\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filteredLikes.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-neutral-400\">\n                  No reactions yet\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n                  {filteredLikes.map((like) => {\n                    const reactionConfig = getReactionConfig(like.reactionType);\n                    const Icon = reactionConfig.icon;\n                    \n                    return (\n                      <Link\n                        key={like.id}\n                        href={`/profile/${like.username}`}\n                        onClick={onClose}\n                        className=\"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n                      >\n                        {/* Avatar with Reaction Badge */}\n                        <div className=\"relative\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                            {like.profileImage ? (\n                              <Image\n                                src={like.profileImage}\n                                alt={like.name}\n                                width={48}\n                                height={48}\n                                className=\"object-cover w-full h-full\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300\">\n                                {like.name.charAt(0).toUpperCase()}\n                              </div>\n                            )}\n                          </div>\n                          {/* Reaction Badge */}\n                          <div className={`absolute -bottom-1 -right-1 p-1 rounded-full ${reactionConfig.bgColor} border-2 border-white dark:border-neutral-900`}>\n                            <Icon className={`w-3 h-3 ${reactionConfig.color}`} />\n                          </div>\n                        </div>\n\n                        {/* User Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n                            {like.name}\n                          </p>\n                          {like.headline && (\n                            <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">\n                              {like.headline}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Connect Button (optional, can be added later) */}\n                        {/* <button className=\"px-4 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors\">\n                          Connect\n                        </button> */}\n                      </Link>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { X, Search, Send, Loader2 } from 'lucide-react';\nimport { getConnections } from '@/lib/api/connections';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport { getOrCreateConversation, sendMessage } from '@/lib/api/chat';\nimport { sharePostToUser } from '@/lib/api/posts';\nimport type { Connection } from '@/lib/api/connections';\nimport type { MentionUser } from '@/types/post';\n\ninterface ShareModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  postPreview?: string;\n  postAuthor?: {\n    name: string;\n    username: string;\n    profileImage?: string | null;\n  };\n  postMediaUrl?: string | null;\n}\n\nexport function ShareModal({ isOpen, onClose, postId, postPreview, postAuthor, postMediaUrl }: ShareModalProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [connections, setConnections] = useState<Connection[]>([]);\n  const [searchResults, setSearchResults] = useState<MentionUser[]>([]);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const postUrl = typeof window !== 'undefined' ? `${window.location.origin}/post/${postId}` : '';\n\n  const loadConnections = useCallback(async () => {\n    try {\n      const res = await getConnections(1, 50);\n      setConnections(res.connections?.filter((c) => c.status === 'ACCEPTED') || []);\n    } catch (err) {\n      console.error('Error loading connections:', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      loadConnections();\n      setSearchQuery('');\n      setSearchResults([]);\n      setSelectedIds(new Set());\n      setError(null);\n    }\n  }, [isOpen, loadConnections]);\n\n  useEffect(() => {\n    if (!searchQuery || searchQuery.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const timer = setTimeout(async () => {\n      setLoading(true);\n      try {\n        const users = await searchUsersForMention(searchQuery);\n        setSearchResults(users);\n      } catch (err) {\n        setSearchResults([]);\n      } finally {\n        setLoading(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n\n  const toggleSelect = (userId: string) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(userId)) next.delete(userId);\n      else next.add(userId);\n      return next;\n    });\n  };\n\n  const handleSend = async () => {\n    if (selectedIds.size === 0) {\n      setError('Select at least one person to share with');\n      return;\n    }\n    setSending(true);\n    setError(null);\n    try {\n      // Create shared post message content with metadata\n      const sharedPostContent = JSON.stringify({\n        type: 'shared_post',\n        postId,\n        postUrl,\n        preview: postPreview?.slice(0, 200) || '',\n        author: postAuthor || null,\n        mediaUrl: postMediaUrl || null,\n      });\n      \n      for (const userId of selectedIds) {\n        const conv = await getOrCreateConversation(userId);\n        await sendMessage(conv.id, {\n          content: sharedPostContent,\n          contentType: 'application/x-shared-post',\n        });\n        await sharePostToUser(postId, userId);\n      }\n      onClose();\n    } catch (err: any) {\n      setError(err?.response?.data?.error || err?.message || 'Failed to share');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const displayConnections = connections.filter(\n    (c) =>\n      !searchQuery ||\n      c.user?.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.user?.username?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n  const displaySearch = searchQuery.length >= 2 ? searchResults : [];\n  const hasResults = displayConnections.length > 0 || displaySearch.length > 0;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\n      <div\n        className=\"relative w-full max-w-md max-h-[80vh] flex flex-col rounded-2xl bg-white dark:bg-neutral-900 shadow-xl\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Share post</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"p-3 border-b border-gray-200 dark:border-neutral-800\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search connections or people...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-100 dark:bg-neutral-800 border-0 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-3 min-h-[200px]\">\n          {loading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n            </div>\n          ) : (\n            <>\n              {searchQuery.length >= 2 && displaySearch.length > 0 && (\n                <div className=\"mb-4\">\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">Search results</p>\n                  {displaySearch.map((u) => (\n                    <ProfileRow\n                      key={u.id}\n                      id={u.id}\n                      name={u.name}\n                      username={u.username}\n                      avatar={u.profileImage}\n                      selected={selectedIds.has(u.id)}\n                      onToggle={() => toggleSelect(u.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {(searchQuery.length < 2 || displayConnections.length > 0) && (\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">\n                    {searchQuery.length < 2 ? 'Connections' : 'Matching connections'}\n                  </p>\n                  {displayConnections.map((c) => (\n                    <ProfileRow\n                      key={c.user.id}\n                      id={c.user.id}\n                      name={c.user.name}\n                      username={c.user.username}\n                      avatar={c.user.profileImage}\n                      selected={selectedIds.has(c.user.id)}\n                      onToggle={() => toggleSelect(c.user.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {!hasResults && !loading && (\n                <p className=\"text-center text-gray-500 dark:text-neutral-400 py-8\">\n                  {searchQuery.length >= 2 ? 'No users found' : 'No connections yet'}\n                </p>\n              )}\n            </>\n          )}\n        </div>\n\n        {error && (\n          <p className=\"px-4 py-2 text-sm text-red-500\">{error}</p>\n        )}\n\n        <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n          <button\n            onClick={handleSend}\n            disabled={selectedIds.size === 0 || sending}\n            className=\"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors\"\n          >\n            {sending ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <Send className=\"w-5 h-5\" />\n            )}\n            Send to {selectedIds.size} {selectedIds.size === 1 ? 'person' : 'people'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileRow({\n  id,\n  name,\n  username,\n  avatar,\n  selected,\n  onToggle,\n}: {\n  id: string;\n  name: string;\n  username: string;\n  avatar: string | null;\n  selected: boolean;\n  onToggle: () => void;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onToggle}\n      className=\"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-left\"\n    >\n      <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 overflow-hidden flex-shrink-0\">\n        {avatar ? (\n          <img src={avatar} alt=\"\" className=\"w-full h-full object-cover\" />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center text-gray-500 font-medium\">\n            {(name || username)?.[0]?.toUpperCase() || '?'}\n          </div>\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"font-medium text-gray-900 dark:text-white truncate\">{name || username}</p>\n        <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">@{username}</p>\n      </div>\n      <div\n        className={`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${\n          selected\n            ? 'border-blue-600 bg-blue-600'\n            : 'border-gray-300 dark:border-neutral-600'\n        }`}\n      >\n        {selected && <span className=\"text-white text-xs\">âœ“</span>}\n      </div>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}