(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,97265,43352,91907,17365,9369,98099,98844,e=>{"use strict";var r=e.i(43476),t=e.i(932),a=e.i(22016),s=e.i(57688),l=e.i(75157);function n(e){let n,i,d,c,u,m,g,x,p,h,b,y,f,v,j,k,w,N,C,I,L,S=(0,t.c)(77),{group:M,onJoin:R,onLeave:$,isJoining:B}=e,P=M._count?.members||M.memberCount,T=M._count?.posts||M.postCount;if(S[0]!==M.coverImage||S[1]!==M.iconImage||S[2]!==M.name||S[3]!==M.privacy||S[4]!==M.slug){let e,t,o,x;n=({PUBLIC:{label:"Public",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},PRIVATE:{label:"Private",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"},SECRET:{label:"Secret",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}})[M.privacy],m="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow";let p=`/groups/${M.slug}`;S[12]!==M.coverImage||S[13]!==M.name?(e=M.coverImage&&(0,r.jsx)(s.default,{src:M.coverImage,alt:M.name,fill:!0,className:"object-cover"}),S[12]=M.coverImage,S[13]=M.name,S[14]=e):e=S[14],S[15]!==M.iconImage||S[16]!==M.name?(t=M.iconImage&&(0,r.jsx)("div",{className:"absolute -bottom-6 left-4",children:(0,r.jsx)("div",{className:"w-14 h-14 rounded-xl border-4 border-white dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-800",children:(0,r.jsx)(s.default,{src:M.iconImage,alt:M.name,width:56,height:56,className:"object-cover"})})}),S[15]=M.iconImage,S[16]=M.name,S[17]=t):t=S[17],S[18]!==e||S[19]!==t?(o=(0,r.jsxs)("div",{className:"relative h-32 bg-gradient-to-r from-blue-500 to-purple-600",children:[e,t]}),S[18]=e,S[19]=t,S[20]=o):o=S[20],S[21]!==o||S[22]!==p?(g=(0,r.jsx)(a.default,{href:p,children:o}),S[21]=o,S[22]=p,S[23]=g):g=S[23];let h=M.iconImage&&"pt-8";S[24]!==h?(u=(0,l.cn)("p-4",h),S[24]=h,S[25]=u):u=S[25],d="flex items-start justify-between gap-2";let b=`/groups/${M.slug}`;S[26]!==M.name?(x=(0,r.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white truncate hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:M.name}),S[26]=M.name,S[27]=x):x=S[27],S[28]!==b||S[29]!==x?(c=(0,r.jsx)(a.default,{href:b,className:"flex-1 min-w-0",children:x}),S[28]=b,S[29]=x,S[30]=c):c=S[30],i=(0,l.cn)("px-2 py-0.5 text-xs font-medium rounded-full flex-shrink-0",n.color),S[0]=M.coverImage,S[1]=M.iconImage,S[2]=M.name,S[3]=M.privacy,S[4]=M.slug,S[5]=n,S[6]=i,S[7]=d,S[8]=c,S[9]=u,S[10]=m,S[11]=g}else n=S[5],i=S[6],d=S[7],c=S[8],u=S[9],m=S[10],g=S[11];return S[31]!==n.label||S[32]!==i?(x=(0,r.jsx)("span",{className:i,children:n.label}),S[31]=n.label,S[32]=i,S[33]=x):x=S[33],S[34]!==d||S[35]!==c||S[36]!==x?(p=(0,r.jsxs)("div",{className:d,children:[c,x]}),S[34]=d,S[35]=c,S[36]=x,S[37]=p):p=S[37],S[38]!==M.description?(h=M.description&&(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:M.description}),S[38]=M.description,S[39]=h):h=S[39],S[40]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),S[40]=b):b=S[40],S[41]!==P?(y=P.toLocaleString(),S[41]=P,S[42]=y):y=S[42],S[43]!==y?(f=(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[b,y," members"]}),S[43]=y,S[44]=f):f=S[44],S[45]===Symbol.for("react.memo_cache_sentinel")?(v=(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),S[45]=v):v=S[45],S[46]!==T?(j=(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[v,T," posts"]}),S[46]=T,S[47]=j):j=S[47],S[48]!==f||S[49]!==j?(k=(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[f,j]}),S[48]=f,S[49]=j,S[50]=k):k=S[50],S[51]!==M.category?(w=M.category&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-md",children:M.category})}),S[51]=M.category,S[52]=w):w=S[52],S[53]!==M.members||S[54]!==P?(N=M.members&&M.members.length>0&&(0,r.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,r.jsx)("div",{className:"flex -space-x-2",children:M.members.slice(0,3).map(o)}),P>3&&(0,r.jsxs)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["+",P-3," more"]})]}),S[53]=M.members,S[54]=P,S[55]=N):N=S[55],S[56]!==M.id||S[57]!==M.isMember||S[58]!==M.memberRole||S[59]!==M.privacy||S[60]!==M.slug||S[61]!==B||S[62]!==R||S[63]!==$?(C=(0,r.jsx)("div",{className:"mt-4",children:M.isMember?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(a.default,{href:`/groups/${M.slug}`,className:"flex-1 px-4 py-2 text-center text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"View Group"}),"OWNER"!==M.memberRole&&$&&(0,r.jsx)("button",{onClick:()=>$(M.id),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Leave group",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):(0,r.jsx)("button",{onClick:()=>R?.(M.id),disabled:B,className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:B?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Joining..."]}):"PRIVATE"===M.privacy?"Request to Join":"Join Group"})}),S[56]=M.id,S[57]=M.isMember,S[58]=M.memberRole,S[59]=M.privacy,S[60]=M.slug,S[61]=B,S[62]=R,S[63]=$,S[64]=C):C=S[64],S[65]!==k||S[66]!==w||S[67]!==N||S[68]!==C||S[69]!==u||S[70]!==p||S[71]!==h?(I=(0,r.jsxs)("div",{className:u,children:[p,h,k,w,N,C]}),S[65]=k,S[66]=w,S[67]=N,S[68]=C,S[69]=u,S[70]=p,S[71]=h,S[72]=I):I=S[72],S[73]!==I||S[74]!==m||S[75]!==g?(L=(0,r.jsxs)("div",{className:m,children:[g,I]}),S[73]=I,S[74]=m,S[75]=g,S[76]=L):L=S[76],L}function o(e){return(0,r.jsx)("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-gray-800 overflow-hidden bg-gray-200 dark:bg-gray-600",children:e.user.profileImage?(0,r.jsx)(s.default,{src:e.user.profileImage,alt:e.user.name,width:28,height:28,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs font-medium text-gray-600 dark:text-gray-300",children:e.user.name.charAt(0).toUpperCase()})},e.id)}e.s(["default",()=>n],43352);var i=e.i(18566);function d(e){let l,n,o,d,c,u,m,g,x,p,h,b,y,f,v,j,k,w,N,C,I,L,S,M,R=(0,t.c)(64),{group:$,onJoin:B,onLeave:P,isLoading:T}=e,D=(0,i.useRouter)(),G=$._count?.members||$.memberCount;R[0]===Symbol.for("react.memo_cache_sentinel")?(l={PUBLIC:{icon:"\uD83C\uDF0D",label:"Public Group"},PRIVATE:{icon:"\uD83D\uDD12",label:"Private Group"},SECRET:{icon:"\uD83D\uDC41️",label:"Secret Group"}},R[0]=l):l=R[0];let U=l[$.privacy];R[1]!==$.memberRole?(n=$.memberRole&&["OWNER","ADMIN"].includes($.memberRole),R[1]=$.memberRole,R[2]=n):n=R[2];let _=n;return R[3]!==$.coverImage||R[4]!==$.name?(o=$.coverImage&&(0,r.jsx)(s.default,{src:$.coverImage,alt:$.name,fill:!0,className:"object-cover"}),R[3]=$.coverImage,R[4]=$.name,R[5]=o):o=R[5],R[6]!==D?(d=()=>D.back(),R[6]=D,R[7]=d):d=R[7],R[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),R[8]=c):c=R[8],R[9]!==d?(u=(0,r.jsx)("button",{onClick:d,className:"absolute top-4 left-4 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm transition-colors",children:c}),R[9]=d,R[10]=u):u=R[10],R[11]!==_||R[12]!==$.slug?(m=_&&(0,r.jsx)(a.default,{href:`/groups/${$.slug}/settings`,className:"absolute top-4 right-4 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm transition-colors",children:(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),R[11]=_,R[12]=$.slug,R[13]=m):m=R[13],R[14]!==$.iconImage||R[15]!==$.name?(g=(0,r.jsx)("div",{className:"absolute -bottom-12 left-6",children:(0,r.jsx)("div",{className:"w-24 h-24 rounded-2xl border-4 border-white dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-800 shadow-lg",children:$.iconImage?(0,r.jsx)(s.default,{src:$.iconImage,alt:$.name,width:96,height:96,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white text-3xl font-bold",children:$.name.charAt(0).toUpperCase()})})}),R[14]=$.iconImage,R[15]=$.name,R[16]=g):g=R[16],R[17]!==o||R[18]!==u||R[19]!==m||R[20]!==g?(x=(0,r.jsxs)("div",{className:"relative h-48 md:h-64 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:[o,u,m,g]}),R[17]=o,R[18]=u,R[19]=m,R[20]=g,R[21]=x):x=R[21],R[22]!==$.name?(p=(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:$.name}),R[22]=$.name,R[23]=p):p=R[23],R[24]!==U.icon||R[25]!==U.label?(h=(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[U.icon," ",U.label]}),R[24]=U.icon,R[25]=U.label,R[26]=h):h=R[26],R[27]===Symbol.for("react.memo_cache_sentinel")?(b=(0,r.jsx)("span",{children:"•"}),R[27]=b):b=R[27],R[28]===Symbol.for("react.memo_cache_sentinel")?(y=(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),R[28]=y):y=R[28],R[29]!==G?(f=G.toLocaleString(),R[29]=G,R[30]=f):f=R[30],R[31]!==f?(v=(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[y,f," members"]}),R[31]=f,R[32]=v):v=R[32],R[33]!==$.category?(j=$.category&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs",children:$.category})]}),R[33]=$.category,R[34]=j):j=R[34],R[35]!==h||R[36]!==v||R[37]!==j?(k=(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[h,b,v,j]}),R[35]=h,R[36]=v,R[37]=j,R[38]=k):k=R[38],R[39]!==$.description?(w=$.description&&(0,r.jsx)("p",{className:"mt-3 text-gray-600 dark:text-gray-400 max-w-2xl",children:$.description}),R[39]=$.description,R[40]=w):w=R[40],R[41]!==p||R[42]!==k||R[43]!==w?(N=(0,r.jsxs)("div",{className:"flex-1",children:[p,k,w]}),R[41]=p,R[42]=k,R[43]=w,R[44]=N):N=R[44],R[45]!==$.isMember||R[46]!==$.memberRole||R[47]!==$.privacy||R[48]!==$.slug||R[49]!==T||R[50]!==B||R[51]!==P?(C=(0,r.jsx)("div",{className:"flex items-center gap-3",children:$.isMember?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(a.default,{href:`/groups/${$.slug}/chat`,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat"]}),"OWNER"!==$.memberRole&&P&&(0,r.jsx)("button",{onClick:P,disabled:T,className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors",children:"Leave"})]}):(0,r.jsx)("button",{onClick:B,disabled:T,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Joining..."]}):"PRIVATE"===$.privacy?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Request to Join"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Join Group"]})})}),R[45]=$.isMember,R[46]=$.memberRole,R[47]=$.privacy,R[48]=$.slug,R[49]=T,R[50]=B,R[51]=P,R[52]=C):C=R[52],R[53]!==N||R[54]!==C?(I=(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[N,C]}),R[53]=N,R[54]=C,R[55]=I):I=R[55],R[56]!==$.memberRole?(L=$.memberRole&&(0,r.jsxs)("div",{className:"mt-4 inline-flex items-center gap-1.5 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium rounded-full",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),$.memberRole.charAt(0)+$.memberRole.slice(1).toLowerCase()]}),R[56]=$.memberRole,R[57]=L):L=R[57],R[58]!==I||R[59]!==L?(S=(0,r.jsxs)("div",{className:"pt-14 px-6 pb-6",children:[I,L]}),R[58]=I,R[59]=L,R[60]=S):S=R[60],R[61]!==S||R[62]!==x?(M=(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[x,S]}),R[61]=S,R[62]=x,R[63]=M):M=R[63],M}e.s(["default",()=>d],91907);var c=e.i(71645),u=e.i(1851),m=e.i(80797),g=e.i(83482),x=e.i(46932),p=e.i(88653),h=e.i(61238);async function b(e){return h.default.post("/groups",e)}async function y(e){return h.default.get(`/groups/${e}`)}async function f(e,r){return h.default.put(`/groups/${e}`,r)}async function v(e){return h.default.delete(`/groups/${e}`)}async function j(e=1,r=20){return h.default.get(`/groups/my?page=${e}&limit=${r}`)}async function k(e=1,r=20){return h.default.get(`/groups/discover?page=${e}&limit=${r}`)}async function w(e,r){return h.default.post(`/groups/${e}/join`,{message:r})}async function N(e){return h.default.post(`/groups/${e}/leave`)}async function C(e,r){let t=new URLSearchParams;return r?.role&&t.append("role",r.role),r?.search&&t.append("search",r.search),r?.page&&t.append("page",String(r.page)),r?.limit&&t.append("limit",String(r.limit)),h.default.get(`/groups/${e}/members?${t.toString()}`)}async function I(e,r,t){return h.default.put(`/groups/${e}/members/${r}`,{role:t})}async function L(e,r){return h.default.delete(`/groups/${e}/members/${r}`)}async function S(e,r){let t=r?`?status=${r}`:"";return h.default.get(`/groups/${e}/requests${t}`)}async function M(e,r,t){return h.default.post(`/groups/${e}/requests/${r}`,{action:t})}async function R(e,r,t){return h.default.post(`/groups/${e}/invites`,{userId:r,message:t})}async function $(e,r){let t=r?`?status=${r}`:"";return h.default.get(`/groups/${e}/invites${t}`)}async function B(){return h.default.get("/groups/invites/pending")}async function P(e,r){return h.default.post(`/groups/invites/${e}`,{action:r})}async function T(e,r){return h.default.delete(`/groups/${e}/invites/${r}`)}async function D(e,r){let t=new URLSearchParams;return r?.page&&t.append("page",String(r.page)),r?.limit&&t.append("limit",String(r.limit)),r?.pinnedFirst!==void 0&&t.append("pinnedFirst",String(r.pinnedFirst)),h.default.get(`/groups/${e}/posts?${t.toString()}`)}async function G(e,r,t="like"){return h.default.post(`/groups/${e}/posts/${r}/like`,{reactionType:t})}async function U(e,r){let t=new URLSearchParams;return r?.before&&t.append("before",r.before),r?.limit&&t.append("limit",String(r.limit)),h.default.get(`/groups/${e}/messages?${t.toString()}`)}async function _(e,r){let t=new FormData;return t.append("image",r),h.default.post(`/groups/${e}/upload/icon`,t,{headers:{"Content-Type":"multipart/form-data"}})}async function A(e,r){let t=new FormData;return t.append("image",r),h.default.post(`/groups/${e}/upload/cover`,t,{headers:{"Content-Type":"multipart/form-data"}})}e.s(["cancelInvite",()=>T,"createGroup",()=>b,"deleteGroup",()=>v,"discoverGroups",()=>k,"getGroup",()=>y,"getGroupInvites",()=>$,"getGroupMembers",()=>C,"getGroupMessages",()=>U,"getGroupPosts",()=>D,"getJoinRequests",()=>S,"getMyGroups",()=>j,"getUserPendingInvites",()=>B,"handleJoinRequest",()=>M,"inviteToGroup",()=>R,"joinGroup",()=>w,"leaveGroup",()=>N,"removeMember",()=>L,"respondToInvite",()=>P,"toggleGroupPostLike",()=>G,"updateGroup",()=>f,"updateMemberRole",()=>I,"uploadGroupCover",()=>A,"uploadGroupIcon",()=>_],17365);var W=e.i(13751),E=e.i(52962);function F({group:e}){let{user:t}=(0,E.useAuth)(),[a,n]=(0,c.useState)([]),[o,i]=(0,c.useState)(!0),[d,h]=(0,c.useState)(""),[b,y]=(0,c.useState)([]),[f,v]=(0,c.useState)(0),j=(0,c.useRef)(null),k=(0,c.useRef)(null),[w,N]=(0,c.useState)(!1),C=()=>{j.current?.scrollIntoView({behavior:"smooth"})};(0,c.useEffect)(()=>{(async()=>{try{i(!0);let r=await U(e.id);n(r),setTimeout(C,100)}catch(e){console.error("Failed to fetch messages:",e)}finally{i(!1)}})()},[e.id]),(0,c.useEffect)(()=>{(0,W.initializeSocket)();let r=(0,W.getSocket)();if(r)return r.emit("group:join",{groupId:e.id}),r.on("group:new_message",e=>{n(r=>[...r,e]),C()}),r.on("group:user_typing",r=>{r.groupId===e.id&&r.user.id!==t?.id&&y(e=>r.isTyping?e.find(e=>e.id===r.user.id)?e:[...e,r.user]:e.filter(e=>e.id!==r.user.id))}),r.on("group:online_count",r=>{r.groupId===e.id&&v(r.count)}),r.on("group:user_joined",r=>{r.groupId===e.id&&v(r.onlineCount)}),r.on("group:user_left",r=>{r.groupId===e.id&&v(r.onlineCount)}),r.on("group:message_deleted",r=>{r.groupId===e.id&&n(e=>e.filter(e=>e.id!==r.messageId))}),()=>{r.emit("group:leave",{groupId:e.id}),r.off("group:new_message"),r.off("group:user_typing"),r.off("group:online_count"),r.off("group:user_joined"),r.off("group:user_left"),r.off("group:message_deleted")}},[e.id,t?.id]);let I=(0,c.useCallback)(()=>{let r=(0,W.getSocket)();r&&(w||(N(!0),r.emit("group:typing",{groupId:e.id,isTyping:!0})),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{N(!1),r.emit("group:typing",{groupId:e.id,isTyping:!1})},2e3))},[e.id,w]),L=()=>{if(!d.trim())return;let r=(0,W.getSocket)();r&&(r.emit("group:message",{groupId:e.id,content:d.trim(),tempId:`temp-${Date.now()}`}),h(""),k.current&&clearTimeout(k.current),N(!1),r.emit("group:typing",{groupId:e.id,isTyping:!1}))},S=a.reduce((e,r)=>{let t=new Date(r.createdAt),a=(0,u.format)(t,"MMMM d, yyyy");return(0,m.isToday)(t)?a="Today":(0,g.isYesterday)(t)&&(a="Yesterday"),e[a]||(e[a]=[]),e[a].push(r),e},{});return o?(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-xl overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:e.iconImage?(0,r.jsx)(s.default,{src:e.iconImage,alt:e.name,width:40,height:40,className:"object-cover"}):e.name.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[f," online • ",e.memberCount," members"]})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.entries(S).map(([e,a])=>(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex items-center justify-center my-4",children:(0,r.jsx)("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded-full",children:e})}),a.map((e,n)=>{let o,i=e.senderId===t?.id,d=!i&&(0===n||a[n-1]?.senderId!==e.senderId);return(0,r.jsxs)(x.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,l.cn)("flex gap-2 mb-2",i?"justify-end":"justify-start"),children:[!i&&(0,r.jsx)("div",{className:(0,l.cn)("w-8 h-8 flex-shrink-0",!d&&"invisible"),children:e.sender.profileImage?(0,r.jsx)(s.default,{src:e.sender.profileImage,alt:e.sender.name,width:32,height:32,className:"rounded-full object-cover"}):(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-medium",children:e.sender.name.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:(0,l.cn)("max-w-[70%]",i?"text-right":"text-left"),children:[!i&&d&&(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1 mb-1 block",children:e.sender.name}),(0,r.jsxs)("div",{className:(0,l.cn)("inline-block px-4 py-2 rounded-2xl",i?"bg-blue-600 text-white rounded-br-md":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-md shadow-sm"),children:[e.mediaUrl&&(0,r.jsx)("div",{className:"mb-2",children:"image"===e.contentType?(0,r.jsx)(s.default,{src:e.mediaUrl,alt:"Image",width:200,height:200,className:"rounded-lg max-w-full"}):"video"===e.contentType?(0,r.jsx)("video",{src:e.mediaUrl,controls:!0,className:"rounded-lg max-w-full"}):(0,r.jsxs)("a",{href:e.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-400 hover:underline",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),e.fileName||"Attachment"]})}),e.content&&(0,r.jsx)("p",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,r.jsx)("span",{className:(0,l.cn)("text-xs mt-1 block",i?"text-blue-200":"text-gray-400"),children:(o=new Date(e.createdAt),(0,u.format)(o,"HH:mm"))})]})]})]},e.id)})]},e)),(0,r.jsx)(p.AnimatePresence,{children:b.length>0&&(0,r.jsxs)(x.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-sm",children:[(0,r.jsx)("div",{className:"flex -space-x-2",children:b.slice(0,3).map(e=>(0,r.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-300 dark:bg-gray-600 border-2 border-white dark:border-gray-900 overflow-hidden",children:e.profileImage?(0,r.jsx)(s.default,{src:e.profileImage,alt:e.name,width:24,height:24,className:"object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs",children:e.name.charAt(0)})},e.id))}),(0,r.jsx)("span",{children:1===b.length?`${b[0].name} is typing...`:`${b.length} people are typing...`})]})}),(0,r.jsx)("div",{ref:j})]}),(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>{h(e.target.value),I()},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),L())},placeholder:"Type a message...",className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-900 rounded-full border-0 focus:ring-2 focus:ring-blue-500 text-gray-900 dark:text-white placeholder-gray-500"}),(0,r.jsx)("button",{onClick:L,disabled:!d.trim(),className:"p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})}e.s(["default",()=>F],9369);let z=["Technology","Career","Education","Business","Design","Marketing","Finance","Health","Sports","Entertainment","Other"];function H({isOpen:e,onClose:t,onSuccess:a}){let[s,l]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[i,d]=(0,c.useState)("PUBLIC"),[u,m]=(0,c.useState)(""),[g,h]=(0,c.useState)([""]),[y,f]=(0,c.useState)(!1),[v,j]=(0,c.useState)(null),k=async e=>{if(e.preventDefault(),j(null),!s.trim()||s.trim().length<3)return void j("Group name must be at least 3 characters");f(!0);try{await b({name:s.trim(),description:n.trim()||void 0,privacy:i,category:u||void 0,rules:g.filter(e=>e.trim())}),l(""),o(""),d("PUBLIC"),m(""),h([""]),a(),t()}catch(e){j(e.response?.data?.error||"Failed to create group")}finally{f(!1)}};return e?(0,r.jsx)(p.AnimatePresence,{children:(0,r.jsx)(x.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:t,children:(0,r.jsxs)(x.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create Group"}),(0,r.jsx)("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:k,className:"p-6 space-y-5",children:[v&&(0,r.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",children:v}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Group Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Enter group name",className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500",maxLength:100})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,r.jsx)("textarea",{value:n,onChange:e=>o(e.target.value),placeholder:"What is this group about?",rows:3,className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none",maxLength:500})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Privacy"}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"PUBLIC",label:"Public",desc:"Anyone can join"},{value:"PRIVATE",label:"Private",desc:"Request to join"},{value:"SECRET",label:"Secret",desc:"Invite only"}].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>d(e.value),className:`p-3 rounded-lg border-2 text-left transition-colors ${i===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,r.jsx)("span",{className:`block text-sm font-medium ${i===e.value?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:e.label}),(0,r.jsx)("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.desc})]},e.value))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,r.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),z.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Rules"}),(0,r.jsxs)("div",{className:"space-y-2",children:[g.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:[t+1,"."]}),(0,r.jsx)("input",{type:"text",value:e,onChange:e=>{var r;let a;return r=e.target.value,void((a=[...g])[t]=r,h(a))},placeholder:"Enter a rule",className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 text-sm"}),g.length>1&&(0,r.jsx)("button",{type:"button",onClick:()=>{h(g.filter((e,r)=>r!==t))},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t)),g.length<10&&(0,r.jsxs)("button",{type:"button",onClick:()=>{h([...g,""])},className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Rule"]})]})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsx)("button",{type:"submit",disabled:y||!s.trim(),className:"w-full px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?(0,r.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Creating..."]}):"Create Group"})})]})]})})}):null}e.s(["default",()=>H],98099);var V=e.i(26999),O=e.i(37727),q=e.i(69074),J=e.i(73708),K=e.i(31278),Y=e.i(98321),X=e.i(59544),Q=e.i(65060);e.s(["default",0,function({isOpen:e,onClose:t,type:a,groupId:s,currentImageUrl:l,onImageUpdated:n}){let[o,i]=(0,c.useState)(null),[d,u]=(0,c.useState)(null),[m,g]=(0,c.useState)(null),[h,b]=(0,c.useState)(null),[y,f]=(0,c.useState)(!1),[v,j]=(0,c.useState)(!1),[k,w]=(0,c.useState)(null),[N,C]=(0,c.useState)(!1),I=(0,c.useRef)(null),L="icon"===a,S=L?"aspect-square":"aspect-[4/1]",M=L?5:10,R=(0,c.useCallback)(e=>{if(!e.type.startsWith("image/"))return void w("Please select an image file");if(e.size/1048576>M)return void w(`Image must be less than ${M}MB`);w(null),i(e);let r=new FileReader;r.onload=e=>{b(e.target?.result),f(!0)},r.readAsDataURL(e)},[M]),$=(0,c.useCallback)(e=>{u(new File([e],o?.name||"cropped-image.jpg",{type:"image/jpeg"})),g(URL.createObjectURL(e)),f(!1)},[o]),B=(0,c.useCallback)(()=>{f(!1),b(null),i(null)},[]),P=(0,c.useCallback)(()=>{h&&f(!0)},[h]),T=(0,c.useCallback)(e=>{e.preventDefault(),C(!1);let r=e.dataTransfer.files[0];r&&R(r)},[R]),D=(0,c.useCallback)(e=>{e.preventDefault(),C(!0)},[]),G=(0,c.useCallback)(e=>{e.preventDefault(),C(!1)},[]),U=async()=>{let e=d||o;if(e){j(!0),w(null);try{let r;r=L?(await _(s,e)).iconUrl:(await A(s,e)).coverUrl,n(r),W()}catch(e){console.error("Upload error:",e),w(e.response?.data?.error||e.message||"Failed to upload image")}finally{j(!1)}}},W=()=>{i(null),u(null),g(null),b(null),f(!1),w(null),C(!1),t()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.AnimatePresence,{children:y&&h&&(0,r.jsx)(Q.default,{imageSrc:h,aspectRatio:L?1:4,onCropComplete:$,onCancel:B,cropShape:"rectangle"})}),(0,r.jsx)(V.Root,{open:e&&!y,onOpenChange:W,children:(0,r.jsx)(V.Portal,{children:(0,r.jsx)(p.AnimatePresence,{children:e&&!y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V.Overlay,{asChild:!0,children:(0,r.jsx)(x.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"})}),(0,r.jsx)(V.Content,{asChild:!0,children:(0,r.jsxs)(x.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white dark:bg-gray-900 rounded-2xl shadow-2xl z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,r.jsx)(V.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:L?"Update Group Icon":"Update Group Cover"}),(0,r.jsx)(V.Close,{asChild:!0,children:(0,r.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:(0,r.jsx)(O.X,{className:"w-5 h-5"})})})]}),(0,r.jsxs)("div",{className:"p-6",children:[k&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",children:k}),m?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{className:`relative ${S} w-full bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden`,children:(0,r.jsx)("img",{src:m,alt:"Preview",className:"w-full h-full object-cover"})}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(X.Button,{variant:"outline",onClick:P,className:"flex-1",children:[(0,r.jsx)(Y.Crop,{className:"w-4 h-4 mr-2"}),"Re-crop"]}),(0,r.jsx)(X.Button,{variant:"outline",onClick:()=>{i(null),u(null),g(null),b(null),w(null),I.current&&(I.current.value="")},className:"flex-1",children:"Choose Different"})]})]}):(0,r.jsxs)("div",{onDrop:T,onDragOver:D,onDragLeave:G,className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-colors ${N?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[(0,r.jsx)("input",{ref:I,type:"file",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];r&&R(r)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:`p-4 rounded-full ${N?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100 dark:bg-gray-800"}`,children:N?(0,r.jsx)(q.Upload,{className:"w-8 h-8 text-blue-500"}):(0,r.jsx)(J.Image,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:N?"Drop image here":"Drag and drop an image"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"or click to browse"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:L?"Square image recommended • Max 5MB":"Wide image recommended (4:1 ratio) • Max 10MB"})]})]}),l&&!m&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:["Current ",L?"icon":"cover",":"]}),(0,r.jsx)("div",{className:`relative ${S} w-full max-w-[200px] bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden`,children:(0,r.jsx)("img",{src:l,alt:"Current",className:"w-full h-full object-cover"})})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[(0,r.jsx)(X.Button,{variant:"ghost",onClick:W,disabled:v,children:"Cancel"}),(0,r.jsx)(X.Button,{onClick:U,disabled:!m||v,className:"min-w-[100px]",children:v?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(K.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):"Save"})]})]})})]})})})})]})}],98844),e.s([],97265)}]);