{"version":3,"sources":["../../../../src/components/chat/ChatHeader.tsx","../../../../src/components/chat/MessageMenu.tsx","../../../../src/components/chat/ChatSettingsPanel.tsx","../../../../src/components/chat/ChatMessages.tsx","../../../../src/components/chat/ChatList.tsx","../../../../src/lib/api/ai-chat.ts","../../../../src/components/chat/AIChatAssistant.tsx","../../../../src/components/chat/ChatInput.tsx","../../../../src/lib/chat/customization.ts","../../../../node_modules/lucide-react/src/icons/spell-check.ts","../../../../node_modules/lucide-react/src/icons/message-square-plus.ts","../../../../node_modules/lucide-react/src/icons/arrow-up-right.ts","../../../../node_modules/lucide-react/src/icons/mic.ts","../../../../node_modules/lucide-react/src/icons/square.ts","../../../../node_modules/lucide-react/src/icons/forward.ts","../../../../node_modules/lucide-react/src/icons/paperclip.ts","../../../../node_modules/lucide-react/src/icons/languages.ts","../../../../node_modules/lucide-react/src/icons/smile.ts","../../../../node_modules/lucide-react/src/icons/reply.ts","../../../../node_modules/lucide-react/src/icons/ban.ts"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport Link from 'next/link';\nimport { formatDistanceToNow } from 'date-fns';\nimport { getSocket } from '@/lib/socket';\nimport { cn } from '@/lib/utils';\nimport ReportModal from '@/components/reports/ReportModal';\nimport { MoreVertical, Flag, UserX, Bell, BellOff } from 'lucide-react';\n\ninterface ChatHeaderProps {\n  user: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n    lastActiveAt?: string | null;\n  };\n  conversationId: string;\n  onBack?: () => void;\n  onInfo?: () => void;\n}\n\nexport default function ChatHeader({ user, conversationId, onBack, onInfo }: ChatHeaderProps) {\n  const [isOnline, setIsOnline] = useState(user.isOnline || false);\n  const [lastActive, setLastActive] = useState(user.lastActiveAt);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setShowMenu(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Listen for online/offline status\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleOnline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(true);\n      }\n    };\n\n    const handleOffline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(false);\n        setLastActive(new Date().toISOString());\n      }\n    };\n\n    // Handle immediate status update when joining chat\n    const handleStatus = (data: { userId: string; isOnline: boolean }) => {\n      if (data.userId === user.id) {\n        setIsOnline(data.isOnline);\n        if (!data.isOnline) {\n          setLastActive(new Date().toISOString());\n        }\n      }\n    };\n\n    socket.on('user:online', handleOnline);\n    socket.on('user:offline', handleOffline);\n    socket.on('user:status', handleStatus);\n\n    return () => {\n      socket.off('user:online', handleOnline);\n      socket.off('user:offline', handleOffline);\n      socket.off('user:status', handleStatus);\n    };\n  }, [user.id]);\n\n  // Update initial state when user prop changes\n  useEffect(() => {\n    setIsOnline(user.isOnline || false);\n    setLastActive(user.lastActiveAt);\n  }, [user.isOnline, user.lastActiveAt]);\n\n  return (\n    <div className=\"flex items-center gap-3 p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\">\n      {/* Back button (mobile) */}\n      {onBack && (\n        <button\n          onClick={onBack}\n          className=\"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full md:hidden\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </button>\n      )}\n\n      {/* Avatar */}\n      <Link href={`/profile/${user.username}`} className=\"relative flex-shrink-0\">\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {user.profileImage ? (\n            <img\n              src={user.profileImage}\n              alt={user.name}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n          ) : (\n            user.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </Link>\n\n      {/* User info */}\n      <div className=\"flex-1 min-w-0\">\n        <Link \n          href={`/profile/${user.username}`}\n          className=\"font-semibold text-gray-900 dark:text-white hover:underline truncate block\"\n        >\n          {user.name}\n        </Link>\n        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n          {isOnline ? (\n            <span className=\"text-green-600 dark:text-green-400\">Online</span>\n          ) : lastActive ? (\n            `Last seen ${formatDistanceToNow(new Date(lastActive), { addSuffix: true })}`\n          ) : (\n            `@${user.username}`\n          )}\n        </p>\n      </div>\n\n      {/* Action buttons */}\n      <div className=\"flex items-center gap-2\">\n        {/* Voice call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Voice call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n          </svg>\n        </button>\n\n        {/* Video call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Video call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n          </svg>\n        </button>\n\n        {/* Info button */}\n        {onInfo && (\n          <button\n            onClick={onInfo}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            title=\"Chat info\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </button>\n        )}\n\n        {/* More options menu */}\n        <div className=\"relative\" ref={menuRef}>\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            title=\"More options\"\n          >\n            <MoreVertical className=\"w-5 h-5\" />\n          </button>\n\n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg z-50\">\n              <button\n                onClick={() => {\n                  setShowReportModal(true);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700\"\n              >\n                <Flag className=\"w-4 h-4\" />\n                Report User\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"chat\"\n        targetId={conversationId}\n        targetName={user.name}\n        conversationId={conversationId}\n        reportedUserId={user.id}\n      />\n    </div>\n  );\n}\n","'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  Reply,\n  Copy,\n  Pencil,\n  Trash2,\n  Forward,\n  Star,\n  Pin,\n  MoreHorizontal,\n  Download,\n} from 'lucide-react';\nimport { DEFAULT_CHAT_REACTIONS } from '@/lib/chat/customization';\n\ninterface MessageMenuProps {\n  isOpen: boolean;\n  onClose: () => void;\n  isOwn: boolean;\n  messageContent: string;\n  hasMedia?: boolean;\n  mediaUrl?: string;\n  onReply: () => void;\n  onEdit?: () => void;\n  onDelete: (forEveryone: boolean) => void;\n  onReact: (emoji: string) => void;\n  onCopy: () => void;\n  onForward?: () => void;\n  onPin?: () => void;\n  onStar?: () => void;\n  availableReactions?: string[];\n  position?: { x: number; y: number };\n  anchorPosition?: 'left' | 'right';\n}\n\nexport default function MessageMenu({\n  isOpen,\n  onClose,\n  isOwn,\n  messageContent,\n  hasMedia,\n  mediaUrl,\n  onReply,\n  onEdit,\n  onDelete,\n  onReact,\n  onCopy,\n  onForward,\n  onPin,\n  onStar,\n  availableReactions = DEFAULT_CHAT_REACTIONS,\n  position,\n  anchorPosition = 'right',\n}: MessageMenuProps) {\n  const [showDeleteOptions, setShowDeleteOptions] = useState(false);\n  const showReactions = true;\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n\n    if (isOpen) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [isOpen, onClose]);\n\n  // Handle keyboard shortcuts\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (!isOpen) return;\n      \n      if (event.key === 'Escape') {\n        onClose();\n      } else if (event.key === 'r' && !event.metaKey && !event.ctrlKey) {\n        onReply();\n        onClose();\n      } else if (event.key === 'c' && (event.metaKey || event.ctrlKey)) {\n        onCopy();\n        onClose();\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose, onReply, onCopy]);\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(messageContent);\n    onCopy();\n    onClose();\n  };\n\n  const handleDownload = () => {\n    if (mediaUrl) {\n      const link = document.createElement('a');\n      link.href = mediaUrl;\n      link.download = '';\n      link.target = '_blank';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    }\n    onClose();\n  };\n\n  const menuItems = [\n    {\n      id: 'reply',\n      label: 'Reply',\n      icon: Reply,\n      onClick: () => { onReply(); onClose(); },\n      shortcut: 'R',\n    },\n    {\n      id: 'copy',\n      label: 'Copy',\n      icon: Copy,\n      onClick: handleCopy,\n      shortcut: 'âŒ˜C',\n    },\n    ...(isOwn ? [{\n      id: 'edit',\n      label: 'Edit',\n      icon: Pencil,\n      onClick: () => { onEdit?.(); onClose(); },\n    }] : []),\n    ...(hasMedia && mediaUrl ? [{\n      id: 'download',\n      label: 'Download',\n      icon: Download,\n      onClick: handleDownload,\n    }] : []),\n    {\n      id: 'forward',\n      label: 'Forward',\n      icon: Forward,\n      onClick: () => { onForward?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'pin',\n      label: 'Pin',\n      icon: Pin,\n      onClick: () => { onPin?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'star',\n      label: 'Star',\n      icon: Star,\n      onClick: () => { onStar?.(); onClose(); },\n      disabled: true, // Coming soon\n    },\n    {\n      id: 'delete',\n      label: 'Delete',\n      icon: Trash2,\n      onClick: () => setShowDeleteOptions(true),\n      danger: true,\n    },\n  ];\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          ref={menuRef}\n          initial={{ opacity: 0, scale: 0.95, y: -10 }}\n          animate={{ opacity: 1, scale: 1, y: 0 }}\n          exit={{ opacity: 0, scale: 0.95, y: -10 }}\n          transition={{ duration: 0.15 }}\n          className={cn(\n            'absolute z-50 min-w-[200px]',\n            'bg-white dark:bg-gray-800 rounded-xl shadow-xl',\n            'border border-gray-200 dark:border-gray-700',\n            'overflow-hidden'\n          )}\n          style={position ? {\n            top: position.y,\n            left: anchorPosition === 'left' ? position.x : undefined,\n            right: anchorPosition === 'right' ? position.x : undefined,\n          } : {\n            top: '-8px',\n            [anchorPosition === 'left' ? 'left' : 'right']: '100%',\n            marginLeft: anchorPosition === 'left' ? '8px' : undefined,\n            marginRight: anchorPosition === 'right' ? '8px' : undefined,\n          }}\n        >\n          {/* Reaction bar */}\n          {showReactions && !showDeleteOptions && (\n            <div className=\"p-2 border-b border-gray-200 dark:border-gray-700\">\n              <div className=\"flex items-center gap-1\">\n                {availableReactions.map((emoji) => (\n                  <button\n                    key={emoji}\n                    onClick={() => { onReact(emoji); onClose(); }}\n                    className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-all hover:scale-125\"\n                  >\n                    <span className=\"text-lg\">{emoji}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Delete options submenu */}\n          {showDeleteOptions ? (\n            <div className=\"py-1\">\n              <div className=\"px-3 py-2 text-sm font-medium text-gray-500 dark:text-gray-400\">\n                Delete message?\n              </div>\n              <button\n                onClick={() => { onDelete(false); onClose(); }}\n                className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n              >\n                <Trash2 className=\"w-4 h-4\" />\n                <span>Delete for me</span>\n              </button>\n              {isOwn && (\n                <button\n                  onClick={() => { onDelete(true); onClose(); }}\n                  className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  <span>Delete for everyone</span>\n                </button>\n              )}\n              <button\n                onClick={() => setShowDeleteOptions(false)}\n                className=\"w-full px-3 py-2 text-left text-sm text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          ) : (\n            /* Main menu items */\n            <div className=\"py-1\">\n              {menuItems.map((item) => (\n                <button\n                  key={item.id}\n                  onClick={item.onClick}\n                  disabled={item.disabled}\n                  className={cn(\n                    'w-full flex items-center justify-between gap-3 px-3 py-2 text-left text-sm transition-colors',\n                    item.danger\n                      ? 'text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20'\n                      : 'text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700',\n                    item.disabled && 'opacity-50 cursor-not-allowed'\n                  )}\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <item.icon className=\"w-4 h-4\" />\n                    <span>{item.label}</span>\n                    {item.disabled && (\n                      <span className=\"text-xs text-gray-400\">(soon)</span>\n                    )}\n                  </div>\n                  {item.shortcut && (\n                    <span className=\"text-xs text-gray-400\">{item.shortcut}</span>\n                  )}\n                </button>\n              ))}\n            </div>\n          )}\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Simple hover-based quick actions component (Discord style)\ninterface QuickActionsProps {\n  isVisible: boolean;\n  isOwn: boolean;\n  onReply: () => void;\n  onReact: () => void;\n  onMore: () => void;\n}\n\nexport function MessageQuickActions({\n  isVisible,\n  isOwn,\n  onReply,\n  onReact,\n  onMore,\n}: QuickActionsProps) {\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: 5 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 5 }}\n          transition={{ duration: 0.1 }}\n          className={cn(\n            'absolute -top-8 flex items-center gap-0.5',\n            'bg-white dark:bg-gray-800 rounded-lg shadow-lg',\n            'border border-gray-200 dark:border-gray-700 p-0.5',\n            isOwn ? 'right-0' : 'left-8'\n          )}\n        >\n          <button\n            onClick={onReact}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"Add reaction\"\n          >\n            <span className=\"text-sm\">ðŸ˜€</span>\n          </button>\n          <button\n            onClick={onReply}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"Reply\"\n          >\n            <Reply className=\"w-4 h-4 text-gray-500\" />\n          </button>\n          <button\n            onClick={onMore}\n            className=\"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors\"\n            title=\"More options\"\n          >\n            <MoreHorizontal className=\"w-4 h-4 text-gray-500\" />\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  X,\n  Image as ImageIcon,\n  FileText,\n  Video,\n  Trash2,\n  Bell,\n  BellOff,\n  Ban,\n  Flag,\n  Search,\n  Lock,\n} from 'lucide-react';\nimport { isWallpaperUnlocked } from '@/lib/chat/customization';\n\n// Wallpaper option type\ninterface WallpaperOption {\n  id: string;\n  name: string;\n  color: string;\n  preview?: string | null;\n  pattern?: string;\n  requiredPackSlug?: string;\n}\n\n// Default wallpaper options\nconst WALLPAPER_OPTIONS: WallpaperOption[] = [\n  { id: 'default', name: 'Default', color: 'bg-gray-50 dark:bg-gray-900' },\n  { id: 'gradient-1', name: 'Ocean', color: 'bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30' },\n  { id: 'gradient-2', name: 'Sunset', color: 'bg-gradient-to-br from-orange-100 to-pink-100 dark:from-orange-900/30 dark:to-pink-900/30', requiredPackSlug: 'chat-theme-vibrant-dms' },\n  { id: 'gradient-3', name: 'Forest', color: 'bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30' },\n  { id: 'gradient-4', name: 'Lavender', color: 'bg-gradient-to-br from-purple-100 to-violet-100 dark:from-purple-900/30 dark:to-violet-900/30', requiredPackSlug: 'chat-theme-dark-variants' },\n  { id: 'gradient-5', name: 'Rose', color: 'bg-gradient-to-br from-rose-100 to-pink-100 dark:from-rose-900/30 dark:to-pink-900/30', requiredPackSlug: 'chat-theme-vibrant-dms' },\n  { id: 'gradient-6', name: 'Midnight', color: 'bg-gradient-to-br from-slate-800 to-gray-900', requiredPackSlug: 'chat-theme-dark-variants' },\n  { id: 'gradient-7', name: 'Sky', color: 'bg-gradient-to-br from-sky-100 to-indigo-100 dark:from-sky-900/30 dark:to-indigo-900/30' },\n  { id: 'gradient-8', name: 'Amber', color: 'bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-900/30 dark:to-yellow-900/30' },\n  { id: 'pattern-1', name: 'Dots', color: 'bg-gray-100 dark:bg-gray-800', pattern: 'bg-[radial-gradient(circle,_#00000010_1px,_transparent_1px)] bg-[size:20px_20px]', requiredPackSlug: 'chat-theme-vibrant-dms' },\n  { id: 'pattern-2', name: 'Grid', color: 'bg-gray-100 dark:bg-gray-800', pattern: 'bg-[linear-gradient(#00000008_1px,_transparent_1px),linear-gradient(90deg,_#00000008_1px,_transparent_1px)] bg-[size:20px_20px]', requiredPackSlug: 'chat-theme-dark-variants' },\n];\n\ninterface MediaItem {\n  id: string;\n  type: 'image' | 'video' | 'file' | 'audio';\n  url: string;\n  fileName?: string;\n  createdAt: string;\n}\n\ninterface ChatSettingsPanelProps {\n  isOpen: boolean;\n  onClose: () => void;\n  conversationId: string;\n  otherUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n  };\n  currentWallpaper: string;\n  onWallpaperChange: (wallpaperId: string) => void;\n  mediaItems?: MediaItem[];\n  onClearChat?: () => void;\n  onBlockUser?: () => void;\n  onReportUser?: () => void;\n  ownedThemePacks?: string[];\n  onOpenStore?: () => void;\n}\n\ntype TabType = 'settings' | 'wallpaper' | 'media';\n\nexport default function ChatSettingsPanel({\n  isOpen,\n  onClose,\n  conversationId,\n  otherUser,\n  currentWallpaper,\n  onWallpaperChange,\n  mediaItems = [],\n  onClearChat,\n  onBlockUser,\n  onReportUser,\n  ownedThemePacks = [],\n  onOpenStore,\n}: ChatSettingsPanelProps) {\n  const [activeTab, setActiveTab] = useState<TabType>('settings');\n  const [isMuted, setIsMuted] = useState(() => {\n    if (typeof window === 'undefined') return false;\n    return localStorage.getItem(`chat_muted_${conversationId}`) === 'true';\n  });\n  const [mediaFilter, setMediaFilter] = useState<'all' | 'images' | 'videos' | 'files'>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const handleMuteToggle = () => {\n    const newMuted = !isMuted;\n    setIsMuted(newMuted);\n    localStorage.setItem(`chat_muted_${conversationId}`, String(newMuted));\n  };\n\n  // Filter media items\n  const filteredMedia = mediaItems.filter(item => {\n    if (mediaFilter === 'all') return true;\n    if (mediaFilter === 'images') return item.type === 'image';\n    if (mediaFilter === 'videos') return item.type === 'video';\n    if (mediaFilter === 'files') return item.type === 'file' || item.type === 'audio';\n    return true;\n  });\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/30 backdrop-blur-sm z-40\"\n          />\n\n          {/* Panel */}\n          <motion.div\n            initial={{ x: '100%' }}\n            animate={{ x: 0 }}\n            exit={{ x: '100%' }}\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n            className=\"fixed right-0 top-0 bottom-0 w-full max-w-md bg-white dark:bg-gray-900 shadow-xl z-50 flex flex-col\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Chat Info\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n\n            {/* User Info */}\n            <div className=\"p-6 border-b border-gray-200 dark:border-gray-700 flex flex-col items-center\">\n              <div className=\"w-20 h-20 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-2xl font-semibold mb-3\">\n                {otherUser.profileImage ? (\n                  <img\n                    src={otherUser.profileImage}\n                    alt={otherUser.name}\n                    className=\"w-20 h-20 rounded-full object-cover\"\n                  />\n                ) : (\n                  otherUser.name.charAt(0).toUpperCase()\n                )}\n              </div>\n              <h3 className=\"text-xl font-semibold text-gray-900 dark:text-white\">{otherUser.name}</h3>\n              <p className=\"text-gray-500 dark:text-gray-400\">@{otherUser.username}</p>\n              {otherUser.isOnline && (\n                <span className=\"mt-2 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-xs rounded-full\">\n                  Online\n                </span>\n              )}\n            </div>\n\n            {/* Tabs */}\n            <div className=\"flex border-b border-gray-200 dark:border-gray-700\">\n              {[\n                { id: 'settings', label: 'Settings' },\n                { id: 'wallpaper', label: 'Wallpaper' },\n                { id: 'media', label: 'Media' },\n              ].map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as TabType)}\n                  className={cn(\n                    'flex-1 py-3 text-sm font-medium transition-colors relative',\n                    activeTab === tab.id\n                      ? 'text-blue-600 dark:text-blue-400'\n                      : 'text-gray-500 hover:text-gray-700 dark:hover:text-gray-300'\n                  )}\n                >\n                  {tab.label}\n                  {activeTab === tab.id && (\n                    <motion.div\n                      layoutId=\"activeTab\"\n                      className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400\"\n                    />\n                  )}\n                </button>\n              ))}\n            </div>\n\n            {/* Tab Content */}\n            <div className=\"flex-1 overflow-y-auto\">\n              {/* Settings Tab */}\n              {activeTab === 'settings' && (\n                <div className=\"p-4 space-y-2\">\n                  {/* Mute Notifications */}\n                  <button\n                    onClick={handleMuteToggle}\n                    className=\"w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      {isMuted ? (\n                        <BellOff className=\"w-5 h-5 text-gray-500\" />\n                      ) : (\n                        <Bell className=\"w-5 h-5 text-gray-500\" />\n                      )}\n                      <span className=\"text-gray-900 dark:text-white\">Mute Notifications</span>\n                    </div>\n                    <div className={cn(\n                      'w-10 h-6 rounded-full transition-colors relative',\n                      isMuted ? 'bg-blue-600' : 'bg-gray-300 dark:bg-gray-600'\n                    )}>\n                      <div className={cn(\n                        'absolute top-1 w-4 h-4 bg-white rounded-full transition-transform',\n                        isMuted ? 'translate-x-5' : 'translate-x-1'\n                      )} />\n                    </div>\n                  </button>\n\n                  {/* Divider */}\n                  <div className=\"my-4 border-t border-gray-200 dark:border-gray-700\" />\n\n                  {/* Clear Chat */}\n                  <button\n                    onClick={onClearChat}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Trash2 className=\"w-5 h-5\" />\n                    <span>Clear Chat History</span>\n                  </button>\n\n                  {/* Block User */}\n                  <button\n                    onClick={onBlockUser}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Ban className=\"w-5 h-5\" />\n                    <span>Block {otherUser.name}</span>\n                  </button>\n\n                  {/* Report User */}\n                  <button\n                    onClick={onReportUser}\n                    className=\"w-full flex items-center gap-3 p-3 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors text-red-600 dark:text-red-400\"\n                  >\n                    <Flag className=\"w-5 h-5\" />\n                    <span>Report</span>\n                  </button>\n                </div>\n              )}\n\n              {/* Wallpaper Tab */}\n              {activeTab === 'wallpaper' && (\n                <div className=\"p-4\">\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\">\n                    Choose a wallpaper for this chat\n                  </p>\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {WALLPAPER_OPTIONS.map((wallpaper) => {\n                      const unlocked = isWallpaperUnlocked(wallpaper.id, ownedThemePacks);\n                      const requiredPack = wallpaper.requiredPackSlug;\n\n                      return (\n                        <button\n                          key={wallpaper.id}\n                          onClick={() => {\n                            if (unlocked) {\n                              onWallpaperChange(wallpaper.id);\n                              return;\n                            }\n\n                            onOpenStore?.();\n                          }}\n                          className={cn(\n                            'aspect-[3/4] rounded-xl overflow-hidden relative transition-all',\n                            wallpaper.color,\n                            wallpaper.pattern,\n                            !unlocked && 'opacity-70',\n                            currentWallpaper === wallpaper.id\n                              ? 'ring-2 ring-blue-500 ring-offset-2 dark:ring-offset-gray-900'\n                              : 'hover:scale-105'\n                          )}\n                        >\n                          {wallpaper.preview && (\n                            <img\n                              src={wallpaper.preview}\n                              alt={wallpaper.name}\n                              className=\"w-full h-full object-cover\"\n                            />\n                          )}\n                          <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/50 to-transparent\">\n                            <span className=\"text-xs text-white font-medium\">{wallpaper.name}</span>\n                            {!unlocked && (\n                              <p className=\"text-[10px] text-white/90\">\n                                Requires {requiredPack === 'chat-theme-dark-variants' ? 'Dark Variants Pack' : 'Vibrant DMs Pack'}\n                              </p>\n                            )}\n                          </div>\n                          {!unlocked && (\n                            <div className=\"absolute top-2 left-2 w-6 h-6 bg-black/60 rounded-full flex items-center justify-center\">\n                              <Lock className=\"w-3 h-3 text-white\" />\n                            </div>\n                          )}\n                          {currentWallpaper === wallpaper.id && (\n                            <div className=\"absolute top-2 right-2 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center\">\n                              <svg className=\"w-3 h-3 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                              </svg>\n                            </div>\n                          )}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n\n              {/* Media Tab */}\n              {activeTab === 'media' && (\n                <div className=\"p-4\">\n                  {/* Search */}\n                  <div className=\"relative mb-4\">\n                    <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                    <input\n                      type=\"text\"\n                      value={searchQuery}\n                      onChange={(e) => setSearchQuery(e.target.value)}\n                      placeholder=\"Search media...\"\n                      className=\"w-full pl-10 pr-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-lg border-0 focus:ring-2 focus:ring-blue-500\"\n                    />\n                  </div>\n\n                  {/* Filter buttons */}\n                  <div className=\"flex gap-2 mb-4 overflow-x-auto pb-2\">\n                    {([\n                      { id: 'all', label: 'All', icon: null },\n                      { id: 'images', label: 'Images', icon: ImageIcon },\n                      { id: 'videos', label: 'Videos', icon: Video },\n                      { id: 'files', label: 'Files', icon: FileText },\n                    ] as const).map((filter) => (\n                      <button\n                        key={filter.id}\n                        onClick={() => setMediaFilter(filter.id)}\n                        className={cn(\n                          'flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-colors',\n                          mediaFilter === filter.id\n                            ? 'bg-blue-600 text-white'\n                            : 'bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700'\n                        )}\n                      >\n                        {filter.icon && <filter.icon className=\"w-4 h-4\" />}\n                        {filter.label}\n                      </button>\n                    ))}\n                  </div>\n\n                  {/* Media Grid */}\n                  {filteredMedia.length > 0 ? (\n                    <div className=\"grid grid-cols-3 gap-2\">\n                      {filteredMedia.map((item) => (\n                        <a\n                          key={item.id}\n                          href={item.url}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"aspect-square rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 hover:opacity-80 transition-opacity relative group\"\n                        >\n                          {item.type === 'image' ? (\n                            <img\n                              src={item.url}\n                              alt=\"\"\n                              className=\"w-full h-full object-cover\"\n                            />\n                          ) : item.type === 'video' ? (\n                            <div className=\"w-full h-full flex items-center justify-center bg-gray-200 dark:bg-gray-700\">\n                              <Video className=\"w-8 h-8 text-gray-500\" />\n                            </div>\n                          ) : (\n                            <div className=\"w-full h-full flex flex-col items-center justify-center p-2\">\n                              <FileText className=\"w-8 h-8 text-gray-500 mb-1\" />\n                              <span className=\"text-xs text-gray-500 truncate w-full text-center\">\n                                {item.fileName || 'File'}\n                              </span>\n                            </div>\n                          )}\n                        </a>\n                      ))}\n                    </div>\n                  ) : (\n                    <div className=\"text-center py-12 text-gray-500\">\n                      <ImageIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                      <p>No media shared yet</p>\n                      <p className=\"text-sm\">Photos, videos, and files will appear here</p>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Export wallpaper options for use in other components\nexport { WALLPAPER_OPTIONS };\nexport type { MediaItem };\n","'use client';\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Message, getMessages } from '@/lib/api/chat';\nimport { \n  getSocket, \n  joinChatRoom, \n  leaveChatRoom, \n  markChatAsRead,\n  deleteChatMessage,\n  editChatMessage,\n  reactToChatMessage\n} from '@/lib/socket';\nimport { format, isToday, isYesterday } from 'date-fns';\nimport { cn } from '@/lib/utils';\nimport MessageMenu, { MessageQuickActions } from './MessageMenu';\nimport { WALLPAPER_OPTIONS } from './ChatSettingsPanel';\nimport type { UploadingMessage, OptimisticMessage } from './ChatInput';\nimport { DEFAULT_CHAT_REACTIONS } from '@/lib/chat/customization';\n\ninterface ChatMessagesProps {\n  conversationId: string;\n  currentUserId: string;\n  otherUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n  };\n  wallpaper?: string;\n  availableReactions?: string[];\n  animatedBubbles?: boolean;\n  onReply?: (message: { id: string; content: string; senderName: string }) => void;\n  uploadingMessages?: UploadingMessage[];\n  optimisticMessages?: OptimisticMessage[];\n  onLastMessageUpdate?: (message: string) => void;\n  onMessageConfirmed?: (content: string) => void;\n}\n\nexport default function ChatMessages({\n  conversationId,\n  currentUserId,\n  otherUser,\n  wallpaper = 'default',\n  availableReactions = DEFAULT_CHAT_REACTIONS,\n  animatedBubbles = false,\n  onReply,\n  uploadingMessages = [],\n  optimisticMessages = [],\n  onLastMessageUpdate,\n  onMessageConfirmed,\n}: ChatMessagesProps) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n  const [typingUser, setTypingUser] = useState<string | null>(null);\n  const [highlightedMessageId, setHighlightedMessageId] = useState<string | null>(null);\n  const [viewingImage, setViewingImage] = useState<string | null>(null);\n  const [viewingVideo, setViewingVideo] = useState<string | null>(null);\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const messageRefs = useRef<Map<string, HTMLDivElement>>(new Map());\n  const [shouldAutoScroll, setShouldAutoScroll] = useState(true);\n\n  // Scroll to a specific message and highlight it\n  const scrollToMessage = useCallback((messageId: string) => {\n    const messageElement = messageRefs.current.get(messageId);\n    if (messageElement) {\n      messageElement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n      setHighlightedMessageId(messageId);\n      // Remove highlight after 1.5 seconds\n      setTimeout(() => {\n        setHighlightedMessageId(null);\n      }, 1500);\n    }\n  }, []);\n\n  // Register message ref\n  const registerMessageRef = useCallback((messageId: string, element: HTMLDivElement | null) => {\n    if (element) {\n      messageRefs.current.set(messageId, element);\n    } else {\n      messageRefs.current.delete(messageId);\n    }\n  }, []);\n\n  // Fetch messages\n  // Helper to determine if a message was edited based on timestamp difference\n  const wasMessageEdited = (message: Message): boolean => {\n    if (!message.createdAt || !message.updatedAt) return false;\n    const created = new Date(message.createdAt).getTime();\n    const updated = new Date(message.updatedAt).getTime();\n    // Consider edited if there's at least 1 second difference\n    // Prisma sets both timestamps at the exact same moment on creation\n    return updated - created >= 1000;\n  };\n\n  const fetchMessages = useCallback(async (cursor?: string) => {\n    try {\n      if (cursor) {\n        setLoadingMore(true);\n      } else {\n        setLoading(true);\n      }\n\n      const result = await getMessages(conversationId, 50, cursor);\n      \n      // Add isEdited flag to each message\n      const messagesWithEditFlag = result.messages.map(msg => ({\n        ...msg,\n        isEdited: wasMessageEdited(msg),\n      }));\n\n      if (cursor) {\n        // Prepend older messages\n        setMessages(prev => [...messagesWithEditFlag, ...prev]);\n      } else {\n        setMessages(messagesWithEditFlag);\n        \n        // Find the last message from the other user for AI assistant\n        if (onLastMessageUpdate) {\n          const lastFromOther = [...result.messages]\n            .reverse()\n            .find(m => m.senderId !== currentUserId && m.content);\n          if (lastFromOther) {\n            onLastMessageUpdate(lastFromOther.content);\n          }\n        }\n      }\n\n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: unknown) {\n      console.error('Failed to fetch messages:', err);\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [conversationId, currentUserId, onLastMessageUpdate]);\n\n  // Initial load and join room\n  useEffect(() => {\n    fetchMessages();\n    joinChatRoom(conversationId);\n    markChatAsRead(conversationId);\n\n    return () => {\n      leaveChatRoom(conversationId);\n    };\n  }, [conversationId, fetchMessages]);\n\n  // Socket event listeners\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleNewMessage = (data: { conversationId: string; message: Message }) => {\n      if (data.conversationId === conversationId) {\n        // Deduplicate - check if message already exists\n        setMessages(prev => {\n          const exists = prev.some(m => m.id === data.message.id);\n          if (exists) return prev;\n          return [...prev, data.message];\n        });\n        setShouldAutoScroll(true);\n        \n        // If this is our own message, confirm it to remove optimistic version\n        if (data.message.senderId === currentUserId && onMessageConfirmed) {\n          onMessageConfirmed(data.message.content);\n        }\n        \n        // Mark as read if from other user\n        if (data.message.senderId !== currentUserId) {\n          markChatAsRead(conversationId);\n          // Update last received message for AI assistant\n          if (data.message.content && onLastMessageUpdate) {\n            onLastMessageUpdate(data.message.content);\n          }\n        }\n      }\n    };\n\n    const handleTyping = (data: { conversationId: string; userId: string; isTyping: boolean }) => {\n      if (data.conversationId === conversationId && data.userId !== currentUserId) {\n        setTypingUser(data.isTyping ? data.userId : null);\n      }\n    };\n\n    const handleMessagesRead = (data: { conversationId: string; readBy: string; readAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status !== 'READ'\n              ? { ...m, status: 'READ', readAt: new Date(data.readAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleMessagesDelivered = (data: { conversationId: string; deliveredAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status === 'SENT'\n              ? { ...m, status: 'DELIVERED', deliveredAt: new Date(data.deliveredAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleError = (data: { message: string }) => {\n      console.error('Chat socket error:', data.message);\n    };\n\n    const handleMessageDeleted = (data: { messageId: string; conversationId: string; forEveryone: boolean }) => {\n      if (data.conversationId === conversationId) {\n        if (data.forEveryone) {\n          setMessages(prev => \n            prev.map(m => \n              m.id === data.messageId \n                ? { ...m, isDeleted: true, content: 'This message was deleted' } \n                : m\n            )\n          );\n        } else {\n          setMessages(prev => prev.filter(m => m.id !== data.messageId));\n        }\n      }\n    };\n\n    const handleMessageEdited = (data: { messageId: string; conversationId: string; content: string; editedAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.id === data.messageId \n              ? { ...m, content: data.content, updatedAt: String(data.editedAt), isEdited: true } \n              : m\n          )\n        );\n      }\n    };\n\n    const handleReaction = (data: { messageId: string; conversationId: string; userId: string; emoji: string; action: string }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => {\n            if (m.id !== data.messageId) return m;\n            \n            let reactions = [...(m.reactions || [])];\n            \n            if (data.action === 'removed') {\n              reactions = reactions.filter(r => !(r.userId === data.userId));\n            } else if (data.action === 'added') {\n              reactions.push({\n                id: `temp-${Date.now()}`,\n                userId: data.userId,\n                emoji: data.emoji,\n                user: { id: data.userId, username: '', name: '' }\n              });\n            } else if (data.action === 'updated') {\n              const index = reactions.findIndex(r => r.userId === data.userId);\n              if (index >= 0) {\n                reactions[index] = { ...reactions[index], emoji: data.emoji };\n              }\n            }\n            \n            return { ...m, reactions };\n          })\n        );\n      }\n    };\n\n    // Handle chat:notification (sent to user's personal room as fallback)\n    const handleChatNotification = (data: { type: string; conversationId: string; message: Message }) => {\n      if (data.type === 'new_message' && data.conversationId === conversationId) {\n        // Deduplicate - check if message already exists\n        setMessages(prev => {\n          const exists = prev.some(m => m.id === data.message.id);\n          if (exists) return prev;\n          return [...prev, data.message];\n        });\n        setShouldAutoScroll(true);\n        \n        // If this is our own message, confirm it to remove optimistic version\n        if (data.message.senderId === currentUserId && onMessageConfirmed) {\n          onMessageConfirmed(data.message.content);\n        }\n        \n        // Mark as read if from other user\n        if (data.message.senderId !== currentUserId) {\n          markChatAsRead(conversationId);\n          if (data.message.content && onLastMessageUpdate) {\n            onLastMessageUpdate(data.message.content);\n          }\n        }\n      }\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:notification', handleChatNotification);\n    socket.on('chat:user_typing', handleTyping);\n    socket.on('chat:messages_read', handleMessagesRead);\n    socket.on('chat:messages_delivered', handleMessagesDelivered);\n    socket.on('chat:message_deleted', handleMessageDeleted);\n    socket.on('chat:message_edited', handleMessageEdited);\n    socket.on('chat:message_reaction', handleReaction);\n    socket.on('error', handleError);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:notification', handleChatNotification);\n      socket.off('chat:user_typing', handleTyping);\n      socket.off('chat:messages_read', handleMessagesRead);\n      socket.off('chat:messages_delivered', handleMessagesDelivered);\n      socket.off('chat:message_deleted', handleMessageDeleted);\n      socket.off('chat:message_edited', handleMessageEdited);\n      socket.off('chat:message_reaction', handleReaction);\n      socket.off('error', handleError);\n    };\n  }, [conversationId, currentUserId, otherUser.id, onLastMessageUpdate, onMessageConfirmed]);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (shouldAutoScroll && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n      setShouldAutoScroll(false);\n    }\n  }, [messages, shouldAutoScroll]);\n\n  // Scroll detection for loading more\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    const target = e.currentTarget;\n    if (target.scrollTop < 100 && hasMore && !loadingMore) {\n      fetchMessages(nextCursor);\n    }\n  };\n\n  // Group messages by date\n  const groupedMessages = messages.reduce((groups, message) => {\n    const date = new Date(message.createdAt);\n    const dateKey = format(date, 'yyyy-MM-dd');\n    \n    if (!groups[dateKey]) {\n      groups[dateKey] = [];\n    }\n    groups[dateKey].push(message);\n    \n    return groups;\n  }, {} as Record<string, Message[]>);\n\n  if (loading) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  // Get wallpaper styles\n  const wallpaperOption = WALLPAPER_OPTIONS.find(w => w.id === wallpaper) || WALLPAPER_OPTIONS[0];\n  const wallpaperClasses = cn(wallpaperOption.color, wallpaperOption.pattern);\n\n  return (\n    <>\n    <div \n      ref={messagesContainerRef}\n      className={cn(\"flex-1 overflow-y-auto p-4 space-y-4\", wallpaperClasses)}\n      onScroll={handleScroll}\n    >\n      {loadingMore && (\n        <div className=\"flex justify-center py-2\">\n          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n        </div>\n      )}\n\n      {Object.entries(groupedMessages).map(([dateKey, dateMessages]) => (\n        <div key={dateKey}>\n          {/* Date separator */}\n          <div className=\"flex items-center justify-center my-4\">\n            <div className=\"bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full text-xs text-gray-600 dark:text-gray-300\">\n              {formatDateSeparator(new Date(dateKey))}\n            </div>\n          </div>\n\n          {/* Messages for this date */}\n          {dateMessages.map((message, index) => {\n            const prevMessage = index > 0 ? dateMessages[index - 1] : null;\n            const showAvatar = !prevMessage || prevMessage.senderId !== message.senderId;\n            \n            return (\n              <MessageBubble\n                key={message.id}\n                message={message}\n                isOwn={message.senderId === currentUserId}\n                showAvatar={showAvatar}\n                otherUser={otherUser}\n                conversationId={conversationId}\n                isHighlighted={highlightedMessageId === message.id}\n                onScrollToReply={scrollToMessage}\n                registerRef={(el) => registerMessageRef(message.id, el)}\n                onReply={onReply ? () => onReply({\n                  id: message.id,\n                  content: message.content,\n                  senderName: message.senderId === currentUserId ? 'You' : otherUser.name,\n                }) : undefined}\n                onViewImage={setViewingImage}\n                onViewVideo={setViewingVideo}\n                availableReactions={availableReactions}\n                animatedBubbles={animatedBubbles}\n              />\n            );\n          })}\n        </div>\n      ))}\n\n      {/* Optimistic Messages (sent but not yet confirmed) */}\n      {optimisticMessages.map(optMsg => (\n        <div key={optMsg.id} className=\"flex justify-end mb-2\">\n          <div className=\"max-w-[70%]\">\n            {/* Reply preview if present */}\n            {optMsg.replyTo && (\n              <div className=\"text-xs p-2 rounded-t-lg border-l-2 bg-blue-600/20 border-blue-400\">\n                <span className=\"text-gray-500 text-[10px]\">â†© Replying to</span>\n                <p className=\"truncate text-gray-700 dark:text-gray-300\">{optMsg.replyTo.content}</p>\n              </div>\n            )}\n            <div className={cn(\n              \"bg-blue-600 text-white px-4 py-2 rounded-2xl rounded-br-sm\",\n              optMsg.replyTo && \"rounded-t-none\"\n            )}>\n              <p className=\"break-words whitespace-pre-wrap\">{optMsg.content}</p>\n            </div>\n            <div className=\"text-xs text-gray-500 mt-1 flex items-center gap-1 justify-end\">\n              <span>{format(new Date(optMsg.createdAt), 'HH:mm')}</span>\n              <span className=\"animate-pulse\">â³</span>\n            </div>\n          </div>\n        </div>\n      ))}\n\n      {/* Uploading Messages */}\n      {uploadingMessages.map(uploadingMsg => (\n        <div key={uploadingMsg.id} className=\"flex justify-end mb-2\">\n          <div className=\"relative max-w-[70%]\">\n            <div className=\"bg-blue-600 text-white px-4 py-2 rounded-2xl rounded-br-sm\">\n              {/* Preview for images/videos */}\n              {uploadingMsg.preview && (uploadingMsg.type === 'image' || uploadingMsg.type === 'video') && (\n                <div className=\"relative mb-2 rounded-lg overflow-hidden\">\n                  {uploadingMsg.type === 'image' ? (\n                    <img \n                      src={uploadingMsg.preview} \n                      alt=\"Uploading\" \n                      className=\"max-w-full opacity-70\"\n                      style={{ maxHeight: '200px' }}\n                    />\n                  ) : (\n                    <video \n                      src={uploadingMsg.preview}\n                      className=\"max-w-full opacity-70\"\n                      style={{ maxHeight: '200px' }}\n                      muted\n                    />\n                  )}\n                  {/* Overlay with spinner */}\n                  <div className=\"absolute inset-0 flex items-center justify-center bg-black/30\">\n                    <div className=\"relative\">\n                      <svg className=\"w-12 h-12\" viewBox=\"0 0 36 36\">\n                        <circle\n                          cx=\"18\"\n                          cy=\"18\"\n                          r=\"16\"\n                          fill=\"none\"\n                          stroke=\"rgba(255,255,255,0.3)\"\n                          strokeWidth=\"3\"\n                        />\n                        <circle\n                          cx=\"18\"\n                          cy=\"18\"\n                          r=\"16\"\n                          fill=\"none\"\n                          stroke=\"white\"\n                          strokeWidth=\"3\"\n                          strokeDasharray={`${uploadingMsg.progress}, 100`}\n                          strokeLinecap=\"round\"\n                          transform=\"rotate(-90 18 18)\"\n                        />\n                      </svg>\n                      <span className=\"absolute inset-0 flex items-center justify-center text-white text-xs font-medium\">\n                        {uploadingMsg.progress}%\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              )}\n              \n              {/* For audio/documents - show icon with progress */}\n              {(uploadingMsg.type === 'audio' || uploadingMsg.type === 'document') && (\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"relative w-10 h-10\">\n                    <svg className=\"w-10 h-10\" viewBox=\"0 0 36 36\">\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"16\"\n                        fill=\"none\"\n                        stroke=\"rgba(255,255,255,0.3)\"\n                        strokeWidth=\"3\"\n                      />\n                      <circle\n                        cx=\"18\"\n                        cy=\"18\"\n                        r=\"16\"\n                        fill=\"none\"\n                        stroke=\"white\"\n                        strokeWidth=\"3\"\n                        strokeDasharray={`${uploadingMsg.progress}, 100`}\n                        strokeLinecap=\"round\"\n                        transform=\"rotate(-90 18 18)\"\n                      />\n                    </svg>\n                    <span className=\"absolute inset-0 flex items-center justify-center text-white text-xs\">\n                      {uploadingMsg.type === 'audio' ? 'ðŸŽ¤' : 'ðŸ“„'}\n                    </span>\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"text-sm truncate\">{uploadingMsg.fileName || 'Uploading...'}</p>\n                    <p className=\"text-xs opacity-70\">Sending... {uploadingMsg.progress}%</p>\n                  </div>\n                </div>\n              )}\n              \n              {/* Text label */}\n              {(uploadingMsg.type === 'image' || uploadingMsg.type === 'video') && (\n                <p className=\"text-sm\">\n                  {uploadingMsg.type === 'image' ? 'ðŸ“· Sending photo...' : 'ðŸŽ¥ Sending video...'}\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      ))}\n\n      {/* Typing indicator */}\n      {typingUser && (\n        <div className=\"flex items-center gap-2 text-gray-500 text-sm\">\n          <div className=\"flex gap-1\">\n            <span className=\"animate-bounce\">â€¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.1s' }}>â€¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.2s' }}>â€¢</span>\n          </div>\n          <span>{otherUser.name} is typing...</span>\n        </div>\n      )}\n\n      <div ref={messagesEndRef} />\n    </div>\n\n    {/* Image Viewer Modal */}\n    {viewingImage && (\n      <div \n        className=\"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4\"\n        onClick={() => setViewingImage(null)}\n      >\n        <button\n          onClick={() => setViewingImage(null)}\n          className=\"absolute top-4 right-4 text-white hover:bg-white/10 p-2 rounded-full transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n        <img \n          src={viewingImage} \n          alt=\"Full size image\" \n          className=\"max-w-full max-h-full object-contain rounded-lg\"\n          onClick={(e) => e.stopPropagation()}\n        />\n        <a\n          href={viewingImage}\n          download\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          onClick={(e) => e.stopPropagation()}\n          className=\"absolute bottom-4 right-4 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          Download\n        </a>\n      </div>\n    )}\n\n    {/* Video Viewer Modal */}\n    {viewingVideo && (\n      <div \n        className=\"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4\"\n        onClick={() => setViewingVideo(null)}\n      >\n        <button\n          onClick={() => setViewingVideo(null)}\n          className=\"absolute top-4 right-4 text-white hover:bg-white/10 p-2 rounded-full transition-colors z-10\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n        <video \n          src={viewingVideo} \n          controls\n          autoPlay\n          className=\"max-w-full max-h-full rounded-lg\"\n          style={{ maxHeight: '90vh', maxWidth: '90vw' }}\n          onClick={(e) => e.stopPropagation()}\n        />\n        <a\n          href={viewingVideo}\n          download\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          onClick={(e) => e.stopPropagation()}\n          className=\"absolute bottom-4 right-4 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n          </svg>\n          Download\n        </a>\n      </div>\n    )}\n    </>\n  );\n}\n\n// ============================================\n// Message Bubble Component\n// ============================================\ninterface MessageBubbleProps {\n  message: Message;\n  isOwn: boolean;\n  showAvatar: boolean;\n  otherUser: {\n    name: string;\n    profileImage?: string | null;\n  };\n  conversationId: string;\n  isHighlighted?: boolean;\n  onScrollToReply?: (messageId: string) => void;\n  registerRef?: (el: HTMLDivElement | null) => void;\n  onReply?: () => void;\n  onViewImage?: (url: string) => void;\n  onViewVideo?: (url: string) => void;\n  availableReactions?: string[];\n  animatedBubbles?: boolean;\n}\n\nfunction MessageBubble({ \n  message, \n  isOwn, \n  showAvatar, \n  otherUser,\n  conversationId,\n  isHighlighted = false,\n  onScrollToReply,\n  registerRef,\n  onReply,\n  onViewImage,\n  onViewVideo,\n  availableReactions = DEFAULT_CHAT_REACTIONS,\n  animatedBubbles = false,\n}: MessageBubbleProps) {\n  const [showActions, setShowActions] = useState(false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showReactions, setShowReactions] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editContent, setEditContent] = useState(message.content);\n  const [copied, setCopied] = useState(false);\n\n  const handleDelete = (forEveryone: boolean) => {\n    deleteChatMessage(message.id, conversationId, forEveryone);\n    setShowActions(false);\n    setShowMenu(false);\n  };\n\n  const handleEdit = () => {\n    if (editContent.trim() && editContent !== message.content) {\n      editChatMessage(message.id, conversationId, editContent);\n    }\n    setIsEditing(false);\n  };\n\n  const handleReaction = (emoji: string) => {\n    reactToChatMessage(message.id, conversationId, emoji);\n    setShowReactions(false);\n  };\n\n  if (message.isDeleted) {\n    return (\n      <div \n        ref={registerRef}\n        className={cn(\n          'flex items-center gap-2',\n          isOwn ? 'justify-end' : 'justify-start'\n        )}\n      >\n        <div className=\"bg-gray-100 dark:bg-gray-800 text-gray-500 italic px-4 py-2 rounded-lg text-sm\">\n          This message was deleted\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={registerRef}\n      className={cn(\n        'flex gap-2 group transition-all duration-300',\n        isOwn ? 'justify-end' : 'justify-start',\n        isHighlighted && 'bg-yellow-100/50 dark:bg-yellow-900/30 -mx-2 px-2 py-1 rounded-lg'\n      )}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => { setShowActions(false); setShowReactions(false); }}\n    >\n      {/* Avatar for received messages */}\n      {!isOwn && (\n        <div className={cn('w-8 h-8 flex-shrink-0', !showAvatar && 'invisible')}>\n          {showAvatar && (\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium\">\n              {otherUser.profileImage ? (\n                <img\n                  src={otherUser.profileImage}\n                  alt={otherUser.name}\n                  className=\"w-8 h-8 rounded-full object-cover\"\n                />\n              ) : (\n                otherUser.name.charAt(0).toUpperCase()\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className={cn('max-w-[70%] relative', isOwn && 'order-first')}>\n        {/* Reply preview - clickable to scroll to original message */}\n        {message.replyTo && (\n          <button\n            onClick={() => onScrollToReply?.(message.replyTo!.id)}\n            className={cn(\n              'text-xs p-2 rounded-t-lg border-l-2 w-full text-left cursor-pointer hover:opacity-80 transition-opacity',\n              isOwn \n                ? 'bg-blue-600/20 border-blue-400' \n                : 'bg-gray-100 dark:bg-gray-800 border-gray-400'\n            )}\n          >\n            <span className=\"text-gray-500 text-[10px]\">â†© Replying to</span>\n            <p className=\"truncate text-gray-700 dark:text-gray-300\">{message.replyTo.content}</p>\n          </button>\n        )}\n\n        {/* Message content */}\n        <div className={cn(\n          'px-4 py-2 rounded-2xl relative',\n          animatedBubbles && 'shadow-sm shadow-blue-400/15 transition-transform duration-150 hover:scale-[1.01]',\n          isOwn \n            ? 'bg-blue-600 text-white rounded-br-sm' \n            : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-sm',\n          message.replyTo && 'rounded-t-none'\n        )}>\n          {/* Image content */}\n          {message.mediaUrl && message.contentType === 'image' && (\n            <button \n              onClick={() => onViewImage?.(message.mediaUrl!)}\n              className=\"block w-full text-left\"\n            >\n              <img \n                src={message.mediaUrl} \n                alt=\"Shared image\" \n                className=\"rounded-lg max-w-full mb-2 cursor-pointer hover:opacity-90 transition-opacity\"\n                style={{ maxHeight: '300px' }}\n              />\n            </button>\n          )}\n\n          {/* Video content */}\n          {message.mediaUrl && message.contentType === 'video' && (\n            <div className=\"relative group cursor-pointer mb-2\" onClick={() => onViewVideo?.(message.mediaUrl!)}>\n              <video \n                src={message.mediaUrl}\n                className=\"rounded-lg max-w-full\"\n                style={{ maxHeight: '300px' }}\n              />\n              <div className=\"absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors rounded-lg\">\n                <div className=\"w-14 h-14 rounded-full bg-white/90 flex items-center justify-center\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-gray-900 ml-1\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M8 5v14l11-7z\"/>\n                  </svg>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Audio content */}\n          {message.mediaUrl && message.contentType === 'audio' && (\n            <div className={cn(\n              'flex items-center gap-3 p-2 rounded-lg mb-2',\n              isOwn ? 'bg-blue-700/50' : 'bg-gray-200 dark:bg-gray-700'\n            )}>\n              <div className=\"w-10 h-10 rounded-full bg-green-500 flex items-center justify-center\">\n                <span className=\"text-white text-lg\">ðŸŽ¤</span>\n              </div>\n              <audio \n                src={message.mediaUrl}\n                controls\n                className=\"flex-1 h-8\"\n                style={{ maxWidth: '200px' }}\n              />\n            </div>\n          )}\n\n          {/* Document content */}\n          {message.mediaUrl && message.contentType === 'document' && (\n            <a \n              href={message.mediaUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className={cn(\n                'flex items-center gap-3 p-3 rounded-lg mb-2 transition-colors',\n                isOwn ? 'bg-blue-700/50 hover:bg-blue-700/70' : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'\n              )}\n            >\n              <div className=\"w-10 h-10 rounded-lg bg-red-500 flex items-center justify-center\">\n                <span className=\"text-white text-lg\">ðŸ“„</span>\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className={cn('font-medium truncate text-sm', isOwn ? 'text-white' : 'text-gray-900 dark:text-white')}>\n                  {message.fileName || 'Document'}\n                </p>\n                {message.fileSize && (\n                  <p className={cn('text-xs', isOwn ? 'text-blue-200' : 'text-gray-500')}>\n                    {(message.fileSize / 1024).toFixed(1)} KB\n                  </p>\n                )}\n              </div>\n            </a>\n          )}\n\n          {/* Generic file content */}\n          {message.mediaUrl && message.contentType === 'file' && (\n            <a \n              href={message.mediaUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"flex items-center gap-2 bg-white/10 p-2 rounded mb-2 hover:bg-white/20\"\n            >\n              <span>ðŸ“Ž</span>\n              <span className=\"truncate\">{message.fileName || 'File'}</span>\n            </a>\n          )}\n\n          {/* Shared Reel content - thumbnail only, click to open reel */}\n          {message.contentType === 'reel' && (() => {\n            let reelId: string | null = null;\n            try {\n              const data = JSON.parse(message.content);\n              reelId = data.reelId || null;\n            } catch {\n              // Legacy: content might be plain text, try to extract reel ID from URL if any\n              const match = message.content?.match(/\\/reels\\/([a-f0-9-]+)/i);\n              reelId = match?.[1] || null;\n            }\n            const thumbnailUrl = message.mediaUrl;\n            const reelUrl = reelId ? `/reels/${reelId}` : '/reels';\n            // Show thumbnail card even for legacy messages without reelId (links to reels feed)\n            return (\n              <a\n                href={reelUrl}\n                onClick={(e) => {\n                  e.preventDefault();\n                  window.location.href = reelUrl;\n                }}\n                className={cn(\n                  'block relative rounded-xl overflow-hidden w-24 h-36 flex-shrink-0 cursor-pointer hover:opacity-90 transition-opacity',\n                  isOwn ? 'ring-2 ring-white/30' : 'ring-2 ring-gray-300 dark:ring-gray-600'\n                )}\n              >\n                {thumbnailUrl ? (\n                  <img\n                    src={thumbnailUrl}\n                    alt=\"Reel\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className={cn(\n                    'w-full h-full flex items-center justify-center',\n                    isOwn ? 'bg-blue-700/50' : 'bg-gray-200 dark:bg-gray-700'\n                  )}>\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 opacity-70\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\">\n                      <rect width=\"18\" height=\"18\" x=\"3\" y=\"3\" rx=\"2\" />\n                      <path d=\"M7 3v18\" />\n                      <path d=\"M17 3v18\" />\n                      <path d=\"M3 12h18\" />\n                    </svg>\n                  </div>\n                )}\n                <div className=\"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-black/60 to-transparent flex items-end justify-center pb-1\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 text-white\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M8 5v14l11-7z\"/>\n                  </svg>\n                </div>\n              </a>\n            );\n          })()}\n\n          {/* Shared Post content */}\n          {(message.contentType === 'post' || message.contentType === 'application/x-shared-post') && (() => {\n            try {\n              const postData = JSON.parse(message.content);\n              const postId = postData.postId;\n              const postUrl = postData.postUrl || (postId ? `/post/${postId}` : null);\n              \n              return (\n                <a\n                  href={postUrl || '#'}\n                  onClick={(e) => {\n                    if (postUrl) {\n                      e.preventDefault();\n                      window.location.href = postUrl;\n                    }\n                  }}\n                  className={cn(\n                    'block rounded-lg p-3 mb-2 cursor-pointer transition-colors',\n                    isOwn ? 'bg-blue-700/50 hover:bg-blue-700/70' : 'bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600'\n                  )}\n                >\n                  <div className=\"flex items-center gap-2 mb-2 text-xs opacity-70\">\n                    <span>ðŸ“„</span>\n                    <span>Shared Post</span>\n                  </div>\n                  {postData.mediaUrl && (\n                    <img \n                      src={postData.mediaUrl} \n                      alt=\"Post media\" \n                      className=\"rounded-md w-full h-24 object-cover mb-2\"\n                    />\n                  )}\n                  {postData.author && (\n                    <>\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        {postData.author.profileImage && (\n                          <img \n                            src={postData.author.profileImage} \n                            alt={postData.author.name} \n                            className=\"w-6 h-6 rounded-full object-cover\"\n                          />\n                        )}\n                        <p className={cn('font-medium text-sm', isOwn ? 'text-white' : 'text-gray-900 dark:text-white')}>\n                          {postData.author.name}\n                        </p>\n                      </div>\n                      {postData.author.username && (\n                        <p className={cn('text-xs opacity-60', isOwn ? 'text-blue-200' : 'text-gray-500')}>\n                          @{postData.author.username}\n                        </p>\n                      )}\n                    </>\n                  )}\n                  {/* Legacy format support */}\n                  {!postData.author && postData.authorName && (\n                    <>\n                      <p className={cn('font-medium text-sm', isOwn ? 'text-white' : 'text-gray-900 dark:text-white')}>\n                        {postData.authorName}\n                      </p>\n                      {postData.authorUsername && (\n                        <p className={cn('text-xs opacity-60', isOwn ? 'text-blue-200' : 'text-gray-500')}>\n                          @{postData.authorUsername}\n                        </p>\n                      )}\n                    </>\n                  )}\n                  {(postData.preview || postData.contentPreview) && (\n                    <p className={cn('text-sm mt-1 line-clamp-2', isOwn ? 'text-blue-100' : 'text-gray-600 dark:text-gray-300')}>\n                      {postData.preview || postData.contentPreview}\n                    </p>\n                  )}\n                  <p className=\"text-xs opacity-50 mt-2 italic\">Tap to view post â†’</p>\n                </a>\n              );\n            } catch {\n              return <p className=\"break-words whitespace-pre-wrap\">{message.content}</p>;\n            }\n          })()}\n\n          {/* Text content - hide for reel (thumbnail only) and post */}\n          {message.contentType !== 'post' && message.contentType !== 'reel' && (isEditing ? (\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                className=\"flex-1 bg-white/20 rounded px-2 py-1 text-sm\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleEdit();\n                  if (e.key === 'Escape') setIsEditing(false);\n                }}\n              />\n              <button onClick={handleEdit} className=\"text-xs\">Save</button>\n            </div>\n          ) : (\n            <p className=\"break-words whitespace-pre-wrap\">{message.content}</p>\n          ))}\n\n          {/* Edited indicator - only show if message was explicitly edited */}\n          {!message.isDeleted && message.isEdited && (\n            <span className=\"text-xs opacity-60 ml-1\">(edited)</span>\n          )}\n        </div>\n\n        {/* Reactions */}\n        {message.reactions && message.reactions.length > 0 && (\n          <div className={cn(\n            'flex flex-wrap gap-1 mt-1',\n            isOwn ? 'justify-end' : 'justify-start'\n          )}>\n            {Array.from(new Set(message.reactions.map(r => r.emoji))).map(emoji => {\n              const count = message.reactions.filter(r => r.emoji === emoji).length;\n              return (\n                <button\n                  key={emoji}\n                  onClick={() => handleReaction(emoji)}\n                  className=\"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full text-sm flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700\"\n                >\n                  <span>{emoji}</span>\n                  <span className=\"text-xs text-gray-500\">{count}</span>\n                </button>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Time and status */}\n        <div className={cn(\n          'text-xs text-gray-500 mt-1 flex items-center gap-1',\n          isOwn ? 'justify-end' : 'justify-start'\n        )}>\n          <span>{format(new Date(message.createdAt), 'HH:mm')}</span>\n          {isOwn && (\n            <span className={cn(\n              message.status === 'READ' && 'text-blue-500'\n            )}>\n              {message.status === 'READ' ? 'âœ“âœ“' : message.status === 'DELIVERED' ? 'âœ“âœ“' : 'âœ“'}\n            </span>\n          )}\n        </div>\n\n        {/* Quick Action buttons (Discord-style) */}\n        <MessageQuickActions\n          isVisible={showActions && !isEditing && !showMenu}\n          isOwn={isOwn}\n          onReply={() => onReply?.()}\n          onReact={() => setShowReactions(!showReactions)}\n          onMore={() => setShowMenu(true)}\n        />\n\n        {/* Full Message Menu */}\n        <MessageMenu\n          isOpen={showMenu}\n          onClose={() => setShowMenu(false)}\n          isOwn={isOwn}\n          messageContent={message.content}\n          hasMedia={!!message.mediaUrl}\n          mediaUrl={message.mediaUrl}\n          onReply={() => onReply?.()}\n          onEdit={() => setIsEditing(true)}\n          onDelete={handleDelete}\n          onReact={handleReaction}\n          onCopy={() => {\n            setCopied(true);\n            setTimeout(() => setCopied(false), 2000);\n          }}\n          availableReactions={availableReactions}\n          anchorPosition={isOwn ? 'right' : 'left'}\n        />\n\n        {/* Reaction picker */}\n        {showReactions && !showMenu && (\n          <div className={cn(\n            'absolute -top-10 flex items-center gap-1 bg-white dark:bg-gray-900 shadow-lg rounded-full px-2 py-1',\n            isOwn ? 'right-0' : 'left-0'\n          )}>\n            {availableReactions.map(emoji => (\n              <button\n                key={emoji}\n                onClick={() => handleReaction(emoji)}\n                className=\"hover:scale-125 transition-transform p-1\"\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        )}\n\n        {/* Copied notification */}\n        {copied && (\n          <div className=\"absolute -top-8 left-1/2 -translate-x-1/2 bg-black/70 text-white text-xs px-2 py-1 rounded\">\n            Copied!\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Utility Functions\n// ============================================\nfunction formatDateSeparator(date: Date): string {\n  if (isToday(date)) return 'Today';\n  if (isYesterday(date)) return 'Yesterday';\n  return format(date, 'MMMM d, yyyy');\n}\n","'use client';\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getConversations, Conversation } from '@/lib/api/chat';\nimport { initializeSocket, getSocket } from '@/lib/socket';\nimport { formatDistanceToNow } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\ninterface ChatListProps {\n  selectedConversationId?: string;\n  onSelectConversation?: (conversation: Conversation) => void;\n  currentUserId?: string;\n}\n\nexport default function ChatList({ \n  selectedConversationId, \n  onSelectConversation,\n  currentUserId \n}: ChatListProps) {\n  const router = useRouter();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n\n  const fetchConversations = useCallback(async (cursor?: string) => {\n    try {\n      // Only show loading if we don't have any conversations yet\n      if (conversations.length === 0) {\n        setLoading(true);\n      }\n      const result = await getConversations(30, cursor);\n      \n      if (cursor) {\n        setConversations(prev => [...prev, ...result.conversations]);\n      } else {\n        setConversations(result.conversations);\n      }\n      \n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load conversations');\n    } finally {\n      setLoading(false);\n    }\n  }, [conversations.length]);\n\n  useEffect(() => {\n    fetchConversations();\n  }, [fetchConversations]);\n\n  // Listen for new messages to update conversation list\n  useEffect(() => {\n    const socket = getSocket();\n    \n    if (!socket) return;\n\n    // Track recently processed message IDs to prevent duplicates\n    const processedMessageIds = new Set<string>();\n\n    const handleNewMessage = (data: { conversationId: string; message: any }) => {\n      // Deduplicate: skip if already processed\n      if (processedMessageIds.has(data.message.id)) {\n        return;\n      }\n      processedMessageIds.add(data.message.id);\n      // Keep set bounded\n      if (processedMessageIds.size > 50) {\n        const first = processedMessageIds.values().next().value;\n        if (first !== undefined) processedMessageIds.delete(first);\n      }\n\n      setConversations(prev => {\n        const existingIndex = prev.findIndex(c => c.id === data.conversationId);\n        \n        if (existingIndex >= 0) {\n          // Check if this is truly a new message (not already displayed)\n          const existingConv = prev[existingIndex];\n          if (existingConv.lastMessage?.id === data.message.id) {\n            return prev; // Same message, skip update\n          }\n\n          // Update existing conversation and move to top\n          const updated = [...prev];\n          const conv = { ...updated[existingIndex] };\n          conv.lastMessage = {\n            id: data.message.id,\n            content: data.message.content,\n            contentType: data.message.contentType,\n            senderId: data.message.senderId,\n            status: data.message.status,\n            createdAt: data.message.createdAt,\n          };\n          conv.lastMessageAt = data.message.createdAt;\n          \n          // Increment unread if not the sender\n          if (data.message.senderId !== currentUserId && data.conversationId !== selectedConversationId) {\n            conv.unreadCount = (conv.unreadCount || 0) + 1;\n          }\n          \n          updated.splice(existingIndex, 1);\n          return [conv, ...updated];\n        }\n        \n        // Refresh to get new conversation\n        fetchConversations();\n        return prev;\n      });\n    };\n\n    // Handle chat:notification which has a slightly different structure\n    const handleChatNotification = (data: { type: string; conversationId: string; message: any }) => {\n      if (data.type === 'new_message') {\n        handleNewMessage({ conversationId: data.conversationId, message: data.message });\n      }\n    };\n\n    const handleMessagesRead = (data: { conversationId: string }) => {\n      setConversations(prev => \n        prev.map(c => \n          c.id === data.conversationId \n            ? { ...c, unreadCount: 0 } \n            : c\n        )\n      );\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:notification', handleChatNotification);\n    socket.on('chat:messages_read', handleMessagesRead);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:notification', handleChatNotification);\n      socket.off('chat:messages_read', handleMessagesRead);\n    };\n  }, [currentUserId, selectedConversationId, fetchConversations]);\n\n  const handleSelectConversation = (conversation: Conversation) => {\n    if (onSelectConversation) {\n      onSelectConversation(conversation);\n    } else {\n      router.push(`/messages/${conversation.id}`);\n    }\n  };\n\n  const loadMore = () => {\n    if (hasMore && nextCursor) {\n      fetchConversations(nextCursor);\n    }\n  };\n\n  if (loading && conversations.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 text-center text-red-500\">\n        {error}\n        <button \n          onClick={() => fetchConversations()}\n          className=\"block mx-auto mt-2 text-blue-500 hover:underline\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (conversations.length === 0) {\n    return (\n      <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n        <div className=\"text-4xl mb-4\">ðŸ’¬</div>\n        <p>No conversations yet</p>\n        <p className=\"text-sm mt-2\">Start a chat with someone!</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 overflow-y-auto\">\n        {conversations.map((conversation) => (\n          <ConversationItem\n            key={conversation.id}\n            conversation={conversation}\n            isSelected={selectedConversationId === conversation.id}\n            currentUserId={currentUserId}\n            onClick={() => handleSelectConversation(conversation)}\n          />\n        ))}\n        \n        {hasMore && (\n          <button\n            onClick={loadMore}\n            disabled={loading}\n            className=\"w-full py-3 text-sm text-blue-600 hover:bg-gray-50 dark:hover:bg-gray-800\"\n          >\n            {loading ? 'Loading...' : 'Load more'}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Conversation Item Component\n// ============================================\ninterface ConversationItemProps {\n  conversation: Conversation;\n  isSelected: boolean;\n  currentUserId?: string;\n  onClick: () => void;\n}\n\nfunction ConversationItem({ \n  conversation, \n  isSelected, \n  currentUserId,\n  onClick \n}: ConversationItemProps) {\n  const other = conversation.otherParticipant;\n  const lastMessage = conversation.lastMessage;\n  const isUnread = conversation.unreadCount > 0;\n  const isSentByMe = lastMessage?.senderId === currentUserId;\n\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        'flex items-center gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 dark:border-gray-800',\n        isSelected \n          ? 'bg-blue-50 dark:bg-blue-900/20' \n          : 'hover:bg-gray-50 dark:hover:bg-gray-800/50',\n        isUnread && !isSelected && 'bg-gray-50 dark:bg-gray-800/30'\n      )}\n    >\n      {/* Avatar */}\n      <div className=\"relative flex-shrink-0\">\n        <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {other.profileImage ? (\n            <img\n              src={other.profileImage}\n              alt={other.name}\n              className=\"w-12 h-12 rounded-full object-cover\"\n            />\n          ) : (\n            other.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {other.isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center justify-between\">\n          <span className={cn(\n            'font-medium truncate',\n            isUnread && 'text-gray-900 dark:text-white font-semibold'\n          )}>\n            {other.name}\n          </span>\n          {lastMessage && (\n            <span className=\"text-xs text-gray-500 flex-shrink-0\">\n              {formatDistanceToNow(new Date(lastMessage.createdAt), { addSuffix: false })}\n            </span>\n          )}\n        </div>\n        \n        <div className=\"flex items-center gap-1\">\n          {lastMessage ? (\n            <>\n              {isSentByMe && (\n                <span className=\"text-gray-400 text-sm\">\n                  {lastMessage.status === 'READ' ? 'âœ“âœ“' : lastMessage.status === 'DELIVERED' ? 'âœ“âœ“' : 'âœ“'}\n                </span>\n              )}\n              <p className={cn(\n                'text-sm truncate',\n                isUnread \n                  ? 'text-gray-900 dark:text-white font-medium' \n                  : 'text-gray-500 dark:text-gray-400'\n              )}>\n                {lastMessage.contentType === 'image' ? 'ðŸ“· Photo' :\n                 lastMessage.contentType === 'file' ? 'ðŸ“Ž File' :\n                 lastMessage.contentType === 'voice' ? 'ðŸŽ¤ Voice message' :\n                 lastMessage.contentType === 'post' ? 'ðŸ“„ Shared a post' :\n                 lastMessage.contentType === 'reel' ? 'ðŸŽ¬ Reel' :\n                 lastMessage.contentType === 'video' ? 'ðŸŽ¬ Video' :\n                 lastMessage.content}\n              </p>\n            </>\n          ) : (\n            <p className=\"text-sm text-gray-400 italic\">No messages yet</p>\n          )}\n        </div>\n      </div>\n\n      {/* Unread badge */}\n      {isUnread && (\n        <div className=\"flex-shrink-0 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center\">\n          <span className=\"text-xs text-white font-medium\">\n            {conversation.unreadCount > 9 ? '9+' : conversation.unreadCount}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n","import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface ConversationStartersResponse {\n  suggestions: string[];\n  type: 'conversation_starters';\n}\n\nexport interface RevivalSuggestionsResponse {\n  suggestions: string[];\n  type: 'revival_suggestions';\n}\n\nexport interface GrammarFixResponse {\n  corrected: string;\n  alternatives: string[];\n  type: 'grammar_fix';\n}\n\nexport interface SmartRepliesResponse {\n  suggestions: string[];\n  type: 'smart_replies';\n}\n\nexport interface ToneChangeResponse {\n  original: string;\n  result: string;\n  tone: string;\n  type: 'tone_change';\n}\n\nexport interface TranslationResponse {\n  original: string;\n  translated: string;\n  targetLanguage: string;\n  type: 'translation';\n}\n\nexport interface ExpansionResponse {\n  original: string;\n  expanded: string;\n  type: 'expansion';\n}\n\nexport type ToneType = 'professional' | 'casual' | 'friendly' | 'formal' | 'enthusiastic' | 'concise';\nexport type LanguageType = 'english' | 'hindi' | 'telugu' | 'hinglish' | 'tenglish';\n\n// ============================================\n// AI Chat API Functions\n// ============================================\n\n/**\n * Get personalized conversation starters based on both users' profiles\n */\nexport async function getConversationStarters(\n  otherUserId: string\n): Promise<ConversationStartersResponse> {\n  return apiClient.post('/ai/chat/conversation-starters', { otherUserId });\n}\n\n/**\n * Get suggestions to continue a stalled conversation\n */\nexport async function getChatRevivalSuggestions(\n  conversationId: string,\n  otherUserId: string\n): Promise<RevivalSuggestionsResponse> {\n  return apiClient.post('/ai/chat/revival-suggestions', {\n    conversationId,\n    otherUserId,\n  });\n}\n\n/**\n * Fix grammar and spelling in a message\n */\nexport async function fixGrammar(\n  message: string,\n  context?: string\n): Promise<GrammarFixResponse> {\n  return apiClient.post('/ai/chat/fix-grammar', { message, context });\n}\n\n/**\n * Get smart reply suggestions based on the last message\n */\nexport async function getSmartReplies(\n  lastMessage: string,\n  conversationId?: string\n): Promise<SmartRepliesResponse> {\n  return apiClient.post('/ai/chat/smart-replies', {\n    lastMessage,\n    conversationId,\n  });\n}\n\n/**\n * Change the tone of a message\n */\nexport async function changeTone(\n  message: string,\n  tone: ToneType\n): Promise<ToneChangeResponse> {\n  return apiClient.post('/ai/chat/change-tone', { message, tone });\n}\n\n/**\n * Translate a message to another language\n */\nexport async function translateMessage(\n  message: string,\n  targetLanguage: LanguageType\n): Promise<TranslationResponse> {\n  return apiClient.post('/ai/chat/translate', { message, targetLanguage });\n}\n\n/**\n * Expand a short message into a more detailed one\n */\nexport async function expandMessage(\n  message: string,\n  context?: 'professional' | 'casual'\n): Promise<ExpansionResponse> {\n  return apiClient.post('/ai/chat/expand', { message, context });\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { cn } from '@/lib/utils';\nimport {\n  Sparkles,\n  MessageSquarePlus,\n  RefreshCw,\n  SpellCheck,\n  Zap,\n  Languages,\n  ArrowUpRight,\n  Palette,\n  X,\n  Loader2,\n  Check,\n  ChevronDown,\n} from 'lucide-react';\nimport {\n  getConversationStarters,\n  getChatRevivalSuggestions,\n  fixGrammar,\n  getSmartReplies,\n  changeTone,\n  translateMessage,\n  expandMessage,\n  type ToneType,\n  type LanguageType,\n} from '@/lib/api/ai-chat';\n\n// ============================================\n// Types\n// ============================================\n\ninterface AIChatAssistantProps {\n  conversationId: string;\n  otherUserId: string;\n  otherUserName: string;\n  currentMessage: string;\n  lastReceivedMessage?: string;\n  onSuggestionSelect: (text: string) => void;\n  onClose?: () => void;\n}\n\ntype AIFeature = \n  | 'starters'\n  | 'revival'\n  | 'grammar'\n  | 'smart-reply'\n  | 'tone'\n  | 'translate'\n  | 'expand';\n\ninterface FeatureOption {\n  id: AIFeature;\n  label: string;\n  icon: React.ReactNode;\n  description: string;\n  requiresMessage?: boolean;\n  requiresReceivedMessage?: boolean;\n}\n\n// ============================================\n// Constants\n// ============================================\n\nconst FEATURES: FeatureOption[] = [\n  {\n    id: 'starters',\n    label: 'Ice Breakers',\n    icon: <MessageSquarePlus className=\"w-4 h-4\" />,\n    description: 'Personalized conversation starters',\n  },\n  {\n    id: 'revival',\n    label: 'Continue Chat',\n    icon: <RefreshCw className=\"w-4 h-4\" />,\n    description: 'Revive a stalled conversation',\n  },\n  {\n    id: 'smart-reply',\n    label: 'Quick Reply',\n    icon: <Zap className=\"w-4 h-4\" />,\n    description: 'Smart reply suggestions',\n    requiresReceivedMessage: true,\n  },\n  {\n    id: 'grammar',\n    label: 'Fix Grammar',\n    icon: <SpellCheck className=\"w-4 h-4\" />,\n    description: 'Fix grammar & spelling',\n    requiresMessage: true,\n  },\n  {\n    id: 'tone',\n    label: 'Change Tone',\n    icon: <Palette className=\"w-4 h-4\" />,\n    description: 'Rewrite in different tone',\n    requiresMessage: true,\n  },\n  {\n    id: 'translate',\n    label: 'Translate',\n    icon: <Languages className=\"w-4 h-4\" />,\n    description: 'Translate to another language',\n    requiresMessage: true,\n  },\n  {\n    id: 'expand',\n    label: 'Expand',\n    icon: <ArrowUpRight className=\"w-4 h-4\" />,\n    description: 'Expand short message',\n    requiresMessage: true,\n  },\n];\n\nconst TONE_OPTIONS: { value: ToneType; label: string; emoji: string }[] = [\n  { value: 'professional', label: 'Professional', emoji: 'ðŸ’¼' },\n  { value: 'casual', label: 'Casual', emoji: 'ðŸ˜Ž' },\n  { value: 'friendly', label: 'Friendly', emoji: 'ðŸ¤—' },\n  { value: 'formal', label: 'Formal', emoji: 'ðŸŽ©' },\n  { value: 'enthusiastic', label: 'Enthusiastic', emoji: 'ðŸ”¥' },\n  { value: 'concise', label: 'Concise', emoji: 'âš¡' },\n];\n\nconst LANGUAGE_OPTIONS: { value: LanguageType; label: string }[] = [\n  { value: 'english', label: 'English' },\n  { value: 'hindi', label: 'Hindi' },\n  { value: 'telugu', label: 'Telugu' },\n  { value: 'hinglish', label: 'Hinglish' },\n  { value: 'tenglish', label: 'Tenglish' },\n];\n\n// ============================================\n// Component\n// ============================================\n\nexport default function AIChatAssistant({\n  conversationId,\n  otherUserId,\n  otherUserName,\n  currentMessage,\n  lastReceivedMessage,\n  onSuggestionSelect,\n  onClose,\n}: AIChatAssistantProps) {\n  const [selectedFeature, setSelectedFeature] = useState<AIFeature | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n  const [selectedTone, setSelectedTone] = useState<ToneType>('casual');\n  const [selectedLanguage, setSelectedLanguage] = useState<LanguageType>('english');\n  const [showToneDropdown, setShowToneDropdown] = useState(false);\n  const [showLanguageDropdown, setShowLanguageDropdown] = useState(false);\n\n  // Handle feature selection\n  const handleFeatureClick = async (feature: AIFeature) => {\n    // Check requirements\n    if (FEATURES.find(f => f.id === feature)?.requiresMessage && !currentMessage.trim()) {\n      setError('Please type a message first');\n      return;\n    }\n    if (FEATURES.find(f => f.id === feature)?.requiresReceivedMessage && !lastReceivedMessage) {\n      setError('No message to reply to');\n      return;\n    }\n\n    setSelectedFeature(feature);\n    setError(null);\n    setSuggestions([]);\n\n    // For tone and translate, just show the options\n    if (feature === 'tone' || feature === 'translate') {\n      return;\n    }\n\n    await fetchSuggestions(feature);\n  };\n\n  // Fetch suggestions based on feature\n  const fetchSuggestions = async (feature: AIFeature, extraParams?: { tone?: ToneType; language?: LanguageType }) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      let result: string[] = [];\n\n      switch (feature) {\n        case 'starters': {\n          const response = await getConversationStarters(otherUserId);\n          result = response.suggestions;\n          break;\n        }\n        case 'revival': {\n          const response = await getChatRevivalSuggestions(conversationId, otherUserId);\n          result = response.suggestions;\n          break;\n        }\n        case 'grammar': {\n          const response = await fixGrammar(currentMessage);\n          result = [response.corrected, ...response.alternatives];\n          break;\n        }\n        case 'smart-reply': {\n          const response = await getSmartReplies(lastReceivedMessage || '', conversationId);\n          result = response.suggestions;\n          break;\n        }\n        case 'tone': {\n          const response = await changeTone(currentMessage, extraParams?.tone || selectedTone);\n          result = [response.result];\n          break;\n        }\n        case 'translate': {\n          const response = await translateMessage(currentMessage, extraParams?.language || selectedLanguage);\n          result = [response.translated];\n          break;\n        }\n        case 'expand': {\n          const response = await expandMessage(currentMessage);\n          result = [response.expanded];\n          break;\n        }\n      }\n\n      setSuggestions(result);\n    } catch (err: any) {\n      console.error('AI suggestion error:', err);\n      setError(err.response?.data?.error || 'Failed to generate suggestions');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle tone selection\n  const handleToneSelect = async (tone: ToneType) => {\n    setSelectedTone(tone);\n    setShowToneDropdown(false);\n    await fetchSuggestions('tone', { tone });\n  };\n\n  // Handle language selection\n  const handleLanguageSelect = async (language: LanguageType) => {\n    setSelectedLanguage(language);\n    setShowLanguageDropdown(false);\n    await fetchSuggestions('translate', { language });\n  };\n\n  // Handle suggestion selection\n  const handleSuggestionClick = (suggestion: string) => {\n    onSuggestionSelect(suggestion);\n    onClose?.();\n  };\n\n  // Reset to feature selection\n  const handleBack = () => {\n    setSelectedFeature(null);\n    setSuggestions([]);\n    setError(null);\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      exit={{ opacity: 0, y: 10 }}\n      className=\"absolute bottom-full left-0 right-0 mb-3 mx-0 bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50\"\n      style={{ maxHeight: 'calc(100vh - 200px)' }}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center\">\n            <Sparkles className=\"w-4 h-4 text-white\" />\n          </div>\n          <div>\n            <h3 className=\"font-semibold text-sm text-gray-900 dark:text-white\">\n              AI Assistant\n            </h3>\n            <p className=\"text-xs text-gray-500\">\n              {selectedFeature \n                ? FEATURES.find(f => f.id === selectedFeature)?.description \n                : 'Choose an action'}\n            </p>\n          </div>\n        </div>\n        <button\n          onClick={onClose}\n          className=\"p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors\"\n        >\n          <X className=\"w-4 h-4 text-gray-500\" />\n        </button>\n      </div>\n\n      {/* Content */}\n      <div className=\"p-3 max-h-80 overflow-y-auto\">\n        <AnimatePresence mode=\"wait\">\n          {!selectedFeature ? (\n            // Feature Selection Grid\n            <motion.div\n              key=\"features\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"grid grid-cols-2 gap-2\"\n            >\n              {FEATURES.map((feature) => {\n                const isDisabled = \n                  (feature.requiresMessage && !currentMessage.trim()) ||\n                  (feature.requiresReceivedMessage && !lastReceivedMessage);\n\n                return (\n                  <button\n                    key={feature.id}\n                    onClick={() => handleFeatureClick(feature.id)}\n                    disabled={isDisabled}\n                    className={cn(\n                      \"flex items-center gap-3 p-3 rounded-xl text-left transition-all\",\n                      isDisabled\n                        ? \"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800\"\n                        : \"hover:bg-gray-100 dark:hover:bg-gray-700 bg-gray-50 dark:bg-gray-800/50 hover:scale-[1.02]\"\n                    )}\n                  >\n                    <div className={cn(\n                      \"w-9 h-9 rounded-xl flex items-center justify-center\",\n                      feature.id === 'starters' && \"bg-green-100 dark:bg-green-900/30 text-green-600\",\n                      feature.id === 'revival' && \"bg-orange-100 dark:bg-orange-900/30 text-orange-600\",\n                      feature.id === 'smart-reply' && \"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600\",\n                      feature.id === 'grammar' && \"bg-blue-100 dark:bg-blue-900/30 text-blue-600\",\n                      feature.id === 'tone' && \"bg-purple-100 dark:bg-purple-900/30 text-purple-600\",\n                      feature.id === 'translate' && \"bg-pink-100 dark:bg-pink-900/30 text-pink-600\",\n                      feature.id === 'expand' && \"bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600\",\n                    )}>\n                      {feature.icon}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-medium text-sm text-gray-900 dark:text-white truncate\">\n                        {feature.label}\n                      </p>\n                      <p className=\"text-xs text-gray-500 truncate\">\n                        {feature.description}\n                      </p>\n                    </div>\n                  </button>\n                );\n              })}\n            </motion.div>\n          ) : (\n            // Suggestions View\n            <motion.div\n              key=\"suggestions\"\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n            >\n              {/* Back button */}\n              <button\n                onClick={handleBack}\n                className=\"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 mb-3\"\n              >\n                <ChevronDown className=\"w-4 h-4 rotate-90\" />\n                Back to options\n              </button>\n\n              {/* Tone/Language Selector for those features */}\n              {selectedFeature === 'tone' && (\n                <div className=\"mb-3 relative\">\n                  <button\n                    onClick={() => setShowToneDropdown(!showToneDropdown)}\n                    className=\"w-full flex items-center justify-between px-4 py-2.5 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm\"\n                  >\n                    <span className=\"flex items-center gap-2\">\n                      <span>{TONE_OPTIONS.find(t => t.value === selectedTone)?.emoji}</span>\n                      <span>{TONE_OPTIONS.find(t => t.value === selectedTone)?.label}</span>\n                    </span>\n                    <ChevronDown className={cn(\"w-4 h-4 transition-transform\", showToneDropdown && \"rotate-180\")} />\n                  </button>\n                  {showToneDropdown && (\n                    <div className=\"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden z-10\">\n                      {TONE_OPTIONS.map((tone) => (\n                        <button\n                          key={tone.value}\n                          onClick={() => handleToneSelect(tone.value)}\n                          className=\"w-full flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-left\"\n                        >\n                          <span>{tone.emoji}</span>\n                          <span>{tone.label}</span>\n                          {selectedTone === tone.value && (\n                            <Check className=\"w-4 h-4 ml-auto text-green-500\" />\n                          )}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {selectedFeature === 'translate' && (\n                <div className=\"mb-3 relative\">\n                  <button\n                    onClick={() => setShowLanguageDropdown(!showLanguageDropdown)}\n                    className=\"w-full flex items-center justify-between px-4 py-2.5 bg-gray-100 dark:bg-gray-700 rounded-xl text-sm\"\n                  >\n                    <span>{LANGUAGE_OPTIONS.find(l => l.value === selectedLanguage)?.label}</span>\n                    <ChevronDown className={cn(\"w-4 h-4 transition-transform\", showLanguageDropdown && \"rotate-180\")} />\n                  </button>\n                  {showLanguageDropdown && (\n                    <div className=\"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden z-10\">\n                      {LANGUAGE_OPTIONS.map((lang) => (\n                        <button\n                          key={lang.value}\n                          onClick={() => handleLanguageSelect(lang.value)}\n                          className=\"w-full flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 text-left\"\n                        >\n                          <span>{lang.label}</span>\n                          {selectedLanguage === lang.value && (\n                            <Check className=\"w-4 h-4 ml-auto text-green-500\" />\n                          )}\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              )}\n\n              {/* Loading State */}\n              {loading && (\n                <div className=\"flex items-center justify-center py-8\">\n                  <Loader2 className=\"w-6 h-6 animate-spin text-blue-500\" />\n                  <span className=\"ml-2 text-sm text-gray-500\">Generating suggestions...</span>\n                </div>\n              )}\n\n              {/* Error State */}\n              {error && (\n                <div className=\"p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-center\">\n                  <p className=\"text-sm text-red-600 dark:text-red-400\">{error}</p>\n                  <button\n                    onClick={() => fetchSuggestions(selectedFeature)}\n                    className=\"mt-2 text-sm text-blue-600 hover:underline\"\n                  >\n                    Try again\n                  </button>\n                </div>\n              )}\n\n              {/* Suggestions List */}\n              {!loading && !error && suggestions.length > 0 && (\n                <div className=\"space-y-2\">\n                  {suggestions.map((suggestion, index) => (\n                    <motion.button\n                      key={index}\n                      initial={{ opacity: 0, x: -10 }}\n                      animate={{ opacity: 1, x: 0 }}\n                      transition={{ delay: index * 0.1 }}\n                      onClick={() => handleSuggestionClick(suggestion)}\n                      className={cn(\n                        \"w-full p-3 text-left rounded-xl transition-all\",\n                        \"bg-gray-50 dark:bg-gray-700/50 hover:bg-gray-100 dark:hover:bg-gray-700\",\n                        \"hover:shadow-md hover:scale-[1.01]\",\n                        \"border border-transparent hover:border-blue-200 dark:hover:border-blue-800\"\n                      )}\n                    >\n                      <p className=\"text-sm text-gray-800 dark:text-gray-200 leading-relaxed\">\n                        {suggestion}\n                      </p>\n                      {index === 0 && selectedFeature === 'grammar' && (\n                        <span className=\"inline-flex items-center gap-1 mt-1 text-xs text-green-600 dark:text-green-400\">\n                          <Check className=\"w-3 h-3\" />\n                          Best correction\n                        </span>\n                      )}\n                    </motion.button>\n                  ))}\n                </div>\n              )}\n\n              {/* Regenerate button */}\n              {!loading && suggestions.length > 0 && selectedFeature !== 'tone' && selectedFeature !== 'translate' && (\n                <button\n                  onClick={() => fetchSuggestions(selectedFeature)}\n                  className=\"w-full mt-3 flex items-center justify-center gap-2 py-2.5 text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors\"\n                >\n                  <RefreshCw className=\"w-4 h-4\" />\n                  Generate new suggestions\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </div>\n\n      {/* Footer tip */}\n      <div className=\"px-4 py-2 bg-gray-50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700\">\n        <p className=\"text-xs text-gray-500 text-center\">\n          {currentMessage.trim() \n            ? `Message: \"${currentMessage.slice(0, 30)}${currentMessage.length > 30 ? '...' : ''}\"`\n            : 'Type a message to use grammar, tone, or translate features'}\n        </p>\n      </div>\n    </motion.div>\n  );\n}\n","'use client';\n\nimport React, { useState, useRef, useEffect, useCallback, useMemo } from 'react';\nimport { sendChatMessage, sendChatTyping } from '@/lib/socket';\nimport { uploadChatMedia, getMessageLimitStatus, type MessageLimitStatus } from '@/lib/api/chat';\nimport { sendConnectionRequest } from '@/lib/api/connections';\nimport { cn } from '@/lib/utils';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  Paperclip,\n  Image as ImageIcon,\n  FileText,\n  Video,\n  Mic,\n  X,\n  Send,\n  Smile,\n  File,\n  Square,\n  Trash2,\n  Sparkles,\n  Pencil,\n  Loader2,\n  UserPlus,\n  Lock,\n  MessageCircle,\n  Zap,\n} from 'lucide-react';\nimport AIChatAssistant from './AIChatAssistant';\nimport { fixGrammar } from '@/lib/api/ai-chat';\n\n// File type configurations\nconst ALLOWED_FILE_TYPES = {\n  image: ['image/jpeg', 'image/png', 'image/gif', 'image/webp'],\n  video: ['video/mp4', 'video/webm', 'video/quicktime'],\n  document: ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'],\n  audio: ['audio/mpeg', 'audio/wav', 'audio/ogg', 'audio/webm'],\n};\n\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\nconst MAX_VIDEO_DURATION = 60; // 60 seconds\n\n// Uploading message interface for optimistic UI\nexport interface UploadingMessage {\n  id: string;\n  type: 'image' | 'video' | 'document' | 'audio';\n  preview?: string;\n  fileName?: string;\n  progress: number;\n}\n\n// Optimistic message for immediate display\nexport interface OptimisticMessage {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  content: string;\n  contentType: string;\n  mediaUrl?: string;\n  fileName?: string;\n  fileSize?: number;\n  replyToId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    senderName: string;\n  };\n  status: 'SENDING';\n  createdAt: string;\n}\n\ninterface ChatInputProps {\n  conversationId: string;\n  currentUserId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    senderName: string;\n  };\n  onCancelReply?: () => void;\n  disabled?: boolean;\n  onUploadingMessagesChange?: (messages: UploadingMessage[]) => void;\n  onOptimisticMessage?: (message: OptimisticMessage) => void;\n  // AI Assistant props\n  otherUserId?: string;\n  otherUserName?: string;\n  lastReceivedMessage?: string;\n  enabledMessageEffects?: {\n    confetti: boolean;\n    fireworks: boolean;\n    voiceSfx: boolean;\n  };\n}\n\ninterface FilePreview {\n  file: File;\n  preview: string;\n  type: 'image' | 'video' | 'document' | 'audio';\n}\n\nexport default function ChatInput({\n  conversationId,\n  currentUserId,\n  replyTo,\n  onCancelReply,\n  disabled = false,\n  onUploadingMessagesChange,\n  onOptimisticMessage,\n  otherUserId,\n  otherUserName,\n  lastReceivedMessage,\n  enabledMessageEffects,\n}: ChatInputProps) {\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showEmoji, setShowEmoji] = useState(false);\n  const [showAttachMenu, setShowAttachMenu] = useState(false);\n  const [showAIAssistant, setShowAIAssistant] = useState(false);\n  const [isFixingGrammar, setIsFixingGrammar] = useState(false);\n  const [selectedFiles, setSelectedFiles] = useState<FilePreview[]>([]);\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingDuration, setRecordingDuration] = useState(0);\n  const [audioBlob, setAudioBlob] = useState<Blob | null>(null);\n  const [uploadingMessages, setUploadingMessages] = useState<UploadingMessage[]>([]);\n  \n  // Message limit state\n  const [messageLimitInfo, setMessageLimitInfo] = useState<MessageLimitStatus | null>(null);\n  const [showConnectionPrompt, setShowConnectionPrompt] = useState(false);\n  const [isSendingConnectionRequest, setIsSendingConnectionRequest] = useState(false);\n  const [connectionRequestSent, setConnectionRequestSent] = useState(false);\n  const [selectedMessageEffect, setSelectedMessageEffect] = useState<'none' | 'confetti' | 'fireworks'>('none');\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const attachMenuRef = useRef<HTMLDivElement>(null);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const recordingIntervalRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Check message limit on mount and when conversation changes\n  useEffect(() => {\n    const checkMessageLimit = async () => {\n      if (!otherUserId) return;\n      \n      try {\n        const limitStatus = await getMessageLimitStatus(otherUserId);\n        setMessageLimitInfo(limitStatus);\n        \n        // Show prompt immediately if limit is reached and not connected\n        if (!limitStatus.isConnected && !limitStatus.canSend) {\n          setShowConnectionPrompt(true);\n        }\n      } catch (error) {\n        console.error('Failed to check message limit:', error);\n      }\n    };\n    \n    checkMessageLimit();\n  }, [conversationId, otherUserId]);\n\n  const availableMessageEffects = useMemo<Array<'confetti' | 'fireworks'>>(\n    () => [\n      ...(enabledMessageEffects?.confetti ? ['confetti' as const] : []),\n      ...(enabledMessageEffects?.fireworks ? ['fireworks' as const] : []),\n    ],\n    [enabledMessageEffects?.confetti, enabledMessageEffects?.fireworks]\n  );\n\n  useEffect(() => {\n    if (selectedMessageEffect === 'none') return;\n    if (!availableMessageEffects.includes(selectedMessageEffect)) {\n      setSelectedMessageEffect('none');\n    }\n  }, [availableMessageEffects, selectedMessageEffect]);\n\n  const cycleMessageEffect = () => {\n    const cycle: Array<'none' | 'confetti' | 'fireworks'> = ['none', ...availableMessageEffects];\n    if (cycle.length <= 1) return;\n\n    const currentIndex = cycle.indexOf(selectedMessageEffect);\n    const nextIndex = currentIndex === -1 ? 0 : (currentIndex + 1) % cycle.length;\n    setSelectedMessageEffect(cycle[nextIndex]);\n  };\n\n  const triggerMessageEffect = useCallback(async (effect: 'confetti' | 'fireworks') => {\n    try {\n      const confetti = (await import('canvas-confetti')).default;\n\n      if (effect === 'confetti') {\n        confetti({\n          particleCount: 60,\n          spread: 55,\n          origin: { y: 0.7 },\n          colors: ['#22c55e', '#38bdf8', '#f59e0b', '#f43f5e'],\n        });\n        return;\n      }\n\n      confetti({\n        particleCount: 80,\n        spread: 70,\n        origin: { x: 0.2, y: 0.7 },\n        colors: ['#f97316', '#facc15', '#fb7185', '#60a5fa'],\n      });\n      confetti({\n        particleCount: 80,\n        spread: 70,\n        origin: { x: 0.8, y: 0.7 },\n        colors: ['#f97316', '#facc15', '#fb7185', '#60a5fa'],\n      });\n    } catch {\n      // Ignore silently if canvas-confetti cannot load\n    }\n  }, []);\n\n  const playVoiceSfx = useCallback(() => {\n    if (!enabledMessageEffects?.voiceSfx || typeof window === 'undefined') return;\n\n    try {\n      const AudioContextClass =\n        window.AudioContext ||\n        (window as Window & { webkitAudioContext?: typeof AudioContext }).webkitAudioContext;\n      if (!AudioContextClass) return;\n\n      const audioContext = new AudioContextClass();\n      const oscillator = audioContext.createOscillator();\n      const gainNode = audioContext.createGain();\n\n      oscillator.type = 'triangle';\n      oscillator.frequency.setValueAtTime(660, audioContext.currentTime);\n      oscillator.frequency.exponentialRampToValueAtTime(440, audioContext.currentTime + 0.12);\n\n      gainNode.gain.setValueAtTime(0.0001, audioContext.currentTime);\n      gainNode.gain.exponentialRampToValueAtTime(0.12, audioContext.currentTime + 0.01);\n      gainNode.gain.exponentialRampToValueAtTime(0.0001, audioContext.currentTime + 0.14);\n\n      oscillator.connect(gainNode);\n      gainNode.connect(audioContext.destination);\n      oscillator.start();\n      oscillator.stop(audioContext.currentTime + 0.14);\n    } catch {\n      // Ignore silently when browser blocks autoplay/audio context\n    }\n  }, [enabledMessageEffects?.voiceSfx]);\n\n  // Handle sending connection request\n  const handleSendConnectionRequest = async () => {\n    if (!otherUserId || isSendingConnectionRequest) return;\n    \n    setIsSendingConnectionRequest(true);\n    try {\n      await sendConnectionRequest(otherUserId);\n      setConnectionRequestSent(true);\n      // Don't close prompt, show success message\n    } catch (error: unknown) {\n      console.error('Failed to send connection request:', error);\n      // Check if request already exists\n      const errorMessage = error instanceof Error ? error.message : '';\n      if (errorMessage.includes('already') || errorMessage.includes('pending')) {\n        setConnectionRequestSent(true);\n      } else {\n        alert('Failed to send connection request. Please try again.');\n      }\n    } finally {\n      setIsSendingConnectionRequest(false);\n    }\n  };\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n    }\n  }, [message]);\n\n  // Close attachment menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (attachMenuRef.current && !attachMenuRef.current.contains(event.target as Node)) {\n        setShowAttachMenu(false);\n      }\n    };\n\n    if (showAttachMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showAttachMenu]);\n\n  // Handle typing indicator\n  const handleTyping = useCallback(() => {\n    if (!isTyping) {\n      setIsTyping(true);\n      sendChatTyping(conversationId, true);\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout to stop typing indicator\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n      sendChatTyping(conversationId, false);\n    }, 2000);\n  }, [conversationId, isTyping]);\n\n  // Clean up typing timeout\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  // Get file type category\n  const getFileType = (file: File): 'image' | 'video' | 'document' | 'audio' | null => {\n    for (const [type, mimes] of Object.entries(ALLOWED_FILE_TYPES)) {\n      if (mimes.includes(file.type)) {\n        return type as 'image' | 'video' | 'document' | 'audio';\n      }\n    }\n    return null;\n  };\n\n  // Check video duration\n  const checkVideoDuration = (file: File): Promise<boolean> => {\n    return new Promise((resolve) => {\n      const video = document.createElement('video');\n      video.preload = 'metadata';\n      video.onloadedmetadata = () => {\n        URL.revokeObjectURL(video.src);\n        if (video.duration > MAX_VIDEO_DURATION) {\n          alert(`Video \"${file.name}\" is too long. Maximum duration is ${MAX_VIDEO_DURATION} seconds.`);\n          resolve(false);\n        } else {\n          resolve(true);\n        }\n      };\n      video.onerror = () => {\n        URL.revokeObjectURL(video.src);\n        resolve(true); // Allow if we can't check duration\n      };\n      video.src = URL.createObjectURL(file);\n    });\n  };\n\n  // Handle file selection\n  const handleFileSelect = async (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    \n    const validFiles: FilePreview[] = [];\n    \n    for (const file of files) {\n      // Check file size\n      if (file.size > MAX_FILE_SIZE) {\n        alert(`File \"${file.name}\" is too large. Maximum size is 50MB.`);\n        continue;\n      }\n\n      const fileType = getFileType(file);\n      \n      if (!fileType) {\n        alert(`File type not supported: ${file.name}`);\n        continue;\n      }\n\n      // Check video duration\n      if (fileType === 'video') {\n        const isValidDuration = await checkVideoDuration(file);\n        if (!isValidDuration) {\n          continue;\n        }\n      }\n\n      // Create preview URL\n      let preview = '';\n      if (fileType === 'image' || fileType === 'video') {\n        preview = URL.createObjectURL(file);\n      }\n\n      validFiles.push({\n        file,\n        preview,\n        type: fileType,\n      });\n    }\n\n    setSelectedFiles(prev => [...prev, ...validFiles]);\n    setShowAttachMenu(false);\n    \n    // Reset file input\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  };\n\n  // Remove selected file\n  const removeFile = (index: number) => {\n    setSelectedFiles(prev => {\n      const newFiles = [...prev];\n      // Revoke object URL to free memory\n      if (newFiles[index].preview) {\n        URL.revokeObjectURL(newFiles[index].preview);\n      }\n      newFiles.splice(index, 1);\n      return newFiles;\n    });\n  };\n\n  // Open file picker for specific type\n  const openFilePicker = (accept: string) => {\n    if (fileInputRef.current) {\n      fileInputRef.current.accept = accept;\n      fileInputRef.current.click();\n    }\n    setShowAttachMenu(false);\n  };\n\n  // Voice recording functions\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });\n      mediaRecorderRef.current = mediaRecorder;\n      audioChunksRef.current = [];\n\n      mediaRecorder.ondataavailable = (e) => {\n        if (e.data.size > 0) {\n          audioChunksRef.current.push(e.data);\n        }\n      };\n\n      mediaRecorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n        setAudioBlob(audioBlob);\n        stream.getTracks().forEach(track => track.stop());\n      };\n\n      mediaRecorder.start();\n      setIsRecording(true);\n      setRecordingDuration(0);\n\n      // Update duration every second\n      recordingIntervalRef.current = setInterval(() => {\n        setRecordingDuration(prev => prev + 1);\n      }, 1000);\n    } catch (error) {\n      console.error('Failed to start recording:', error);\n      alert('Could not access microphone. Please grant permission.');\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && isRecording) {\n      mediaRecorderRef.current.stop();\n      setIsRecording(false);\n      if (recordingIntervalRef.current) {\n        clearInterval(recordingIntervalRef.current);\n        recordingIntervalRef.current = null;\n      }\n    }\n  };\n\n  const cancelRecording = () => {\n    if (mediaRecorderRef.current) {\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n    setIsRecording(false);\n    setAudioBlob(null);\n    setRecordingDuration(0);\n    if (recordingIntervalRef.current) {\n      clearInterval(recordingIntervalRef.current);\n      recordingIntervalRef.current = null;\n    }\n  };\n\n  const formatDuration = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  // Sync uploading messages to parent via useEffect to avoid setState during render\n  useEffect(() => {\n    onUploadingMessagesChange?.(uploadingMessages);\n  }, [uploadingMessages, onUploadingMessagesChange]);\n\n  const handleSend = async () => {\n    const trimmedMessage = message.trim();\n    const hasFiles = selectedFiles.length > 0;\n    const hasAudio = audioBlob !== null;\n    \n    if (!trimmedMessage && !hasFiles && !hasAudio) return;\n\n    // Check message limit before sending (for non-connected users)\n    if (messageLimitInfo && !messageLimitInfo.isConnected && !messageLimitInfo.canSend) {\n      setShowConnectionPrompt(true);\n      return;\n    }\n\n    // Immediately clear typing state and stop broadcasting\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = null;\n    }\n    setIsTyping(false);\n    sendChatTyping(conversationId, false);\n\n    // Update local message limit tracking\n    if (messageLimitInfo && !messageLimitInfo.isConnected) {\n      setMessageLimitInfo(prev => prev ? {\n        ...prev,\n        messagesSent: prev.messagesSent + 1,\n        messagesRemaining: Math.max(0, prev.messagesRemaining - 1),\n        canSend: prev.messagesRemaining > 1,\n      } : null);\n    }\n\n    // Clear input immediately for better UX\n    const filesToUpload = [...selectedFiles];\n    const audioToUpload = audioBlob;\n    const textToSend = trimmedMessage;\n    const currentReplyTo = replyTo;\n    \n    setMessage('');\n    setSelectedFiles([]);\n    setAudioBlob(null);\n    setRecordingDuration(0);\n    onCancelReply?.();\n    inputRef.current?.focus();\n\n    // Upload and send audio message if exists\n    if (hasAudio && audioToUpload) {\n      const uploadId = `upload-audio-${Date.now()}`;\n      \n      // Add optimistic uploading message\n      setUploadingMessages(prev => [...prev, {\n        id: uploadId,\n        type: 'audio',\n        fileName: 'Voice message',\n        progress: 0,\n      }]);\n\n      try {\n        const audioFile = new globalThis.File([audioToUpload], `voice-${Date.now()}.webm`, { type: 'audio/webm' });\n        \n        const result = await uploadChatMedia(audioFile, 'audio', (progress) => {\n          setUploadingMessages(prev => \n            prev.map(m => m.id === uploadId ? { ...m, progress } : m)\n          );\n        });\n        \n        // Remove uploading message\n        setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n        \n        // Send actual message\n        sendChatMessage({\n          conversationId,\n          content: 'ðŸŽ¤ Voice message',\n          contentType: 'audio',\n          mediaUrl: result.mediaUrl,\n          fileName: result.fileName,\n          fileSize: result.fileSize,\n          replyToId: currentReplyTo?.id,\n        });\n        playVoiceSfx();\n      } catch (error) {\n        console.error('Failed to upload audio:', error);\n        setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n        alert('Failed to send voice message');\n      }\n    }\n\n    // Upload files in parallel with optimistic UI\n    if (hasFiles) {\n      const uploadPromises = filesToUpload.map(async (filePreview, index) => {\n        const uploadId = `upload-${Date.now()}-${index}`;\n        \n        // Add optimistic uploading message immediately\n        setUploadingMessages(prev => [...prev, {\n          id: uploadId,\n          type: filePreview.type,\n          preview: filePreview.preview,\n          fileName: filePreview.file.name,\n          progress: 0,\n        }]);\n\n        try {\n          const result = await uploadChatMedia(filePreview.file, filePreview.type, (progress) => {\n            setUploadingMessages(prev => \n              prev.map(m => m.id === uploadId ? { ...m, progress } : m)\n            );\n          });\n          \n          // Remove uploading message\n          setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n          \n          // Send actual message\n          sendChatMessage({\n            conversationId,\n            content: filePreview.type === 'image' ? 'ðŸ“· Photo' : \n                     filePreview.type === 'video' ? 'ðŸŽ¥ Video' :\n                     filePreview.type === 'document' ? `ðŸ“„ ${filePreview.file.name}` :\n                     `ðŸ“Ž ${filePreview.file.name}`,\n            contentType: filePreview.type,\n            mediaUrl: result.mediaUrl,\n            fileName: result.fileName,\n            fileSize: result.fileSize,\n            replyToId: index === 0 ? currentReplyTo?.id : undefined,\n          });\n          \n          // Clean up preview URL\n          if (filePreview.preview) {\n            URL.revokeObjectURL(filePreview.preview);\n          }\n        } catch (error) {\n          console.error('Failed to upload file:', error);\n          setUploadingMessages(prev => prev.filter(m => m.id !== uploadId));\n          alert(`Failed to send ${filePreview.file.name}`);\n        }\n      });\n\n      // Don't await - let uploads happen in background\n      Promise.all(uploadPromises);\n    }\n\n    // Send text message immediately\n    if (textToSend) {\n      // Create optimistic message for immediate UI feedback\n      if (onOptimisticMessage && currentUserId) {\n        const optimisticMsg: OptimisticMessage = {\n          id: `optimistic-${Date.now()}`,\n          conversationId,\n          senderId: currentUserId,\n          content: textToSend,\n          contentType: 'text',\n          replyToId: currentReplyTo?.id,\n          replyTo: currentReplyTo ? {\n            id: currentReplyTo.id,\n            content: currentReplyTo.content,\n            senderName: currentReplyTo.senderName,\n          } : undefined,\n          status: 'SENDING',\n          createdAt: new Date().toISOString(),\n        };\n        onOptimisticMessage(optimisticMsg);\n      }\n\n      sendChatMessage({\n        conversationId,\n        content: textToSend,\n        contentType: 'text',\n        replyToId: currentReplyTo?.id,\n      });\n\n      if (selectedMessageEffect !== 'none') {\n        triggerMessageEffect(selectedMessageEffect);\n      }\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n    handleTyping();\n  };\n\n  const handleEmojiClick = (emoji: string) => {\n    setMessage(prev => prev + emoji);\n    setShowEmoji(false);\n    inputRef.current?.focus();\n  };\n\n  // Quick grammar fix function\n  const handleQuickGrammarFix = async () => {\n    if (!message.trim() || isFixingGrammar) return;\n    \n    setIsFixingGrammar(true);\n    try {\n      const response = await fixGrammar(message);\n      setMessage(response.corrected);\n      inputRef.current?.focus();\n    } catch (error) {\n      console.error('Grammar fix error:', error);\n    } finally {\n      setIsFixingGrammar(false);\n    }\n  };\n\n  const commonEmojis = ['ðŸ˜€', 'ðŸ˜‚', 'â¤ï¸', 'ðŸ‘', 'ðŸ”¥', 'ðŸŽ‰', 'ðŸ˜Š', 'ðŸ™', 'ðŸ’¯', 'âœ¨', 'ðŸ˜', 'ðŸ¤”', 'ðŸ‘€', 'ðŸ™Œ', 'ðŸ’ª'];\n\n  return (\n    <div className=\"relative border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4\">\n      {/* AI Assistant Panel - positioned at container level for proper width */}\n      <AnimatePresence>\n        {showAIAssistant && otherUserId && (\n          <AIChatAssistant\n            conversationId={conversationId}\n            otherUserId={otherUserId}\n            otherUserName={otherUserName || 'User'}\n            currentMessage={message}\n            lastReceivedMessage={lastReceivedMessage}\n            onSuggestionSelect={(text) => {\n              setMessage(text);\n              setShowAIAssistant(false);\n              inputRef.current?.focus();\n            }}\n            onClose={() => setShowAIAssistant(false)}\n          />\n        )}\n      </AnimatePresence>\n\n      {/* Connection Required Prompt - Shows when message limit reached */}\n      <AnimatePresence>\n        {showConnectionPrompt && messageLimitInfo && !messageLimitInfo.isConnected && !messageLimitInfo.canSend && (\n          <motion.div\n            initial={{ opacity: 0, y: 20, scale: 0.95 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 20, scale: 0.95 }}\n            className=\"absolute bottom-full left-0 right-0 mb-2 mx-4\"\n          >\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 border border-blue-200 dark:border-blue-700 rounded-xl p-4 shadow-lg\">\n              <div className=\"flex items-start gap-3\">\n                <div className=\"flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-800 flex items-center justify-center\">\n                  <Lock className=\"w-5 h-5 text-blue-600 dark:text-blue-400\" />\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-1\">\n                    Connect to Continue Messaging\n                  </h4>\n                  <p className=\"text-xs text-gray-600 dark:text-gray-400 mb-3\">\n                    You&apos;ve sent {messageLimitInfo.messagesSent} of {messageLimitInfo.limit} messages. \n                    Connect with <span className=\"font-medium\">{otherUserName || 'this user'}</span> to send unlimited messages.\n                  </p>\n                  \n                  <div className=\"flex items-center gap-2\">\n                    {connectionRequestSent ? (\n                      <div className=\"flex items-center gap-2 text-sm text-green-600 dark:text-green-400\">\n                        <div className=\"w-5 h-5 rounded-full bg-green-100 dark:bg-green-800 flex items-center justify-center\">\n                          <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                            <path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" />\n                          </svg>\n                        </div>\n                        <span className=\"font-medium\">Connection request sent!</span>\n                      </div>\n                    ) : (\n                      <button\n                        onClick={handleSendConnectionRequest}\n                        disabled={isSendingConnectionRequest}\n                        className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white text-sm font-medium rounded-lg transition-colors\"\n                      >\n                        {isSendingConnectionRequest ? (\n                          <>\n                            <Loader2 className=\"w-4 h-4 animate-spin\" />\n                            Sending...\n                          </>\n                        ) : (\n                          <>\n                            <UserPlus className=\"w-4 h-4\" />\n                            Send Connection Request\n                          </>\n                        )}\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={() => setShowConnectionPrompt(false)}\n                      className=\"px-3 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors\"\n                    >\n                      Dismiss\n                    </button>\n                  </div>\n                </div>\n                \n                <button\n                  onClick={() => setShowConnectionPrompt(false)}\n                  className=\"flex-shrink-0 p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors\"\n                >\n                  <X className=\"w-4 h-4\" />\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Message Limit Warning Banner - Shows when approaching limit */}\n      <AnimatePresence>\n        {messageLimitInfo && !messageLimitInfo.isConnected && messageLimitInfo.canSend && messageLimitInfo.messagesRemaining === 1 && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"mb-3 overflow-hidden\"\n          >\n            <div className=\"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-700 rounded-lg\">\n              <MessageCircle className=\"w-4 h-4 text-amber-600 dark:text-amber-400 flex-shrink-0\" />\n              <p className=\"text-xs text-amber-700 dark:text-amber-300\">\n                <span className=\"font-medium\">Last message!</span> Connect with {otherUserName || 'this user'} to continue the conversation.\n              </p>\n              <button\n                onClick={handleSendConnectionRequest}\n                disabled={isSendingConnectionRequest || connectionRequestSent}\n                className=\"ml-auto text-xs font-medium text-amber-700 dark:text-amber-300 hover:text-amber-800 dark:hover:text-amber-200 underline disabled:opacity-50\"\n              >\n                {connectionRequestSent ? 'Request Sent' : 'Connect'}\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* File input (hidden) */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        multiple\n        onChange={handleFileSelect}\n        className=\"hidden\"\n      />\n\n      {/* File previews */}\n      <AnimatePresence>\n        {selectedFiles.length > 0 && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: 'auto', opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            className=\"mb-3 overflow-hidden\"\n          >\n            <div className=\"flex gap-2 overflow-x-auto py-2\">\n              {selectedFiles.map((file, index) => (\n                <div\n                  key={index}\n                  className=\"relative flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800 border border-gray-200 dark:border-gray-700\"\n                >\n                  {file.type === 'image' ? (\n                    <img\n                      src={file.preview}\n                      alt={file.file.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"w-full h-full flex flex-col items-center justify-center p-1\">\n                      {file.type === 'video' && <Video className=\"w-6 h-6 text-gray-500\" />}\n                      {file.type === 'document' && <FileText className=\"w-6 h-6 text-gray-500\" />}\n                      {file.type === 'audio' && <Mic className=\"w-6 h-6 text-gray-500\" />}\n                      <span className=\"text-[10px] text-gray-500 truncate w-full text-center mt-1\">\n                        {file.file.name.slice(0, 10)}...\n                      </span>\n                    </div>\n                  )}\n                  <button\n                    onClick={() => removeFile(index)}\n                    className=\"absolute top-1 right-1 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Reply preview */}\n      {replyTo && (\n        <div className=\"flex items-center justify-between mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg\">\n          <div className=\"flex items-center gap-2 min-w-0\">\n            <div className=\"w-1 h-8 bg-blue-500 rounded-full\" />\n            <div className=\"min-w-0\">\n              <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\n                Replying to {replyTo.senderName}\n              </p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">\n                {replyTo.content}\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onCancelReply}\n            className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      {/* Input area */}\n      <div className=\"flex items-end gap-2\">\n        {/* Attachment button with menu */}\n        <div className=\"relative\" ref={attachMenuRef}>\n          <button\n            onClick={() => setShowAttachMenu(!showAttachMenu)}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              showAttachMenu \n                ? \"bg-blue-100 dark:bg-blue-900/30 text-blue-600\" \n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title=\"Attach file\"\n          >\n            <Paperclip className=\"w-5 h-5\" />\n          </button>\n\n          {/* Attachment menu */}\n          <AnimatePresence>\n            {showAttachMenu && (\n              <motion.div\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0, y: 10, scale: 0.95 }}\n                className=\"absolute bottom-full left-0 mb-2 w-48 bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-20\"\n              >\n                <div className=\"p-2 space-y-1\">\n                  <button\n                    onClick={() => openFilePicker('image/*')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center\">\n                      <ImageIcon className=\"w-4 h-4 text-purple-600\" />\n                    </div>\n                    <span>Photos</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => openFilePicker('video/*')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center\">\n                      <Video className=\"w-4 h-4 text-red-600\" />\n                    </div>\n                    <span>Videos</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => openFilePicker('.pdf,.doc,.docx')}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center\">\n                      <FileText className=\"w-4 h-4 text-blue-600\" />\n                    </div>\n                    <span>Documents</span>\n                  </button>\n                  \n                  <button\n                    onClick={() => {\n                      setShowAttachMenu(false);\n                      startRecording();\n                    }}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <div className=\"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center\">\n                      <Mic className=\"w-4 h-4 text-orange-600\" />\n                    </div>\n                    <span>Voice Mail</span>\n                  </button>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* AI Assistant button */}\n        {otherUserId && (\n          <button\n            onClick={() => {\n              setShowAIAssistant(!showAIAssistant);\n              setShowEmoji(false);\n              setShowAttachMenu(false);\n            }}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              showAIAssistant\n                ? \"bg-gradient-to-br from-purple-100 to-blue-100 dark:from-purple-900/30 dark:to-blue-900/30 text-purple-600\"\n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title=\"AI Assistant\"\n          >\n            <Sparkles className=\"w-5 h-5\" />\n          </button>\n        )}\n\n        {/* Message effect toggle (premium packs) */}\n        {availableMessageEffects.length > 0 && (\n          <button\n            onClick={cycleMessageEffect}\n            className={cn(\n              \"p-2 rounded-full transition-colors relative\",\n              selectedMessageEffect !== 'none'\n                ? \"bg-orange-100 dark:bg-orange-900/30 text-orange-600\"\n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title={\n              selectedMessageEffect === 'none'\n                ? 'Message effect: Off (tap to cycle)'\n                : `Message effect: ${selectedMessageEffect} (tap to cycle)`\n            }\n          >\n            <Zap className=\"w-5 h-5\" />\n            {selectedMessageEffect !== 'none' && (\n              <span className=\"absolute -bottom-1.5 left-1/2 -translate-x-1/2 px-1 py-0.5 rounded bg-orange-600 text-white text-[9px] leading-none uppercase tracking-wide\">\n                {selectedMessageEffect === 'confetti' ? 'C' : 'F'}\n              </span>\n            )}\n          </button>\n        )}\n\n        {/* Emoji button */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowEmoji(!showEmoji)}\n            className={cn(\n              \"p-2 rounded-full transition-colors\",\n              showEmoji\n                ? \"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600\"\n                : \"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800\"\n            )}\n            title=\"Add emoji\"\n          >\n            <Smile className=\"w-5 h-5\" />\n          </button>\n\n          {/* Emoji picker */}\n          <AnimatePresence>\n            {showEmoji && (\n              <motion.div\n                initial={{ opacity: 0, y: 10, scale: 0.95 }}\n                animate={{ opacity: 1, y: 0, scale: 1 }}\n                exit={{ opacity: 0, y: 10, scale: 0.95 }}\n                className=\"absolute bottom-full left-0 mb-2 p-3 bg-white dark:bg-gray-800 shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 z-20\"\n              >\n                <div className=\"grid grid-cols-5 gap-1 w-[200px]\">\n                  {commonEmojis.map(emoji => (\n                    <button\n                      key={emoji}\n                      onClick={() => handleEmojiClick(emoji)}\n                      className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-xl transition-transform hover:scale-110\"\n                    >\n                      {emoji}\n                    </button>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n        </div>\n\n        {/* Voice Recording UI */}\n        {isRecording ? (\n          <div className=\"flex-1 flex items-center gap-3 px-4 py-2.5 bg-red-50 dark:bg-red-900/20 rounded-2xl\">\n            <div className=\"w-3 h-3 bg-red-500 rounded-full animate-pulse\" />\n            <span className=\"text-red-600 dark:text-red-400 font-medium\">\n              {formatDuration(recordingDuration)}\n            </span>\n            <span className=\"text-sm text-gray-500 flex-1\">Recording...</span>\n            <button\n              onClick={cancelRecording}\n              className=\"p-2 text-gray-500 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors\"\n              title=\"Cancel\"\n            >\n              <Trash2 className=\"w-5 h-5\" />\n            </button>\n            <button\n              onClick={stopRecording}\n              className=\"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\n              title=\"Stop recording\"\n            >\n              <Square className=\"w-4 h-4\" />\n            </button>\n          </div>\n        ) : audioBlob ? (\n          <div className=\"flex-1 flex items-center gap-3 px-4 py-2.5 bg-green-50 dark:bg-green-900/20 rounded-2xl\">\n            <Mic className=\"w-5 h-5 text-green-600\" />\n            <span className=\"text-sm text-green-700 dark:text-green-400 flex-1\">\n              Voice message ({formatDuration(recordingDuration)})\n            </span>\n            <button\n              onClick={() => { setAudioBlob(null); setRecordingDuration(0); }}\n              className=\"p-1.5 text-gray-500 hover:text-red-500 hover:bg-red-100 dark:hover:bg-red-900/30 rounded-full transition-colors\"\n              title=\"Delete recording\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        ) : (\n          /* Text input */\n          <div className=\"flex-1 relative\">\n            <textarea\n              ref={inputRef}\n              value={message}\n              onChange={handleChange}\n              onKeyDown={handleKeyDown}\n              placeholder=\"Type a message...\"\n              disabled={disabled}\n              rows={1}\n              className={cn(\n                'w-full resize-none rounded-2xl px-4 py-2.5',\n                'bg-gray-100 dark:bg-gray-800',\n                'border border-transparent focus:border-blue-500',\n                'focus:outline-none focus:ring-2 focus:ring-blue-500/20',\n                'text-gray-900 dark:text-white placeholder-gray-500',\n                'disabled:opacity-50 disabled:cursor-not-allowed',\n                'max-h-32'\n              )}\n            />\n          </div>\n        )}\n\n        {/* Mic button (show when no text/files) or Grammar Fix + Send buttons */}\n        {!message.trim() && selectedFiles.length === 0 && !audioBlob && !isRecording ? (\n          <button\n            onClick={startRecording}\n            disabled={disabled}\n            className={cn(\n              'p-3 rounded-full transition-all',\n              'bg-gray-200 dark:bg-gray-700 text-gray-500 hover:bg-gray-300 dark:hover:bg-gray-600',\n              'disabled:opacity-50 disabled:cursor-not-allowed'\n            )}\n            title=\"Record voice message\"\n          >\n            <Mic className=\"w-5 h-5\" />\n          </button>\n        ) : (\n          <>\n            {/* Grammar Fix button - shows when there's text */}\n            {message.trim() && otherUserId && (\n              <button\n                onClick={handleQuickGrammarFix}\n                disabled={isFixingGrammar || disabled}\n                className={cn(\n                  'p-3 rounded-full transition-all',\n                  'bg-purple-100 dark:bg-purple-900/30 text-purple-600 hover:bg-purple-200 dark:hover:bg-purple-800/40',\n                  'disabled:opacity-50 disabled:cursor-not-allowed'\n                )}\n                title=\"Fix grammar with AI\"\n              >\n                {isFixingGrammar ? (\n                  <Loader2 className=\"w-5 h-5 animate-spin\" />\n                ) : (\n                  <Pencil className=\"w-5 h-5\" />\n                )}\n              </button>\n            )}\n\n            {/* Send button */}\n            <button\n              onClick={handleSend}\n              disabled={(!message.trim() && selectedFiles.length === 0 && !audioBlob) || disabled || isRecording}\n              className={cn(\n                'p-3 rounded-full transition-all',\n                (message.trim() || selectedFiles.length > 0 || audioBlob)\n                  ? 'bg-blue-600 text-white hover:bg-blue-700 scale-100'\n                  : 'bg-gray-200 dark:bg-gray-700 text-gray-400 scale-95',\n                'disabled:opacity-50 disabled:cursor-not-allowed'\n              )}\n            >\n              <Send className=\"w-5 h-5\" />\n            </button>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n","export const DEFAULT_CHAT_REACTIONS = ['â¤ï¸', 'ðŸ‘', 'ðŸ˜‚', 'ðŸ˜®', 'ðŸ˜¢', 'ðŸ™'];\n\nexport const REACTION_PACK_EMOJIS: Record<string, string[]> = {\n  'chat-reaction-startup-vibes': ['ðŸš€', 'ðŸ’¡', 'ðŸ”¥', 'ðŸ™Œ', 'âš¡', 'ðŸ“ˆ'],\n  'chat-reaction-desi-memes': ['ðŸ¤£', 'ðŸ˜Ž', 'ðŸ«¡', 'ðŸ¤Œ', 'ðŸ’ƒ', 'ðŸ˜'],\n  'chat-reaction-finance-bros': ['ðŸ’¸', 'ðŸ¤‘', 'ðŸ“‰', 'ðŸ’°', 'ðŸ¦', 'ðŸ¤'],\n};\n\nexport const WALLPAPER_PACK_REQUIREMENTS: Record<string, string> = {\n  'gradient-2': 'chat-theme-vibrant-dms',\n  'gradient-5': 'chat-theme-vibrant-dms',\n  'pattern-1': 'chat-theme-vibrant-dms',\n  'gradient-4': 'chat-theme-dark-variants',\n  'gradient-6': 'chat-theme-dark-variants',\n  'pattern-2': 'chat-theme-dark-variants',\n};\n\nexport interface MessageEffectEntitlements {\n  confetti: boolean;\n  fireworks: boolean;\n  voiceSfx: boolean;\n}\n\nexport interface ChatCustomizationEntitlements {\n  ownedItemSlugs: string[];\n  ownedThemePacks: string[];\n  availableReactions: string[];\n  animatedBubbles: boolean;\n  messageEffects: MessageEffectEntitlements;\n}\n\nexport const DEFAULT_CHAT_CUSTOMIZATION_ENTITLEMENTS: ChatCustomizationEntitlements = {\n  ownedItemSlugs: [],\n  ownedThemePacks: [],\n  availableReactions: DEFAULT_CHAT_REACTIONS,\n  animatedBubbles: false,\n  messageEffects: {\n    confetti: false,\n    fireworks: false,\n    voiceSfx: false,\n  },\n};\n\nexport function buildChatCustomizationEntitlements(\n  ownedItemSlugs: string[]\n): ChatCustomizationEntitlements {\n  const ownedSet = new Set(ownedItemSlugs);\n\n  const availableReactions = new Set(DEFAULT_CHAT_REACTIONS);\n  for (const [packSlug, emojis] of Object.entries(REACTION_PACK_EMOJIS)) {\n    if (ownedSet.has(packSlug)) {\n      for (const emoji of emojis) {\n        availableReactions.add(emoji);\n      }\n    }\n  }\n\n  const ownedThemePacks = [\n    'chat-theme-vibrant-dms',\n    'chat-theme-dark-variants',\n    'chat-theme-animated-bubbles',\n  ].filter((slug) => ownedSet.has(slug));\n\n  return {\n    ownedItemSlugs: ownedItemSlugs,\n    ownedThemePacks,\n    availableReactions: Array.from(availableReactions),\n    animatedBubbles: ownedSet.has('chat-theme-animated-bubbles'),\n    messageEffects: {\n      confetti: ownedSet.has('chat-effect-confetti'),\n      fireworks: ownedSet.has('chat-effect-fireworks'),\n      voiceSfx: ownedSet.has('chat-effect-voice-sfx'),\n    },\n  };\n}\n\nexport function isWallpaperUnlocked(\n  wallpaperId: string,\n  ownedThemePacks: string[]\n): boolean {\n  const requiredPack = WALLPAPER_PACK_REQUIREMENTS[wallpaperId];\n  if (!requiredPack) {\n    return true;\n  }\n\n  return ownedThemePacks.includes(requiredPack);\n}\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name SpellCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNiAxNiA2LTEyIDYgMTIiIC8+CiAgPHBhdGggZD0iTTggMTJoOCIgLz4KICA8cGF0aCBkPSJtMTYgMjAgMiAyIDQtNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/spell-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SpellCheck = createLucideIcon('SpellCheck', [\n  ['path', { d: 'm6 16 6-12 6 12', key: '1b4byz' }],\n  ['path', { d: 'M8 12h8', key: '1wcyev' }],\n  ['path', { d: 'm16 20 2 2 4-4', key: '13tcca' }],\n]);\n\nexport default SpellCheck;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name MessageSquarePlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjEgMTVhMiAyIDAgMCAxLTIgMkg3bC00IDRWNWEyIDIgMCAwIDEgMi0yaDE0YTIgMiAwIDAgMSAyIDJ6IiAvPgogIDxwYXRoIGQ9Ik0xMiA3djYiIC8+CiAgPHBhdGggZD0iTTkgMTBoNiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/message-square-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst MessageSquarePlus = createLucideIcon('MessageSquarePlus', [\n  ['path', { d: 'M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z', key: '1lielz' }],\n  ['path', { d: 'M12 7v6', key: 'lw1j43' }],\n  ['path', { d: 'M9 10h6', key: '9gxzsh' }],\n]);\n\nexport default MessageSquarePlus;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name ArrowUpRight\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNyA3aDEwdjEwIiAvPgogIDxwYXRoIGQ9Ik03IDE3IDE3IDciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/arrow-up-right\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst ArrowUpRight = createLucideIcon('ArrowUpRight', [\n  ['path', { d: 'M7 7h10v10', key: '1tivn9' }],\n  ['path', { d: 'M7 17 17 7', key: '1vkiza' }],\n]);\n\nexport default ArrowUpRight;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Mic\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMmEzIDMgMCAwIDAtMyAzdjdhMyAzIDAgMCAwIDYgMFY1YTMgMyAwIDAgMC0zLTNaIiAvPgogIDxwYXRoIGQ9Ik0xOSAxMHYyYTcgNyAwIDAgMS0xNCAwdi0yIiAvPgogIDxsaW5lIHgxPSIxMiIgeDI9IjEyIiB5MT0iMTkiIHkyPSIyMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/mic\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Mic = createLucideIcon('Mic', [\n  ['path', { d: 'M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z', key: '131961' }],\n  ['path', { d: 'M19 10v2a7 7 0 0 1-14 0v-2', key: '1vc78b' }],\n  ['line', { x1: '12', x2: '12', y1: '19', y2: '22', key: 'x3vr5v' }],\n]);\n\nexport default Mic;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Square\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Square = createLucideIcon('Square', [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n]);\n\nexport default Square;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Forward\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSIxNSAxNyAyMCAxMiAxNSA3IiAvPgogIDxwYXRoIGQ9Ik00IDE4di0yYTQgNCAwIDAgMSA0LTRoMTIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/forward\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Forward = createLucideIcon('Forward', [\n  ['polyline', { points: '15 17 20 12 15 7', key: '1w3sku' }],\n  ['path', { d: 'M4 18v-2a4 4 0 0 1 4-4h12', key: 'jmiej9' }],\n]);\n\nexport default Forward;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Paperclip\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTMuMjM0IDIwLjI1MiAyMSAxMi4zIiAvPgogIDxwYXRoIGQ9Im0xNiA2LTguNDE0IDguNTg2YTIgMiAwIDAgMCAwIDIuODI4IDIgMiAwIDAgMCAyLjgyOCAwbDguNDE0LTguNTg2YTQgNCAwIDAgMCAwLTUuNjU2IDQgNCAwIDAgMC01LjY1NiAwbC04LjQxNSA4LjU4NWE2IDYgMCAxIDAgOC40ODYgOC40ODYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/paperclip\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Paperclip = createLucideIcon('Paperclip', [\n  ['path', { d: 'M13.234 20.252 21 12.3', key: '1cbrk9' }],\n  [\n    'path',\n    {\n      d: 'm16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486',\n      key: '1pkts6',\n    },\n  ],\n]);\n\nexport default Paperclip;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Languages\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtNSA4IDYgNiIgLz4KICA8cGF0aCBkPSJtNCAxNCA2LTYgMi0zIiAvPgogIDxwYXRoIGQ9Ik0yIDVoMTIiIC8+CiAgPHBhdGggZD0iTTcgMmgxIiAvPgogIDxwYXRoIGQ9Im0yMiAyMi01LTEwLTUgMTAiIC8+CiAgPHBhdGggZD0iTTE0IDE4aDYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/languages\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Languages = createLucideIcon('Languages', [\n  ['path', { d: 'm5 8 6 6', key: '1wu5hv' }],\n  ['path', { d: 'm4 14 6-6 2-3', key: '1k1g8d' }],\n  ['path', { d: 'M2 5h12', key: 'or177f' }],\n  ['path', { d: 'M7 2h1', key: '1t2jsx' }],\n  ['path', { d: 'm22 22-5-10-5 10', key: 'don7ne' }],\n  ['path', { d: 'M14 18h6', key: '1m8k6r' }],\n]);\n\nexport default Languages;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Smile\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNOCAxNHMxLjUgMiA0IDIgNC0yIDQtMiIgLz4KICA8bGluZSB4MT0iOSIgeDI9IjkuMDEiIHkxPSI5IiB5Mj0iOSIgLz4KICA8bGluZSB4MT0iMTUiIHgyPSIxNS4wMSIgeTE9IjkiIHkyPSI5IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/smile\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Smile = createLucideIcon('Smile', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M8 14s1.5 2 4 2 4-2 4-2', key: '1y1vjs' }],\n  ['line', { x1: '9', x2: '9.01', y1: '9', y2: '9', key: 'yxxnd0' }],\n  ['line', { x1: '15', x2: '15.01', y1: '9', y2: '9', key: '1p4y9e' }],\n]);\n\nexport default Smile;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Reply\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWxpbmUgcG9pbnRzPSI5IDE3IDQgMTIgOSA3IiAvPgogIDxwYXRoIGQ9Ik0yMCAxOHYtMmE0IDQgMCAwIDAtNC00SDQiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/reply\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Reply = createLucideIcon('Reply', [\n  ['polyline', { points: '9 17 4 12 9 7', key: 'hvgpf2' }],\n  ['path', { d: 'M20 18v-2a4 4 0 0 0-4-4H4', key: '5vmcpk' }],\n]);\n\nexport default Reply;\n","import createLucideIcon from '../createLucideIcon';\n\n/**\n * @component @name Ban\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJtNC45IDQuOSAxNC4yIDE0LjIiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/ban\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Ban = createLucideIcon('Ban', [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'm4.9 4.9 14.2 14.2', key: '1m5liu' }],\n]);\n\nexport default Ban;\n"],"names":[],"mappings":"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AAC,MAAA,CAAI,UAAU,sGAA6F,iBAOtH,qFIxlCA,IAAA,EAAA,EAAA,CAAA,CAAA,oGQaM,CAAG,ACAN,CAAA,ADAM,CAAA,ACAE,0IDCL,CCAH,ADAG,CCAH,ADAG,CCAK,ADAA,CCAA,ADAA,CCAA,ADAA,OACP,CAAA,CACF,CACD,kBHT4B,MAAO,uEACyC,CFAI,SEAM,CAAA,4CACpC,UAAU,CAAA,SAChD,CKAA,ALAA,CKAA,ALAA,CAAA,QAAc,CFAA,ADAO,AOAP,ACAO,ALAD,CHAC,AQAA,ALAD,AFAN,AMAA,CJAM,AHAC,AQAA,APAP,AMAA,CJAM,AHAC,AQAA,APAP,AMAA,iBJA0B,CKAD,ALAC,CAAA,AKAD,CLAC,AKAD,CLAM,aLR1D,IAAA,EAAA,EAAA,CAAA,CAAA,qCUMG,CNAA,AIAA,AHAA,ACAA,AJAA,AOAA,AFAA,AJAA,AQAA,CHAA,ADAA,AIAA,ALAA,AJAA,AEAA,ADAA,AMAA,AJAA,CCAA,ADAA,AHAA,AMAA,ACAA,AFAA,AIAA,ARAA,ACAA,CDAA,AIAA,AIAA,ALAA,AFAA,AKAA,AJAA,AHAA,AMAA,CDAA,ACAA,AJAA,AFAA,ASAA,AFAA,AHAA,AHAA,AEAA,CFAQ,AQAR,AFAQ,AJAA,AEAR,AHAQ,AIAA,ANAA,AIAR,CAAQ,ACAR,AJAQ,ACAA,AIAA,AHAA,AIAA,APAA,ASAR,4FDCuD,iBACpC,GAAA,qBAA8B,IAAK,UAAU,UACtD,CAAA,CAAA,CAAI,CAAM,ADAG,CCAH,ADAG,CAAA,ACAH,CDAG,ACAH,CDAG,ACAH,CDAG,ACAH,CDAG,ACAH,CAAI,CDAD,ACAU,CAAA,ADAV,CCAU,ADAV,KCAU,EAAA,CAAI,IAAK,CAAA,CAAA,CAAI,CAAA,CAAA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAK,AAAL,QAAK,CAAU,CAAA,mBJJrC,SAAA,mCACW,MAAQ,CMAF,AVAC,AGAsB,AFAS,AOAhC,AJAO,CDAgB,AKAvB,APAgC,ASAhC,ANAO,CDAgB,ACAhB,AIAP,APAgC,ASAhC,CTAgC,ASAhC,ANAO,ADAgB,AKAvB,wBVNjD,IAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,EAAA,CAAA,CAAA,OAAA,GAAA,EAAA,CAAA,CAAA,gBGK0B,EAAA,OAAA,EAAiB,oBAAqB,CAAA,yFACgC,CAAA,0EJThG,IAAA,GAAA,EAAA,CAAA,CAAA,iBGQmB,CCAb,ACAA,CAAA,OAAA,EAAA,aFA4C,CAAA,CEAI,CAAA,0GFGpB,CGAD,AHAC,CQAA,ALAG,AHAH,EAAK,CQAD,ALAD,SHAY,CGAI,8GIDL,YAChC,0BACb,UAAa,yBACb,CAAA,ADAG,CCAH,ADAG,KCAK,CAAE,AAAF,ADAF,CAAA,CCAO,CDAP,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CAAA,ADA3B,CAAA,ACA2B,CAAA,ADA3B,CAAA,ACA2B,CAAA,ADA3B,CCA2B,ADA3B,CCA2B,ADA3B,CCA2B,ADA3B,CAAA,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CDA3B,ACA2B,CAAA,ADA3B,CAAA,ACA2B,CDA3B,ACA2B,AAAK,CDAhC,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,yBCCmB,CAAA,CAAA,CAAA,CAAA,QAAK,CAAU,CAAA,CAC1C,kCLPqD,CAAA,ODAU,CAAA,ACCrD,COAR,ANAQ,AIAA,ANAA,ASAE,ALAV,AGAU,ARAF,AMAA,AJAA,AEAA,EFAK,aAAc,CFAK,AMAO,ADAG,AEAjB,ANAqD,AEAT,ADA1C,AOAY,ALAR,CCAW,AIAH,AHAA,AFAR,AJAC,AOAP,ANAqD,AEAT,ADA1C,EAAA,UAAe,SAClC,CGAA,AFAA,AMAA,AFAA,AGAA,AVAA,AQAA,APAA,ACAA,AAAE,EAAG,CGA6B,ALAlB,AQAgB,ACAE,ARAlB,AEAmB,ADAhB,AKAG,AGAK,CLAO,AFAC,ADAhB,AQAQ,AHAL,APAN,ASAkB,ADAF,APAhB,CMAM,AGAK,ADAO,AJAA,AFAC,AHAnB,AQAgB,APAhB,ACAG,CQAQ,AHAL,AJAa,AHAnB,AEAG,AMAa,APAhB,AIAkB,AIAA,CPAf,AMAa,ADAV,AEAY,ARAlB,A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","ignoreList":[9,10,11,12,13,14,15,16,17,18,19]}