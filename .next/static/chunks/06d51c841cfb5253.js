(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],71689)},94095,66626,e=>{"use strict";var t=e.i(932),s=e.i(21482),a=e.i(86161);function i(e){let i,n,c,o=(0,t.c)(9),h=void 0===e?24:e;o[0]!==h?(i={queryKey:["reels-trending",h],queryFn:async()=>await a.reelsApi.getTrending({hours:h,limit:20}),getNextPageParam:r,initialPageParam:void 0,staleTime:3e5},o[0]=h,o[1]=i):i=o[1];let d=(0,s.useInfiniteQuery)(i);o[2]!==d.data?.pages?(n=d.data?.pages.flatMap(l)??[],o[2]=d.data?.pages,o[3]=n):n=o[3];let u=n;return o[4]!==d.isError||o[5]!==d.isLoading||o[6]!==d.refetch||o[7]!==u?(c={reels:u,isLoading:d.isLoading,isError:d.isError,refetch:d.refetch},o[4]=d.isError,o[5]=d.isLoading,o[6]=d.refetch,o[7]=u,o[8]=c):c=o[8],c}function l(e){return e.reels}function r(){}function n(e){let i,l,r,n,h,d=(0,t.c)(17);d[0]!==e?(i=["reels-hashtag",e],l=async t=>{let{pageParam:s}=t;return await a.reelsApi.getByHashtag(e,{cursor:s,limit:20})},d[0]=e,d[1]=i,d[2]=l):(i=d[1],l=d[2]);let u=!!e;d[3]!==i||d[4]!==l||d[5]!==u?(r={queryKey:i,queryFn:l,getNextPageParam:o,initialPageParam:void 0,staleTime:3e5,enabled:u},d[3]=i,d[4]=l,d[5]=u,d[6]=r):r=d[6];let x=(0,s.useInfiniteQuery)(r);d[7]!==x.data?.pages?(n=x.data?.pages.flatMap(c)??[],d[7]=x.data?.pages,d[8]=n):n=d[8];let g=n;return d[9]!==x.fetchNextPage||d[10]!==x.hasNextPage||d[11]!==x.isError||d[12]!==x.isFetchingNextPage||d[13]!==x.isLoading||d[14]!==x.refetch||d[15]!==g?(h={reels:g,isLoading:x.isLoading,isError:x.isError,hasNextPage:x.hasNextPage,isFetchingNextPage:x.isFetchingNextPage,fetchNextPage:x.fetchNextPage,refetch:x.refetch},d[9]=x.fetchNextPage,d[10]=x.hasNextPage,d[11]=x.isError,d[12]=x.isFetchingNextPage,d[13]=x.isLoading,d[14]=x.refetch,d[15]=g,d[16]=h):h=d[16],h}function c(e){return e.reels}function o(e){return e.nextCursor}function h(e){let i,l,r,n,c,o=(0,t.c)(17);o[0]!==e?(i=["reels-audio",e],l=async t=>{let{pageParam:s}=t;return await a.reelsApi.getByAudio(e,{cursor:s,limit:20})},o[0]=e,o[1]=i,o[2]=l):(i=o[1],l=o[2]);let h=!!e;o[3]!==i||o[4]!==l||o[5]!==h?(r={queryKey:i,queryFn:l,getNextPageParam:u,initialPageParam:void 0,staleTime:3e5,enabled:h},o[3]=i,o[4]=l,o[5]=h,o[6]=r):r=o[6];let x=(0,s.useInfiniteQuery)(r);o[7]!==x.data?.pages?(n=x.data?.pages.flatMap(d)??[],o[7]=x.data?.pages,o[8]=n):n=o[8];let g=n;return o[9]!==x.fetchNextPage||o[10]!==x.hasNextPage||o[11]!==x.isError||o[12]!==x.isFetchingNextPage||o[13]!==x.isLoading||o[14]!==x.refetch||o[15]!==g?(c={reels:g,isLoading:x.isLoading,isError:x.isError,hasNextPage:x.hasNextPage,isFetchingNextPage:x.isFetchingNextPage,fetchNextPage:x.fetchNextPage,refetch:x.refetch},o[9]=x.fetchNextPage,o[10]=x.hasNextPage,o[11]=x.isError,o[12]=x.isFetchingNextPage,o[13]=x.isLoading,o[14]=x.refetch,o[15]=g,o[16]=c):c=o[16],c}function d(e){return e.reels}function u(e){return e.nextCursor}e.s(["useAudioReels",()=>h,"useHashtagReels",()=>n,"useTrendingReels",()=>i],66626),e.i(71645),e.i(50471),e.i(13751),e.s([],94095)},26714,e=>{"use strict";let t=(0,e.i(75254).default)("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]);e.s(["BookmarkCheck",()=>t],26714)},86431,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566),i=e.i(57688),l=e.i(71689),r=e.i(53339),n=e.i(31278),c=e.i(71930),o=e.i(26714),h=e.i(31343);e.i(94095);var d=e.i(66626);e.i(51501);var u=e.i(42956),x=e.i(86161);function g(){let e=(0,a.useParams)(),g=(0,a.useRouter)(),m=e.id,[f,N]=(0,s.useState)(0),[p,b]=(0,s.useState)(!0),[w,j]=(0,s.useState)(!1),[v,y]=(0,s.useState)(null),[P,k]=(0,s.useState)(!0),[A,L]=(0,s.useState)(!1),{reels:C,isLoading:F,isError:S,hasNextPage:E,isFetchingNextPage:T,fetchNextPage:R}=(0,d.useAudioReels)(m);(0,s.useEffect)(()=>{let e=async()=>{try{k(!0);let e=await x.audioApi.getAudio(m);y(e),L(e.isSaved||!1)}catch(e){console.error("Failed to fetch audio:",e)}finally{k(!1)}};m&&e()},[m]);let M=(0,s.useCallback)(e=>{let t=e.currentTarget,s=Math.round(t.scrollTop/t.clientHeight);s!==f&&(N(s),s>=C.length-3&&E&&!T&&R())},[f,C.length,E,T,R]),B=async()=>{try{let e=await x.audioApi.toggleSave(m);L(e.saved)}catch(e){console.error("Failed to toggle save:",e)}};return P||F?(0,t.jsx)("div",{className:"h-screen w-full flex items-center justify-center bg-black",children:(0,t.jsx)(n.Loader2,{className:"w-12 h-12 text-white animate-spin"})}):S||!v?(0,t.jsxs)("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-black text-white gap-4",children:[(0,t.jsx)(r.Music,{className:"w-16 h-16 text-gray-500"}),(0,t.jsx)("p",{className:"text-xl",children:"Audio not found"}),(0,t.jsx)("button",{onClick:()=>g.push("/reels"),className:"px-6 py-2 bg-white text-black rounded-full font-medium",children:"Go to Reels"})]}):w?(0,t.jsxs)("div",{className:"relative h-screen w-full bg-black",children:[(0,t.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 pt-4 px-4 pb-2 bg-gradient-to-b from-black/80 to-transparent",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>j(!1),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",children:(0,t.jsx)(l.ArrowLeft,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded bg-neutral-800 overflow-hidden flex-shrink-0",children:v.albumArt?(0,t.jsx)(i.default,{src:v.albumArt,alt:v.title,width:40,height:40,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(r.Music,{className:"w-5 h-5 text-neutral-600"})})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h1",{className:"text-white font-semibold truncate",children:v.title}),(0,t.jsx)("p",{className:"text-white/60 text-sm truncate",children:v.artist})]})]})]})}),(0,t.jsxs)("div",{className:"h-screen w-full snap-y snap-mandatory overflow-y-scroll scrollbar-hide",onScroll:M,children:[C.map((e,s)=>(0,t.jsx)("div",{className:"h-screen w-full snap-start snap-always",children:(0,t.jsx)(u.ReelCard,{reel:e,isActive:s===f,isMuted:p,onMuteToggle:()=>b(!p)})},e.id)),T&&(0,t.jsx)("div",{className:"h-screen w-full flex items-center justify-center bg-black",children:(0,t.jsx)(n.Loader2,{className:"w-12 h-12 text-white animate-spin"})})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-black text-white",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4 z-10",children:(0,t.jsx)("button",{onClick:()=>g.back(),className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",children:(0,t.jsx)(l.ArrowLeft,{className:"w-5 h-5 text-white"})})}),(0,t.jsxs)("div",{className:"pt-20 pb-8 px-6 flex flex-col items-center",children:[(0,t.jsx)("div",{className:"w-48 h-48 rounded-xl overflow-hidden mb-6 bg-neutral-800",children:v.albumArt?(0,t.jsx)(i.default,{src:v.albumArt,alt:v.title,width:192,height:192,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(r.Music,{className:"w-16 h-16 text-neutral-600"})})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mb-1",children:v.title}),(0,t.jsx)("p",{className:"text-white/60 mb-2",children:v.artist}),v.genre&&(0,t.jsx)("span",{className:"px-3 py-1 bg-white/10 rounded-full text-sm text-white/80 mb-4",children:v.genre}),(0,t.jsxs)("p",{className:"text-white/50 text-sm mb-6",children:[v.usageCount.toLocaleString()," reels"]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-6 py-3 bg-white text-black rounded-full font-semibold hover:bg-white/90 transition-colors",children:[(0,t.jsx)(h.Play,{className:"w-5 h-5"}),"Watch Reels"]}),(0,t.jsx)("button",{onClick:B,className:"flex items-center gap-2 px-6 py-3 bg-white/10 text-white rounded-full font-semibold hover:bg-white/20 transition-colors",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.BookmarkCheck,{className:"w-5 h-5 fill-white"}),"Saved"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Bookmark,{className:"w-5 h-5"}),"Save"]})})]})]}),C.length>0&&(0,t.jsxs)("div",{className:"px-4 pb-8",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Reels with this sound"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-1",children:C.slice(0,9).map(e=>(0,t.jsxs)("button",{onClick:()=>{N(C.findIndex(t=>t.id===e.id)),j(!0)},className:"aspect-[9/16] bg-neutral-800 rounded overflow-hidden relative group",children:[e.thumbnailUrl&&(0,t.jsx)(i.default,{src:e.thumbnailUrl,alt:"",fill:!0,className:"object-cover"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/30 transition-colors flex items-center justify-center",children:(0,t.jsx)(h.Play,{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),(0,t.jsxs)("div",{className:"absolute bottom-1 left-1 text-xs text-white font-medium drop-shadow-lg",children:[e.viewsCount.toLocaleString()," views"]})]},e.id))})]})]})}e.s(["default",()=>g])}]);