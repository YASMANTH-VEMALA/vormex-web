{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAuB;IAC9D,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAO;IAC5C,MAAM,SAAS,IAAA,+IAAS;IAExB,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,WAAW,CAAC,iBAAiB;YAChC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAS;KAAO;IAErC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ReactionPicker.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ThumbsUp, \n  PartyPopper, \n  Heart, \n  Lightbulb, \n  HelpCircle \n} from 'lucide-react';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface ReactionPickerProps {\n  isOpen: boolean;\n  currentReaction?: ReactionType | null;\n  onSelect: (reaction: ReactionType) => void;\n  onClose: () => void;\n}\n\n// Reaction configurations with LinkedIn-style icons\nexport const REACTIONS: {\n  type: ReactionType;\n  icon: React.ElementType;\n  label: string;\n  color: string;\n  bgColor: string;\n  hoverScale: number;\n}[] = [\n  { \n    type: 'LIKE', \n    icon: ThumbsUp, \n    label: 'Like', \n    color: 'text-blue-600',\n    bgColor: 'bg-blue-100 dark:bg-blue-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CELEBRATE', \n    icon: PartyPopper, \n    label: 'Celebrate', \n    color: 'text-green-600',\n    bgColor: 'bg-green-100 dark:bg-green-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'SUPPORT', \n    icon: Heart, \n    label: 'Support', \n    color: 'text-purple-600',\n    bgColor: 'bg-purple-100 dark:bg-purple-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'INSIGHTFUL', \n    icon: Lightbulb, \n    label: 'Insightful', \n    color: 'text-amber-600',\n    bgColor: 'bg-amber-100 dark:bg-amber-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CURIOUS', \n    icon: HelpCircle, \n    label: 'Curious', \n    color: 'text-pink-600',\n    bgColor: 'bg-pink-100 dark:bg-pink-900/30',\n    hoverScale: 1.3,\n  },\n];\n\n// Helper to get reaction config by type\nexport function getReactionConfig(type: ReactionType) {\n  return REACTIONS.find(r => r.type === type) || REACTIONS[0];\n}\n\n// Reaction icons for summary display\nexport function ReactionIcon({ \n  type, \n  size = 16,\n  className = '' \n}: { \n  type: ReactionType; \n  size?: number;\n  className?: string;\n}) {\n  const config = getReactionConfig(type);\n  const Icon = config.icon;\n  \n  return (\n    <div className={`inline-flex items-center justify-center rounded-full p-1 ${config.bgColor} ${className}`}>\n      <Icon className={`${config.color}`} size={size} />\n    </div>\n  );\n}\n\nexport function ReactionPicker({ \n  isOpen, \n  currentReaction,\n  onSelect, \n  onClose \n}: ReactionPickerProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Reaction picker */}\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"absolute bottom-full left-0 mb-2 z-50\"\n          >\n            <div className=\"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1\">\n              {REACTIONS.map((reaction) => {\n                const Icon = reaction.icon;\n                const isSelected = currentReaction === reaction.type;\n                \n                return (\n                  <motion.button\n                    key={reaction.type}\n                    whileHover={{ scale: reaction.hoverScale, y: -8 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => {\n                      onSelect(reaction.type);\n                      onClose();\n                    }}\n                    className={`relative p-2 rounded-full transition-colors group ${\n                      isSelected \n                        ? reaction.bgColor \n                        : 'hover:bg-gray-100 dark:hover:bg-neutral-700'\n                    }`}\n                    title={reaction.label}\n                  >\n                    <Icon \n                      className={`w-6 h-6 transition-transform ${\n                        isSelected ? reaction.color : 'text-gray-500 dark:text-neutral-400'\n                      } group-hover:${reaction.color}`}\n                    />\n                    \n                    {/* Tooltip */}\n                    <motion.span\n                      initial={{ opacity: 0, y: 5 }}\n                      whileHover={{ opacity: 1, y: 0 }}\n                      className=\"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none\"\n                    >\n                      {reaction.label}\n                    </motion.span>\n                  </motion.button>\n                );\n              })}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Summary of reactions (shows top 3 reaction icons)\nexport function ReactionSummaryDisplay({ \n  reactionSummary,\n  totalCount,\n  onClick,\n}: { \n  reactionSummary: ReactionSummaryType[];\n  totalCount: number;\n  onClick?: () => void;\n}) {\n  if (totalCount === 0) return null;\n  \n  // Get top 3 unique reaction types\n  const topReactions = reactionSummary.slice(0, 3);\n  \n  return (\n    <button \n      onClick={onClick}\n      className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline\"\n    >\n      <div className=\"flex -space-x-1\">\n        {topReactions.map((reaction, index) => (\n          <ReactionIcon \n            key={reaction.type} \n            type={reaction.type} \n            size={14}\n            className=\"border-2 border-white dark:border-neutral-900\"\n          />\n        ))}\n      </div>\n      <span>{totalCount}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 305, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/FormattedContent.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface FormattedContentProps {\n  content: string;\n  className?: string;\n}\n\n/**\n * Renders formatted post content with support for:\n * - **bold** text\n * - *italic* text\n * - `code` inline\n * - @mentions (clickable links)\n * - [color:red]colored text[/color]\n * - URLs (auto-linked)\n * - Line breaks\n */\nexport function FormattedContent({ content, className = '' }: FormattedContentProps) {\n  if (!content) return null;\n\n  const renderFormattedText = (text: string): React.ReactNode[] => {\n    const elements: React.ReactNode[] = [];\n    let remaining = text;\n    let key = 0;\n\n    while (remaining.length > 0) {\n      // Check for color tags: [color:red]text[/color]\n      const colorMatch = remaining.match(/^\\[color:([a-zA-Z]+|#[0-9a-fA-F]{3,6})\\]([\\s\\S]*?)\\[\\/color\\]/);\n      if (colorMatch) {\n        const [fullMatch, color, innerText] = colorMatch;\n        elements.push(\n          <span key={key++} style={{ color }}>\n            {renderFormattedText(innerText)}\n          </span>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: **text**\n      const boldMatch = remaining.match(/^\\*\\*(.+?)\\*\\*/);\n      if (boldMatch) {\n        const [fullMatch, innerText] = boldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for italic: *text* (but not **)\n      const italicMatch = remaining.match(/^\\*([^*]+?)\\*/);\n      if (italicMatch) {\n        const [fullMatch, innerText] = italicMatch;\n        elements.push(\n          <em key={key++} className=\"italic\">\n            {renderFormattedText(innerText)}\n          </em>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for inline code: `code`\n      const codeMatch = remaining.match(/^`([^`]+?)`/);\n      if (codeMatch) {\n        const [fullMatch, innerText] = codeMatch;\n        elements.push(\n          <code \n            key={key++} \n            className=\"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm\"\n          >\n            {innerText}\n          </code>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for mentions: @username\n      const mentionMatch = remaining.match(/^@([a-zA-Z0-9_]+)/);\n      if (mentionMatch) {\n        const [fullMatch, username] = mentionMatch;\n        elements.push(\n          <Link \n            key={key++}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\n          >\n            @{username}\n          </Link>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for URLs\n      const urlMatch = remaining.match(/^(https?:\\/\\/[^\\s]+)/);\n      if (urlMatch) {\n        const [fullMatch] = urlMatch;\n        elements.push(\n          <a \n            key={key++}\n            href={fullMatch}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline break-all\"\n          >\n            {fullMatch}\n          </a>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for line breaks\n      if (remaining.startsWith('\\n')) {\n        elements.push(<br key={key++} />);\n        remaining = remaining.slice(1);\n        continue;\n      }\n\n      // Find next special character or take the rest\n      const nextSpecialIndex = remaining.search(/[\\*`@\\[\\n]|https?:\\/\\//);\n      if (nextSpecialIndex === -1) {\n        // No more special chars, add rest as plain text\n        elements.push(<span key={key++}>{remaining}</span>);\n        break;\n      } else if (nextSpecialIndex === 0) {\n        // Special char at start but didn't match pattern - add single char\n        elements.push(<span key={key++}>{remaining[0]}</span>);\n        remaining = remaining.slice(1);\n      } else {\n        // Add text before special char\n        elements.push(<span key={key++}>{remaining.slice(0, nextSpecialIndex)}</span>);\n        remaining = remaining.slice(nextSpecialIndex);\n      }\n    }\n\n    return elements;\n  };\n\n  return (\n    <div className={`whitespace-pre-wrap break-words ${className}`}>\n      {renderFormattedText(content)}\n    </div>\n  );\n}\n\n// Color presets for the color picker\nexport const COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n  { name: 'Cyan', value: '#06b6d4' },\n];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/EditPostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { updatePost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { Post, PostVisibility, MentionUser } from '@/types/post';\n\ninterface EditPostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  post: Post;\n  onPostUpdated?: (updatedPost: Post) => void;\n}\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Teal', value: '#14b8a6' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n];\n\nexport function EditPostModal({ isOpen, onClose, post, onPostUpdated }: EditPostModalProps) {\n  const { user } = useAuth();\n  const [content, setContent] = useState(post.content || '');\n  const [visibility, setVisibility] = useState<PostVisibility>(post.visibility);\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Update content when post prop changes\n  useEffect(() => {\n    setContent(post.content || '');\n    setVisibility(post.visibility);\n  }, [post]);\n\n  // Mention search\n  useEffect(() => {\n    const searchMentions = async () => {\n      if (mentionQuery.length >= 2) {\n        try {\n          const results = await searchUsersForMention(mentionQuery);\n          setMentionResults(results);\n          setShowMentionDropdown(true);\n        } catch (error) {\n          console.error('Error searching mentions:', error);\n        }\n      } else {\n        setMentionResults([]);\n        setShowMentionDropdown(false);\n      }\n    };\n\n    const debounce = setTimeout(searchMentions, 300);\n    return () => clearTimeout(debounce);\n  }, [mentionQuery]);\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n\n    // Check for @ mentions\n    const cursorPos = e.target.selectionStart;\n    const textBeforeCursor = value.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (lastAtIndex !== -1) {\n      const textAfterAt = textBeforeCursor.slice(lastAtIndex + 1);\n      if (!textAfterAt.includes(' ') && textAfterAt.length >= 1) {\n        setMentionQuery(textAfterAt);\n      } else {\n        setMentionQuery('');\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setMentionQuery('');\n      setShowMentionDropdown(false);\n    }\n  };\n\n  const insertMention = (user: MentionUser) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const cursorPos = textarea.selectionStart;\n    const textBeforeCursor = content.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n    const textAfterCursor = content.slice(cursorPos);\n\n    const newContent = \n      content.slice(0, lastAtIndex) + \n      `@${user.username} ` + \n      textAfterCursor;\n\n    setContent(newContent);\n    setMentionQuery('');\n    setShowMentionDropdown(false);\n\n    setTimeout(() => {\n      const newCursorPos = lastAtIndex + user.username.length + 2;\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Text formatting helpers\n  const formatText = (wrapper: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + wrapper + selectedText + wrapper + content.slice(end);\n      newCursorPos = end + wrapper.length * 2;\n    } else {\n      newContent = content.slice(0, start) + wrapper + wrapper + content.slice(end);\n      newCursorPos = start + wrapper.length;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleBold = () => formatText('**');\n  const handleItalic = () => formatText('*');\n  const handleCode = () => formatText('`');\n\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (lineContent.startsWith('- ')) {\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Submit update\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const updatedPost = await updatePost(post.id, {\n        content,\n        visibility,\n      });\n      \n      onPostUpdated?.(updatedPost);\n      onClose();\n    } catch (err: any) {\n      console.error('Update post error:', err);\n      setError(err.message || 'Failed to update post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const selectedVisibility = VISIBILITY_OPTIONS.find(v => v.value === visibility) || VISIBILITY_OPTIONS[0];\n  const VisibilityIcon = selectedVisibility.icon;\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl\"\n            style={{\n              background: '#ecf0f3',\n              boxShadow: '20px 20px 60px #c9ccd1, -20px -20px 60px #ffffff',\n            }}\n          >\n            {/* Header */}\n            <div \n              className=\"flex items-center justify-between p-6 border-b\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div \n                  className=\"p-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <Pencil className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <h2 \n                  className=\"text-xl font-bold\"\n                  style={{\n                    fontFamily: \"'Montserrat', sans-serif\",\n                    color: '#2d3748',\n                  }}\n                >\n                  Edit Post\n                </h2>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* User Info & Visibility */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div \n                    className=\"w-12 h-12 rounded-full overflow-hidden\"\n                    style={{\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {user?.profileImage ? (\n                      <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold\">\n                        {user?.name?.charAt(0).toUpperCase() || 'U'}\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n                    <div className=\"relative\">\n                      <button\n                        onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                        className=\"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700\"\n                      >\n                        <VisibilityIcon className=\"w-3 h-3\" />\n                        <span>{selectedVisibility.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </button>\n                      \n                      {showVisibilityDropdown && (\n                        <div \n                          className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-20 min-w-[140px]\"\n                          style={{\n                            background: '#ecf0f3',\n                            boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                          }}\n                        >\n                          {VISIBILITY_OPTIONS.map((option) => (\n                            <button\n                              key={option.value}\n                              onClick={() => {\n                                setVisibility(option.value);\n                                setShowVisibilityDropdown(false);\n                              }}\n                              className=\"flex items-center gap-2 w-full px-4 py-2 text-left text-sm hover:bg-gray-100\"\n                            >\n                              <option.icon className=\"w-4 h-4 text-gray-500\" />\n                              <span className=\"text-gray-700\">{option.label}</span>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <span className=\"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded\">\n                  {post.type}\n                </span>\n              </div>\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"p-3 rounded-lg bg-red-50 text-red-600 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* Rich Text Editor Area */}\n              <div className=\"relative\">\n                {/* Formatting Toolbar */}\n                <div \n                  className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                  }}\n                >\n                  <button \n                    type=\"button\"\n                    onClick={handleBold}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bold (**text**)\"\n                  >\n                    <Bold className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleItalic}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Italic (*text*)\"\n                  >\n                    <Italic className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleList}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bullet List\"\n                  >\n                    <List className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleCode}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Code (`code`)\"\n                  >\n                    <Code className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                  <button \n                    type=\"button\"\n                    onClick={handleMentionClick}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Mention someone (@)\"\n                  >\n                    <AtSign className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"relative\" ref={colorPickerRef}>\n                    <button \n                      type=\"button\"\n                      onClick={() => setShowColorPicker(!showColorPicker)}\n                      className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                      title=\"Text Color\"\n                    >\n                      <Palette className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n                    {/* Color Picker Dropdown */}\n                    {showColorPicker && (\n                      <div \n                        className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                        }}\n                      >\n                        <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                        <div className=\"grid grid-cols-4 gap-2\">\n                          {COLOR_PRESETS.map((color) => (\n                            <button\n                              key={color.value}\n                              type=\"button\"\n                              onClick={() => handleColorInsert(color.value)}\n                              className=\"group flex flex-col items-center gap-1\"\n                            >\n                              <div \n                                className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                                style={{ backgroundColor: color.value }}\n                              />\n                              <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Content Textarea */}\n                <div className=\"relative\">\n                  <textarea\n                    ref={contentRef}\n                    value={content}\n                    onChange={handleContentChange}\n                    placeholder=\"What do you want to share?\"\n                    className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      fontFamily: \"'Montserrat', sans-serif\",\n                    }}\n                  />\n                  \n                  {/* Mention Dropdown */}\n                  {showMentionDropdown && (\n                    <div \n                      className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      {mentionResults.map((user) => (\n                        <button\n                          key={user.id}\n                          onClick={() => insertMention(user)}\n                          className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                        >\n                          <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                            {user.profileImage && (\n                              <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                            )}\n                          </div>\n                          <div className=\"text-left\">\n                            <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                            <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Post type note */}\n              <p className=\"text-xs text-gray-400 text-center\">\n                Note: Only text content and visibility can be edited. Media, polls, and links cannot be changed.\n              </p>\n            </div>\n\n            {/* Footer */}\n            <div \n              className=\"flex justify-end gap-3 p-6 border-t\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2.5 rounded-xl text-gray-600 font-medium transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={isSubmitting || !content.trim()}\n                className=\"px-8 py-2.5 rounded-xl text-white font-semibold transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                style={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center gap-2\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Saving...\n                  </span>\n                ) : (\n                  'Save Changes'\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1441, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/LikeListModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getReactionConfig, REACTIONS } from './ReactionPicker';\nimport type { ReactionType } from '@/types/post';\nimport apiClient from '@/lib/api/client';\n\ninterface LikeUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  headline: string | null;\n  reactionType: ReactionType;\n  createdAt: string;\n}\n\ninterface LikeListModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  totalCount: number;\n}\n\nexport function LikeListModal({ isOpen, onClose, postId, totalCount }: LikeListModalProps) {\n  const [likes, setLikes] = useState<LikeUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedFilter, setSelectedFilter] = useState<ReactionType | 'ALL'>('ALL');\n  const [reactionCounts, setReactionCounts] = useState<Record<ReactionType, number>>({\n    LIKE: 0,\n    CELEBRATE: 0,\n    SUPPORT: 0,\n    INSIGHTFUL: 0,\n    CURIOUS: 0,\n  });\n\n  useEffect(() => {\n    if (!isOpen || !postId) return;\n\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        // apiClient already extracts response.data, so response IS the data\n        const data = await apiClient.get(`/posts/${postId}/likes`) as any;\n        setLikes(data.likes || []);\n        \n        // Calculate reaction counts\n        const counts: Record<ReactionType, number> = {\n          LIKE: 0,\n          CELEBRATE: 0,\n          SUPPORT: 0,\n          INSIGHTFUL: 0,\n          CURIOUS: 0,\n        };\n        data.likes?.forEach((like: LikeUser) => {\n          if (like.reactionType && counts[like.reactionType] !== undefined) {\n            counts[like.reactionType]++;\n          }\n        });\n        setReactionCounts(counts);\n      } catch (error) {\n        console.error('Error fetching likes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [isOpen, postId]);\n\n  const filteredLikes = selectedFilter === 'ALL' \n    ? likes \n    : likes.filter(like => like.reactionType === selectedFilter);\n\n  // Get reactions with counts > 0\n  const activeReactions = REACTIONS.filter(r => reactionCounts[r.type] > 0);\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Reactions\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n              </button>\n            </div>\n\n            {/* Reaction Filter Tabs */}\n            <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedFilter('ALL')}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                  selectedFilter === 'ALL'\n                    ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                }`}\n              >\n                All\n                <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                  {totalCount}\n                </span>\n              </button>\n\n              {activeReactions.map((reaction) => {\n                const Icon = reaction.icon;\n                const count = reactionCounts[reaction.type];\n                \n                return (\n                  <button\n                    key={reaction.type}\n                    onClick={() => setSelectedFilter(reaction.type)}\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                      selectedFilter === reaction.type\n                        ? `${reaction.bgColor} ${reaction.color}`\n                        : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                      {count}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* User List */}\n            <div className=\"overflow-y-auto max-h-[50vh]\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filteredLikes.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-neutral-400\">\n                  No reactions yet\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n                  {filteredLikes.map((like) => {\n                    const reactionConfig = getReactionConfig(like.reactionType);\n                    const Icon = reactionConfig.icon;\n                    \n                    return (\n                      <Link\n                        key={like.id}\n                        href={`/profile/${like.username}`}\n                        onClick={onClose}\n                        className=\"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n                      >\n                        {/* Avatar with Reaction Badge */}\n                        <div className=\"relative\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                            {like.profileImage ? (\n                              <Image\n                                src={like.profileImage}\n                                alt={like.name}\n                                width={48}\n                                height={48}\n                                className=\"object-cover w-full h-full\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300\">\n                                {like.name.charAt(0).toUpperCase()}\n                              </div>\n                            )}\n                          </div>\n                          {/* Reaction Badge */}\n                          <div className={`absolute -bottom-1 -right-1 p-1 rounded-full ${reactionConfig.bgColor} border-2 border-white dark:border-neutral-900`}>\n                            <Icon className={`w-3 h-3 ${reactionConfig.color}`} />\n                          </div>\n                        </div>\n\n                        {/* User Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n                            {like.name}\n                          </p>\n                          {like.headline && (\n                            <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">\n                              {like.headline}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Connect Button (optional, can be added later) */}\n                        {/* <button className=\"px-4 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors\">\n                          Connect\n                        </button> */}\n                      </Link>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1783, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/reports/ReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Flag, AlertTriangle, Loader2, CheckCircle } from 'lucide-react';\nimport { reportAPI, ReportReason } from '@/lib/api/reports';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'post' | 'comment' | 'user' | 'group' | 'chat';\n  targetId: string;\n  targetName?: string;\n  conversationId?: string; // For chat reports\n  reportedUserId?: string; // For chat reports\n}\n\nexport default function ReportModal({\n  isOpen,\n  onClose,\n  type,\n  targetId,\n  targetName,\n  conversationId,\n  reportedUserId,\n}: ReportModalProps) {\n  const [reasons, setReasons] = useState<ReportReason[]>([]);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchingReasons, setFetchingReasons] = useState(true);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchReasons = async () => {\n      try {\n        const response = await reportAPI.getReasons();\n        setReasons(response.reasons);\n      } catch (err) {\n        console.error('Failed to fetch report reasons:', err);\n      } finally {\n        setFetchingReasons(false);\n      }\n    };\n\n    if (isOpen) {\n      fetchReasons();\n      // Reset state\n      setSelectedReason('');\n      setDescription('');\n      setSuccess(false);\n      setError('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = async () => {\n    if (!selectedReason) {\n      setError('Please select a reason');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = {\n        reason: selectedReason,\n        description: description.trim() || undefined,\n      };\n\n      switch (type) {\n        case 'post':\n          await reportAPI.reportPost(targetId, data);\n          break;\n        case 'comment':\n          await reportAPI.reportComment(targetId, data);\n          break;\n        case 'user':\n          await reportAPI.reportUser(targetId, data);\n          break;\n        case 'group':\n          await reportAPI.reportGroup(targetId, data);\n          break;\n        case 'chat':\n          if (!conversationId || !reportedUserId) {\n            throw new Error('Missing conversation or user info');\n          }\n          await reportAPI.reportChatUser(conversationId, {\n            ...data,\n            reportedUserId,\n          });\n          break;\n      }\n\n      setSuccess(true);\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTitle = () => {\n    switch (type) {\n      case 'post':\n        return 'Report Post';\n      case 'comment':\n        return 'Report Comment';\n      case 'user':\n        return `Report ${targetName || 'User'}`;\n      case 'group':\n        return 'Report Group';\n      case 'chat':\n        return `Report ${targetName || 'User'}`;\n      default:\n        return 'Report';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        {/* Backdrop */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"relative w-full max-w-md mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-full\">\n                <Flag className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                {getTitle()}\n              </h2>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {success ? (\n              <div className=\"text-center py-8\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\n                  <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Report Submitted\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Thank you for helping keep our community safe. We'll review your report shortly.\n                </p>\n              </div>\n            ) : fetchingReasons ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Why are you reporting this {type}? Your report will be reviewed by our team.\n                </p>\n\n                {/* Reason Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Select a reason <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {reasons.map((reason) => (\n                      <label\n                        key={reason.value}\n                        className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                          selectedReason === reason.value\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"reason\"\n                          value={reason.value}\n                          checked={selectedReason === reason.value}\n                          onChange={(e) => setSelectedReason(e.target.value)}\n                          className=\"mt-1 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <div>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {reason.label}\n                          </span>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                            {reason.description}\n                          </p>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Additional Details */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional details (optional)\n                  </label>\n                  <textarea\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Provide any additional context that might help us review this report...\"\n                    rows={3}\n                    maxLength={500}\n                    className=\"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                  />\n                  <p className=\"text-xs text-gray-400 text-right\">\n                    {description.length}/500\n                  </p>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm\">\n                    <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                    {error}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!success && (\n            <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading || !selectedReason}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>\n                    <Flag className=\"w-4 h-4\" />\n                    Submit Report\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AALA;;;;;;AAiBe,SAAS,YAAY,EAClC,MAAM,EACN,OAAO,EACP,IAAI,EACJ,QAAQ,EACR,UAAU,EACV,cAAc,EACd,cAAc,EACG;IACjB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACzD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,WAAW,MAAM,yIAAS,CAAC,UAAU;gBAC3C,WAAW,SAAS,OAAO;YAC7B,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,mCAAmC;YACnD,SAAU;gBACR,mBAAmB;YACrB;QACF;QAEA,IAAI,QAAQ;YACV;YACA,cAAc;YACd,kBAAkB;YAClB,eAAe;YACf,WAAW;YACX,SAAS;QACX;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe;QACnB,IAAI,CAAC,gBAAgB;YACnB,SAAS;YACT;QACF;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,OAAO;gBACX,QAAQ;gBACR,aAAa,YAAY,IAAI,MAAM;YACrC;YAEA,OAAQ;gBACN,KAAK;oBACH,MAAM,yIAAS,CAAC,UAAU,CAAC,UAAU;oBACrC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,aAAa,CAAC,UAAU;oBACxC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,UAAU,CAAC,UAAU;oBACrC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,WAAW,CAAC,UAAU;oBACtC;gBACF,KAAK;oBACH,IAAI,CAAC,kBAAkB,CAAC,gBAAgB;wBACtC,MAAM,IAAI,MAAM;oBAClB;oBACA,MAAM,yIAAS,CAAC,cAAc,CAAC,gBAAgB;wBAC7C,GAAG,IAAI;wBACP;oBACF;oBACA;YACJ;YAEA,WAAW;YACX,WAAW;gBACT;YACF,GAAG;QACL,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,QAAQ,EAAE,MAAM,SAAS;QACxC,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,WAAW;QACf,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO,CAAC,OAAO,EAAE,cAAc,QAAQ;YACzC,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO,CAAC,OAAO,EAAE,cAAc,QAAQ;YACzC;gBACE,OAAO;QACX;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC,4MAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,WAAU;oBACV,SAAS;;;;;;8BAIX,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBACnC,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAE;oBAChC,MAAM;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBAChC,WAAU;;sCAGV,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,0MAAI;gDAAC,WAAU;;;;;;;;;;;sDAElB,8OAAC;4CAAG,WAAU;sDACX;;;;;;;;;;;;8CAGL,8OAAC;oCACC,SAAS;oCACT,WAAU;8CAEV,cAAA,8OAAC,iMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAKjB,8OAAC;4BAAI,WAAU;sCACZ,wBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,0OAAW;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8OAAC;wCAAG,WAAU;kDAA2D;;;;;;kDAGzE,8OAAC;wCAAE,WAAU;kDAAmC;;;;;;;;;;;uCAIhD,gCACF,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,4NAAO;oCAAC,WAAU;;;;;;;;;;qDAGrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;4CAA2C;4CAC1B;4CAAK;;;;;;;kDAInC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAM,WAAU;;oDAAuD;kEACtD,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAEjD,8OAAC;gDAAI,WAAU;0DACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wDAEC,WAAW,CAAC,2EAA2E,EACrF,mBAAmB,OAAO,KAAK,GAC3B,mDACA,yFACJ;;0EAEF,8OAAC;gEACC,MAAK;gEACL,MAAK;gEACL,OAAO,OAAO,KAAK;gEACnB,SAAS,mBAAmB,OAAO,KAAK;gEACxC,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gEACjD,WAAU;;;;;;0EAEZ,8OAAC;;kFACC,8OAAC;wEAAK,WAAU;kFACb,OAAO,KAAK;;;;;;kFAEf,8OAAC;wEAAE,WAAU;kFACV,OAAO,WAAW;;;;;;;;;;;;;uDApBlB,OAAO,KAAK;;;;;;;;;;;;;;;;kDA6BzB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAM,WAAU;0DAAuD;;;;;;0DAGxE,8OAAC;gDACC,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,aAAY;gDACZ,MAAM;gDACN,WAAW;gDACX,WAAU;;;;;;0DAEZ,8OAAC;gDAAE,WAAU;;oDACV,YAAY,MAAM;oDAAC;;;;;;;;;;;;;oCAKvB,uBACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,yOAAa;gDAAC,WAAU;;;;;;4CACxB;;;;;;;;;;;;;;;;;;wBAQV,CAAC,yBACA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,UAAU,WAAW,CAAC;oCACtB,WAAU;8CAET,wBACC;;0DACE,8OAAC,4NAAO;gDAAC,WAAU;;;;;;4CAAyB;;qEAI9C;;0DACE,8OAAC,0MAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWhD"}},
    {"offset": {"line": 2273, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  ThumbsUp,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n  Pencil,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { toggleSavePost } from '@/lib/api/saved';\nimport { \n  likePost as socketLikePost, \n  reactToPost as socketReactToPost,\n  votePoll as socketVotePoll,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { \n  ReactionPicker, \n  ReactionSummaryDisplay, \n  getReactionConfig,\n} from './ReactionPicker';\nimport { FormattedContent } from './FormattedContent';\nimport { EditPostModal } from './EditPostModal';\nimport { LikeListModal } from './LikeListModal';\nimport ReportModal from '@/components/reports/ReportModal';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number, reactionType?: ReactionType | null, reactionSummary?: ReactionSummaryType[]) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onEdit?: (postId: string, updatedPost: Post) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onEdit,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [currentReaction, setCurrentReaction] = useState<ReactionType | null>(post.userReactionType || null);\n  const [reactionSummary, setReactionSummary] = useState<ReactionSummaryType[]>(post.reactionSummary || []);\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\n  const [showLikeListModal, setShowLikeListModal] = useState(false);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n  \n  // Sync like state with real-time updates from parent\n  useEffect(() => {\n    setIsLiked(post.isLiked);\n    setLikesCount(post.likesCount);\n    setCurrentReaction(post.userReactionType || null);\n    setReactionSummary(post.reactionSummary || []);\n  }, [post.isLiked, post.likesCount, post.userReactionType, post.reactionSummary]);\n  \n  // Sync poll options with real-time updates from parent\n  useEffect(() => {\n    if (post.pollOptions) {\n      setPollOptions(post.pollOptions);\n    }\n  }, [post.pollOptions]);\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle quick like (default LIKE reaction)\n  const handleLike = async () => {\n    if (currentReaction === 'LIKE') {\n      // Remove reaction\n      handleReaction('LIKE');\n    } else {\n      // Add LIKE reaction\n      handleReaction('LIKE');\n    }\n  };\n\n  // Handle reaction selection\n  const handleReaction = async (reactionType: ReactionType) => {\n    const wasLiked = isLiked;\n    const oldReaction = currentReaction;\n    const oldCount = likesCount;\n    \n    let newLiked: boolean;\n    let newCount: number;\n    let newReaction: ReactionType | null;\n    \n    if (currentReaction === reactionType) {\n      // Remove reaction (clicking same reaction again)\n      newLiked = false;\n      newCount = likesCount - 1;\n      newReaction = null;\n    } else if (currentReaction) {\n      // Change reaction (already reacted, changing type)\n      newLiked = true;\n      newCount = likesCount; // Count stays same\n      newReaction = reactionType;\n    } else {\n      // Add new reaction\n      newLiked = true;\n      newCount = likesCount + 1;\n      newReaction = reactionType;\n    }\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    setCurrentReaction(newReaction);\n    onLikeUpdate?.(post.id, newLiked, newCount, newReaction, reactionSummary);\n    \n    try {\n      // Use WebSocket for real-time\n      socketReactToPost(post.id, reactionType);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(wasLiked);\n        setLikesCount(oldCount);\n        setCurrentReaction(oldReaction);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share\n  const handleShare = async () => {\n    const url = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: post.articleTitle || `Post by ${post.author.name}`,\n          text: post.content?.slice(0, 100) || '',\n          url,\n        });\n      } catch (err) {\n        // User cancelled or error\n      }\n    } else {\n      // Copy to clipboard\n      await navigator.clipboard.writeText(url);\n      // Could show a toast here\n    }\n  };\n\n  // Handle save/unsave\n  const handleSave = async () => {\n    try {\n      const response = await toggleSavePost(post.id);\n      if (response && typeof response.saved === 'boolean') {\n        setIsSaved(response.saved);\n      } else {\n        // Fallback: toggle local state\n        setIsSaved(!isSaved);\n      }\n    } catch (error) {\n      console.error('Error toggling save:', error);\n      // Optimistically toggle on error for better UX\n      setIsSaved(!isSaved);\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[600px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>\n              {post.linkDomain || (post.linkUrl ? (() => {\n                try {\n                  return new URL(post.linkUrl).hostname;\n                } catch {\n                  return 'Link';\n                }\n              })() : 'Link')}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: '',\n      PROMOTION: '',\n      GRADUATION: '',\n      CERTIFICATION: '',\n      WORK_ANNIVERSARY: '',\n      BIRTHDAY: '',\n      JOB_CHANGE: '',\n      NEW_POSITION: '',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || '' : '';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()}  {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? `  ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost && (\n                <>\n                  <button\n                    onClick={() => {\n                      setShowEditModal(true);\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                    Edit post\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleDelete();\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete post\n                  </button>\n                </>\n              )}\n              \n              {!isOwnPost && (\n                <button\n                  onClick={() => {\n                    setShowReportModal(true);\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <FormattedContent \n            content={post.content} \n            className=\"text-gray-900 dark:text-white\"\n          />\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <ReactionSummaryDisplay \n              reactionSummary={reactionSummary}\n              totalCount={likesCount}\n              onClick={() => setShowLikeListModal(true)}\n            />\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {post.commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {post.commentsCount} comment{post.commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        {/* Reaction Button with Picker */}\n        <div \n          className=\"relative\"\n          onMouseEnter={() => setShowReactionPicker(true)}\n          onMouseLeave={() => setShowReactionPicker(false)}\n        >\n          <button\n            onClick={handleLike}\n            className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n              isLiked && currentReaction\n                ? `${getReactionConfig(currentReaction).color} ${getReactionConfig(currentReaction).bgColor}`\n                : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n            }`}\n          >\n            {currentReaction ? (\n              <>\n                {React.createElement(getReactionConfig(currentReaction).icon, { \n                  className: `w-5 h-5 ${isLiked ? 'fill-current' : ''}` \n                })}\n                <span className=\"text-sm font-medium\">{getReactionConfig(currentReaction).label}</span>\n              </>\n            ) : (\n              <>\n                <ThumbsUp className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">Like</span>\n              </>\n            )}\n          </button>\n          \n          <ReactionPicker\n            isOpen={showReactionPicker}\n            currentReaction={currentReaction}\n            onSelect={handleReaction}\n            onClose={() => setShowReactionPicker(false)}\n          />\n        </div>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={handleSave}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n\n      {/* Like List Modal */}\n      <LikeListModal\n        isOpen={showLikeListModal}\n        onClose={() => setShowLikeListModal(false)}\n        postId={post.id}\n        totalCount={likesCount}\n      />\n\n      {/* Edit Post Modal */}\n      <EditPostModal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        post={post}\n        onPostUpdated={(updatedPost) => {\n          onEdit?.(post.id, updatedPost);\n        }}\n      />\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"post\"\n        targetId={post.id}\n        targetName={`Post by ${post.author.name}`}\n      />\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3601, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/Comments.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  ChevronDown,\n  ChevronUp,\n  Send,\n  Loader2,\n  X,\n  CornerDownRight,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Comment } from '@/types/post';\nimport { getComments, searchUsersForMention } from '@/lib/api/posts';\nimport { createComment, likeComment as socketLikeComment, joinPostRoom, leavePostRoom, initializeSocket, getSocket } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { MentionUser } from '@/types/post';\n\ninterface CommentsProps {\n  postId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  highlightCommentId?: string;\n  onCommentCountChange?: (count: number) => void;\n}\n\ninterface CommentItemProps {\n  comment: Comment;\n  postId: string;\n  depth: number;\n  highlightId?: string;\n  onReply: (parentId: string, parentAuthor: string) => void;\n}\n\nfunction CommentItem({ comment, postId, depth, highlightId, onReply }: CommentItemProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(comment.isLiked);\n  const [likesCount, setLikesCount] = useState(comment.likesCount);\n  const [showReplies, setShowReplies] = useState(depth < 2);\n  const [replies, setReplies] = useState<Comment[]>([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [hasMoreReplies, setHasMoreReplies] = useState(comment.replyCount > 0);\n  const [replyCount, setReplyCount] = useState(comment.replyCount);\n  \n  const commentRef = useRef<HTMLDivElement>(null);\n  const isHighlighted = highlightId === comment.id;\n\n  // Sync with parent state when comment prop changes (from real-time updates)\n  useEffect(() => {\n    setIsLiked(comment.isLiked);\n    setLikesCount(comment.likesCount);\n  }, [comment.isLiked, comment.likesCount]);\n\n  // Listen for real-time reply updates\n  useEffect(() => {\n    const socket = getSocket();\n    \n    const handleCommentCreated = (data: { postId: string; comment: any; commentsCount: number }) => {\n      if (data.postId !== postId || data.comment.parentId !== comment.id) return;\n      \n      // New reply to this comment\n      setReplies(prev => {\n        if (prev.some(r => r.id === data.comment.id)) return prev;\n        return [data.comment, ...prev];\n      });\n      setReplyCount(prev => prev + 1);\n      setHasMoreReplies(true);\n    };\n    \n    const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n      // Update this comment's likes\n      if (data.commentId === comment.id) {\n        setLikesCount(data.likesCount);\n        if (data.userId === user?.id) {\n          setIsLiked(data.liked);\n        }\n      }\n      // Update nested replies' likes\n      setReplies(prev => prev.map(r => \n        r.id === data.commentId \n          ? { ...r, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : r.isLiked }\n          : r\n      ));\n    };\n    \n    socket?.on('comment:created', handleCommentCreated);\n    socket?.on('comment:liked', handleCommentLiked);\n    \n    return () => {\n      socket?.off('comment:created', handleCommentCreated);\n      socket?.off('comment:liked', handleCommentLiked);\n    };\n  }, [postId, comment.id, user?.id]);\n\n  // Scroll to highlighted comment\n  useEffect(() => {\n    if (isHighlighted && commentRef.current) {\n      commentRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }, [isHighlighted]);\n\n  // Load replies\n  const loadReplies = async () => {\n    if (loadingReplies || replies.length >= comment.replyCount) return;\n    \n    setLoadingReplies(true);\n    try {\n      const response = await getComments(postId, comment.id, 1, 10);\n      setReplies(response.comments);\n      setHasMoreReplies(response.hasMore);\n    } catch (error) {\n      console.error('Error loading replies:', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  // Handle like\n  const handleLike = () => {\n    const newLiked = !isLiked;\n    setIsLiked(newLiked);\n    setLikesCount(prev => newLiked ? prev + 1 : prev - 1);\n    \n    try {\n      socketLikeComment(comment.id, postId);\n    } catch (error) {\n      // Revert on error\n      setIsLiked(!newLiked);\n      setLikesCount(likesCount);\n    }\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    const parts = text.split(/(@\\w+)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        return (\n          <Link\n            key={index}\n            href={`/profile/${part.slice(1)}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <div\n      ref={commentRef}\n      className={`${depth > 0 ? 'ml-8 border-l-2 border-gray-100 dark:border-neutral-800 pl-4' : ''}`}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`py-3 transition-colors ${\n          isHighlighted ? 'bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 rounded-lg' : ''\n        }`}\n      >\n        <div className=\"flex gap-3\">\n          {/* Avatar */}\n          <Link href={`/profile/${comment.author.username}`} className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n              {comment.author.profileImage ? (\n                <img\n                  src={comment.author.profileImage}\n                  alt={comment.author.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                  {comment.author.name.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n          </Link>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"bg-gray-100 dark:bg-neutral-800 rounded-2xl px-4 py-2\">\n              <Link\n                href={`/profile/${comment.author.username}`}\n                className=\"font-semibold text-sm text-gray-900 dark:text-white hover:underline\"\n              >\n                {comment.author.name}\n              </Link>\n              <p className=\"text-sm text-gray-700 dark:text-neutral-300 whitespace-pre-wrap\">\n                {parseContent(comment.content)}\n              </p>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center gap-4 mt-1 ml-2 text-xs\">\n              <span className=\"text-gray-500 dark:text-neutral-500\">\n                {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n              </span>\n              \n              <button\n                onClick={handleLike}\n                className={`font-semibold transition-colors ${\n                  isLiked ? 'text-red-500' : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n                }`}\n              >\n                Like{likesCount > 0 && ` (${likesCount})`}\n              </button>\n              \n              <button\n                onClick={() => onReply(comment.id, comment.author.username)}\n                className=\"font-semibold text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors\"\n              >\n                Reply\n              </button>\n            </div>\n            \n            {/* Replies toggle */}\n            {replyCount > 0 && (\n              <button\n                onClick={() => {\n                  setShowReplies(!showReplies);\n                  if (!showReplies && replies.length === 0) {\n                    loadReplies();\n                  }\n                }}\n                className=\"flex items-center gap-1 mt-2 ml-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300\"\n              >\n                <CornerDownRight className=\"w-3 h-3\" />\n                {showReplies ? 'Hide' : 'View'} {replyCount} {replyCount === 1 ? 'reply' : 'replies'}\n                {showReplies ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Replies */}\n        <AnimatePresence>\n          {showReplies && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-2\"\n            >\n              {loadingReplies && replies.length === 0 ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\n                </div>\n              ) : (\n                replies.map((reply) => (\n                  <CommentItem\n                    key={reply.id}\n                    comment={reply}\n                    postId={postId}\n                    depth={depth + 1}\n                    highlightId={highlightId}\n                    onReply={onReply}\n                  />\n                ))\n              )}\n              \n              {hasMoreReplies && replies.length > 0 && (\n                <button\n                  onClick={loadReplies}\n                  disabled={loadingReplies}\n                  className=\"ml-8 mt-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700\"\n                >\n                  {loadingReplies ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    'Load more replies'\n                  )}\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n\nexport function Comments({ postId, isOpen, onClose, highlightCommentId, onCommentCountChange }: CommentsProps) {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  \n  // Reply state\n  const [replyingTo, setReplyingTo] = useState<{ id: string; username: string } | null>(null);\n  \n  // Input state\n  const [newComment, setNewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const commentsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Join post room for real-time updates\n  useEffect(() => {\n    if (isOpen) {\n      joinPostRoom(postId);\n      \n      // Set up real-time comment listeners\n      const socket = getSocket();\n      \n      const handleCommentCreated = (data: { postId: string; comment: any; commentsCount: number }) => {\n        if (data.postId !== postId) return;\n        \n        // Add new comment to the list (avoid duplicates)\n        setComments(prev => {\n          // Check if comment already exists (from optimistic update)\n          const exists = prev.some(c => c.id === data.comment.id || c.id.startsWith('temp-'));\n          if (exists) {\n            // Replace temp comment with real one\n            return prev.map(c => c.id.startsWith('temp-') ? data.comment : c);\n          }\n          // Add to top if it's a new top-level comment\n          if (!data.comment.parentId) {\n            return [data.comment, ...prev];\n          }\n          return prev;\n        });\n        \n        onCommentCountChange?.(data.commentsCount);\n      };\n      \n      const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n        // Update comment likes in real-time\n        setComments(prev => prev.map(c => \n          c.id === data.commentId \n            ? { ...c, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : c.isLiked }\n            : c\n        ));\n      };\n      \n      socket?.on('comment:created', handleCommentCreated);\n      socket?.on('comment:liked', handleCommentLiked);\n      \n      return () => {\n        leavePostRoom(postId);\n        socket?.off('comment:created', handleCommentCreated);\n        socket?.off('comment:liked', handleCommentLiked);\n      };\n    }\n  }, [isOpen, postId, user?.id, onCommentCountChange]);\n\n  // Fetch comments\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getComments(postId, undefined, 1, 20);\n        setComments(response.comments);\n        setHasMore(response.hasMore);\n        setPage(1);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchComments();\n  }, [isOpen, postId]);\n\n  // Load more comments\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    try {\n      const nextPage = page + 1;\n      const response = await getComments(postId, undefined, nextPage, 20);\n      setComments(prev => [...prev, ...response.comments]);\n      setHasMore(response.hasMore);\n      setPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more comments:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Handle reply click\n  const handleReply = (parentId: string, username: string) => {\n    setReplyingTo({ id: parentId, username });\n    setNewComment(`@${username} `);\n    setMentions([]);\n    inputRef.current?.focus();\n  };\n\n  // Cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n    setNewComment('');\n    setMentions([]);\n  };\n\n  // Search mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (error) {\n      console.error('Error searching mentions:', error);\n    }\n  }, []);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setNewComment(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : '';\n      \n      if (query) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (mentionUser: MentionUser) => {\n    const lastAtIndex = newComment.lastIndexOf('@');\n    const updatedComment = newComment.slice(0, lastAtIndex) + `@${mentionUser.username} `;\n    setNewComment(updatedComment);\n    setMentions([...mentions, mentionUser.id]);\n    setShowMentionDropdown(false);\n    inputRef.current?.focus();\n  };\n\n  // Submit comment\n  const handleSubmit = async () => {\n    if (!newComment.trim() || isSubmitting) return;\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Use WebSocket for real-time\n      createComment(postId, newComment.trim(), replyingTo?.id, mentions);\n      \n      // Optimistic update\n      const tempComment: Comment = {\n        id: `temp-${Date.now()}`,\n        postId,\n        parentId: replyingTo?.id || null,\n        author: {\n          id: user!.id,\n          username: user!.username!,\n          name: user!.name!,\n          profileImage: user?.profileImage || null,\n          headline: null,\n        },\n        content: newComment.trim(),\n        contentType: 'text',\n        mentions,\n        likesCount: 0,\n        replyCount: 0,\n        isLiked: false,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n      \n      if (replyingTo) {\n        // Add to replies - will be handled by real-time update\n      } else {\n        setComments(prev => [tempComment, ...prev]);\n      }\n      \n      onCommentCountChange?.(comments.length + 1);\n      setNewComment('');\n      setMentions([]);\n      setReplyingTo(null);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Panel */}\n        <motion.div\n          initial={{ y: '100%' }}\n          animate={{ y: 0 }}\n          exit={{ y: '100%' }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full sm:max-w-xl h-[80vh] sm:h-[70vh] sm:rounded-t-2xl sm:rounded-b-2xl bg-white dark:bg-neutral-900 flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Comments</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n          \n          {/* Comments List */}\n          <div\n            ref={commentsContainerRef}\n            className=\"flex-1 overflow-y-auto p-4\"\n          >\n            {loading ? (\n              <div className=\"flex justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n              </div>\n            ) : comments.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageCircle className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n                <p className=\"text-gray-500 dark:text-neutral-400\">No comments yet</p>\n                <p className=\"text-sm text-gray-400 dark:text-neutral-500\">Be the first to comment!</p>\n              </div>\n            ) : (\n              <>\n                {comments.map((comment) => (\n                  <CommentItem\n                    key={comment.id}\n                    comment={comment}\n                    postId={postId}\n                    depth={0}\n                    highlightId={highlightCommentId}\n                    onReply={handleReply}\n                  />\n                ))}\n                \n                {hasMore && (\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"w-full py-3 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 transition-colors\"\n                  >\n                    {loadingMore ? (\n                      <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" />\n                    ) : (\n                      'Load more comments'\n                    )}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n          \n          {/* Reply indicator */}\n          {replyingTo && (\n            <div className=\"px-4 py-2 bg-gray-50 dark:bg-neutral-800/50 border-t border-gray-200 dark:border-neutral-800 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                Replying to <span className=\"font-semibold text-gray-700 dark:text-neutral-300\">@{replyingTo.username}</span>\n              </span>\n              <button onClick={cancelReply} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          \n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n            <div className=\"relative\">\n              {/* Mention Dropdown */}\n              {showMentionDropdown && (\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 max-h-40 overflow-y-auto bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg z-10\">\n                  {mentionResults.map((mentionUser) => (\n                    <button\n                      key={mentionUser.id}\n                      onClick={() => insertMention(mentionUser)}\n                      className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors\"\n                    >\n                      <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-600\">\n                        {mentionUser.profileImage && (\n                          <img src={mentionUser.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                        )}\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{mentionUser.name}</p>\n                        <p className=\"text-xs text-gray-500\">@{mentionUser.username}</p>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              <div className=\"flex items-end gap-2\">\n                <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user?.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={newComment}\n                  onChange={handleInputChange}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSubmit();\n                    }\n                  }}\n                  placeholder=\"Write a comment...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 resize-none outline-none focus:ring-2 focus:ring-blue-500 max-h-24\"\n                  style={{ minHeight: '40px' }}\n                />\n                \n                <button\n                  onClick={handleSubmit}\n                  disabled={!newComment.trim() || isSubmitting}\n                  className=\"p-2 rounded-full bg-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors\"\n                >\n                  {isSubmitting ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Send className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default Comments;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4596, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ImageEditor.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  RotateCw,\n  RotateCcw,\n  FlipHorizontal,\n  FlipVertical,\n  Crop,\n  Sun,\n  Contrast,\n  Droplets,\n  Check,\n  Undo2,\n  Download,\n} from 'lucide-react';\n\ninterface ImageEditorProps {\n  isOpen: boolean;\n  imageUrl: string;\n  onClose: () => void;\n  onSave: (editedImage: Blob) => void;\n}\n\ninterface ImageFilters {\n  brightness: number;\n  contrast: number;\n  saturation: number;\n}\n\nexport function ImageEditor({ isOpen, imageUrl, onClose, onSave }: ImageEditorProps) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [image, setImage] = useState<HTMLImageElement | null>(null);\n  const [rotation, setRotation] = useState(0);\n  const [flipH, setFlipH] = useState(false);\n  const [flipV, setFlipV] = useState(false);\n  const [filters, setFilters] = useState<ImageFilters>({\n    brightness: 100,\n    contrast: 100,\n    saturation: 100,\n  });\n  const [activeTab, setActiveTab] = useState<'adjust' | 'filters'>('adjust');\n  const [isSaving, setIsSaving] = useState(false);\n\n  // Preset filters\n  const presetFilters = [\n    { name: 'Original', brightness: 100, contrast: 100, saturation: 100 },\n    { name: 'Vivid', brightness: 105, contrast: 115, saturation: 130 },\n    { name: 'Warm', brightness: 105, contrast: 100, saturation: 110 },\n    { name: 'Cool', brightness: 100, contrast: 105, saturation: 90 },\n    { name: 'B&W', brightness: 100, contrast: 110, saturation: 0 },\n    { name: 'Vintage', brightness: 95, contrast: 90, saturation: 80 },\n    { name: 'Drama', brightness: 90, contrast: 130, saturation: 110 },\n    { name: 'Fade', brightness: 110, contrast: 85, saturation: 90 },\n  ];\n\n  // Load image when URL changes\n  useEffect(() => {\n    if (!imageUrl) return;\n    \n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.onload = () => {\n      setImage(img);\n    };\n    img.src = imageUrl;\n  }, [imageUrl]);\n\n  // Draw image on canvas with transformations\n  useEffect(() => {\n    if (!image || !canvasRef.current) return;\n\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Calculate dimensions based on rotation\n    const isRotated90or270 = rotation === 90 || rotation === 270;\n    const displayWidth = isRotated90or270 ? image.height : image.width;\n    const displayHeight = isRotated90or270 ? image.width : image.height;\n\n    // Set canvas size\n    const maxWidth = 600;\n    const maxHeight = 500;\n    const scale = Math.min(maxWidth / displayWidth, maxHeight / displayHeight, 1);\n    \n    canvas.width = displayWidth * scale;\n    canvas.height = displayHeight * scale;\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Apply transformations\n    ctx.save();\n    ctx.translate(canvas.width / 2, canvas.height / 2);\n    ctx.rotate((rotation * Math.PI) / 180);\n    ctx.scale(flipH ? -1 : 1, flipV ? -1 : 1);\n\n    // Apply filters\n    ctx.filter = `brightness(${filters.brightness}%) contrast(${filters.contrast}%) saturate(${filters.saturation}%)`;\n\n    // Draw image centered\n    const drawWidth = image.width * scale;\n    const drawHeight = image.height * scale;\n    ctx.drawImage(image, -drawWidth / 2, -drawHeight / 2, drawWidth, drawHeight);\n\n    ctx.restore();\n  }, [image, rotation, flipH, flipV, filters]);\n\n  const handleRotateRight = () => {\n    setRotation((prev) => (prev + 90) % 360);\n  };\n\n  const handleRotateLeft = () => {\n    setRotation((prev) => (prev - 90 + 360) % 360);\n  };\n\n  const handleFlipHorizontal = () => {\n    setFlipH((prev) => !prev);\n  };\n\n  const handleFlipVertical = () => {\n    setFlipV((prev) => !prev);\n  };\n\n  const handleReset = () => {\n    setRotation(0);\n    setFlipH(false);\n    setFlipV(false);\n    setFilters({ brightness: 100, contrast: 100, saturation: 100 });\n  };\n\n  const handleSave = async () => {\n    if (!canvasRef.current || !image) return;\n    \n    setIsSaving(true);\n    \n    try {\n      // Create a full-resolution canvas for export\n      const exportCanvas = document.createElement('canvas');\n      const ctx = exportCanvas.getContext('2d');\n      if (!ctx) return;\n\n      const isRotated90or270 = rotation === 90 || rotation === 270;\n      exportCanvas.width = isRotated90or270 ? image.height : image.width;\n      exportCanvas.height = isRotated90or270 ? image.width : image.height;\n\n      ctx.translate(exportCanvas.width / 2, exportCanvas.height / 2);\n      ctx.rotate((rotation * Math.PI) / 180);\n      ctx.scale(flipH ? -1 : 1, flipV ? -1 : 1);\n      ctx.filter = `brightness(${filters.brightness}%) contrast(${filters.contrast}%) saturate(${filters.saturation}%)`;\n      ctx.drawImage(image, -image.width / 2, -image.height / 2);\n\n      exportCanvas.toBlob((blob) => {\n        if (blob) {\n          onSave(blob);\n        }\n        setIsSaving(false);\n      }, 'image/jpeg', 0.9);\n    } catch (error) {\n      console.error('Error saving image:', error);\n      setIsSaving(false);\n    }\n  };\n\n  const applyPresetFilter = (preset: typeof presetFilters[0]) => {\n    setFilters({\n      brightness: preset.brightness,\n      contrast: preset.contrast,\n      saturation: preset.saturation,\n    });\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-[60] flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.8)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-3xl max-h-[90vh] overflow-hidden rounded-2xl\"\n            style={{\n              background: '#1a1a1a',\n            }}\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-700\">\n              <h2 className=\"text-lg font-semibold text-white\">Edit Image</h2>\n              <div className=\"flex items-center gap-2\">\n                <button\n                  onClick={handleReset}\n                  className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors\"\n                >\n                  <Undo2 className=\"w-4 h-4\" />\n                  Reset\n                </button>\n                <button\n                  onClick={onClose}\n                  className=\"p-2 rounded-full hover:bg-gray-700 transition-colors\"\n                >\n                  <X className=\"w-5 h-5 text-gray-300\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Canvas Preview */}\n            <div className=\"flex items-center justify-center p-6 bg-gray-900 min-h-[350px]\">\n              <canvas\n                ref={canvasRef}\n                className=\"max-w-full max-h-[350px] rounded-lg\"\n                style={{ boxShadow: '0 4px 20px rgba(0,0,0,0.5)' }}\n              />\n            </div>\n\n            {/* Transform Tools */}\n            <div className=\"flex items-center justify-center gap-4 p-4 border-t border-gray-700\">\n              <button\n                onClick={handleRotateLeft}\n                className=\"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                <RotateCcw className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Rotate Left</span>\n              </button>\n              <button\n                onClick={handleRotateRight}\n                className=\"flex flex-col items-center gap-1 p-3 rounded-lg hover:bg-gray-700 transition-colors\"\n              >\n                <RotateCw className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Rotate Right</span>\n              </button>\n              <button\n                onClick={handleFlipHorizontal}\n                className={`flex flex-col items-center gap-1 p-3 rounded-lg transition-colors ${\n                  flipH ? 'bg-blue-600' : 'hover:bg-gray-700'\n                }`}\n              >\n                <FlipHorizontal className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Flip H</span>\n              </button>\n              <button\n                onClick={handleFlipVertical}\n                className={`flex flex-col items-center gap-1 p-3 rounded-lg transition-colors ${\n                  flipV ? 'bg-blue-600' : 'hover:bg-gray-700'\n                }`}\n              >\n                <FlipVertical className=\"w-5 h-5 text-gray-300\" />\n                <span className=\"text-xs text-gray-400\">Flip V</span>\n              </button>\n            </div>\n\n            {/* Tabs */}\n            <div className=\"flex border-t border-gray-700\">\n              <button\n                onClick={() => setActiveTab('adjust')}\n                className={`flex-1 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'adjust'\n                    ? 'text-blue-400 border-b-2 border-blue-400'\n                    : 'text-gray-400 hover:text-gray-200'\n                }`}\n              >\n                Adjust\n              </button>\n              <button\n                onClick={() => setActiveTab('filters')}\n                className={`flex-1 py-3 text-sm font-medium transition-colors ${\n                  activeTab === 'filters'\n                    ? 'text-blue-400 border-b-2 border-blue-400'\n                    : 'text-gray-400 hover:text-gray-200'\n                }`}\n              >\n                Filters\n              </button>\n            </div>\n\n            {/* Adjustment Controls */}\n            {activeTab === 'adjust' && (\n              <div className=\"p-4 space-y-4\">\n                {/* Brightness */}\n                <div className=\"flex items-center gap-4\">\n                  <Sun className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Brightness</span>\n                      <span className=\"text-xs text-gray-400\">{filters.brightness}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"50\"\n                      max=\"150\"\n                      value={filters.brightness}\n                      onChange={(e) => setFilters({ ...filters, brightness: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n\n                {/* Contrast */}\n                <div className=\"flex items-center gap-4\">\n                  <Contrast className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Contrast</span>\n                      <span className=\"text-xs text-gray-400\">{filters.contrast}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"50\"\n                      max=\"150\"\n                      value={filters.contrast}\n                      onChange={(e) => setFilters({ ...filters, contrast: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n\n                {/* Saturation */}\n                <div className=\"flex items-center gap-4\">\n                  <Droplets className=\"w-5 h-5 text-gray-400\" />\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between mb-1\">\n                      <span className=\"text-xs text-gray-400\">Saturation</span>\n                      <span className=\"text-xs text-gray-400\">{filters.saturation}%</span>\n                    </div>\n                    <input\n                      type=\"range\"\n                      min=\"0\"\n                      max=\"200\"\n                      value={filters.saturation}\n                      onChange={(e) => setFilters({ ...filters, saturation: Number(e.target.value) })}\n                      className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Filter Presets */}\n            {activeTab === 'filters' && (\n              <div className=\"p-4\">\n                <div className=\"grid grid-cols-4 gap-2\">\n                  {presetFilters.map((preset) => (\n                    <button\n                      key={preset.name}\n                      onClick={() => applyPresetFilter(preset)}\n                      className={`p-2 rounded-lg text-center transition-all ${\n                        filters.brightness === preset.brightness &&\n                        filters.contrast === preset.contrast &&\n                        filters.saturation === preset.saturation\n                          ? 'bg-blue-600 ring-2 ring-blue-400'\n                          : 'bg-gray-700 hover:bg-gray-600'\n                      }`}\n                    >\n                      <div \n                        className=\"w-full aspect-square rounded-lg mb-1 bg-gray-600\"\n                        style={{\n                          filter: `brightness(${preset.brightness}%) contrast(${preset.contrast}%) saturate(${preset.saturation}%)`,\n                          backgroundImage: image ? `url(${imageUrl})` : undefined,\n                          backgroundSize: 'cover',\n                          backgroundPosition: 'center',\n                        }}\n                      />\n                      <span className=\"text-xs text-gray-300\">{preset.name}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Footer */}\n            <div className=\"flex justify-end gap-3 p-4 border-t border-gray-700\">\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2 rounded-lg text-gray-300 hover:bg-gray-700 transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSave}\n                disabled={isSaving}\n                className=\"flex items-center gap-2 px-6 py-2 rounded-lg bg-blue-600 text-white font-medium hover:bg-blue-700 transition-colors disabled:opacity-50\"\n              >\n                {isSaving ? (\n                  <>Saving...</>\n                ) : (\n                  <>\n                    <Check className=\"w-4 h-4\" />\n                    Apply Changes\n                  </>\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5357, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/CreatePostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  FileText,\n  Link as LinkIcon,\n  BarChart3,\n  Sparkles,\n  Trophy,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Plus,\n  Trash2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { createPost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport { ImageEditor } from './ImageEditor';\nimport type { PostType, PostVisibility, CelebrationType, MentionUser } from '@/types/post';\n\ninterface CreatePostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onPostCreated?: () => void;\n}\n\nconst POST_TYPES = [\n  { type: 'TEXT' as PostType, icon: FileText, label: 'Text' },\n  { type: 'IMAGE' as PostType, icon: ImageIcon, label: 'Image' },\n  { type: 'VIDEO' as PostType, icon: Video, label: 'Video' },\n  { type: 'LINK' as PostType, icon: LinkIcon, label: 'Link' },\n  { type: 'POLL' as PostType, icon: BarChart3, label: 'Poll' },\n  { type: 'ARTICLE' as PostType, icon: Sparkles, label: 'Article' },\n  { type: 'CELEBRATION' as PostType, icon: Trophy, label: 'Celebration' },\n];\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst CELEBRATION_TYPES: { value: CelebrationType; label: string; emoji: string }[] = [\n  { value: 'NEW_JOB', label: 'Started a new job', emoji: '' },\n  { value: 'PROMOTION', label: 'Got promoted', emoji: '' },\n  { value: 'GRADUATION', label: 'Graduated', emoji: '' },\n  { value: 'CERTIFICATION', label: 'Earned a certification', emoji: '' },\n  { value: 'WORK_ANNIVERSARY', label: 'Work anniversary', emoji: '' },\n  { value: 'BIRTHDAY', label: 'Birthday', emoji: '' },\n];\n\nexport function CreatePostModal({ isOpen, onClose, onPostCreated }: CreatePostModalProps) {\n  const { user } = useAuth();\n  const [postType, setPostType] = useState<PostType>('TEXT');\n  const [content, setContent] = useState('');\n  const [visibility, setVisibility] = useState<PostVisibility>('PUBLIC');\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Image state\n  const [images, setImages] = useState<File[]>([]);\n  const [imagePreviews, setImagePreviews] = useState<string[]>([]);\n  const [editingImageIndex, setEditingImageIndex] = useState<number | null>(null);\n  \n  // Video state\n  const [video, setVideo] = useState<File | null>(null);\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\n  \n  // Link state\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkPreview, setLinkPreview] = useState<any>(null);\n  const [fetchingLinkPreview, setFetchingLinkPreview] = useState(false);\n  \n  // Poll state\n  const [pollOptions, setPollOptions] = useState<string[]>(['', '']);\n  const [pollDuration, setPollDuration] = useState(24); // hours\n  const [showResultsBeforeVote, setShowResultsBeforeVote] = useState(false);\n  \n  // Article state\n  const [articleTitle, setArticleTitle] = useState('');\n  const [articleCoverImage, setArticleCoverImage] = useState<File | null>(null);\n  const [articleCoverPreview, setArticleCoverPreview] = useState<string | null>(null);\n  const [articleTags, setArticleTags] = useState<string[]>([]);\n  const [tagInput, setTagInput] = useState('');\n  \n  // Celebration state\n  const [celebrationType, setCelebrationType] = useState<CelebrationType | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoInputRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Reset form when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      resetForm();\n    }\n  }, [isOpen]);\n\n  const resetForm = () => {\n    setPostType('TEXT');\n    setContent('');\n    setVisibility('PUBLIC');\n    setImages([]);\n    setImagePreviews([]);\n    setVideo(null);\n    setVideoPreview(null);\n    setLinkUrl('');\n    setLinkPreview(null);\n    setPollOptions(['', '']);\n    setPollDuration(24);\n    setShowResultsBeforeVote(false);\n    setArticleTitle('');\n    setArticleCoverImage(null);\n    setArticleCoverPreview(null);\n    setArticleTags([]);\n    setCelebrationType(null);\n    setMentions([]);\n    setError(null);\n  };\n\n  // Handle image selection\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (images.length + files.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    const validFiles = files.filter(file => {\n      if (file.size > 10 * 1024 * 1024) {\n        setError('Image size must be under 10MB');\n        return false;\n      }\n      return true;\n    });\n    \n    setImages(prev => [...prev, ...validFiles]);\n    \n    validFiles.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreviews(prev => [...prev, e.target?.result as string]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // Handle video selection\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    if (file.size > 500 * 1024 * 1024) {\n      setError('Video size must be under 500MB');\n      return;\n    }\n    \n    setVideo(file);\n    setVideoPreview(URL.createObjectURL(file));\n  };\n\n  // Remove image\n  const removeImage = (index: number) => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Handle edited image save\n  const handleEditedImageSave = (blob: Blob) => {\n    if (editingImageIndex === null) return;\n    \n    // Create a new File from the blob\n    const editedFile = new File([blob], images[editingImageIndex].name, { type: 'image/jpeg' });\n    \n    // Update the images array\n    setImages(prev => {\n      const newImages = [...prev];\n      newImages[editingImageIndex] = editedFile;\n      return newImages;\n    });\n    \n    // Update the preview\n    const newPreviewUrl = URL.createObjectURL(blob);\n    setImagePreviews(prev => {\n      const newPreviews = [...prev];\n      newPreviews[editingImageIndex] = newPreviewUrl;\n      return newPreviews;\n    });\n    \n    setEditingImageIndex(null);\n  };\n\n  // Handle poll option change\n  const handlePollOptionChange = (index: number, value: string) => {\n    const newOptions = [...pollOptions];\n    newOptions[index] = value;\n    setPollOptions(newOptions);\n  };\n\n  // Add poll option\n  const addPollOption = () => {\n    if (pollOptions.length < 6) {\n      setPollOptions([...pollOptions, '']);\n    }\n  };\n\n  // Remove poll option\n  const removePollOption = (index: number) => {\n    if (pollOptions.length > 2) {\n      setPollOptions(pollOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  // Handle article tag add\n  const handleAddTag = () => {\n    if (tagInput.trim() && articleTags.length < 5) {\n      setArticleTags([...articleTags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  // Search for mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (err) {\n      console.error('Error searching mentions:', err);\n    }\n  }, []);\n\n  // Handle content change with mention detection\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : textAfterAt.slice(0, spaceIndex);\n      \n      if (query && !textAfterAt.includes(' ')) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (user: MentionUser) => {\n    const lastAtIndex = content.lastIndexOf('@');\n    const newContent = content.slice(0, lastAtIndex) + `@${user.username} `;\n    setContent(newContent);\n    setMentions([...mentions, user.id]);\n    setShowMentionDropdown(false);\n    contentRef.current?.focus();\n  };\n\n  // Text formatting helper - wraps selected text or inserts at cursor\n  const formatText = (prefix: string, suffix: string = prefix) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      // Wrap selected text\n      newContent = content.slice(0, start) + prefix + selectedText + suffix + content.slice(end);\n      newCursorPos = end + prefix.length + suffix.length;\n    } else {\n      // Insert placeholder at cursor\n      newContent = content.slice(0, start) + prefix + suffix + content.slice(end);\n      newCursorPos = start + prefix.length;\n    }\n\n    setContent(newContent);\n    \n    // Restore focus and cursor position\n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Format bold: **text**\n  const handleBold = () => {\n    formatText('**');\n  };\n\n  // Format italic: *text*\n  const handleItalic = () => {\n    formatText('*');\n  };\n\n  // Format code: `code`\n  const handleCode = () => {\n    formatText('`');\n  };\n\n  // Format list: add \"- \" at start of line\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    \n    // Find the start of the current line\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    // Check if line already starts with \"- \"\n    if (lineContent.startsWith('- ')) {\n      // Remove the list marker\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      // Add the list marker\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Trigger mention search\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  // Color presets for the color picker\n  const COLOR_PRESETS = [\n    { name: 'Red', value: '#ef4444' },\n    { name: 'Orange', value: '#f97316' },\n    { name: 'Yellow', value: '#eab308' },\n    { name: 'Green', value: '#22c55e' },\n    { name: 'Teal', value: '#14b8a6' },\n    { name: 'Blue', value: '#3b82f6' },\n    { name: 'Purple', value: '#a855f7' },\n    { name: 'Pink', value: '#ec4899' },\n  ];\n\n  // Insert color formatting: [color:#hex]text[/color]\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      // Wrap selected text\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      // Insert placeholder and position cursor between tags\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      if (selectedText) {\n        textarea.setSelectionRange(newCursorPos, newCursorPos);\n      } else {\n        textarea.setSelectionRange(newCursorPos, newCursorPos);\n      }\n    }, 0);\n  };\n\n  // Submit post\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const formData = new FormData();\n      formData.append('type', postType);\n      formData.append('visibility', visibility);\n      \n      if (content) {\n        formData.append('content', content);\n      }\n      \n      if (mentions.length > 0) {\n        formData.append('mentions', JSON.stringify(mentions));\n      }\n      \n      switch (postType) {\n        case 'IMAGE':\n          if (images.length === 0) {\n            setError('Please add at least one image');\n            setIsSubmitting(false);\n            return;\n          }\n          images.forEach((img) => {\n            formData.append('media', img);\n          });\n          break;\n          \n        case 'VIDEO':\n          if (!video) {\n            setError('Please add a video');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('video', video);\n          break;\n          \n        case 'LINK':\n          if (!linkUrl) {\n            setError('Please add a link');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('linkUrl', linkUrl);\n          break;\n          \n        case 'POLL':\n          const validOptions = pollOptions.filter(opt => opt.trim());\n          if (validOptions.length < 2) {\n            setError('Please add at least 2 poll options');\n            setIsSubmitting(false);\n            return;\n          }\n          validOptions.forEach((option) => {\n            formData.append('pollOptions', option);\n          });\n          formData.append('pollDuration', String(pollDuration));\n          break;\n          \n        case 'ARTICLE':\n          if (!articleTitle) {\n            setError('Please add an article title');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('articleTitle', articleTitle);\n          if (articleCoverImage) {\n            formData.append('articleCoverImage', articleCoverImage);\n          }\n          if (articleTags.length > 0) {\n            articleTags.forEach((tag) => {\n              formData.append('articleTags', tag);\n            });\n          }\n          break;\n          \n        case 'CELEBRATION':\n          if (!celebrationType) {\n            setError('Please select a celebration type');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('celebrationType', celebrationType);\n          break;\n          \n        case 'TEXT':\n        default:\n          if (!content.trim()) {\n            setError('Please add some content');\n            setIsSubmitting(false);\n            return;\n          }\n          break;\n      }\n      \n      await createPost(formData);\n      onPostCreated?.();\n      onClose();\n    } catch (err: any) {\n      console.error('Error creating post:', err);\n      setError(err.response?.data?.error || 'Failed to create post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" />\n        \n        {/* Modal */}\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0, y: 20 }}\n          animate={{ scale: 1, opacity: 1, y: 0 }}\n          exit={{ scale: 0.9, opacity: 0, y: 20 }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full max-w-3xl max-h-[85vh] flex flex-col\"\n          style={{\n            background: '#ecf0f3',\n            borderRadius: '24px',\n            boxShadow: '10px 10px 20px #d1d9e6, -10px -10px 20px #f9f9f9',\n          }}\n        >\n          {/* Header */}\n          <div \n            className=\"flex items-center justify-between p-5 border-b flex-shrink-0\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <h2 className=\"text-2xl font-bold text-gray-800\">Create Post</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2.5 rounded-full transition-all hover:scale-105\"\n              style={{\n                background: '#ecf0f3',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              <X className=\"w-6 h-6 text-gray-600\" />\n            </button>\n          </div>\n          \n          {/* User Info */}\n          <div className=\"flex items-center gap-4 p-5 flex-shrink-0\">\n            <div \n              className=\"w-14 h-14 rounded-full overflow-hidden\"\n              style={{\n                boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {user?.profileImage ? (\n                <img \n                  src={user.profileImage} \n                  alt={user.name} \n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-bold\">\n                  {user?.name?.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n              {/* Visibility Dropdown */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                  className=\"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n                >\n                  {(() => {\n                    const opt = VISIBILITY_OPTIONS.find(o => o.value === visibility);\n                    const Icon = opt?.icon || Globe;\n                    return (\n                      <>\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{opt?.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </>\n                    );\n                  })()}\n                </button>\n                \n                {showVisibilityDropdown && (\n                  <div \n                    className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-10\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => {\n                          setVisibility(opt.value);\n                          setShowVisibilityDropdown(false);\n                        }}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors\"\n                      >\n                        <opt.icon className=\"w-4 h-4\" />\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Post Type Tabs */}\n          <div \n            className=\"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide flex-shrink-0\"\n            style={{ scrollbarWidth: 'none' }}\n          >\n            {POST_TYPES.map(({ type, icon: Icon, label }) => (\n              <button\n                key={type}\n                onClick={() => setPostType(type)}\n                className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${\n                  postType === type ? 'text-blue-600' : 'text-gray-600 hover:text-gray-800'\n                }`}\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: postType === type \n                    ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                    : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {label}\n              </button>\n            ))}\n          </div>\n          \n          {/* Content Area */}\n          <div className=\"flex-1 p-5 overflow-y-auto\">\n            {/* Error Message */}\n            {error && (\n              <div className=\"mb-4 p-3 rounded-lg bg-red-100 text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Rich Text Editor Area */}\n            <div className=\"relative\">\n              {/* Formatting Toolbar */}\n              <div \n                className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                }}\n              >\n                <button \n                  type=\"button\"\n                  onClick={handleBold}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Bold (**text**)\"\n                >\n                  <Bold className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleItalic}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Italic (*text*)\"\n                >\n                  <Italic className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleList}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Bullet List\"\n                >\n                  <List className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button \n                  type=\"button\"\n                  onClick={handleCode}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Code (`code`)\"\n                >\n                  <Code className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                <button \n                  type=\"button\"\n                  onClick={handleMentionClick}\n                  className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                  title=\"Mention someone (@)\"\n                >\n                  <AtSign className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"relative\" ref={colorPickerRef}>\n                  <button \n                    type=\"button\"\n                    onClick={() => setShowColorPicker(!showColorPicker)}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Text Color\"\n                  >\n                    <Palette className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  {/* Color Picker Dropdown */}\n                  {showColorPicker && (\n                    <div \n                      className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                      }}\n                    >\n                      <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                      <div className=\"grid grid-cols-4 gap-2\">\n                        {COLOR_PRESETS.map((color) => (\n                          <button\n                            key={color.value}\n                            type=\"button\"\n                            onClick={() => handleColorInsert(color.value)}\n                            className=\"group flex flex-col items-center gap-1\"\n                          >\n                            <div \n                              className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                              style={{ backgroundColor: color.value }}\n                            />\n                            <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n              \n              {/* Content Textarea */}\n              <div className=\"relative\">\n                <textarea\n                  ref={contentRef}\n                  value={content}\n                  onChange={handleContentChange}\n                  placeholder=\"What do you want to share?\"\n                  className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                    fontFamily: \"'Montserrat', sans-serif\",\n                  }}\n                />\n                \n                {/* Mention Dropdown */}\n                {showMentionDropdown && (\n                  <div \n                    className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {mentionResults.map((user) => (\n                      <button\n                        key={user.id}\n                        onClick={() => insertMention(user)}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                      >\n                        <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                          {user.profileImage && (\n                            <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                          )}\n                        </div>\n                        <div className=\"text-left\">\n                          <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                          <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Post Type Specific Content */}\n            {postType === 'IMAGE' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleImageSelect}\n                  className=\"hidden\"\n                />\n                \n                {imagePreviews.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {imagePreviews.map((preview, index) => (\n                      <div key={index} className=\"relative rounded-xl overflow-hidden bg-gray-100\">\n                        <img \n                          src={preview} \n                          alt=\"\" \n                          className=\"w-full max-h-[400px] object-contain mx-auto\"\n                          style={{ display: 'block' }}\n                        />\n                        <div className=\"absolute top-2 right-2 flex gap-2\">\n                          <button\n                            onClick={() => setEditingImageIndex(index)}\n                            className=\"p-2 rounded-full bg-blue-500 text-white hover:bg-blue-600 transition-colors shadow-lg\"\n                            title=\"Edit image\"\n                          >\n                            <Pencil className=\"w-4 h-4\" />\n                          </button>\n                          <button\n                            onClick={() => removeImage(index)}\n                            className=\"p-2 rounded-full bg-red-500 text-white hover:bg-red-600 transition-colors shadow-lg\"\n                            title=\"Remove image\"\n                          >\n                            <X className=\"w-4 h-4\" />\n                          </button>\n                        </div>\n                        <div className=\"absolute bottom-2 left-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n                          {index + 1} / {imagePreviews.length}\n                        </div>\n                      </div>\n                    ))}\n                    {images.length < 10 && (\n                      <button\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"w-full py-8 rounded-xl flex items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                        }}\n                      >\n                        <Plus className=\"w-6 h-6 text-gray-400\" />\n                        <span className=\"text-gray-500\">Add more images</span>\n                      </button>\n                    )}\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <ImageIcon className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add images (max 10)</span>\n                    <span className=\"text-xs text-gray-400\">Up to 10MB each</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'VIDEO' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={videoInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleVideoSelect}\n                  className=\"hidden\"\n                />\n                \n                {videoPreview ? (\n                  <div className=\"relative rounded-xl overflow-hidden\">\n                    <video src={videoPreview} controls className=\"w-full max-h-64 object-contain bg-black\" />\n                    <button\n                      onClick={() => {\n                        setVideo(null);\n                        setVideoPreview(null);\n                      }}\n                      className=\"absolute top-2 right-2 p-2 rounded-full bg-red-500 text-white\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => videoInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <Video className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add video</span>\n                    <span className=\"text-xs text-gray-400\">Up to 500MB</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'LINK' && (\n              <div className=\"mt-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://example.com\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                  />\n                </div>\n                \n                {linkPreview && (\n                  <div className=\"mt-4 rounded-xl overflow-hidden\" style={{ boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9' }}>\n                    {linkPreview.image && (\n                      <img src={linkPreview.image} alt=\"\" className=\"w-full h-40 object-cover\" />\n                    )}\n                    <div className=\"p-3 bg-white/50\">\n                      <p className=\"font-semibold text-gray-800\">{linkPreview.title}</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">{linkPreview.description}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">{linkPreview.domain}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {postType === 'POLL' && (\n              <div className=\"mt-4 space-y-3\">\n                {pollOptions.map((option, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <div\n                      className=\"flex-1 rounded-xl p-3\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      <input\n                        type=\"text\"\n                        value={option}\n                        onChange={(e) => handlePollOptionChange(index, e.target.value)}\n                        placeholder={`Option ${index + 1}`}\n                        className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                      />\n                    </div>\n                    {pollOptions.length > 2 && (\n                      <button\n                        onClick={() => removePollOption(index)}\n                        className=\"p-2 rounded-full text-red-500 hover:bg-red-50 transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    )}\n                  </div>\n                ))}\n                \n                {pollOptions.length < 6 && (\n                  <button\n                    onClick={addPollOption}\n                    className=\"flex items-center gap-2 text-blue-600 text-sm font-medium hover:text-blue-700 transition-colors\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Add option\n                  </button>\n                )}\n                \n                <div className=\"flex items-center gap-4 pt-4 border-t\" style={{ borderColor: '#d1d9e6' }}>\n                  <div className=\"flex-1\">\n                    <label className=\"text-sm text-gray-600\">Poll duration</label>\n                    <select\n                      value={pollDuration}\n                      onChange={(e) => setPollDuration(Number(e.target.value))}\n                      className=\"w-full mt-1 p-2 rounded-lg bg-transparent text-gray-800 outline-none\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                      }}\n                    >\n                      <option value={1}>1 hour</option>\n                      <option value={6}>6 hours</option>\n                      <option value={12}>12 hours</option>\n                      <option value={24}>1 day</option>\n                      <option value={72}>3 days</option>\n                      <option value={168}>1 week</option>\n                    </select>\n                  </div>\n                  \n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={showResultsBeforeVote}\n                      onChange={(e) => setShowResultsBeforeVote(e.target.checked)}\n                      className=\"w-4 h-4 rounded\"\n                    />\n                    <span className=\"text-sm text-gray-600\">Show results before voting</span>\n                  </label>\n                </div>\n              </div>\n            )}\n            \n            {postType === 'ARTICLE' && (\n              <div className=\"mt-4 space-y-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    value={articleTitle}\n                    onChange={(e) => setArticleTitle(e.target.value)}\n                    placeholder=\"Article title\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400 text-lg font-semibold\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  {articleTags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700\"\n                    >\n                      {tag}\n                      <button onClick={() => setArticleTags(tags => tags.filter((_, i) => i !== index))}>\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </span>\n                  ))}\n                  {articleTags.length < 5 && (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                        placeholder=\"Add tag\"\n                        className=\"px-3 py-1 rounded-full text-sm bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                        style={{\n                          boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {postType === 'CELEBRATION' && (\n              <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                {CELEBRATION_TYPES.map(({ value, label, emoji }) => (\n                  <button\n                    key={value}\n                    onClick={() => setCelebrationType(value)}\n                    className={`p-4 rounded-xl text-left transition-all ${\n                      celebrationType === value ? 'ring-2 ring-blue-500' : ''\n                    }`}\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: celebrationType === value\n                        ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                        : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <span className=\"text-2xl\">{emoji}</span>\n                    <p className=\"mt-2 text-sm font-medium text-gray-800\">{label}</p>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Footer */}\n          <div \n            className=\"flex items-center justify-between p-5 border-t flex-shrink-0\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <div className=\"flex items-center gap-3\">\n              {/* Quick add buttons */}\n              <button\n                onClick={() => setPostType('IMAGE')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add image\"\n              >\n                <ImageIcon className=\"w-6 h-6 text-green-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('VIDEO')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add video\"\n              >\n                <Video className=\"w-6 h-6 text-purple-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('POLL')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Create poll\"\n              >\n                <BarChart3 className=\"w-6 h-6 text-orange-600\" />\n              </button>\n            </div>\n            \n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"px-8 py-2.5 rounded-full font-semibold text-white transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-base\"\n              style={{\n                background: 'linear-gradient(145deg, #4B70E2, #3a5bc7)',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              ) : (\n                'Post'\n              )}\n            </button>\n          </div>\n        </motion.div>\n      </motion.div>\n\n      {/* Image Editor Modal */}\n      {editingImageIndex !== null && (\n        <ImageEditor\n          isOpen={editingImageIndex !== null}\n          imageUrl={imagePreviews[editingImageIndex]}\n          onClose={() => setEditingImageIndex(null)}\n          onSave={handleEditedImageSave}\n        />\n      )}\n    </AnimatePresence>\n  );\n}\n\nexport default CreatePostModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7316, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryCarousel.tsx"],"sourcesContent":["'use client';\n\nimport React, { useRef, useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Plus, ChevronLeft, ChevronRight } from 'lucide-react';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { getStoriesFeed, type StoryGroup, type Story } from '@/lib/api/stories';\nimport { getSocket } from '@/lib/socket';\n\ninterface StoryCarouselProps {\n  onOpenStory: (group: StoryGroup, startIndex?: number) => void;\n  onCreateStory: () => void;\n}\n\nexport function StoryCarousel({ onOpenStory, onCreateStory }: StoryCarouselProps) {\n  const { user, loading: authLoading } = useAuth();\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const [storyGroups, setStoryGroups] = useState<StoryGroup[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(false);\n\n  // Fetch stories on mount (only after auth is ready)\n  const fetchStories = useCallback(async () => {\n    if (authLoading) return; // Wait for auth to complete\n    \n    try {\n      const response = await getStoriesFeed();\n      console.log(' Stories feed response:', response);\n      setStoryGroups(response?.storyGroups || []);\n    } catch (error: any) {\n      console.error('Error fetching stories:', error);\n      // Don't clear stories on 401 - user might just need to re-auth\n      if (error?.response?.status !== 401) {\n        setStoryGroups([]);\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [authLoading]);\n\n  useEffect(() => {\n    if (!authLoading) {\n      fetchStories();\n    }\n  }, [authLoading, fetchStories]);\n\n  // Listen for real-time story updates\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    // Handle new story created\n    const handleStoryCreated = (data: { story: Story; author: any; timestamp: Date }) => {\n      console.log(' Real-time: New story received', data);\n      \n      setStoryGroups(prev => {\n        // Check if author already has stories\n        const existingGroupIndex = prev.findIndex(g => g.user.id === data.author.id);\n        \n        if (existingGroupIndex >= 0) {\n          // Add story to existing group\n          const updated = [...prev];\n          updated[existingGroupIndex] = {\n            ...updated[existingGroupIndex],\n            stories: [data.story, ...updated[existingGroupIndex].stories],\n            hasUnviewed: true,\n            lastStoryAt: data.story.createdAt,\n          };\n          return updated;\n        } else {\n          // Create new group for this author\n          const newGroup: StoryGroup = {\n            user: data.author,\n            stories: [data.story],\n            hasUnviewed: true,\n            lastStoryAt: data.story.createdAt,\n            isOwnStory: data.author.id === user?.id,\n          };\n          \n          // Add at beginning (after own stories if exists)\n          const ownGroupIndex = prev.findIndex(g => g.isOwnStory);\n          if (newGroup.isOwnStory) {\n            return [newGroup, ...prev.filter(g => !g.isOwnStory)];\n          } else if (ownGroupIndex >= 0) {\n            return [prev[ownGroupIndex], newGroup, ...prev.filter((g, i) => !g.isOwnStory && i !== ownGroupIndex)];\n          }\n          return [newGroup, ...prev];\n        }\n      });\n    };\n\n    // Handle story deleted\n    const handleStoryDeleted = (data: { storyId: string; authorId: string; timestamp: Date }) => {\n      console.log(' Real-time: Story deleted', data);\n      \n      setStoryGroups(prev => {\n        return prev.map(group => {\n          if (group.user.id === data.authorId) {\n            const filteredStories = group.stories.filter(s => s.id !== data.storyId);\n            if (filteredStories.length === 0) {\n              return null; // Remove group entirely\n            }\n            return {\n              ...group,\n              stories: filteredStories,\n            };\n          }\n          return group;\n        }).filter(Boolean) as StoryGroup[];\n      });\n    };\n\n    socket.on('story:created', handleStoryCreated);\n    socket.on('story:deleted', handleStoryDeleted);\n\n    return () => {\n      socket.off('story:created', handleStoryCreated);\n      socket.off('story:deleted', handleStoryDeleted);\n    };\n  }, [user?.id]);\n\n  useEffect(() => {\n    const checkScroll = () => {\n      if (scrollRef.current) {\n        const { scrollLeft, scrollWidth, clientWidth } = scrollRef.current;\n        setCanScrollLeft(scrollLeft > 0);\n        setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 10);\n      }\n    };\n\n    checkScroll();\n    scrollRef.current?.addEventListener('scroll', checkScroll);\n    window.addEventListener('resize', checkScroll);\n\n    return () => {\n      scrollRef.current?.removeEventListener('scroll', checkScroll);\n      window.removeEventListener('resize', checkScroll);\n    };\n  }, [storyGroups]);\n\n  const scroll = (direction: 'left' | 'right') => {\n    if (scrollRef.current) {\n      const scrollAmount = direction === 'left' ? -300 : 300;\n      scrollRef.current.scrollBy({ left: scrollAmount, behavior: 'smooth' });\n    }\n  };\n\n  const ownStoryGroup = storyGroups.find(g => g.isOwnStory);\n  const otherStoryGroups = storyGroups.filter(g => !g.isOwnStory);\n\n  // Show loading skeleton while auth is loading or stories are loading\n  if (authLoading || loading) {\n    return (\n      <div className=\"w-full py-4 px-4\">\n        <div className=\"flex gap-3 overflow-hidden\">\n          {/* Skeleton for create story */}\n          <div className=\"flex-shrink-0 w-28 h-40 bg-gray-200 dark:bg-neutral-800 rounded-2xl animate-pulse\" />\n          {/* Skeletons for stories */}\n          {[...Array(4)].map((_, i) => (\n            <div\n              key={i}\n              className=\"flex-shrink-0 w-28 h-40 bg-gray-200 dark:bg-neutral-800 rounded-2xl animate-pulse\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"relative w-full py-4 group\">\n      {/* Left Scroll Button */}\n      <AnimatePresence>\n        {canScrollLeft && (\n          <motion.button\n            initial={{ opacity: 0, x: 10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: 10 }}\n            onClick={() => scroll('left')}\n            className=\"absolute left-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 bg-white dark:bg-neutral-800 rounded-full shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n          >\n            <ChevronLeft className=\"w-5 h-5 text-gray-700 dark:text-neutral-300\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Right Scroll Button */}\n      <AnimatePresence>\n        {canScrollRight && (\n          <motion.button\n            initial={{ opacity: 0, x: -10 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -10 }}\n            onClick={() => scroll('right')}\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 z-20 w-10 h-10 bg-white dark:bg-neutral-800 rounded-full shadow-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\"\n          >\n            <ChevronRight className=\"w-5 h-5 text-gray-700 dark:text-neutral-300\" />\n          </motion.button>\n        )}\n      </AnimatePresence>\n\n      {/* Story Cards */}\n      <div\n        ref={scrollRef}\n        className=\"flex gap-3 overflow-x-auto scrollbar-hide px-4 scroll-smooth\"\n        style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}\n      >\n        {/* Create Story Card */}\n        <motion.button\n          onClick={onCreateStory}\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          className=\"flex-shrink-0 relative w-28 h-40 rounded-2xl overflow-hidden bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 shadow-lg\"\n        >\n          {/* User Avatar Background */}\n          {user?.profileImage ? (\n            <div className=\"absolute inset-0\">\n              <Image\n                src={user.profileImage}\n                alt=\"Your story\"\n                fill\n                className=\"object-cover opacity-30\"\n              />\n              <div className=\"absolute inset-0 bg-gradient-to-b from-transparent via-black/20 to-black/60\" />\n            </div>\n          ) : (\n            <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600\" />\n          )}\n\n          {/* Content */}\n          <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n            <div className=\"w-11 h-11 rounded-full bg-white dark:bg-neutral-900 flex items-center justify-center shadow-lg mb-2\">\n              <Plus className=\"w-6 h-6 text-blue-500\" />\n            </div>\n            <span className=\"text-white text-xs font-semibold text-center px-2\">\n              {ownStoryGroup ? 'Add to Story' : 'Create Story'}\n            </span>\n          </div>\n\n          {/* Glassmorphic overlay */}\n          <div className=\"absolute bottom-0 left-0 right-0 h-12 bg-white/10 backdrop-blur-sm\" />\n        </motion.button>\n\n        {/* Own Story (if exists) */}\n        {ownStoryGroup && (\n          <StoryCard\n            group={ownStoryGroup}\n            onClick={() => onOpenStory(ownStoryGroup)}\n            isOwn\n          />\n        )}\n\n        {/* Other Stories */}\n        {otherStoryGroups.map((group) => (\n          <StoryCard\n            key={group.user.id}\n            group={group}\n            onClick={() => onOpenStory(group)}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface StoryCardProps {\n  group: StoryGroup;\n  onClick: () => void;\n  isOwn?: boolean;\n}\n\nfunction StoryCard({ group, onClick, isOwn }: StoryCardProps) {\n  const { user, stories, hasUnviewed } = group;\n  const latestStory = stories[0];\n\n  return (\n    <motion.button\n      onClick={onClick}\n      whileHover={{ scale: 1.02, y: -2 }}\n      whileTap={{ scale: 0.98 }}\n      className=\"flex-shrink-0 relative w-28 h-40 rounded-2xl overflow-hidden shadow-lg group/card\"\n    >\n      {/* Background Image */}\n      <div className=\"absolute inset-0\">\n        {latestStory.thumbnailUrl || latestStory.mediaUrl ? (\n          <Image\n            src={latestStory.thumbnailUrl || latestStory.mediaUrl}\n            alt={`${user.name}'s story`}\n            fill\n            className=\"object-cover transition-transform duration-300 group-hover/card:scale-105\"\n          />\n        ) : (\n          <div \n            className=\"w-full h-full\"\n            style={{ backgroundColor: latestStory.backgroundColor || '#3B82F6' }}\n          />\n        )}\n        \n        {/* Gradient Overlay */}\n        <div className=\"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/70\" />\n      </div>\n\n      {/* Ring Border - Gradient for unviewed, gray for viewed */}\n      <div \n        className={`absolute inset-0 rounded-2xl transition-all duration-300 ${\n          hasUnviewed\n            ? 'ring-[3px] ring-offset-2 ring-offset-white dark:ring-offset-neutral-950'\n            : 'ring-2 ring-gray-300 dark:ring-neutral-700'\n        }`}\n        style={hasUnviewed ? {\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',\n          WebkitMask: 'linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)',\n          WebkitMaskComposite: 'xor',\n          maskComposite: 'exclude',\n          padding: '3px',\n        } : undefined}\n      />\n\n      {/* Avatar */}\n      <div className=\"absolute top-2 left-2 z-10\">\n        <div className={`w-9 h-9 rounded-full overflow-hidden ring-2 ${\n          hasUnviewed \n            ? 'ring-purple-500 ring-offset-1 ring-offset-black/50' \n            : 'ring-white/50'\n        }`}>\n          {user.profileImage ? (\n            <Image\n              src={user.profileImage}\n              alt={user.name}\n              width={36}\n              height={36}\n              className=\"object-cover\"\n            />\n          ) : (\n            <div className=\"w-full h-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center\">\n              <span className=\"text-white text-xs font-bold\">\n                {user.name.charAt(0).toUpperCase()}\n              </span>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Story Count Badge */}\n      {stories.length > 1 && (\n        <div className=\"absolute top-2 right-2 bg-black/50 backdrop-blur-sm px-1.5 py-0.5 rounded-full\">\n          <span className=\"text-white text-[10px] font-medium\">{stories.length}</span>\n        </div>\n      )}\n\n      {/* Text Content Preview */}\n      {latestStory.textContent && (\n        <div className=\"absolute inset-x-2 top-1/2 -translate-y-1/2 text-center\">\n          <p className=\"text-white text-xs font-medium line-clamp-3 drop-shadow-lg\">\n            {latestStory.textContent}\n          </p>\n        </div>\n      )}\n\n      {/* Bottom Info */}\n      <div className=\"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/80 to-transparent\">\n        <p className=\"text-white text-xs font-semibold truncate\">\n          {isOwn ? 'Your Story' : user.name.split(' ')[0]}\n        </p>\n        {/* Time ago */}\n        <p className=\"text-white/70 text-[10px]\">\n          {formatTimeAgo(new Date(latestStory.createdAt))}\n        </p>\n      </div>\n\n      {/* Category Badge */}\n      {latestStory.category && latestStory.category !== 'GENERAL' && (\n        <div className=\"absolute bottom-10 left-2 right-2\">\n          <span className=\"text-[9px] text-white/80 bg-white/20 backdrop-blur-sm px-1.5 py-0.5 rounded-full\">\n            {formatCategory(latestStory.category)}\n          </span>\n        </div>\n      )}\n    </motion.button>\n  );\n}\n\nfunction formatTimeAgo(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m`;\n  if (hours < 24) return `${hours}h`;\n  return '1d';\n}\n\nfunction formatCategory(category: string): string {\n  const map: Record<string, string> = {\n    DAY_AT_WORK: ' Work',\n    LEARNING: ' Learning',\n    ACHIEVEMENT: ' Achievement',\n    PROJECT: ' Project',\n    EVENT: ' Event',\n    BEHIND_SCENES: ' BTS',\n    TIPS: ' Tips',\n    QNA: ' Q&A',\n  };\n  return map[category] || category;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7922, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryViewer.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence, PanInfo } from 'framer-motion';\nimport {\n  X,\n  ChevronUp,\n  ChevronDown,\n  Eye,\n  Heart,\n  Send,\n  MoreHorizontal,\n  Pause,\n  Play,\n  Volume2,\n  VolumeX,\n  Link2,\n  Trash2,\n  Archive,\n  Share2,\n} from 'lucide-react';\nimport Image from 'next/image';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { getSocket } from '@/lib/socket';\nimport {\n  viewStory,\n  reactToStory,\n  removeReaction,\n  replyToStory,\n  deleteStory,\n  archiveStory,\n  type StoryGroup,\n  type Story,\n} from '@/lib/api/stories';\n\ninterface StoryViewerProps {\n  storyGroups: StoryGroup[];\n  initialGroupIndex: number;\n  initialStoryIndex?: number;\n  onClose: () => void;\n  onStoryEnd?: () => void;\n}\n\nconst REACTIONS = ['', '', '', '', '', ''];\n\nexport function StoryViewer({\n  storyGroups,\n  initialGroupIndex,\n  initialStoryIndex = 0,\n  onClose,\n  onStoryEnd,\n}: StoryViewerProps) {\n  const { user } = useAuth();\n  const [currentGroupIndex, setCurrentGroupIndex] = useState(initialGroupIndex);\n  const [currentStoryIndex, setCurrentStoryIndex] = useState(initialStoryIndex);\n  const [progress, setProgress] = useState(0);\n  const [isPaused, setIsPaused] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [showReactions, setShowReactions] = useState(false);\n  const [showReplyInput, setShowReplyInput] = useState(false);\n  const [replyText, setReplyText] = useState('');\n  const [showMenu, setShowMenu] = useState(false);\n  const [viewStartTime, setViewStartTime] = useState<number>(Date.now());\n  const [selectedReaction, setSelectedReaction] = useState<string | null>(null);\n  \n  const progressIntervalRef = useRef<NodeJS.Timeout | null>(null);\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const currentGroup = storyGroups[currentGroupIndex];\n  const currentStory = currentGroup?.stories[currentStoryIndex];\n  const isOwnStory = currentGroup?.isOwnStory;\n\n  // Mark story as viewed on mount and story change\n  useEffect(() => {\n    if (currentStory && !isOwnStory) {\n      setViewStartTime(Date.now());\n      \n      // Record view via socket for real-time updates\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:view', { storyId: currentStory.id });\n      }\n    }\n  }, [currentStory?.id, isOwnStory]);\n\n  // Record view duration when leaving story\n  const recordView = useCallback(async () => {\n    if (currentStory && !isOwnStory) {\n      const duration = Date.now() - viewStartTime;\n      \n      // Use socket for real-time view tracking\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:view', { storyId: currentStory.id, duration });\n      } else {\n        // Fallback to HTTP\n        try {\n          await viewStory(currentStory.id, duration);\n        } catch (error) {\n          console.error('Error recording view:', error);\n        }\n      }\n    }\n  }, [currentStory, isOwnStory, viewStartTime]);\n\n  // Progress timer\n  useEffect(() => {\n    if (!currentStory || isPaused) return;\n\n    const duration = currentStory.mediaType === 'VIDEO' \n      ? (currentStory.duration || 15000) \n      : (currentStory.duration || 5000);\n\n    const interval = 50; // Update every 50ms for smooth progress\n    const increment = (100 / duration) * interval;\n\n    progressIntervalRef.current = setInterval(() => {\n      setProgress((prev) => {\n        if (prev >= 100) {\n          goToNextStory();\n          return 0;\n        }\n        return prev + increment;\n      });\n    }, interval);\n\n    return () => {\n      if (progressIntervalRef.current) {\n        clearInterval(progressIntervalRef.current);\n      }\n    };\n  }, [currentStory?.id, isPaused]);\n\n  // Reset progress when story changes\n  useEffect(() => {\n    setProgress(0);\n    setSelectedReaction(currentStory?.userReaction || null);\n  }, [currentStory?.id]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      switch (e.key) {\n        case 'ArrowUp':\n        case 'ArrowLeft':\n          goToPreviousStory();\n          break;\n        case 'ArrowDown':\n        case 'ArrowRight':\n          goToNextStory();\n          break;\n        case ' ':\n          e.preventDefault();\n          setIsPaused((prev) => !prev);\n          break;\n        case 'Escape':\n          handleClose();\n          break;\n        case 'm':\n          setIsMuted((prev) => !prev);\n          break;\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  const goToNextStory = useCallback(async () => {\n    await recordView();\n\n    if (currentStoryIndex < currentGroup.stories.length - 1) {\n      setCurrentStoryIndex((prev) => prev + 1);\n    } else if (currentGroupIndex < storyGroups.length - 1) {\n      setCurrentGroupIndex((prev) => prev + 1);\n      setCurrentStoryIndex(0);\n    } else {\n      handleClose();\n      onStoryEnd?.();\n    }\n  }, [currentStoryIndex, currentGroupIndex, currentGroup, storyGroups.length, recordView, onStoryEnd]);\n\n  const goToPreviousStory = useCallback(async () => {\n    await recordView();\n\n    if (currentStoryIndex > 0) {\n      setCurrentStoryIndex((prev) => prev - 1);\n    } else if (currentGroupIndex > 0) {\n      setCurrentGroupIndex((prev) => prev - 1);\n      const prevGroup = storyGroups[currentGroupIndex - 1];\n      setCurrentStoryIndex(prevGroup.stories.length - 1);\n    }\n  }, [currentStoryIndex, currentGroupIndex, storyGroups, recordView]);\n\n  const handleClose = async () => {\n    await recordView();\n    onClose();\n  };\n\n  // Swipe handling for vertical navigation\n  const handleDragEnd = (event: any, info: PanInfo) => {\n    const threshold = 50;\n    const velocity = 500;\n\n    if (info.offset.y < -threshold || info.velocity.y < -velocity) {\n      goToNextStory();\n    } else if (info.offset.y > threshold || info.velocity.y > velocity) {\n      goToPreviousStory();\n    }\n  };\n\n  const handleReaction = async (reaction: string) => {\n    if (!currentStory) return;\n\n    try {\n      if (selectedReaction === reaction) {\n        await removeReaction(currentStory.id);\n        setSelectedReaction(null);\n      } else {\n        await reactToStory(currentStory.id, reaction);\n        setSelectedReaction(reaction);\n      }\n      \n      // Also emit via socket for real-time updates\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:react', { storyId: currentStory.id, reaction });\n      }\n    } catch (error) {\n      console.error('Error reacting to story:', error);\n    }\n    setShowReactions(false);\n  };\n\n  const handleSendReply = async () => {\n    if (!currentStory || !replyText.trim()) return;\n\n    try {\n      // Emit via socket for real-time delivery\n      const socket = getSocket();\n      if (socket) {\n        socket.emit('story:reply', { \n          storyId: currentStory.id, \n          content: replyText.trim() \n        });\n      } else {\n        // Fallback to HTTP\n        await replyToStory(currentStory.id, replyText.trim());\n      }\n      \n      setReplyText('');\n      setShowReplyInput(false);\n      // Show success toast or animation\n    } catch (error) {\n      console.error('Error sending reply:', error);\n    }\n  };\n\n  const handleDeleteStory = async () => {\n    if (!currentStory) return;\n\n    try {\n      await deleteStory(currentStory.id);\n      goToNextStory();\n    } catch (error) {\n      console.error('Error deleting story:', error);\n    }\n    setShowMenu(false);\n  };\n\n  const handleArchiveStory = async () => {\n    if (!currentStory) return;\n\n    try {\n      await archiveStory(currentStory.id);\n      // Show success message\n    } catch (error) {\n      console.error('Error archiving story:', error);\n    }\n    setShowMenu(false);\n  };\n\n  if (!currentGroup || !currentStory) {\n    return null;\n  }\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] bg-black\"\n      >\n        {/* Main Content Container */}\n        <motion.div\n          ref={containerRef}\n          drag=\"y\"\n          dragConstraints={{ top: 0, bottom: 0 }}\n          dragElastic={0.2}\n          onDragEnd={handleDragEnd}\n          className=\"relative w-full h-full flex items-center justify-center\"\n          onClick={(e) => {\n            // Tap left/right to navigate\n            const rect = containerRef.current?.getBoundingClientRect();\n            if (rect) {\n              const clickX = e.clientX - rect.left;\n              if (clickX < rect.width / 3) {\n                goToPreviousStory();\n              } else if (clickX > (rect.width * 2) / 3) {\n                goToNextStory();\n              } else {\n                setIsPaused((prev) => !prev);\n              }\n            }\n          }}\n        >\n          {/* Story Content */}\n          <div className=\"relative w-full h-full max-w-lg mx-auto\">\n            {/* Background */}\n            <div className=\"absolute inset-0\">\n              {currentStory.mediaType === 'VIDEO' ? (\n                <video\n                  ref={videoRef}\n                  src={currentStory.mediaUrl}\n                  className=\"w-full h-full object-cover\"\n                  autoPlay\n                  loop\n                  muted={isMuted}\n                  playsInline\n                />\n              ) : currentStory.mediaType === 'TEXT' ? (\n                <div\n                  className=\"w-full h-full flex items-center justify-center p-8\"\n                  style={{ backgroundColor: currentStory.backgroundColor || '#3B82F6' }}\n                >\n                  <p\n                    className=\"text-white text-2xl font-bold text-center leading-relaxed\"\n                    style={{\n                      fontSize: currentStory.textStyle?.fontSize || 24,\n                      fontWeight: currentStory.textStyle?.fontWeight || 'bold',\n                      color: currentStory.textStyle?.color || 'white',\n                    }}\n                  >\n                    {currentStory.textContent}\n                  </p>\n                </div>\n              ) : (\n                <Image\n                  src={currentStory.mediaUrl}\n                  alt=\"Story\"\n                  fill\n                  className=\"object-cover\"\n                  priority\n                />\n              )}\n\n              {/* Text Overlay */}\n              {currentStory.mediaType !== 'TEXT' && currentStory.textContent && (\n                <div\n                  className=\"absolute p-4\"\n                  style={{\n                    left: currentStory.textPosition?.x || '50%',\n                    top: currentStory.textPosition?.y || '50%',\n                    transform: 'translate(-50%, -50%)',\n                  }}\n                >\n                  <p\n                    className=\"text-white text-lg font-semibold drop-shadow-lg\"\n                    style={currentStory.textStyle || {}}\n                  >\n                    {currentStory.textContent}\n                  </p>\n                </div>\n              )}\n\n              {/* Gradient overlays */}\n              <div className=\"absolute inset-0 bg-gradient-to-b from-black/40 via-transparent to-black/60 pointer-events-none\" />\n            </div>\n\n            {/* Top Section - Progress & Header */}\n            <div className=\"absolute top-0 left-0 right-0 p-4 z-10\">\n              {/* Progress Bars */}\n              <div className=\"flex gap-1 mb-4\">\n                {currentGroup.stories.map((_, idx) => (\n                  <div\n                    key={idx}\n                    className=\"flex-1 h-[3px] bg-white/30 rounded-full overflow-hidden\"\n                  >\n                    <motion.div\n                      className=\"h-full bg-white rounded-full\"\n                      style={{\n                        width:\n                          idx < currentStoryIndex\n                            ? '100%'\n                            : idx === currentStoryIndex\n                            ? `${progress}%`\n                            : '0%',\n                      }}\n                    />\n                  </div>\n                ))}\n              </div>\n\n              {/* Header */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  {/* User Avatar with gradient ring */}\n                  <div className=\"relative\">\n                    <div className=\"w-10 h-10 rounded-full overflow-hidden ring-2 ring-white\">\n                      {currentGroup.user.profileImage ? (\n                        <Image\n                          src={currentGroup.user.profileImage}\n                          alt={currentGroup.user.name}\n                          width={40}\n                          height={40}\n                          className=\"object-cover\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center\">\n                          <span className=\"text-white font-bold\">\n                            {currentGroup.user.name.charAt(0)}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  <div>\n                    <p className=\"text-white font-semibold text-sm\">\n                      {currentGroup.user.name}\n                    </p>\n                    <p className=\"text-white/60 text-xs\">\n                      {formatTimeAgo(new Date(currentStory.createdAt))}\n                    </p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  {/* Pause/Play */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setIsPaused((prev) => !prev);\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    {isPaused ? (\n                      <Play className=\"w-4 h-4 text-white\" fill=\"white\" />\n                    ) : (\n                      <Pause className=\"w-4 h-4 text-white\" fill=\"white\" />\n                    )}\n                  </button>\n\n                  {/* Mute (for video) */}\n                  {currentStory.mediaType === 'VIDEO' && (\n                    <button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setIsMuted((prev) => !prev);\n                      }}\n                      className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                    >\n                      {isMuted ? (\n                        <VolumeX className=\"w-4 h-4 text-white\" />\n                      ) : (\n                        <Volume2 className=\"w-4 h-4 text-white\" />\n                      )}\n                    </button>\n                  )}\n\n                  {/* More Options */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setShowMenu(true);\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    <MoreHorizontal className=\"w-4 h-4 text-white\" />\n                  </button>\n\n                  {/* Close */}\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleClose();\n                    }}\n                    className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center\"\n                  >\n                    <X className=\"w-4 h-4 text-white\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            {/* Navigation Indicators */}\n            <div className=\"absolute left-4 top-1/2 -translate-y-1/2 z-10 pointer-events-none\">\n              <ChevronUp className=\"w-6 h-6 text-white/40 animate-pulse\" />\n            </div>\n            <div className=\"absolute right-4 top-1/2 -translate-y-1/2 z-10 pointer-events-none\">\n              <ChevronDown className=\"w-6 h-6 text-white/40 animate-pulse\" />\n            </div>\n\n            {/* Link Preview */}\n            {currentStory.linkUrl && (\n              <div className=\"absolute bottom-32 left-4 right-4 z-10\">\n                <a\n                  href={currentStory.linkUrl}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  onClick={(e) => e.stopPropagation()}\n                  className=\"flex items-center gap-2 bg-white/10 backdrop-blur-md rounded-full px-4 py-2\"\n                >\n                  <Link2 className=\"w-4 h-4 text-white\" />\n                  <span className=\"text-white text-sm truncate\">\n                    {currentStory.linkTitle || currentStory.linkUrl}\n                  </span>\n                </a>\n              </div>\n            )}\n\n            {/* Bottom Section - Actions */}\n            <div className=\"absolute bottom-0 left-0 right-0 p-4 z-10\">\n              {/* View Count (for own stories) */}\n              {isOwnStory && (\n                <div className=\"flex items-center gap-4 mb-4 text-white/80\">\n                  <div className=\"flex items-center gap-1\">\n                    <Eye className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">{currentStory.viewsCount}</span>\n                  </div>\n                  <div className=\"flex items-center gap-1\">\n                    <Heart className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">{currentStory.reactionsCount}</span>\n                  </div>\n                </div>\n              )}\n\n              {/* Reply Input or Actions */}\n              {!isOwnStory && (\n                <div className=\"flex items-center gap-2\">\n                  {showReplyInput ? (\n                    <div className=\"flex-1 flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={replyText}\n                        onChange={(e) => setReplyText(e.target.value)}\n                        placeholder=\"Send a message...\"\n                        className=\"flex-1 bg-white/10 backdrop-blur-md text-white placeholder-white/50 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-white/30\"\n                        autoFocus\n                        onClick={(e) => e.stopPropagation()}\n                        onKeyDown={(e) => {\n                          e.stopPropagation();\n                          if (e.key === 'Enter') handleSendReply();\n                          if (e.key === 'Escape') setShowReplyInput(false);\n                        }}\n                      />\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          handleSendReply();\n                        }}\n                        className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center\"\n                      >\n                        <Send className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <>\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          setShowReplyInput(true);\n                          setIsPaused(true);\n                        }}\n                        className=\"flex-1 bg-white/10 backdrop-blur-md text-white/70 rounded-full px-4 py-2 text-sm text-left\"\n                      >\n                        Reply to {currentGroup.user.name.split(' ')[0]}...\n                      </button>\n\n                      {/* Reaction Button */}\n                      <div className=\"relative\">\n                        <button\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            setShowReactions(!showReactions);\n                            setIsPaused(true);\n                          }}\n                          className={`w-10 h-10 rounded-full ${\n                            selectedReaction\n                              ? 'bg-pink-500/30'\n                              : 'bg-white/10'\n                          } backdrop-blur-md flex items-center justify-center`}\n                        >\n                          {selectedReaction ? (\n                            <span className=\"text-xl\">{selectedReaction}</span>\n                          ) : (\n                            <Heart className=\"w-5 h-5 text-white\" />\n                          )}\n                        </button>\n\n                        {/* Reaction Picker */}\n                        <AnimatePresence>\n                          {showReactions && (\n                            <motion.div\n                              initial={{ opacity: 0, scale: 0.8, y: 10 }}\n                              animate={{ opacity: 1, scale: 1, y: 0 }}\n                              exit={{ opacity: 0, scale: 0.8, y: 10 }}\n                              className=\"absolute bottom-12 right-0 bg-white/10 backdrop-blur-xl rounded-2xl p-2 flex gap-1\"\n                            >\n                              {REACTIONS.map((reaction) => (\n                                <motion.button\n                                  key={reaction}\n                                  whileHover={{ scale: 1.3 }}\n                                  whileTap={{ scale: 0.9 }}\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleReaction(reaction);\n                                  }}\n                                  className={`w-10 h-10 rounded-full flex items-center justify-center text-2xl ${\n                                    selectedReaction === reaction\n                                      ? 'bg-white/20'\n                                      : ''\n                                  }`}\n                                >\n                                  {reaction}\n                                </motion.button>\n                              ))}\n                            </motion.div>\n                          )}\n                        </AnimatePresence>\n                      </div>\n\n                      {/* Share Button */}\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          // Handle share\n                        }}\n                        className=\"w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center\"\n                      >\n                        <Share2 className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Menu Modal */}\n        <AnimatePresence>\n          {showMenu && (\n            <motion.div\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              exit={{ opacity: 0 }}\n              className=\"absolute inset-0 z-20 bg-black/50 flex items-end justify-center\"\n              onClick={() => setShowMenu(false)}\n            >\n              <motion.div\n                initial={{ y: '100%' }}\n                animate={{ y: 0 }}\n                exit={{ y: '100%' }}\n                className=\"w-full max-w-lg bg-neutral-900 rounded-t-3xl p-4\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <div className=\"w-12 h-1 bg-neutral-700 rounded-full mx-auto mb-4\" />\n\n                {isOwnStory && (\n                  <>\n                    <button\n                      onClick={handleDeleteStory}\n                      className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-neutral-800 transition-colors text-red-500\"\n                    >\n                      <Trash2 className=\"w-5 h-5\" />\n                      <span>Delete Story</span>\n                    </button>\n                    <button\n                      onClick={handleArchiveStory}\n                      className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-neutral-800 transition-colors text-white\"\n                    >\n                      <Archive className=\"w-5 h-5\" />\n                      <span>Save to Archive</span>\n                    </button>\n                  </>\n                )}\n\n                <button\n                  onClick={() => setShowMenu(false)}\n                  className=\"w-full mt-2 py-3 bg-neutral-800 rounded-xl text-white font-medium\"\n                >\n                  Cancel\n                </button>\n              </motion.div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nfunction formatTimeAgo(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const minutes = Math.floor(diff / 60000);\n  const hours = Math.floor(diff / 3600000);\n\n  if (minutes < 1) return 'Just now';\n  if (minutes < 60) return `${minutes}m ago`;\n  if (hours < 24) return `${hours}h ago`;\n  return '1d ago';\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 8977, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryCreator.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  Type,\n  Sparkles,\n  Link2,\n  Users,\n  Globe,\n  Lock,\n  Check,\n  ChevronLeft,\n  ChevronRight,\n  Upload,\n  Loader2,\n  Trash2,\n} from 'lucide-react';\nimport Image from 'next/image';\nimport { createStory, createStoryWithMedia, type CreateStoryInput, type StoryCategory, type StoryVisibility } from '@/lib/api/stories';\n\ninterface StoryCreatorProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStoryCreated?: () => void;\n}\n\ntype StoryType = 'image' | 'video' | 'text';\ntype CreatorStep = 'select-type' | 'upload-media' | 'edit' | 'details';\n\nconst STORY_CATEGORIES: { value: StoryCategory; label: string; icon: string }[] = [\n  { value: 'DAY_AT_WORK', label: 'Day at Work', icon: '' },\n  { value: 'LEARNING', label: 'Learning', icon: '' },\n  { value: 'ACHIEVEMENT', label: 'Achievement', icon: '' },\n  { value: 'PROJECT', label: 'Project', icon: '' },\n  { value: 'BEHIND_SCENES', label: 'Behind the Scenes', icon: '' },\n  { value: 'TIPS', label: 'Tips', icon: '' },\n  { value: 'EVENT', label: 'Event', icon: '' },\n  { value: 'QNA', label: 'Q&A', icon: '' },\n  { value: 'GENERAL', label: 'General', icon: '' },\n];\n\nconst VISIBILITY_OPTIONS: { value: StoryVisibility; label: string; icon: React.ReactNode; desc: string }[] = [\n  { value: 'PUBLIC', label: 'Public', icon: <Globe className=\"w-5 h-5\" />, desc: 'Anyone can view' },\n  { value: 'CONNECTIONS', label: 'Connections', icon: <Users className=\"w-5 h-5\" />, desc: 'Only connections' },\n  { value: 'CLOSE_FRIENDS', label: 'Close Friends', icon: <Lock className=\"w-5 h-5\" />, desc: 'Selected people only' },\n];\n\nconst TEXT_BACKGROUNDS = [\n  'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n  'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',\n  'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',\n  'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',\n  'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',\n  'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',\n  'linear-gradient(135deg, #30cfd0 0%, #330867 100%)',\n  'linear-gradient(135deg, #ff0844 0%, #ffb199 100%)',\n];\n\nexport function StoryCreator({ isOpen, onClose, onStoryCreated }: StoryCreatorProps) {\n  const [step, setStep] = useState<CreatorStep>('select-type');\n  const [storyType, setStoryType] = useState<StoryType | null>(null);\n  const [mediaFile, setMediaFile] = useState<File | null>(null);\n  const [mediaPreview, setMediaPreview] = useState<string | null>(null);\n  const [textContent, setTextContent] = useState('');\n  const [textBackground, setTextBackground] = useState(TEXT_BACKGROUNDS[0]);\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkTitle, setLinkTitle] = useState('');\n  const [category, setCategory] = useState<StoryCategory>('GENERAL');\n  const [visibility, setVisibility] = useState<StoryVisibility>('PUBLIC');\n  const [isUploading, setIsUploading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n\n    // Validate file type\n    const isImage = file.type.startsWith('image/');\n    const isVideo = file.type.startsWith('video/');\n\n    if (storyType === 'image' && !isImage) {\n      setError('Please select an image file');\n      return;\n    }\n    if (storyType === 'video' && !isVideo) {\n      setError('Please select a video file');\n      return;\n    }\n\n    // Validate file size (50MB max for video, 10MB for image)\n    const maxSize = isVideo ? 50 * 1024 * 1024 : 10 * 1024 * 1024;\n    if (file.size > maxSize) {\n      setError(`File too large. Max size: ${isVideo ? '50MB' : '10MB'}`);\n      return;\n    }\n\n    setMediaFile(file);\n    setMediaPreview(URL.createObjectURL(file));\n    setError(null);\n    setStep('edit');\n  }, [storyType]);\n\n  const handleTypeSelect = (type: StoryType) => {\n    setStoryType(type);\n    if (type === 'text') {\n      setStep('edit');\n    } else {\n      setStep('upload-media');\n    }\n  };\n\n  const handleRemoveMedia = () => {\n    if (mediaPreview) {\n      URL.revokeObjectURL(mediaPreview);\n    }\n    setMediaFile(null);\n    setMediaPreview(null);\n    setStep('upload-media');\n  };\n\n  const handleSubmit = async () => {\n    setIsUploading(true);\n    setError(null);\n\n    try {\n      if (storyType === 'text') {\n        // Text-only story - use JSON API\n        await createStory({\n          mediaType: 'TEXT',\n          textContent,\n          backgroundColor: textBackground,\n          category,\n          visibility,\n          linkUrl: linkUrl || undefined,\n          linkTitle: linkTitle || undefined,\n        });\n      } else {\n        // Media story - use FormData for file upload\n        const formData = new FormData();\n        formData.append('mediaType', storyType === 'video' ? 'VIDEO' : 'IMAGE');\n        \n        if (mediaFile) {\n          formData.append('media', mediaFile);\n        }\n        if (textContent) {\n          formData.append('textContent', textContent);\n        }\n        \n        formData.append('category', category);\n        formData.append('visibility', visibility);\n\n        if (linkUrl) {\n          formData.append('linkUrl', linkUrl);\n          if (linkTitle) {\n            formData.append('linkTitle', linkTitle);\n          }\n        }\n\n        await createStoryWithMedia(formData);\n      }\n      \n      onStoryCreated?.();\n      handleClose();\n    } catch (err: any) {\n      setError(err.message || 'Failed to create story');\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const handleClose = () => {\n    // Cleanup\n    if (mediaPreview) {\n      URL.revokeObjectURL(mediaPreview);\n    }\n    setStep('select-type');\n    setStoryType(null);\n    setMediaFile(null);\n    setMediaPreview(null);\n    setTextContent('');\n    setTextBackground(TEXT_BACKGROUNDS[0]);\n    setLinkUrl('');\n    setLinkTitle('');\n    setCategory('GENERAL');\n    setVisibility('PUBLIC');\n    setError(null);\n    onClose();\n  };\n\n  const goBack = () => {\n    switch (step) {\n      case 'upload-media':\n        setStep('select-type');\n        setStoryType(null);\n        break;\n      case 'edit':\n        if (storyType === 'text') {\n          setStep('select-type');\n          setStoryType(null);\n        } else {\n          handleRemoveMedia();\n        }\n        break;\n      case 'details':\n        setStep('edit');\n        break;\n    }\n  };\n\n  const canProceed = () => {\n    if (step === 'edit') {\n      if (storyType === 'text') {\n        return textContent.trim().length > 0;\n      }\n      return !!mediaFile;\n    }\n    return true;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center\"\n        onClick={handleClose}\n      >\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0 }}\n          animate={{ scale: 1, opacity: 1 }}\n          exit={{ scale: 0.9, opacity: 0 }}\n          className=\"relative w-full max-w-lg h-[90vh] max-h-[700px] bg-neutral-900 rounded-3xl overflow-hidden flex flex-col\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-neutral-800\">\n            <div className=\"flex items-center gap-2\">\n              {step !== 'select-type' && (\n                <button\n                  onClick={goBack}\n                  className=\"w-8 h-8 rounded-full hover:bg-neutral-800 flex items-center justify-center\"\n                >\n                  <ChevronLeft className=\"w-5 h-5 text-neutral-400\" />\n                </button>\n              )}\n              <h2 className=\"text-lg font-semibold text-white\">\n                {step === 'select-type' && 'Create Story'}\n                {step === 'upload-media' && 'Upload Media'}\n                {step === 'edit' && 'Edit Story'}\n                {step === 'details' && 'Story Details'}\n              </h2>\n            </div>\n            <button\n              onClick={handleClose}\n              className=\"w-8 h-8 rounded-full hover:bg-neutral-800 flex items-center justify-center\"\n            >\n              <X className=\"w-5 h-5 text-neutral-400\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"flex-1 overflow-y-auto\">\n            {/* Step 1: Select Type */}\n            {step === 'select-type' && (\n              <div className=\"p-6\">\n                <p className=\"text-neutral-400 text-sm mb-6\">\n                  Choose how you want to share your moment\n                </p>\n                \n                <div className=\"grid grid-cols-1 gap-4\">\n                  {/* Image Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('image')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-blue-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                      <ImageIcon className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-blue-400 transition-colors\">\n                        Photo\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share an image from your gallery\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-blue-400 transition-colors\" />\n                  </motion.button>\n\n                  {/* Video Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('video')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-pink-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-pink-500 to-red-600 flex items-center justify-center\">\n                      <Video className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-pink-400 transition-colors\">\n                        Video\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share a short video clip\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-pink-400 transition-colors\" />\n                  </motion.button>\n\n                  {/* Text Option */}\n                  <motion.button\n                    whileHover={{ scale: 1.02 }}\n                    whileTap={{ scale: 0.98 }}\n                    onClick={() => handleTypeSelect('text')}\n                    className=\"flex items-center gap-4 p-4 bg-neutral-800/50 rounded-2xl border border-neutral-700/50 hover:border-green-500/50 transition-colors group\"\n                  >\n                    <div className=\"w-14 h-14 rounded-xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center\">\n                      <Type className=\"w-7 h-7 text-white\" />\n                    </div>\n                    <div className=\"text-left\">\n                      <h3 className=\"text-white font-medium group-hover:text-green-400 transition-colors\">\n                        Text\n                      </h3>\n                      <p className=\"text-neutral-500 text-sm\">\n                        Share a thought or quote\n                      </p>\n                    </div>\n                    <ChevronRight className=\"w-5 h-5 text-neutral-600 ml-auto group-hover:text-green-400 transition-colors\" />\n                  </motion.button>\n                </div>\n\n                {/* AI Story Suggestion */}\n                <div className=\"mt-8 p-4 bg-gradient-to-br from-purple-900/30 to-blue-900/30 rounded-2xl border border-purple-500/20\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <Sparkles className=\"w-5 h-5 text-purple-400\" />\n                    <h4 className=\"text-white font-medium\">AI Story Ideas</h4>\n                  </div>\n                  <p className=\"text-neutral-400 text-sm\">\n                    Coming soon: Let AI help you create engaging professional stories!\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {/* Step 2: Upload Media */}\n            {step === 'upload-media' && (\n              <div className=\"p-6\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept={storyType === 'video' ? 'video/*' : 'image/*'}\n                  onChange={handleFileSelect}\n                  className=\"hidden\"\n                />\n\n                <motion.button\n                  whileHover={{ scale: 1.02 }}\n                  whileTap={{ scale: 0.98 }}\n                  onClick={() => fileInputRef.current?.click()}\n                  className=\"w-full aspect-[9/16] max-h-[400px] rounded-2xl border-2 border-dashed border-neutral-700 hover:border-blue-500 transition-colors flex flex-col items-center justify-center gap-4 bg-neutral-800/30\"\n                >\n                  <div className=\"w-16 h-16 rounded-full bg-neutral-800 flex items-center justify-center\">\n                    <Upload className=\"w-8 h-8 text-neutral-400\" />\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-white font-medium\">\n                      Tap to upload {storyType === 'video' ? 'video' : 'image'}\n                    </p>\n                    <p className=\"text-neutral-500 text-sm mt-1\">\n                      {storyType === 'video' ? 'MP4, MOV up to 50MB' : 'JPG, PNG up to 10MB'}\n                    </p>\n                  </div>\n                </motion.button>\n\n                {error && (\n                  <p className=\"mt-4 text-red-400 text-sm text-center\">{error}</p>\n                )}\n              </div>\n            )}\n\n            {/* Step 3: Edit */}\n            {step === 'edit' && (\n              <div className=\"flex flex-col h-full\">\n                {/* Preview */}\n                <div className=\"relative flex-1 min-h-[300px]\">\n                  {storyType === 'text' ? (\n                    <div\n                      className=\"absolute inset-0 flex items-center justify-center p-8\"\n                      style={{ background: textBackground }}\n                    >\n                      <textarea\n                        value={textContent}\n                        onChange={(e) => setTextContent(e.target.value)}\n                        placeholder=\"Type your story...\"\n                        className=\"w-full h-full bg-transparent text-white text-2xl font-bold text-center resize-none focus:outline-none placeholder-white/50\"\n                        maxLength={280}\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"absolute inset-0 bg-black flex items-center justify-center\">\n                      {storyType === 'video' && mediaPreview ? (\n                        <video\n                          src={mediaPreview}\n                          className=\"max-w-full max-h-full object-contain\"\n                          controls\n                        />\n                      ) : mediaPreview ? (\n                        <Image\n                          src={mediaPreview}\n                          alt=\"Preview\"\n                          fill\n                          className=\"object-contain\"\n                        />\n                      ) : null}\n\n                      {/* Remove button */}\n                      <button\n                        onClick={handleRemoveMedia}\n                        className=\"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 flex items-center justify-center\"\n                      >\n                        <Trash2 className=\"w-5 h-5 text-white\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n\n                {/* Text Background Picker (for text stories) */}\n                {storyType === 'text' && (\n                  <div className=\"p-4 border-t border-neutral-800\">\n                    <p className=\"text-neutral-400 text-sm mb-3\">Background</p>\n                    <div className=\"flex gap-2 overflow-x-auto pb-2\">\n                      {TEXT_BACKGROUNDS.map((bg, idx) => (\n                        <button\n                          key={idx}\n                          onClick={() => setTextBackground(bg)}\n                          className={`w-10 h-10 rounded-xl flex-shrink-0 ${\n                            textBackground === bg ? 'ring-2 ring-white ring-offset-2 ring-offset-neutral-900' : ''\n                          }`}\n                          style={{ background: bg }}\n                        />\n                      ))}\n                    </div>\n                    <p className=\"text-neutral-500 text-xs mt-2\">\n                      {textContent.length}/280 characters\n                    </p>\n                  </div>\n                )}\n              </div>\n            )}\n\n            {/* Step 4: Details */}\n            {step === 'details' && (\n              <div className=\"p-6 space-y-6\">\n                {/* Category */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 block\">Category</label>\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {STORY_CATEGORIES.map((cat) => (\n                      <button\n                        key={cat.value}\n                        onClick={() => setCategory(cat.value)}\n                        className={`p-3 rounded-xl border transition-colors flex flex-col items-center gap-1 ${\n                          category === cat.value\n                            ? 'bg-blue-500/20 border-blue-500 text-blue-400'\n                            : 'bg-neutral-800/50 border-neutral-700 text-neutral-400 hover:border-neutral-600'\n                        }`}\n                      >\n                        <span className=\"text-xl\">{cat.icon}</span>\n                        <span className=\"text-xs\">{cat.label}</span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Visibility */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 block\">Who can view</label>\n                  <div className=\"space-y-2\">\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => setVisibility(opt.value)}\n                        className={`w-full p-3 rounded-xl border transition-colors flex items-center gap-3 ${\n                          visibility === opt.value\n                            ? 'bg-blue-500/20 border-blue-500'\n                            : 'bg-neutral-800/50 border-neutral-700 hover:border-neutral-600'\n                        }`}\n                      >\n                        <div className={`${visibility === opt.value ? 'text-blue-400' : 'text-neutral-400'}`}>\n                          {opt.icon}\n                        </div>\n                        <div className=\"flex-1 text-left\">\n                          <p className={`font-medium ${visibility === opt.value ? 'text-blue-400' : 'text-white'}`}>\n                            {opt.label}\n                          </p>\n                          <p className=\"text-neutral-500 text-sm\">{opt.desc}</p>\n                        </div>\n                        {visibility === opt.value && (\n                          <Check className=\"w-5 h-5 text-blue-400\" />\n                        )}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Link (optional) */}\n                <div>\n                  <label className=\"text-white font-medium mb-3 flex items-center gap-2\">\n                    <Link2 className=\"w-4 h-4\" />\n                    Add Link (optional)\n                  </label>\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://...\"\n                    className=\"w-full px-4 py-3 bg-neutral-800 border border-neutral-700 rounded-xl text-white placeholder-neutral-500 focus:outline-none focus:border-blue-500\"\n                  />\n                  {linkUrl && (\n                    <input\n                      type=\"text\"\n                      value={linkTitle}\n                      onChange={(e) => setLinkTitle(e.target.value)}\n                      placeholder=\"Link title (optional)\"\n                      className=\"w-full px-4 py-3 mt-2 bg-neutral-800 border border-neutral-700 rounded-xl text-white placeholder-neutral-500 focus:outline-none focus:border-blue-500\"\n                    />\n                  )}\n                </div>\n\n                {error && (\n                  <p className=\"text-red-400 text-sm\">{error}</p>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {(step === 'edit' || step === 'details') && (\n            <div className=\"p-4 border-t border-neutral-800\">\n              {step === 'edit' ? (\n                <button\n                  onClick={() => setStep('details')}\n                  disabled={!canProceed()}\n                  className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                >\n                  Continue\n                  <ChevronRight className=\"w-5 h-5\" />\n                </button>\n              ) : (\n                <button\n                  onClick={handleSubmit}\n                  disabled={isUploading}\n                  className=\"w-full py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                >\n                  {isUploading ? (\n                    <>\n                      <Loader2 className=\"w-5 h-5 animate-spin\" />\n                      Sharing...\n                    </>\n                  ) : (\n                    <>\n                      <Sparkles className=\"w-5 h-5\" />\n                      Share Story\n                    </>\n                  )}\n                </button>\n              )}\n            </div>\n          )}\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10077, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/StoryHighlights.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Plus, Play, Lock } from 'lucide-react';\nimport Image from 'next/image';\nimport { getUserHighlights, getHighlightStories, type StoryHighlight, type Story } from '@/lib/api/stories';\n\ninterface StoryHighlightsProps {\n  userId: string;\n  isOwnProfile?: boolean;\n  onCreateHighlight?: () => void;\n}\n\nexport function StoryHighlights({ userId, isOwnProfile = false, onCreateHighlight }: StoryHighlightsProps) {\n  const [highlights, setHighlights] = useState<StoryHighlight[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedHighlight, setSelectedHighlight] = useState<StoryHighlight | null>(null);\n  const [highlightStories, setHighlightStories] = useState<Story[]>([]);\n\n  useEffect(() => {\n    fetchHighlights();\n  }, [userId]);\n\n  const fetchHighlights = async () => {\n    try {\n      const response = await getUserHighlights(userId);\n      setHighlights(response.highlights);\n    } catch (error) {\n      console.error('Error fetching highlights:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleHighlightClick = async (highlight: StoryHighlight) => {\n    setSelectedHighlight(highlight);\n    try {\n      const response = await getHighlightStories(highlight.id);\n      setHighlightStories(response.highlight.stories);\n      // Open story viewer with these stories\n    } catch (error) {\n      console.error('Error fetching highlight stories:', error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex gap-4 overflow-x-auto pb-4 scrollbar-hide\">\n        {[...Array(4)].map((_, i) => (\n          <div key={i} className=\"flex flex-col items-center gap-2 flex-shrink-0 animate-pulse\">\n            <div className=\"w-16 h-16 rounded-2xl bg-neutral-800\" />\n            <div className=\"w-12 h-3 rounded bg-neutral-800\" />\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  if (highlights.length === 0 && !isOwnProfile) {\n    return null;\n  }\n\n  return (\n    <div className=\"mb-6\">\n      <h3 className=\"text-white font-semibold mb-4\">Story Highlights</h3>\n      \n      <div className=\"flex gap-4 overflow-x-auto pb-2 scrollbar-hide\">\n        {/* Create New Highlight Button (for own profile) */}\n        {isOwnProfile && (\n          <motion.button\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={onCreateHighlight}\n            className=\"flex flex-col items-center gap-2 flex-shrink-0\"\n          >\n            <div className=\"w-16 h-16 rounded-2xl bg-neutral-800/50 border-2 border-dashed border-neutral-700 flex items-center justify-center hover:border-blue-500/50 transition-colors\">\n              <Plus className=\"w-6 h-6 text-neutral-400\" />\n            </div>\n            <span className=\"text-xs text-neutral-500\">New</span>\n          </motion.button>\n        )}\n\n        {/* Highlights */}\n        {highlights.map((highlight, index) => (\n          <motion.button\n            key={highlight.id}\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.05 }}\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={() => handleHighlightClick(highlight)}\n            className=\"flex flex-col items-center gap-2 flex-shrink-0 group\"\n          >\n            {/* Highlight Cover */}\n            <div className=\"relative w-16 h-16 rounded-2xl overflow-hidden ring-2 ring-neutral-700 group-hover:ring-blue-500 transition-all\">\n              {highlight.coverImage ? (\n                <Image\n                  src={highlight.coverImage}\n                  alt={highlight.title}\n                  fill\n                  className=\"object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center\">\n                  <span className=\"text-white text-xl\">\n                    {highlight.title.charAt(0)}\n                  </span>\n                </div>\n              )}\n\n              {/* Story Count Badge */}\n              <div className=\"absolute bottom-1 right-1 flex items-center gap-0.5 bg-black/60 rounded-full px-1.5 py-0.5\">\n                <Play className=\"w-2.5 h-2.5 text-white\" fill=\"white\" />\n                <span className=\"text-[10px] text-white font-medium\">{highlight.storiesCount}</span>\n              </div>\n\n              {/* Privacy Indicator */}\n              {!highlight.isPublic && (\n                <div className=\"absolute top-1 left-1 w-4 h-4 bg-black/60 rounded-full flex items-center justify-center\">\n                  <Lock className=\"w-2.5 h-2.5 text-white\" />\n                </div>\n              )}\n\n              {/* Hover Overlay */}\n              <div className=\"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                <Play className=\"w-6 h-6 text-white\" fill=\"white\" />\n              </div>\n            </div>\n\n            {/* Highlight Title */}\n            <span className=\"text-xs text-neutral-400 truncate max-w-16 group-hover:text-white transition-colors\">\n              {highlight.title}\n            </span>\n          </motion.button>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10354, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/stories/index.ts"],"sourcesContent":["// Stories Components\nexport { StoryCarousel } from './StoryCarousel';\nexport { StoryViewer } from './StoryViewer';\nexport { StoryCreator } from './StoryCreator';\nexport { StoryHighlights } from './StoryHighlights';\n"],"names":[],"mappings":"AAAA,qBAAqB;;AACrB;AACA;AACA;AACA"}},
    {"offset": {"line": 10368, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/StreakCounter.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Flame, Trophy, Target, TrendingUp, X } from 'lucide-react';\nimport { getStreaks, type StreakData } from '@/lib/api/engagement';\n\n/**\n * StreakCounter - Shows connection/login streak with fire animation\n * Implements: Streaks (Duolingo Effect) - Fear of loss\n */\nexport default function StreakCounter() {\n  const [streak, setStreak] = useState<StreakData | null>(null);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchStreaks = async () => {\n      try {\n        const data = await getStreaks();\n        setStreak(data);\n      } catch (error) {\n        console.error('Failed to fetch streaks:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStreaks();\n  }, []);\n\n  if (loading || !streak) return null;\n\n  const hasStreak = streak.connectionStreak > 0;\n  const isAtRisk = streak.isAtRisk;\n\n  return (\n    <>\n      {/* Compact Streak Badge */}\n      <motion.button\n        onClick={() => setIsExpanded(true)}\n        className=\"relative flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white text-sm font-bold shadow-lg hover:shadow-xl transition-shadow\"\n        whileHover={{ scale: 1.05 }}\n        whileTap={{ scale: 0.95 }}\n      >\n        <motion.div\n          animate={hasStreak ? { \n            scale: [1, 1.2, 1],\n            rotate: [0, -5, 5, 0],\n          } : {}}\n          transition={{ repeat: Infinity, duration: 2 }}\n        >\n          <Flame className=\"w-4 h-4\" />\n        </motion.div>\n        <span>{streak.connectionStreak}</span>\n\n        {/* At-risk indicator */}\n        {isAtRisk && hasStreak && (\n          <motion.div\n            className=\"absolute -top-1 -right-1 w-3 h-3 bg-yellow-400 rounded-full border-2 border-white\"\n            animate={{ scale: [1, 1.3, 1] }}\n            transition={{ repeat: Infinity, duration: 1 }}\n          />\n        )}\n      </motion.button>\n\n      {/* Expanded Streak Panel */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            className=\"fixed inset-0 bg-black/40 z-50 flex items-center justify-center p-4\"\n            onClick={() => setIsExpanded(false)}\n          >\n            <motion.div\n              initial={{ scale: 0.8, opacity: 0 }}\n              animate={{ scale: 1, opacity: 1 }}\n              exit={{ scale: 0.8, opacity: 0 }}\n              className=\"bg-white dark:bg-gray-900 rounded-2xl p-6 max-w-sm w-full shadow-2xl\"\n              onClick={(e) => e.stopPropagation()}\n            >\n              <div className=\"flex items-center justify-between mb-4\">\n                <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">Your Streaks</h3>\n                <button onClick={() => setIsExpanded(false)} className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full\">\n                  <X className=\"w-5 h-5 text-gray-500\" />\n                </button>\n              </div>\n\n              {/* Connection Streak */}\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-3 p-3 bg-gradient-to-r from-orange-50 to-red-50 dark:from-orange-900/20 dark:to-red-900/20 rounded-xl\">\n                  <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center\">\n                    <Flame className=\"w-6 h-6 text-white\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-bold text-2xl text-gray-900 dark:text-white\">\n                      {streak.connectionStreak} day{streak.connectionStreak !== 1 ? 's' : ''}\n                    </p>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400\">Networking streak</p>\n                  </div>\n                  {isAtRisk && (\n                    <span className=\"px-2 py-1 bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400 text-xs rounded-full font-medium\">\n                      At risk!\n                    </span>\n                  )}\n                </div>\n\n                {/* Login Streak */}\n                <div className=\"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-xl\">\n                  <div className=\"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center\">\n                    <TrendingUp className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div>\n                    <p className=\"font-bold text-lg text-gray-900 dark:text-white\">{streak.loginStreak} days</p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Login streak</p>\n                  </div>\n                </div>\n\n                {/* Records */}\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <div className=\"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center\">\n                    <Trophy className=\"w-5 h-5 text-yellow-500 mx-auto mb-1\" />\n                    <p className=\"font-bold text-gray-900 dark:text-white\">{streak.longestConnectionStreak}</p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">Best streak</p>\n                  </div>\n                  <div className=\"p-3 bg-gray-50 dark:bg-gray-800 rounded-xl text-center\">\n                    <Target className=\"w-5 h-5 text-green-500 mx-auto mb-1\" />\n                    <p className=\"font-bold text-gray-900 dark:text-white\">\n                      {streak.weeklyConnectionsMade}/{streak.weeklyConnectionsGoal}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400\">This week</p>\n                  </div>\n                </div>\n\n                {/* Motivational message */}\n                {isAtRisk && hasStreak && (\n                  <motion.div\n                    initial={{ opacity: 0, y: 10 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    className=\"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-xl border border-yellow-200 dark:border-yellow-800\"\n                  >\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-300 font-medium\">\n                       Don&apos;t break your {streak.connectionStreak}-day streak! Connect with someone new today.\n                    </p>\n                  </motion.div>\n                )}\n\n                {streak.connectionStreak >= 5 && (\n                  <div className=\"text-center text-sm text-gray-500 dark:text-gray-400\">\n                     You&apos;ve connected with someone new for {streak.connectionStreak} days straight!\n                  </div>\n                )}\n              </div>\n            </motion.div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 10800, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/SocialProofBar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Users, Zap, TrendingUp, UserPlus } from 'lucide-react';\nimport { getLiveActivity, type LiveActivity } from '@/lib/api/engagement';\n\n/**\n * SocialProofBar - Shows live platform activity\n * Implements: Social Proof (FOMO + Bandwagon Effect)\n * \"23 students in Hyderabad are networking right now\"\n */\nexport default function SocialProofBar({ location }: { location?: string }) {\n  const [activity, setActivity] = useState<LiveActivity | null>(null);\n  const [currentStat, setCurrentStat] = useState(0);\n\n  const fetchActivity = useCallback(async () => {\n    try {\n      const data = await getLiveActivity(location);\n      setActivity(data);\n    } catch (error) {\n      console.error('Failed to fetch live activity:', error);\n    }\n  }, [location]);\n\n  useEffect(() => {\n    fetchActivity();\n    // Refresh every 30 seconds\n    const interval = setInterval(fetchActivity, 30000);\n    return () => clearInterval(interval);\n  }, [fetchActivity]);\n\n  // Rotate between different stats\n  useEffect(() => {\n    if (!activity) return;\n    const interval = setInterval(() => {\n      setCurrentStat((prev) => (prev + 1) % 3);\n    }, 5000);\n    return () => clearInterval(interval);\n  }, [activity]);\n\n  if (!activity) return null;\n\n  const stats = [\n    {\n      icon: <Users className=\"w-3.5 h-3.5\" />,\n      text: `${activity.activeUsersNow} student${activity.activeUsersNow !== 1 ? 's' : ''} networking right now ${activity.locationLabel}`,\n      color: 'text-green-600 dark:text-green-400',\n      bg: 'bg-green-50 dark:bg-green-900/20',\n    },\n    {\n      icon: <Zap className=\"w-3.5 h-3.5\" />,\n      text: `${activity.connectionsToday} connections made today`,\n      color: 'text-blue-600 dark:text-blue-400',\n      bg: 'bg-blue-50 dark:bg-blue-900/20',\n    },\n    {\n      icon: <UserPlus className=\"w-3.5 h-3.5\" />,\n      text: `${activity.newUsersToday} new student${activity.newUsersToday !== 1 ? 's' : ''} joined today`,\n      color: 'text-purple-600 dark:text-purple-400',\n      bg: 'bg-purple-50 dark:bg-purple-900/20',\n    },\n  ];\n\n  const current = stats[currentStat];\n\n  return (\n    <div className={`${current.bg} rounded-lg px-3 py-2 overflow-hidden`}>\n      <AnimatePresence mode=\"wait\">\n        <motion.div\n          key={currentStat}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -10 }}\n          transition={{ duration: 0.3 }}\n          className={`flex items-center gap-2 text-xs font-medium ${current.color}`}\n        >\n          {/* Pulsing dot */}\n          <span className=\"relative flex h-2 w-2\">\n            <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75\"></span>\n            <span className=\"relative inline-flex rounded-full h-2 w-2 bg-green-500\"></span>\n          </span>\n          {current.icon}\n          <span>{current.text}</span>\n        </motion.div>\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAYe,SAAS,eAAe,EAAE,QAAQ,EAAyB;IACxE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAsB;IAC9D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,IAAI;YACF,MAAM,OAAO,MAAM,IAAA,kJAAe,EAAC;YACnC,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF,GAAG;QAAC;KAAS;IAEb,IAAA,kNAAS,EAAC;QACR;QACA,2BAA2B;QAC3B,MAAM,WAAW,YAAY,eAAe;QAC5C,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAc;IAElB,iCAAiC;IACjC,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,UAAU;QACf,MAAM,WAAW,YAAY;YAC3B,eAAe,CAAC,OAAS,CAAC,OAAO,CAAC,IAAI;QACxC,GAAG;QACH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;KAAS;IAEb,IAAI,CAAC,UAAU,OAAO;IAEtB,MAAM,QAAQ;QACZ;YACE,oBAAM,8OAAC,6MAAK;gBAAC,WAAU;;;;;;YACvB,MAAM,GAAG,SAAS,cAAc,CAAC,QAAQ,EAAE,SAAS,cAAc,KAAK,IAAI,MAAM,GAAG,sBAAsB,EAAE,SAAS,aAAa,EAAE;YACpI,OAAO;YACP,IAAI;QACN;QACA;YACE,oBAAM,8OAAC,uMAAG;gBAAC,WAAU;;;;;;YACrB,MAAM,GAAG,SAAS,gBAAgB,CAAC,uBAAuB,CAAC;YAC3D,OAAO;YACP,IAAI;QACN;QACA;YACE,oBAAM,8OAAC,0NAAQ;gBAAC,WAAU;;;;;;YAC1B,MAAM,GAAG,SAAS,aAAa,CAAC,YAAY,EAAE,SAAS,aAAa,KAAK,IAAI,MAAM,GAAG,aAAa,CAAC;YACpG,OAAO;YACP,IAAI;QACN;KACD;IAED,MAAM,UAAU,KAAK,CAAC,YAAY;IAElC,qBACE,8OAAC;QAAI,WAAW,GAAG,QAAQ,EAAE,CAAC,qCAAqC,CAAC;kBAClE,cAAA,8OAAC,4MAAe;YAAC,MAAK;sBACpB,cAAA,8OAAC,oMAAM,CAAC,GAAG;gBAET,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,MAAM;oBAAE,SAAS;oBAAG,GAAG,CAAC;gBAAG;gBAC3B,YAAY;oBAAE,UAAU;gBAAI;gBAC5B,WAAW,CAAC,4CAA4C,EAAE,QAAQ,KAAK,EAAE;;kCAGzE,8OAAC;wBAAK,WAAU;;0CACd,8OAAC;gCAAK,WAAU;;;;;;0CAChB,8OAAC;gCAAK,WAAU;;;;;;;;;;;;oBAEjB,QAAQ,IAAI;kCACb,8OAAC;kCAAM,QAAQ,IAAI;;;;;;;eAbd;;;;;;;;;;;;;;;AAkBf"}},
    {"offset": {"line": 10963, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ProgressNudges.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Target, MessageSquare, FileText, Users, CheckCircle, X } from 'lucide-react';\nimport { getWeeklyGoals, getNudges, type WeeklyGoals, type ProgressNudge } from '@/lib/api/engagement';\n\n/**\n * ProgressNudges - Shows incomplete progress bars and tasks\n * Implements: Zeigarnik Effect (Incomplete Tasks Bug You)\n * \"You've connected with 7/10 people this weekfinish strong!\"\n */\nexport default function ProgressNudges() {\n  const [goals, setGoals] = useState<WeeklyGoals | null>(null);\n  const [nudges, setNudges] = useState<ProgressNudge[]>([]);\n  const [dismissedNudges, setDismissedNudges] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [goalsData, nudgesData] = await Promise.all([\n          getWeeklyGoals(),\n          getNudges(),\n        ]);\n        setGoals(goalsData);\n        setNudges(nudgesData);\n      } catch (error) {\n        console.error('Failed to fetch progress:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, []);\n\n  const dismissNudge = (type: string) => {\n    setDismissedNudges(prev => new Set([...prev, type]));\n  };\n\n  if (loading) return null;\n\n  const visibleNudges = nudges.filter(n => !dismissedNudges.has(n.type));\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Weekly Goals Progress */}\n      {goals && !goals.isCompleted && (\n        <div className=\"bg-white dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-800 shadow-sm\">\n          <div className=\"flex items-center gap-2 mb-3\">\n            <Target className=\"w-4 h-4 text-blue-500\" />\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">Weekly Goals</h3>\n            {goals.isCompleted && (\n              <span className=\"ml-auto px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full flex items-center gap-1\">\n                <CheckCircle className=\"w-3 h-3\" /> Done!\n              </span>\n            )}\n          </div>\n\n          <div className=\"space-y-3\">\n            {/* Connections Goal */}\n            <GoalBar\n              icon={<Users className=\"w-3.5 h-3.5 text-blue-500\" />}\n              label=\"Connections\"\n              current={goals.connectionsMade}\n              target={goals.connectionsTarget}\n              progress={goals.connectionsProgress}\n              color=\"blue\"\n            />\n\n            {/* Posts Goal */}\n            <GoalBar\n              icon={<FileText className=\"w-3.5 h-3.5 text-purple-500\" />}\n              label=\"Posts\"\n              current={goals.postsMade}\n              target={goals.postsTarget}\n              progress={goals.postsProgress}\n              color=\"purple\"\n            />\n\n            {/* Messages Goal */}\n            <GoalBar\n              icon={<MessageSquare className=\"w-3.5 h-3.5 text-green-500\" />}\n              label=\"Messages\"\n              current={goals.messagesSent}\n              target={goals.messagesTarget}\n              progress={goals.messagesProgress}\n              color=\"green\"\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Progress Nudges */}\n      <AnimatePresence>\n        {visibleNudges.map((nudge) => (\n          <motion.div\n            key={nudge.type}\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"bg-white dark:bg-gray-900 rounded-xl p-3 border border-gray-200 dark:border-gray-800 shadow-sm\"\n          >\n            <div className=\"flex items-start gap-2\">\n              <span className=\"text-lg\">{nudge.icon}</span>\n              <p className=\"flex-1 text-sm text-gray-700 dark:text-gray-300\">{nudge.message}</p>\n              <button\n                onClick={() => dismissNudge(nudge.type)}\n                className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full flex-shrink-0\"\n              >\n                <X className=\"w-3.5 h-3.5 text-gray-400\" />\n              </button>\n            </div>\n\n            {/* Progress bar for nudge */}\n            {nudge.target > 0 && nudge.progress >= 0 && (\n              <div className=\"mt-2 ml-7\">\n                <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5\">\n                  <motion.div\n                    className=\"bg-blue-500 h-1.5 rounded-full\"\n                    initial={{ width: 0 }}\n                    animate={{ width: `${Math.min((nudge.progress / nudge.target) * 100, 100)}%` }}\n                    transition={{ duration: 1, delay: 0.3 }}\n                  />\n                </div>\n              </div>\n            )}\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n}\n\nfunction GoalBar({\n  icon,\n  label,\n  current,\n  target,\n  progress,\n  color,\n}: {\n  icon: React.ReactNode;\n  label: string;\n  current: number;\n  target: number;\n  progress: number;\n  color: 'blue' | 'purple' | 'green';\n}) {\n  const colors = {\n    blue: 'bg-blue-500',\n    purple: 'bg-purple-500',\n    green: 'bg-green-500',\n  };\n\n  const bgColors = {\n    blue: 'bg-blue-100 dark:bg-blue-900/30',\n    purple: 'bg-purple-100 dark:bg-purple-900/30',\n    green: 'bg-green-100 dark:bg-green-900/30',\n  };\n\n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-1\">\n        <div className=\"flex items-center gap-1.5\">\n          {icon}\n          <span className=\"text-xs text-gray-600 dark:text-gray-400\">{label}</span>\n        </div>\n        <span className=\"text-xs font-medium text-gray-900 dark:text-white\">\n          {current}/{target}\n        </span>\n      </div>\n      <div className={`w-full ${bgColors[color]} rounded-full h-2`}>\n        <motion.div\n          className={`${colors[color]} h-2 rounded-full`}\n          initial={{ width: 0 }}\n          animate={{ width: `${Math.min(progress, 100)}%` }}\n          transition={{ duration: 1, delay: 0.2 }}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11322, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ExitMessage.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Rocket, Star, PartyPopper } from 'lucide-react';\nimport { getSessionSummary, type SessionSummary } from '@/lib/api/engagement';\n\n/**\n * ExitMessage - Shows positive summary when user leaves\n * Implements: Peak-End Rule (Memory Hack) - End on a positive\n * \"You made 2 new connections today! See you tomorrow \"\n */\nexport default function ExitMessage() {\n  const [summary, setSummary] = useState<SessionSummary | null>(null);\n  const [isVisible, setIsVisible] = useState(false);\n\n  const showExitMessage = useCallback(async () => {\n    try {\n      const data = await getSessionSummary();\n      setSummary(data);\n      setIsVisible(true);\n    } catch (error) {\n      console.error('Failed to fetch session summary:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    // Detect when user is about to leave (beforeunload)  limited on mobile\n    // Instead, show after a period of inactivity or on visibility change\n    let inactivityTimer: NodeJS.Timeout;\n\n    const handleVisibilityChange = () => {\n      if (document.visibilityState === 'hidden') {\n        // User is switching away from the app\n        showExitMessage();\n      }\n    };\n\n    const resetInactivity = () => {\n      clearTimeout(inactivityTimer);\n      setIsVisible(false);\n      inactivityTimer = setTimeout(() => {\n        // Show after 5 minutes of inactivity\n        showExitMessage();\n      }, 5 * 60 * 1000);\n    };\n\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    document.addEventListener('mousemove', resetInactivity);\n    document.addEventListener('touchstart', resetInactivity);\n\n    resetInactivity();\n\n    return () => {\n      clearTimeout(inactivityTimer);\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      document.removeEventListener('mousemove', resetInactivity);\n      document.removeEventListener('touchstart', resetInactivity);\n    };\n  }, [showExitMessage]);\n\n  if (!summary) return null;\n\n  const emojiMap: Record<string, React.ReactNode> = {\n    '': <PartyPopper className=\"w-8 h-8 text-yellow-500\" />,\n    '': <Rocket className=\"w-8 h-8 text-blue-500\" />,\n    '': <Star className=\"w-8 h-8 text-yellow-400\" />,\n  };\n\n  return (\n    <AnimatePresence>\n      {isVisible && (\n        <motion.div\n          initial={{ opacity: 0, y: 100 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: 100 }}\n          className=\"fixed bottom-20 left-1/2 -translate-x-1/2 z-50 w-[90%] max-w-md\"\n        >\n          <div className=\"bg-white dark:bg-gray-900 rounded-2xl p-5 shadow-2xl border border-gray-200 dark:border-gray-700\">\n            <button\n              onClick={() => setIsVisible(false)}\n              className=\"absolute top-3 right-3 p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full\"\n            >\n              <X className=\"w-4 h-4 text-gray-400\" />\n            </button>\n\n            <div className=\"flex flex-col items-center text-center\">\n              <motion.div\n                initial={{ scale: 0 }}\n                animate={{ scale: 1 }}\n                transition={{ type: 'spring', delay: 0.2 }}\n              >\n                {emojiMap[summary.emoji] || <Star className=\"w-8 h-8 text-yellow-400\" />}\n              </motion.div>\n\n              <motion.p\n                initial={{ opacity: 0, y: 10 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: 0.3 }}\n                className=\"mt-3 text-sm font-medium text-gray-900 dark:text-white\"\n              >\n                {summary.message}\n              </motion.p>\n\n              {/* Stats row */}\n              {(summary.connectionsAccepted > 0 || summary.newPosts > 0 || summary.messagesCount > 0) && (\n                <motion.div\n                  initial={{ opacity: 0 }}\n                  animate={{ opacity: 1 }}\n                  transition={{ delay: 0.5 }}\n                  className=\"flex items-center gap-4 mt-3 text-xs text-gray-500 dark:text-gray-400\"\n                >\n                  {summary.connectionsAccepted > 0 && (\n                    <span> {summary.connectionsAccepted} connection{summary.connectionsAccepted > 1 ? 's' : ''}</span>\n                  )}\n                  {summary.newPosts > 0 && (\n                    <span> {summary.newPosts} post{summary.newPosts > 1 ? 's' : ''}</span>\n                  )}\n                  {summary.messagesCount > 0 && (\n                    <span> {summary.messagesCount} message{summary.messagesCount > 1 ? 's' : ''}</span>\n                  )}\n                </motion.div>\n              )}\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11567, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ConnectionCelebration.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Users } from 'lucide-react';\nimport { getConnectionCelebration, type CelebrationData } from '@/lib/api/engagement';\n\n/**\n * ConnectionCelebration - Full-screen confetti + celebration when connection accepted\n * Implements: Peak-End Rule (Peak moment) - Dopamine hit\n */\n\n// Confetti particle component\nfunction ConfettiParticle({ delay, x }: { delay: number; x: number }) {\n  const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#FF69B4', '#00CED1'];\n  const color = colors[Math.floor(Math.random() * colors.length)];\n  const rotation = Math.random() * 360;\n  const size = 6 + Math.random() * 8;\n\n  return (\n    <motion.div\n      className=\"absolute top-0 pointer-events-none\"\n      initial={{ \n        x: x, \n        y: -20, \n        rotate: 0, \n        opacity: 1,\n        scale: 1,\n      }}\n      animate={{ \n        y: typeof window !== 'undefined' ? window.innerHeight + 50 : 900,\n        rotate: rotation + 720,\n        opacity: [1, 1, 0.8, 0],\n        x: x + (Math.random() - 0.5) * 200,\n      }}\n      transition={{ \n        duration: 2.5 + Math.random() * 1.5, \n        delay: delay,\n        ease: 'easeIn',\n      }}\n      style={{\n        width: size,\n        height: size * (Math.random() > 0.5 ? 1 : 2.5),\n        backgroundColor: color,\n        borderRadius: Math.random() > 0.5 ? '50%' : '2px',\n      }}\n    />\n  );\n}\n\ninterface ConnectionCelebrationProps {\n  connectionId: string | null;\n  onClose: () => void;\n}\n\nexport default function ConnectionCelebration({ connectionId, onClose }: ConnectionCelebrationProps) {\n  const [celebration, setCelebration] = useState<CelebrationData | null>(null);\n  const [showConfetti, setShowConfetti] = useState(false);\n\n  useEffect(() => {\n    if (!connectionId) return;\n\n    const fetchCelebration = async () => {\n      try {\n        const data = await getConnectionCelebration(connectionId);\n        if (data) {\n          setCelebration(data);\n          setShowConfetti(true);\n          // Auto-dismiss after 5 seconds\n          setTimeout(() => {\n            onClose();\n          }, 5000);\n        }\n      } catch (error) {\n        console.error('Failed to fetch celebration:', error);\n      }\n    };\n\n    fetchCelebration();\n  }, [connectionId, onClose]);\n\n  // Generate confetti particles\n  const confettiCount = 60;\n  const confettiParticles = Array.from({ length: confettiCount }, (_, i) => ({\n    id: i,\n    delay: Math.random() * 0.8,\n    x: Math.random() * (typeof window !== 'undefined' ? window.innerWidth : 400),\n  }));\n\n  if (!connectionId || !celebration) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-[100] flex items-center justify-center bg-black/60\"\n        onClick={onClose}\n      >\n        {/* Confetti Layer */}\n        {showConfetti && (\n          <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n            {confettiParticles.map((p) => (\n              <ConfettiParticle key={p.id} delay={p.delay} x={p.x} />\n            ))}\n          </div>\n        )}\n\n        {/* Celebration Card */}\n        <motion.div\n          initial={{ scale: 0, rotate: -10 }}\n          animate={{ scale: 1, rotate: 0 }}\n          exit={{ scale: 0, opacity: 0 }}\n          transition={{ type: 'spring', damping: 15, stiffness: 200 }}\n          className=\"bg-white dark:bg-gray-900 rounded-3xl p-8 max-w-sm w-full mx-4 shadow-2xl text-center relative\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <button\n            onClick={onClose}\n            className=\"absolute top-4 right-4 p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full\"\n          >\n            <X className=\"w-5 h-5 text-gray-400\" />\n          </button>\n\n          {/* Celebration emoji */}\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: [0, 1.3, 1] }}\n            transition={{ delay: 0.3, duration: 0.5 }}\n            className=\"text-6xl mb-4\"\n          >\n            \n          </motion.div>\n\n          {/* Profile images */}\n          <div className=\"flex items-center justify-center gap-3 mb-4\">\n            {celebration.otherUser.profileImage ? (\n              <motion.img\n                initial={{ x: -30, opacity: 0 }}\n                animate={{ x: 0, opacity: 1 }}\n                transition={{ delay: 0.5 }}\n                src={celebration.otherUser.profileImage}\n                alt={celebration.otherUser.name}\n                className=\"w-16 h-16 rounded-full border-4 border-green-400 object-cover\"\n              />\n            ) : (\n              <motion.div\n                initial={{ x: -30, opacity: 0 }}\n                animate={{ x: 0, opacity: 1 }}\n                transition={{ delay: 0.5 }}\n                className=\"w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-2xl font-bold border-4 border-green-400\"\n              >\n                {celebration.otherUser.name.charAt(0)}\n              </motion.div>\n            )}\n\n            <motion.div\n              initial={{ scale: 0 }}\n              animate={{ scale: 1 }}\n              transition={{ delay: 0.7 }}\n              className=\"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center\"\n            >\n              <Users className=\"w-4 h-4 text-white\" />\n            </motion.div>\n          </div>\n\n          {/* Message */}\n          <motion.h2\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.6 }}\n            className=\"text-xl font-bold text-gray-900 dark:text-white mb-2\"\n          >\n            {celebration.celebrationMessage}\n          </motion.h2>\n\n          {celebration.mutualConnections > 0 && (\n            <motion.p\n              initial={{ opacity: 0 }}\n              animate={{ opacity: 1 }}\n              transition={{ delay: 0.8 }}\n              className=\"text-sm text-gray-500 dark:text-gray-400 mb-4\"\n            >\n              You have {celebration.mutualConnections} mutual connection{celebration.mutualConnections > 1 ? 's' : ''}\n            </motion.p>\n          )}\n\n          {/* Action button */}\n          <motion.button\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 1 }}\n            onClick={onClose}\n            className=\"mt-2 px-6 py-2.5 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-full font-medium hover:shadow-lg transition-shadow\"\n          >\n            Continue Networking \n          </motion.button>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 11914, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/ConnectionLimitBanner.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Lock, Clock, Zap } from 'lucide-react';\nimport { getConnectionLimit, type ConnectionLimit } from '@/lib/api/engagement';\n\n/**\n * ConnectionLimitBanner - Shows remaining daily connection requests\n * Implements: Scarcity + Urgency\n * \"Only 3 connection requests left today!\"\n */\nexport default function ConnectionLimitBanner() {\n  const [limit, setLimit] = useState<ConnectionLimit | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchLimit = async () => {\n      try {\n        const data = await getConnectionLimit();\n        setLimit(data);\n      } catch (error) {\n        console.error('Failed to fetch connection limit:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLimit();\n  }, []);\n\n  if (loading || !limit) return null;\n\n  // Don't show if plenty of requests remaining\n  if (limit.remaining > 5) return null;\n\n  const percentage = (limit.remaining / limit.limit) * 100;\n  const isLow = limit.remaining <= 3;\n  const isDepleted = limit.remaining === 0;\n\n  // Calculate time until reset\n  const resetTime = new Date(limit.resetsAt);\n  const now = new Date();\n  const hoursUntilReset = Math.ceil((resetTime.getTime() - now.getTime()) / (1000 * 60 * 60));\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className={`rounded-xl p-3 border ${\n        isDepleted\n          ? 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800'\n          : isLow\n          ? 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800'\n          : 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800'\n      }`}\n    >\n      <div className=\"flex items-center gap-2\">\n        {isDepleted ? (\n          <Lock className=\"w-4 h-4 text-red-500 flex-shrink-0\" />\n        ) : isLow ? (\n          <Zap className=\"w-4 h-4 text-yellow-500 flex-shrink-0\" />\n        ) : (\n          <Zap className=\"w-4 h-4 text-blue-500 flex-shrink-0\" />\n        )}\n\n        <div className=\"flex-1\">\n          <p className={`text-xs font-medium ${\n            isDepleted\n              ? 'text-red-700 dark:text-red-400'\n              : isLow\n              ? 'text-yellow-700 dark:text-yellow-400'\n              : 'text-blue-700 dark:text-blue-400'\n          }`}>\n            {isDepleted\n              ? `Daily limit reached  resets in ${hoursUntilReset}h`\n              : `${limit.remaining} connection request${limit.remaining !== 1 ? 's' : ''} left today`}\n          </p>\n\n          {/* Progress bar showing depletion */}\n          <div className=\"mt-1.5 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5\">\n            <motion.div\n              className={`h-1.5 rounded-full ${\n                isDepleted\n                  ? 'bg-red-500'\n                  : isLow\n                  ? 'bg-yellow-500'\n                  : 'bg-blue-500'\n              }`}\n              initial={{ width: '100%' }}\n              animate={{ width: `${percentage}%` }}\n              transition={{ duration: 0.5 }}\n            />\n          </div>\n        </div>\n\n        {isDepleted && (\n          <div className=\"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 flex-shrink-0\">\n            <Clock className=\"w-3 h-3\" />\n            <span>{hoursUntilReset}h</span>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AALA;;;;;;AAYe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAyB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,OAAO,MAAM,IAAA,qJAAkB;gBACrC,SAAS;YACX,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,qCAAqC;YACrD,SAAU;gBACR,WAAW;YACb;QACF;QACA;IACF,GAAG,EAAE;IAEL,IAAI,WAAW,CAAC,OAAO,OAAO;IAE9B,6CAA6C;IAC7C,IAAI,MAAM,SAAS,GAAG,GAAG,OAAO;IAEhC,MAAM,aAAa,AAAC,MAAM,SAAS,GAAG,MAAM,KAAK,GAAI;IACrD,MAAM,QAAQ,MAAM,SAAS,IAAI;IACjC,MAAM,aAAa,MAAM,SAAS,KAAK;IAEvC,6BAA6B;IAC7B,MAAM,YAAY,IAAI,KAAK,MAAM,QAAQ;IACzC,MAAM,MAAM,IAAI;IAChB,MAAM,kBAAkB,KAAK,IAAI,CAAC,CAAC,UAAU,OAAO,KAAK,IAAI,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE;IAEzF,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC9B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAW,CAAC,sBAAsB,EAChC,aACI,oEACA,QACA,gFACA,uEACJ;kBAEF,cAAA,8OAAC;YAAI,WAAU;;gBACZ,2BACC,8OAAC,0MAAI;oBAAC,WAAU;;;;;2BACd,sBACF,8OAAC,uMAAG;oBAAC,WAAU;;;;;yCAEf,8OAAC,uMAAG;oBAAC,WAAU;;;;;;8BAGjB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAW,CAAC,oBAAoB,EACjC,aACI,mCACA,QACA,yCACA,oCACJ;sCACC,aACG,CAAC,gCAAgC,EAAE,gBAAgB,CAAC,CAAC,GACrD,GAAG,MAAM,SAAS,CAAC,mBAAmB,EAAE,MAAM,SAAS,KAAK,IAAI,MAAM,GAAG,WAAW,CAAC;;;;;;sCAI3F,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC,oMAAM,CAAC,GAAG;gCACT,WAAW,CAAC,mBAAmB,EAC7B,aACI,eACA,QACA,kBACA,eACJ;gCACF,SAAS;oCAAE,OAAO;gCAAO;gCACzB,SAAS;oCAAE,OAAO,GAAG,WAAW,CAAC,CAAC;gCAAC;gCACnC,YAAY;oCAAE,UAAU;gCAAI;;;;;;;;;;;;;;;;;gBAKjC,4BACC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,6MAAK;4BAAC,WAAU;;;;;;sCACjB,8OAAC;;gCAAM;gCAAgB;;;;;;;;;;;;;;;;;;;;;;;;AAMnC"}},
    {"offset": {"line": 12071, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/Leaderboard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Trophy, Crown, Medal, Award } from 'lucide-react';\nimport { getLeaderboard, type LeaderboardEntry } from '@/lib/api/engagement';\nimport Link from 'next/link';\n\n/**\n * Leaderboard - Top networkers this week\n * Implements: Social Proof (Bandwagon Effect)\n * \"Top 10 Most Connected Students This Week\"\n */\nexport default function Leaderboard() {\n  const [entries, setEntries] = useState<LeaderboardEntry[]>([]);\n  const [period, setPeriod] = useState<'weekly' | 'monthly'>('weekly');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchLeaderboard = async () => {\n      setLoading(true);\n      try {\n        const data = await getLeaderboard(period, 10);\n        setEntries(data.leaderboard);\n      } catch (error) {\n        console.error('Failed to fetch leaderboard:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLeaderboard();\n  }, [period]);\n\n  const getRankIcon = (index: number) => {\n    switch (index) {\n      case 0: return <Crown className=\"w-5 h-5 text-yellow-500\" />;\n      case 1: return <Medal className=\"w-5 h-5 text-gray-400\" />;\n      case 2: return <Award className=\"w-5 h-5 text-amber-600\" />;\n      default: return <span className=\"w-5 h-5 flex items-center justify-center text-xs font-bold text-gray-500\">{index + 1}</span>;\n    }\n  };\n\n  const getRankBg = (index: number) => {\n    switch (index) {\n      case 0: return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800';\n      case 1: return 'bg-gray-50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700';\n      case 2: return 'bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800';\n      default: return 'bg-white dark:bg-gray-900 border-gray-100 dark:border-gray-800';\n    }\n  };\n\n  return (\n    <div className=\"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-200 dark:border-gray-800\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Trophy className=\"w-5 h-5 text-yellow-500\" />\n            <h3 className=\"font-semibold text-gray-900 dark:text-white text-sm\">Top Networkers</h3>\n          </div>\n          <div className=\"flex gap-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-0.5\">\n            <button\n              onClick={() => setPeriod('weekly')}\n              className={`px-2.5 py-1 text-xs rounded-md transition-colors ${\n                period === 'weekly'\n                  ? 'bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm'\n                  : 'text-gray-500 dark:text-gray-400'\n              }`}\n            >\n              Week\n            </button>\n            <button\n              onClick={() => setPeriod('monthly')}\n              className={`px-2.5 py-1 text-xs rounded-md transition-colors ${\n                period === 'monthly'\n                  ? 'bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm'\n                  : 'text-gray-500 dark:text-gray-400'\n              }`}\n            >\n              Month\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Entries */}\n      <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-8\">\n            <div className=\"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent\"></div>\n          </div>\n        ) : entries.length === 0 ? (\n          <div className=\"text-center py-8 text-sm text-gray-500 dark:text-gray-400\">\n            No data yet. Start networking!\n          </div>\n        ) : (\n          entries.map((entry, index) => (\n            <motion.div\n              key={entry.id}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: index * 0.05 }}\n            >\n              <Link\n                href={`/profile/${entry.username}`}\n                className={`flex items-center gap-3 px-4 py-2.5 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors ${\n                  index < 3 ? getRankBg(index) : ''\n                }`}\n              >\n                {/* Rank */}\n                <div className=\"w-6 flex-shrink-0\">\n                  {getRankIcon(index)}\n                </div>\n\n                {/* Avatar */}\n                {entry.profileImage ? (\n                  <img\n                    src={entry.profileImage}\n                    alt={entry.name}\n                    className=\"w-8 h-8 rounded-full object-cover flex-shrink-0\"\n                  />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold flex-shrink-0\">\n                    {entry.name.charAt(0)}\n                  </div>\n                )}\n\n                {/* Info */}\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\n                    {entry.name}\n                  </p>\n                  {entry.college && (\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">\n                      {entry.college}\n                    </p>\n                  )}\n                </div>\n\n                {/* Connection count */}\n                <div className=\"text-right flex-shrink-0\">\n                  <span className=\"text-sm font-bold text-blue-600 dark:text-blue-400\">\n                    {entry.connectionCount}\n                  </span>\n                  <p className=\"text-[10px] text-gray-400\">connections</p>\n                </div>\n              </Link>\n            </motion.div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12369, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/DailyMatchCard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Sparkles, UserPlus, ChevronRight, X, Gem } from 'lucide-react';\nimport { getDailyMatches, getHiddenGem, type DailyMatch, type DailyMatchesResponse } from '@/lib/api/engagement';\nimport Link from 'next/link';\n\n/**\n * DailyMatchCard - Shows variable daily match suggestions\n * Implements: Variable Rewards (Slot Machine Trick)\n * Sometimes 1 match, sometimes 5+  unpredictable = more dopamine\n */\nexport default function DailyMatchCard() {\n  const [matchData, setMatchData] = useState<DailyMatchesResponse | null>(null);\n  const [hiddenGem, setHiddenGem] = useState<{ match: DailyMatch; message: string } | null>(null);\n  const [dismissed, setDismissed] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [showSurprise, setShowSurprise] = useState(false);\n\n  useEffect(() => {\n    const fetchMatches = async () => {\n      try {\n        const [matches, gem] = await Promise.all([\n          getDailyMatches(),\n          getHiddenGem(),\n        ]);\n        setMatchData(matches);\n        if (gem) setHiddenGem(gem as { match: DailyMatch; message: string });\n\n        // Show surprise animation if bonus matches\n        if (matches.surpriseMessage) {\n          setTimeout(() => setShowSurprise(true), 500);\n          setTimeout(() => setShowSurprise(false), 3000);\n        }\n      } catch (error) {\n        console.error('Failed to fetch daily matches:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchMatches();\n  }, []);\n\n  if (loading || dismissed || !matchData || matchData.matches.length === 0) return null;\n\n  return (\n    <div className=\"space-y-3\">\n      {/* Surprise message */}\n      <AnimatePresence>\n        {showSurprise && matchData.surpriseMessage && (\n          <motion.div\n            initial={{ opacity: 0, y: -20 }}\n            animate={{ opacity: 1, y: 0 }}\n            exit={{ opacity: 0, y: -20 }}\n            className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl p-3 text-center text-sm font-medium\"\n          >\n            {matchData.surpriseMessage}\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Daily Matches */}\n      <div className=\"bg-white dark:bg-gray-900 rounded-xl border border-gray-200 dark:border-gray-800 shadow-sm overflow-hidden\">\n        <div className=\"p-3 border-b border-gray-100 dark:border-gray-800 flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <Sparkles className=\"w-4 h-4 text-purple-500\" />\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-white\">\n              Today&apos;s Matches\n            </h3>\n            <span className=\"px-1.5 py-0.5 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs rounded-full font-medium\">\n              {matchData.matchCount}\n            </span>\n          </div>\n          <button onClick={() => setDismissed(true)} className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full\">\n            <X className=\"w-4 h-4 text-gray-400\" />\n          </button>\n        </div>\n\n        <div className=\"divide-y divide-gray-100 dark:divide-gray-800\">\n          {matchData.matches.map((match, index) => (\n            <motion.div\n              key={match.id}\n              initial={{ opacity: 0, x: -20 }}\n              animate={{ opacity: 1, x: 0 }}\n              transition={{ delay: index * 0.1 }}\n            >\n              <Link\n                href={`/profile/${match.username}`}\n                className=\"flex items-center gap-3 p-3 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors\"\n              >\n                {match.profileImage ? (\n                  <img\n                    src={match.profileImage}\n                    alt={match.name}\n                    className=\"w-10 h-10 rounded-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-bold\">\n                    {match.name.charAt(0)}\n                  </div>\n                )}\n\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">{match.name}</p>\n                    {match.isOnline && (\n                      <span className=\"w-2 h-2 bg-green-500 rounded-full flex-shrink-0\" />\n                    )}\n                  </div>\n                  {match.headline && (\n                    <p className=\"text-xs text-gray-500 dark:text-gray-400 truncate\">{match.headline}</p>\n                  )}\n                  {match.college && (\n                    <p className=\"text-xs text-gray-400 dark:text-gray-500 truncate\">{match.college}</p>\n                  )}\n                </div>\n\n                <button className=\"flex items-center gap-1 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-medium rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/50 transition-colors\">\n                  <UserPlus className=\"w-3.5 h-3.5\" />\n                  Connect\n                </button>\n              </Link>\n            </motion.div>\n          ))}\n        </div>\n\n        <Link\n          href=\"/find-people\"\n          className=\"flex items-center justify-center gap-1 p-2.5 text-xs text-blue-600 dark:text-blue-400 font-medium hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors border-t border-gray-100 dark:border-gray-800\"\n        >\n          Find more people <ChevronRight className=\"w-3.5 h-3.5\" />\n        </Link>\n      </div>\n\n      {/* Hidden Gem (weekly surprise) */}\n      {hiddenGem && (\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className=\"bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-900/20 dark:to-yellow-900/20 rounded-xl border border-amber-200 dark:border-amber-800 p-4\"\n        >\n          <div className=\"flex items-start gap-3\">\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-amber-400 to-yellow-500 flex items-center justify-center flex-shrink-0\">\n              <Gem className=\"w-5 h-5 text-white\" />\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"text-sm font-semibold text-amber-900 dark:text-amber-300\">\n                {hiddenGem.message}\n              </p>\n              <Link\n                href={`/profile/${hiddenGem.match.username}`}\n                className=\"mt-2 flex items-center gap-2\"\n              >\n                {hiddenGem.match.profileImage ? (\n                  <img\n                    src={hiddenGem.match.profileImage}\n                    alt={hiddenGem.match.name}\n                    className=\"w-8 h-8 rounded-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-xs font-bold\">\n                    {hiddenGem.match.name.charAt(0)}\n                  </div>\n                )}\n                <div>\n                  <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{hiddenGem.match.name}</p>\n                  <p className=\"text-xs text-gray-500 dark:text-gray-400\">{hiddenGem.match.headline || hiddenGem.match.college}</p>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </motion.div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 12764, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/engagement/index.ts"],"sourcesContent":["export { default as StreakCounter } from './StreakCounter';\nexport { default as SocialProofBar } from './SocialProofBar';\nexport { default as ProgressNudges } from './ProgressNudges';\nexport { default as ExitMessage } from './ExitMessage';\nexport { default as ConnectionCelebration } from './ConnectionCelebration';\nexport { default as ConnectionLimitBanner } from './ConnectionLimitBanner';\nexport { default as Leaderboard } from './Leaderboard';\nexport { default as DailyMatchCard } from './DailyMatchCard';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 12839, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/Feed.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Loader2, Plus } from 'lucide-react';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { Comments } from '@/components/feed/Comments';\nimport { CreatePostModal } from '@/components/feed/CreatePostModal';\nimport { StoryCarousel, StoryViewer, StoryCreator } from '@/components/stories';\nimport { getFeed } from '@/lib/api/posts';\nimport { type StoryGroup } from '@/lib/api/stories';\nimport { \n  initializeSocket, \n  disconnectSocket, \n  getSocket,\n  joinPostRoom,\n  leavePostRoom,\n  removeSocketHandlers,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { recordLogin } from '@/lib/api/engagement';\nimport { SocialProofBar, StreakCounter, ProgressNudges, DailyMatchCard, ConnectionLimitBanner, Leaderboard } from '@/components/engagement';\nimport type { Post, PollOption } from '@/types/post';\n\nexport function Feed() {\n  const { user, loading: authLoading } = useAuth();\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [cursor, setCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal states\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedPostForComments, setSelectedPostForComments] = useState<string | null>(null);\n  const [highlightCommentId, setHighlightCommentId] = useState<string | undefined>(undefined);\n  \n  // Stories states\n  const [showStoryCreator, setShowStoryCreator] = useState(false);\n  const [showStoryViewer, setShowStoryViewer] = useState(false);\n  const [selectedStoryGroup, setSelectedStoryGroup] = useState<StoryGroup | null>(null);\n  \n  // Refs for infinite scroll\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Initialize Socket.IO\n  useEffect(() => {\n    if (!user) return;\n    \n    // Define handlers\n    const handlePostCreated = ({ post }: { post: Post }) => {\n      console.log('Feed: New post received via socket:', post.id);\n      // Add new post to the top of the feed in real-time\n      setPosts(prev => {\n        // Check if post already exists to avoid duplicates\n        if (prev.some(p => p.id === post.id)) return prev;\n        return [post, ...prev];\n      });\n    };\n    \n    const handlePostLiked = ({ postId, userId: likerUserId, liked, likesCount, reactionType, reactionSummary }: any) => {\n      setPosts(prev => prev.map(post => {\n        if (post.id !== postId) return post;\n        // Only update isLiked/reactionType if the current user performed the action\n        const isCurrentUser = likerUserId === user.id;\n        return {\n          ...post,\n          likesCount,\n          isLiked: isCurrentUser ? liked : post.isLiked,\n          userReactionType: isCurrentUser ? reactionType : post.userReactionType,\n          reactionSummary: reactionSummary || post.reactionSummary,\n        };\n      }));\n    };\n    \n    const handlePostReacted = ({ postId, userId: reactorUserId, liked, reactionType, likesCount, reactionSummary }: any) => {\n      setPosts(prev => prev.map(post => {\n        if (post.id !== postId) return post;\n        // Only update isLiked/reactionType if the current user performed the action\n        const isCurrentUser = reactorUserId === user.id;\n        return {\n          ...post,\n          likesCount,\n          isLiked: isCurrentUser ? liked : post.isLiked,\n          userReactionType: isCurrentUser ? reactionType : post.userReactionType,\n          reactionSummary: reactionSummary || post.reactionSummary,\n        };\n      }));\n    };\n    \n    const handleCommentCreated = ({ postId, commentsCount }: { postId: string; commentsCount: number }) => {\n      setPosts(prev => prev.map(post => \n        post.id === postId ? { ...post, commentsCount } : post\n      ));\n    };\n    \n    const handlePollUpdated = ({ postId, pollOptions }: { postId: string; pollOptions: any[] }) => {\n      setPosts(prev => prev.map(post => \n        post.id === postId ? { ...post, pollOptions } : post\n      ));\n    };\n    \n    // Initialize socket with handlers\n    const socket = initializeSocket({\n      onConnect: () => {\n        console.log('Feed: Socket connected');\n      },\n      onPostCreated: handlePostCreated,\n      onPostLiked: handlePostLiked,\n      onPostReacted: handlePostReacted,\n      onCommentCreated: handleCommentCreated,\n      onPollUpdated: handlePollUpdated,\n    });\n    \n    // Also directly attach handlers to ensure they're registered\n    const sock = getSocket();\n    if (sock) {\n      sock.on('post:created', handlePostCreated);\n      sock.on('post:liked', handlePostLiked);\n      sock.on('post:reacted', handlePostReacted);\n      sock.on('comment:created', handleCommentCreated);\n      sock.on('poll:updated', handlePollUpdated);\n    }\n    \n    return () => {\n      // Clean up handlers on unmount\n      const sock = getSocket();\n      if (sock) {\n        sock.off('post:created', handlePostCreated);\n        sock.off('post:liked', handlePostLiked);\n        sock.off('post:reacted', handlePostReacted);\n        sock.off('comment:created', handleCommentCreated);\n        sock.off('poll:updated', handlePollUpdated);\n      }\n    };\n  }, [user]);\n\n  // Fetch initial feed\n  useEffect(() => {\n    if (authLoading) return;\n    \n    const fetchFeed = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const response = await getFeed(undefined, 20);\n        setPosts(response.posts);\n        setCursor(response.nextCursor);\n        setHasMore(response.hasMore ?? response.nextCursor !== null);\n      } catch (err: any) {\n        console.error('Error fetching feed:', err);\n        setError(err.response?.data?.error || 'Failed to load feed');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchFeed();\n  }, [authLoading]);\n\n  // Handle opening a story group\n  const handleOpenStory = (group: StoryGroup) => {\n    setSelectedStoryGroup(group);\n    setShowStoryViewer(true);\n  };\n\n  // Load more posts\n  const loadMore = useCallback(async () => {\n    if (loadingMore || !hasMore || !cursor) return;\n    \n    setLoadingMore(true);\n    \n    try {\n      const response = await getFeed(cursor, 20);\n      setPosts(prev => [...prev, ...response.posts]);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error loading more posts:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  }, [cursor, hasMore, loadingMore]);\n\n  // Infinite scroll observer\n  useEffect(() => {\n    if (loading) return;\n    \n    observerRef.current = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && hasMore && !loadingMore) {\n          loadMore();\n        }\n      },\n      { threshold: 0.1 }\n    );\n    \n    if (loadMoreRef.current) {\n      observerRef.current.observe(loadMoreRef.current);\n    }\n    \n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, hasMore, loadingMore, loadMore]);\n\n  // Retry loading feed on error\n  const retryFeed = async () => {\n    setLoading(true);\n    setError(null);\n    setCursor(null);\n    \n    try {\n      const response = await getFeed(undefined, 20);\n      setPosts(response.posts);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error loading feed:', err);\n      setError(err.response?.data?.error || 'Failed to load feed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle post created - no need to refresh, real-time updates handle it\n  const handlePostCreated = () => {\n    // Post will be added via WebSocket real-time event\n  };\n\n  // Handle post deleted\n  const handlePostDeleted = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n  };\n\n  // Handle post edited\n  const handlePostEdited = (postId: string, updatedPost: Post) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, ...updatedPost } : post\n    ));\n  };\n\n  // Handle like update\n  const handleLikeUpdate = (postId: string, liked: boolean, count: number) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, isLiked: liked, likesCount: count } : post\n    ));\n  };\n\n  // Handle poll update\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, pollOptions: options } : post\n    ));\n  };\n\n  // Handle comment click\n  const handleCommentClick = (postId: string) => {\n    setSelectedPostForComments(postId);\n    setHighlightCommentId(undefined);\n    joinPostRoom(postId);\n  };\n\n  // Close comments\n  const closeComments = () => {\n    if (selectedPostForComments) {\n      leavePostRoom(selectedPostForComments);\n    }\n    setSelectedPostForComments(null);\n    setHighlightCommentId(undefined);\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto pb-24\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-40 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"flex items-center justify-between p-4\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Feed</h1>\n          {/* Streak Counter in header */}\n          {user && <StreakCounter />}\n        </div>\n        {/* Social Proof Bar */}\n        {user && (\n          <div className=\"px-4 pb-2\">\n            <SocialProofBar />\n          </div>\n        )}\n      </div>\n\n      {/* Stories Carousel */}\n      {user && (\n        <StoryCarousel\n          onOpenStory={handleOpenStory}\n          onCreateStory={() => setShowStoryCreator(true)}\n        />\n      )}\n\n      {/* Create Post Card */}\n      {user && (\n        <div className=\"m-4\">\n          <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n            {/* Main input area */}\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"w-full p-5 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors text-left\"\n            >\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-14 h-14 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-xl font-bold text-gray-500\">\n                      {user.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-1 py-3 px-5 rounded-full border border-gray-300 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800/50\">\n                  <span className=\"text-gray-500 dark:text-neutral-400 text-base\">What's on your mind, {user.name?.split(' ')[0]}?</span>\n                </div>\n              </div>\n            </button>\n            \n            {/* Action buttons */}\n            <div className=\"flex items-center justify-around border-t border-gray-100 dark:border-neutral-800 px-4 py-3\">\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Photo</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Video</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-orange-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Article</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"m-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-center\">\n          <p>{error}</p>\n          <button\n            onClick={retryFeed}\n            className=\"mt-2 text-sm font-semibold underline\"\n          >\n            Try again\n          </button>\n        </div>\n      )}\n\n      {/* Engagement Widgets */}\n      {user && !loading && (\n        <div className=\"px-4 space-y-3 mb-4\">\n          {/* Connection Limit (Scarcity) */}\n          <ConnectionLimitBanner />\n\n          {/* Progress Nudges (Zeigarnik Effect) */}\n          <ProgressNudges />\n\n          {/* Daily Matches (Variable Rewards) */}\n          <DailyMatchCard />\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!loading && posts.length === 0 && !error && (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center\">\n            <Plus className=\"w-10 h-10 text-gray-400\" />\n          </div>\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n            Your feed is empty\n          </h2>\n          <p className=\"text-gray-500 dark:text-neutral-400 mb-4\">\n            Start by creating your first post or follow some people!\n          </p>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors\"\n          >\n            Create Post\n          </button>\n        </div>\n      )}\n\n      {/* Posts List */}\n      <div className=\"space-y-4 px-4\">\n        <AnimatePresence>\n          {posts.map((post) => (\n            <PostCard\n              key={post.id}\n              post={post}\n              onLikeUpdate={handleLikeUpdate}\n              onPollUpdate={handlePollUpdate}\n              onDelete={handlePostDeleted}\n              onEdit={handlePostEdited}\n              onCommentClick={() => handleCommentClick(post.id)}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Load More Trigger */}\n      <div ref={loadMoreRef} className=\"h-20 flex items-center justify-center\">\n        {loadingMore && (\n          <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n        )}\n        {!hasMore && posts.length > 0 && (\n          <p className=\"text-sm text-gray-400 dark:text-neutral-500\">\n            You've reached the end\n          </p>\n        )}\n      </div>\n\n      {/* Leaderboard (Social Proof) */}\n      {user && !loading && posts.length > 0 && (\n        <div className=\"px-4 mb-4\">\n          <Leaderboard />\n        </div>\n      )}\n\n      {/* Floating Create Button (mobile) */}\n      <button\n        onClick={() => setShowCreateModal(true)}\n        className=\"fixed bottom-24 right-4 lg:hidden p-4 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors z-40\"\n      >\n        <Plus className=\"w-6 h-6\" />\n      </button>\n\n      {/* Create Post Modal */}\n      <CreatePostModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onPostCreated={handlePostCreated}\n      />\n\n      {/* Comments Panel */}\n      {selectedPostForComments && (\n        <Comments\n          postId={selectedPostForComments}\n          isOpen={!!selectedPostForComments}\n          onClose={closeComments}\n          highlightCommentId={highlightCommentId}\n          onCommentCountChange={(count) => {\n            setPosts(prev => prev.map(post => \n              post.id === selectedPostForComments ? { ...post, commentsCount: count } : post\n            ));\n          }}\n        />\n      )}\n\n      {/* Story Creator Modal */}\n      <StoryCreator\n        isOpen={showStoryCreator}\n        onClose={() => setShowStoryCreator(false)}\n        onStoryCreated={() => {\n          setShowStoryCreator(false);\n          // StoryCarousel will auto-refresh on next render\n        }}\n      />\n\n      {/* Story Viewer */}\n      {showStoryViewer && selectedStoryGroup && (\n        <StoryViewer\n          storyGroups={[selectedStoryGroup]}\n          initialGroupIndex={0}\n          onClose={() => {\n            setShowStoryViewer(false);\n            setSelectedStoryGroup(null);\n          }}\n          onStoryEnd={() => {\n            setShowStoryViewer(false);\n            setSelectedStoryGroup(null);\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 13644, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/index.ts"],"sourcesContent":["// Feed Components - Export all feed-related components\n\nexport { Feed } from './Feed';\nexport { PostCard } from './PostCard';\nexport { Comments } from './Comments';\nexport { CreatePostModal } from './CreatePostModal';\n"],"names":[],"mappings":"AAAA,uDAAuD;;AAEvD;AACA;AACA;AACA"}}]
}