{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/auth/useAuth.ts"],"sourcesContent":["import { useAuthContext } from './authContext';\nimport type { User, LoginCredentials, RegisterData, AuthResponse } from '@/types/auth';\n\nexport function useAuth() {\n  const context = useAuthContext();\n  \n  return {\n    user: context.user,\n    isAuthenticated: context.isAuthenticated,\n    loading: context.loading,\n    login: context.login,\n    logout: context.logout,\n    register: context.register,\n    setAuth: context.setAuth,\n    updateUser: context.updateUser,\n  };\n}\n\n"],"names":[],"mappings":";;;;AAAA;;AAGO,SAAS;IACd,MAAM,UAAU,IAAA,oJAAc;IAE9B,OAAO;QACL,MAAM,QAAQ,IAAI;QAClB,iBAAiB,QAAQ,eAAe;QACxC,SAAS,QAAQ,OAAO;QACxB,OAAO,QAAQ,KAAK;QACpB,QAAQ,QAAQ,MAAM;QACtB,UAAU,QAAQ,QAAQ;QAC1B,SAAS,QAAQ,OAAO;QACxB,YAAY,QAAQ,UAAU;IAChC;AACF"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAuB;IAC9D,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAO;IAC5C,MAAM,SAAS,IAAA,+IAAS;IAExB,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,WAAW,CAAC,iBAAiB;YAChC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAS;KAAO;IAErC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/api/posts.ts"],"sourcesContent":["// Posts API - Complete API client for Posts & Feed endpoints\n\nimport apiClient from './client';\nimport type {\n  Post,\n  FeedResponse,\n  Comment,\n  CommentsResponse,\n  MentionUser,\n  MentionNotification,\n} from '@/types/post';\n\n// ============================================\n// Feed Endpoints\n// ============================================\n\n/**\n * Get home feed with cursor-based pagination\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of posts per page (default: 20)\n */\nexport async function getFeed(cursor?: string, limit: number = 20): Promise<FeedResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  return apiClient.get('/posts/feed', { params });\n}\n\n/**\n * Get a single post by ID\n * @param postId - Post ID\n */\nexport async function getPost(postId: string): Promise<Post> {\n  return apiClient.get(`/posts/${postId}`);\n}\n\n// ============================================\n// Post CRUD Endpoints\n// ============================================\n\n/**\n * Create a new post (supports all post types)\n * Uses FormData for file uploads\n */\nexport async function createPost(formData: FormData): Promise<Post> {\n  return apiClient.post('/posts', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n}\n\n/**\n * Delete a post\n * @param postId - Post ID to delete\n */\nexport async function deletePost(postId: string): Promise<{ success: boolean }> {\n  return apiClient.delete(`/posts/${postId}`);\n}\n\n// ============================================\n// Engagement Endpoints\n// ============================================\n\n/**\n * Toggle like on a post\n * @param postId - Post ID\n */\nexport async function toggleLike(postId: string): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/like`);\n}\n\n/**\n * Vote on a poll\n * @param postId - Post ID\n * @param optionId - Poll option ID\n */\nexport async function votePoll(postId: string, optionId: string): Promise<{ success: boolean; pollOptions: any[] }> {\n  return apiClient.post(`/posts/${postId}/poll/vote`, { optionId });\n}\n\n/**\n * Track post impression (view)\n * @param postId - Post ID\n * @param locationData - Optional location data\n */\nexport async function trackImpression(\n  postId: string, \n  locationData?: { lat: number; lng: number; city?: string; country?: string }\n): Promise<{ success: boolean }> {\n  return apiClient.post(`/posts/${postId}/impression`, locationData);\n}\n\n// ============================================\n// Comments Endpoints\n// ============================================\n\n/**\n * Get comments for a post\n * @param postId - Post ID\n * @param parentId - Optional parent comment ID for replies\n * @param page - Page number\n * @param limit - Comments per page\n */\nexport async function getComments(\n  postId: string,\n  parentId?: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<CommentsResponse> {\n  const params: Record<string, any> = { page, limit };\n  if (parentId) params.parentId = parentId;\n  return apiClient.get(`/posts/${postId}/comments`, { params });\n}\n\n/**\n * Create a comment on a post\n * Note: This is handled via WebSocket for real-time updates\n * This is a fallback HTTP endpoint\n */\nexport async function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): Promise<Comment> {\n  return apiClient.post(`/posts/${postId}/comments`, {\n    content,\n    parentId,\n    mentions,\n  });\n}\n\n/**\n * Toggle like on a comment\n * Note: This is handled via WebSocket for real-time updates\n */\nexport async function toggleCommentLike(\n  postId: string,\n  commentId: string\n): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/comments/${commentId}/like`);\n}\n\n// ============================================\n// Mention Endpoints\n// ============================================\n\n/**\n * Search users for @mention autocomplete\n * @param query - Search query\n */\nexport async function searchUsersForMention(query: string): Promise<MentionUser[]> {\n  return apiClient.get('/mentions/search', { params: { q: query } });\n}\n\n/**\n * Get unread mentions\n */\nexport async function getUnreadMentions(): Promise<MentionNotification[]> {\n  return apiClient.get('/mentions/unread');\n}\n\n/**\n * Get unread mention count\n */\nexport async function getUnreadMentionCount(): Promise<{ count: number }> {\n  return apiClient.get('/mentions/count');\n}\n\n/**\n * Mark mentions as read\n * @param mentionIds - Array of mention IDs to mark as read\n */\nexport async function markMentionsAsRead(mentionIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/mentions/read', { mentionIds });\n}\n\n// ============================================\n// Upload Endpoints\n// ============================================\n\n/**\n * Upload avatar image\n * @param file - Image file\n */\nexport async function uploadAvatar(file: File): Promise<{ avatarUrl: string }> {\n  const formData = new FormData();\n  formData.append('avatar', file);\n  return apiClient.post('/upload/avatar', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload banner image\n * @param file - Image file\n */\nexport async function uploadBanner(file: File): Promise<{ bannerUrl: string }> {\n  const formData = new FormData();\n  formData.append('banner', file);\n  return apiClient.post('/upload/banner', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Delete an uploaded file\n * @param fileUrl - URL of file to delete\n * @param type - Type of file (avatar, banner, post)\n */\nexport async function deleteUpload(fileUrl: string, type: 'avatar' | 'banner' | 'post'): Promise<{ success: boolean }> {\n  return apiClient.delete('/upload', { data: { fileUrl, type } });\n}\n\n// ============================================\n// Location Endpoints\n// ============================================\n\n/**\n * Update user location\n */\nexport async function updateLocation(\n  lat: number,\n  lng: number,\n  accuracy?: number,\n  activity?: string\n): Promise<any> {\n  return apiClient.post('/location/update', { lat, lng, accuracy, activity });\n}\n\n/**\n * Get current user's location\n */\nexport async function getMyLocation(): Promise<any> {\n  return apiClient.get('/location/me');\n}\n\n/**\n * Get nearby users\n * @param radius - Search radius in km (default: 50)\n * @param limit - Max users to return (default: 20)\n */\nexport async function getNearbyUsers(radius?: number, limit?: number): Promise<any[]> {\n  const params: Record<string, any> = {};\n  if (radius) params.radius = radius;\n  if (limit) params.limit = limit;\n  return apiClient.get('/location/nearby', { params });\n}\n\n/**\n * Update location settings\n */\nexport async function updateLocationSettings(settings: {\n  locationPermission?: boolean;\n  shareLocationPublic?: boolean;\n}): Promise<{ message: string }> {\n  return apiClient.put('/location/settings', settings);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/socket.ts"],"sourcesContent":["// Socket.IO Client for Real-time Features\n\nimport { io, Socket } from 'socket.io-client';\nimport { getToken } from '@/lib/auth/authHelpers';\n\nconst SOCKET_URL = process.env.NEXT_PUBLIC_API_URL?.replace('/api', '') || 'http://localhost:5000';\n\nlet socket: Socket | null = null;\n\nexport interface SocketEventHandlers {\n  onConnect?: () => void;\n  onDisconnect?: () => void;\n  onError?: (error: { message: string }) => void;\n  \n  // Post events\n  onPostLiked?: (data: { postId: string; userId: string; liked: boolean; likesCount: number }) => void;\n  \n  // Comment events\n  onCommentCreated?: (data: { postId: string; comment: any; commentsCount: number }) => void;\n  onCommentLiked?: (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => void;\n  \n  // Poll events\n  onPollUpdated?: (data: { postId: string; pollOptions: any[]; voterId: string }) => void;\n  \n  // Notification events\n  onNotificationComment?: (data: any) => void;\n  onNotificationMention?: (data: any) => void;\n  onNotificationLike?: (data: any) => void;\n  onNotificationCommentLike?: (data: any) => void;\n  \n  // User events\n  onUserOnline?: (data: { userId: string }) => void;\n  onUserOffline?: (data: { userId: string }) => void;\n  onUserLocationChanged?: (data: { userId: string; city: string; state: string; country: string }) => void;\n  \n  // Location request\n  onLocationRequest?: (data: { message: string; timestamp: Date }) => void;\n}\n\n/**\n * Initialize Socket.IO connection\n */\nexport function initializeSocket(handlers?: SocketEventHandlers): Socket {\n  if (socket?.connected) {\n    return socket;\n  }\n  \n  const token = getToken();\n  \n  socket = io(SOCKET_URL, {\n    auth: { token },\n    transports: ['websocket', 'polling'],\n    reconnection: true,\n    reconnectionAttempts: 5,\n    reconnectionDelay: 1000,\n  });\n  \n  // Connection events\n  socket.on('connect', () => {\n    console.log('âœ… Socket connected:', socket?.id);\n    handlers?.onConnect?.();\n  });\n  \n  socket.on('disconnect', () => {\n    console.log('âŒ Socket disconnected');\n    handlers?.onDisconnect?.();\n  });\n  \n  socket.on('error', (error: { message: string }) => {\n    console.error('Socket error:', error);\n    handlers?.onError?.(error);\n  });\n  \n  // Post events\n  socket.on('post:liked', (data) => {\n    handlers?.onPostLiked?.(data);\n  });\n  \n  // Comment events\n  socket.on('comment:created', (data) => {\n    handlers?.onCommentCreated?.(data);\n  });\n  \n  socket.on('comment:liked', (data) => {\n    handlers?.onCommentLiked?.(data);\n  });\n  \n  // Poll events\n  socket.on('poll:updated', (data) => {\n    handlers?.onPollUpdated?.(data);\n  });\n  \n  // Notification events\n  socket.on('notification:comment', (data) => {\n    handlers?.onNotificationComment?.(data);\n  });\n  \n  socket.on('notification:mention', (data) => {\n    handlers?.onNotificationMention?.(data);\n  });\n  \n  socket.on('notification:like', (data) => {\n    handlers?.onNotificationLike?.(data);\n  });\n  \n  socket.on('notification:comment_like', (data) => {\n    handlers?.onNotificationCommentLike?.(data);\n  });\n  \n  // User events\n  socket.on('user:online', (data) => {\n    handlers?.onUserOnline?.(data);\n  });\n  \n  socket.on('user:offline', (data) => {\n    handlers?.onUserOffline?.(data);\n  });\n  \n  socket.on('user:location_changed', (data) => {\n    handlers?.onUserLocationChanged?.(data);\n  });\n  \n  // Location request\n  socket.on('location:request', (data) => {\n    handlers?.onLocationRequest?.(data);\n  });\n  \n  return socket;\n}\n\n/**\n * Get the current socket instance\n */\nexport function getSocket(): Socket | null {\n  return socket;\n}\n\n/**\n * Disconnect socket\n */\nexport function disconnectSocket(): void {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n}\n\n/**\n * Join a post room for real-time updates\n */\nexport function joinPostRoom(postId: string): void {\n  socket?.emit('join:post', { postId });\n}\n\n/**\n * Leave a post room\n */\nexport function leavePostRoom(postId: string): void {\n  socket?.emit('leave:post', { postId });\n}\n\n/**\n * Like/Unlike a post via WebSocket\n */\nexport function likePost(postId: string): void {\n  socket?.emit('post:like', { postId });\n}\n\n/**\n * Create a comment via WebSocket\n */\nexport function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): void {\n  socket?.emit('comment:create', { postId, content, parentId, mentions });\n}\n\n/**\n * Like/Unlike a comment via WebSocket\n */\nexport function likeComment(commentId: string, postId: string): void {\n  socket?.emit('comment:like', { commentId, postId });\n}\n\n/**\n * Vote on a poll via WebSocket\n */\nexport function votePoll(postId: string, optionId: string): void {\n  socket?.emit('poll:vote', { postId, optionId });\n}\n\n/**\n * Update location via WebSocket\n */\nexport function updateLocation(data: {\n  lat?: number;\n  lng?: number;\n  accuracy?: number;\n  activity?: string;\n}): void {\n  socket?.emit('location:update', data);\n}\n\n/**\n * Send typing indicator (for future use)\n */\nexport function sendTypingIndicator(postId: string, isTyping: boolean): void {\n  socket?.emit('typing', { postId, isTyping });\n}\n\nexport default {\n  initializeSocket,\n  getSocket,\n  disconnectSocket,\n  joinPostRoom,\n  leavePostRoom,\n  likePost,\n  createComment,\n  likeComment,\n  votePoll,\n  updateLocation,\n  sendTypingIndicator,\n};\n"],"names":[],"mappings":"AAAA,0CAA0C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAG1C;;;AAEA,MAAM,aAAa,+DAAiC,QAAQ,QAAQ,OAAO;AAE3E,IAAI,SAAwB;AAmCrB,SAAS,iBAAiB,QAA8B;IAC7D,IAAI,QAAQ,WAAW;QACrB,OAAO;IACT;IAEA,MAAM,QAAQ,IAAA,6IAAQ;IAEtB,SAAS,GAAG,YAAY;QACtB,MAAM;YAAE;QAAM;QACd,YAAY;YAAC;YAAa;SAAU;QACpC,cAAc;QACd,sBAAsB;QACtB,mBAAmB;IACrB;IAEA,oBAAoB;IACpB,OAAO,EAAE,CAAC,WAAW;QACnB,QAAQ,GAAG,CAAC,uBAAuB,QAAQ;QAC3C,UAAU;IACZ;IAEA,OAAO,EAAE,CAAC,cAAc;QACtB,QAAQ,GAAG,CAAC;QACZ,UAAU;IACZ;IAEA,OAAO,EAAE,CAAC,SAAS,CAAC;QAClB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,UAAU,UAAU;IACtB;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,cAAc,CAAC;QACvB,UAAU,cAAc;IAC1B;IAEA,iBAAiB;IACjB,OAAO,EAAE,CAAC,mBAAmB,CAAC;QAC5B,UAAU,mBAAmB;IAC/B;IAEA,OAAO,EAAE,CAAC,iBAAiB,CAAC;QAC1B,UAAU,iBAAiB;IAC7B;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,gBAAgB,CAAC;QACzB,UAAU,gBAAgB;IAC5B;IAEA,sBAAsB;IACtB,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACjC,UAAU,wBAAwB;IACpC;IAEA,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACjC,UAAU,wBAAwB;IACpC;IAEA,OAAO,EAAE,CAAC,qBAAqB,CAAC;QAC9B,UAAU,qBAAqB;IACjC;IAEA,OAAO,EAAE,CAAC,6BAA6B,CAAC;QACtC,UAAU,4BAA4B;IACxC;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,eAAe,CAAC;QACxB,UAAU,eAAe;IAC3B;IAEA,OAAO,EAAE,CAAC,gBAAgB,CAAC;QACzB,UAAU,gBAAgB;IAC5B;IAEA,OAAO,EAAE,CAAC,yBAAyB,CAAC;QAClC,UAAU,wBAAwB;IACpC;IAEA,mBAAmB;IACnB,OAAO,EAAE,CAAC,oBAAoB,CAAC;QAC7B,UAAU,oBAAoB;IAChC;IAEA,OAAO;AACT;AAKO,SAAS;IACd,OAAO;AACT;AAKO,SAAS;IACd,IAAI,QAAQ;QACV,OAAO,UAAU;QACjB,SAAS;IACX;AACF;AAKO,SAAS,aAAa,MAAc;IACzC,QAAQ,KAAK,aAAa;QAAE;IAAO;AACrC;AAKO,SAAS,cAAc,MAAc;IAC1C,QAAQ,KAAK,cAAc;QAAE;IAAO;AACtC;AAKO,SAAS,SAAS,MAAc;IACrC,QAAQ,KAAK,aAAa;QAAE;IAAO;AACrC;AAKO,SAAS,cACd,MAAc,EACd,OAAe,EACf,QAAiB,EACjB,QAAmB;IAEnB,QAAQ,KAAK,kBAAkB;QAAE;QAAQ;QAAS;QAAU;IAAS;AACvE;AAKO,SAAS,YAAY,SAAiB,EAAE,MAAc;IAC3D,QAAQ,KAAK,gBAAgB;QAAE;QAAW;IAAO;AACnD;AAKO,SAAS,SAAS,MAAc,EAAE,QAAgB;IACvD,QAAQ,KAAK,aAAa;QAAE;QAAQ;IAAS;AAC/C;AAKO,SAAS,eAAe,IAK9B;IACC,QAAQ,KAAK,mBAAmB;AAClC;AAKO,SAAS,oBAAoB,MAAc,EAAE,QAAiB;IACnE,QAAQ,KAAK,UAAU;QAAE;QAAQ;IAAS;AAC5C;uCAEe;IACb;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACF"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { likePost as socketLikePost, votePoll as socketVotePoll } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [isSaved, setIsSaved] = useState(post.isSaved);\n  const [showMenu, setShowMenu] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle like\n  const handleLike = async () => {\n    const newLiked = !isLiked;\n    const newCount = newLiked ? likesCount + 1 : likesCount - 1;\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    onLikeUpdate?.(post.id, newLiked, newCount);\n    \n    try {\n      // Use WebSocket for real-time\n      socketLikePost(post.id);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(!newLiked);\n        setLikesCount(likesCount);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share\n  const handleShare = async () => {\n    const url = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: post.articleTitle || `Post by ${post.author.name}`,\n          text: post.content?.slice(0, 100) || '',\n          url,\n        });\n      } catch (err) {\n        // User cancelled or error\n      }\n    } else {\n      // Copy to clipboard\n      await navigator.clipboard.writeText(url);\n      // Could show a toast here\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-cover\"\n            loading=\"lazy\"\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[400px] object-cover\"\n            loading=\"lazy\"\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>{post.linkDomain || new URL(post.linkUrl).hostname}</span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null;\n    const showResults = hasVoted || post.showResultsBeforeVote;\n    const isPollEnded = post.pollEndsAt && new Date(post.pollEndsAt) < new Date();\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: 'ðŸŽ‰',\n      PROMOTION: 'ðŸš€',\n      GRADUATION: 'ðŸŽ“',\n      CERTIFICATION: 'ðŸ“œ',\n      WORK_ANNIVERSARY: 'ðŸŽŠ',\n      BIRTHDAY: 'ðŸŽ‚',\n      JOB_CHANGE: 'âœ¨',\n      NEW_POSITION: 'ðŸŒŸ',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || 'ðŸŽ‰' : 'ðŸŽ‰';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()} â€¢ {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? ` â€¢ ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    if (!text) return null;\n    \n    // Split by @mentions and render as links\n    const parts = text.split(/(@\\w+)/g);\n    \n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        const username = part.slice(1);\n        return (\n          <Link\n            key={index}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost ? (\n                <button\n                  onClick={() => {\n                    handleDelete();\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete post\n                </button>\n              ) : (\n                <button\n                  onClick={() => setShowMenu(false)}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <p className=\"text-gray-900 dark:text-white whitespace-pre-wrap\">\n            {parseContent(post.content)}\n          </p>\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <span>{likesCount} like{likesCount !== 1 ? 's' : ''}</span>\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {post.commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {post.commentsCount} comment{post.commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        <button\n          onClick={handleLike}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isLiked\n              ? 'text-red-500 bg-red-50 dark:bg-red-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Heart className={`w-5 h-5 ${isLiked ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium\">Like</span>\n        </button>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={() => setIsSaved(!isSaved)}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1606, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/Comments.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  ChevronDown,\n  ChevronUp,\n  Send,\n  Loader2,\n  X,\n  CornerDownRight,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Comment } from '@/types/post';\nimport { getComments, searchUsersForMention } from '@/lib/api/posts';\nimport { createComment, likeComment as socketLikeComment, joinPostRoom, leavePostRoom } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { MentionUser } from '@/types/post';\n\ninterface CommentsProps {\n  postId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  highlightCommentId?: string;\n  onCommentCountChange?: (count: number) => void;\n}\n\ninterface CommentItemProps {\n  comment: Comment;\n  postId: string;\n  depth: number;\n  highlightId?: string;\n  onReply: (parentId: string, parentAuthor: string) => void;\n}\n\nfunction CommentItem({ comment, postId, depth, highlightId, onReply }: CommentItemProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(comment.isLiked);\n  const [likesCount, setLikesCount] = useState(comment.likesCount);\n  const [showReplies, setShowReplies] = useState(depth < 2);\n  const [replies, setReplies] = useState<Comment[]>([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [hasMoreReplies, setHasMoreReplies] = useState(comment.replyCount > 0);\n  \n  const commentRef = useRef<HTMLDivElement>(null);\n  const isHighlighted = highlightId === comment.id;\n\n  // Scroll to highlighted comment\n  useEffect(() => {\n    if (isHighlighted && commentRef.current) {\n      commentRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }, [isHighlighted]);\n\n  // Load replies\n  const loadReplies = async () => {\n    if (loadingReplies || replies.length >= comment.replyCount) return;\n    \n    setLoadingReplies(true);\n    try {\n      const response = await getComments(postId, comment.id, 1, 10);\n      setReplies(response.comments);\n      setHasMoreReplies(response.hasMore);\n    } catch (error) {\n      console.error('Error loading replies:', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  // Handle like\n  const handleLike = () => {\n    const newLiked = !isLiked;\n    setIsLiked(newLiked);\n    setLikesCount(prev => newLiked ? prev + 1 : prev - 1);\n    \n    try {\n      socketLikeComment(comment.id, postId);\n    } catch (error) {\n      // Revert on error\n      setIsLiked(!newLiked);\n      setLikesCount(likesCount);\n    }\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    const parts = text.split(/(@\\w+)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        return (\n          <Link\n            key={index}\n            href={`/profile/${part.slice(1)}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <div\n      ref={commentRef}\n      className={`${depth > 0 ? 'ml-8 border-l-2 border-gray-100 dark:border-neutral-800 pl-4' : ''}`}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`py-3 transition-colors ${\n          isHighlighted ? 'bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 rounded-lg' : ''\n        }`}\n      >\n        <div className=\"flex gap-3\">\n          {/* Avatar */}\n          <Link href={`/profile/${comment.author.username}`} className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n              {comment.author.profileImage ? (\n                <img\n                  src={comment.author.profileImage}\n                  alt={comment.author.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                  {comment.author.name.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n          </Link>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"bg-gray-100 dark:bg-neutral-800 rounded-2xl px-4 py-2\">\n              <Link\n                href={`/profile/${comment.author.username}`}\n                className=\"font-semibold text-sm text-gray-900 dark:text-white hover:underline\"\n              >\n                {comment.author.name}\n              </Link>\n              <p className=\"text-sm text-gray-700 dark:text-neutral-300 whitespace-pre-wrap\">\n                {parseContent(comment.content)}\n              </p>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center gap-4 mt-1 ml-2 text-xs\">\n              <span className=\"text-gray-500 dark:text-neutral-500\">\n                {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n              </span>\n              \n              <button\n                onClick={handleLike}\n                className={`font-semibold transition-colors ${\n                  isLiked ? 'text-red-500' : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n                }`}\n              >\n                Like{likesCount > 0 && ` (${likesCount})`}\n              </button>\n              \n              <button\n                onClick={() => onReply(comment.id, comment.author.username)}\n                className=\"font-semibold text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors\"\n              >\n                Reply\n              </button>\n            </div>\n            \n            {/* Replies toggle */}\n            {comment.replyCount > 0 && (\n              <button\n                onClick={() => {\n                  setShowReplies(!showReplies);\n                  if (!showReplies && replies.length === 0) {\n                    loadReplies();\n                  }\n                }}\n                className=\"flex items-center gap-1 mt-2 ml-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300\"\n              >\n                <CornerDownRight className=\"w-3 h-3\" />\n                {showReplies ? 'Hide' : 'View'} {comment.replyCount} {comment.replyCount === 1 ? 'reply' : 'replies'}\n                {showReplies ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Replies */}\n        <AnimatePresence>\n          {showReplies && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-2\"\n            >\n              {loadingReplies && replies.length === 0 ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\n                </div>\n              ) : (\n                replies.map((reply) => (\n                  <CommentItem\n                    key={reply.id}\n                    comment={reply}\n                    postId={postId}\n                    depth={depth + 1}\n                    highlightId={highlightId}\n                    onReply={onReply}\n                  />\n                ))\n              )}\n              \n              {hasMoreReplies && replies.length > 0 && (\n                <button\n                  onClick={loadReplies}\n                  disabled={loadingReplies}\n                  className=\"ml-8 mt-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700\"\n                >\n                  {loadingReplies ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    'Load more replies'\n                  )}\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n\nexport function Comments({ postId, isOpen, onClose, highlightCommentId, onCommentCountChange }: CommentsProps) {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  \n  // Reply state\n  const [replyingTo, setReplyingTo] = useState<{ id: string; username: string } | null>(null);\n  \n  // Input state\n  const [newComment, setNewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const commentsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Join post room for real-time updates\n  useEffect(() => {\n    if (isOpen) {\n      joinPostRoom(postId);\n      return () => leavePostRoom(postId);\n    }\n  }, [isOpen, postId]);\n\n  // Fetch comments\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getComments(postId, undefined, 1, 20);\n        setComments(response.comments);\n        setHasMore(response.hasMore);\n        setPage(1);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchComments();\n  }, [isOpen, postId]);\n\n  // Load more comments\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    try {\n      const nextPage = page + 1;\n      const response = await getComments(postId, undefined, nextPage, 20);\n      setComments(prev => [...prev, ...response.comments]);\n      setHasMore(response.hasMore);\n      setPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more comments:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Handle reply click\n  const handleReply = (parentId: string, username: string) => {\n    setReplyingTo({ id: parentId, username });\n    setNewComment(`@${username} `);\n    setMentions([]);\n    inputRef.current?.focus();\n  };\n\n  // Cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n    setNewComment('');\n    setMentions([]);\n  };\n\n  // Search mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (error) {\n      console.error('Error searching mentions:', error);\n    }\n  }, []);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setNewComment(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : '';\n      \n      if (query) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (mentionUser: MentionUser) => {\n    const lastAtIndex = newComment.lastIndexOf('@');\n    const updatedComment = newComment.slice(0, lastAtIndex) + `@${mentionUser.username} `;\n    setNewComment(updatedComment);\n    setMentions([...mentions, mentionUser.id]);\n    setShowMentionDropdown(false);\n    inputRef.current?.focus();\n  };\n\n  // Submit comment\n  const handleSubmit = async () => {\n    if (!newComment.trim() || isSubmitting) return;\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Use WebSocket for real-time\n      createComment(postId, newComment.trim(), replyingTo?.id, mentions);\n      \n      // Optimistic update\n      const tempComment: Comment = {\n        id: `temp-${Date.now()}`,\n        postId,\n        parentId: replyingTo?.id || null,\n        author: {\n          id: user!.id,\n          username: user!.username!,\n          name: user!.name!,\n          profileImage: user?.profileImage || null,\n          headline: null,\n        },\n        content: newComment.trim(),\n        contentType: 'text',\n        mentions,\n        likesCount: 0,\n        replyCount: 0,\n        isLiked: false,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n      \n      if (replyingTo) {\n        // Add to replies - will be handled by real-time update\n      } else {\n        setComments(prev => [tempComment, ...prev]);\n      }\n      \n      onCommentCountChange?.(comments.length + 1);\n      setNewComment('');\n      setMentions([]);\n      setReplyingTo(null);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Panel */}\n        <motion.div\n          initial={{ y: '100%' }}\n          animate={{ y: 0 }}\n          exit={{ y: '100%' }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full sm:max-w-xl h-[80vh] sm:h-[70vh] sm:rounded-t-2xl sm:rounded-b-2xl bg-white dark:bg-neutral-900 flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Comments</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n          \n          {/* Comments List */}\n          <div\n            ref={commentsContainerRef}\n            className=\"flex-1 overflow-y-auto p-4\"\n          >\n            {loading ? (\n              <div className=\"flex justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n              </div>\n            ) : comments.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageCircle className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n                <p className=\"text-gray-500 dark:text-neutral-400\">No comments yet</p>\n                <p className=\"text-sm text-gray-400 dark:text-neutral-500\">Be the first to comment!</p>\n              </div>\n            ) : (\n              <>\n                {comments.map((comment) => (\n                  <CommentItem\n                    key={comment.id}\n                    comment={comment}\n                    postId={postId}\n                    depth={0}\n                    highlightId={highlightCommentId}\n                    onReply={handleReply}\n                  />\n                ))}\n                \n                {hasMore && (\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"w-full py-3 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 transition-colors\"\n                  >\n                    {loadingMore ? (\n                      <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" />\n                    ) : (\n                      'Load more comments'\n                    )}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n          \n          {/* Reply indicator */}\n          {replyingTo && (\n            <div className=\"px-4 py-2 bg-gray-50 dark:bg-neutral-800/50 border-t border-gray-200 dark:border-neutral-800 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                Replying to <span className=\"font-semibold text-gray-700 dark:text-neutral-300\">@{replyingTo.username}</span>\n              </span>\n              <button onClick={cancelReply} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          \n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n            <div className=\"relative\">\n              {/* Mention Dropdown */}\n              {showMentionDropdown && (\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 max-h-40 overflow-y-auto bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg z-10\">\n                  {mentionResults.map((mentionUser) => (\n                    <button\n                      key={mentionUser.id}\n                      onClick={() => insertMention(mentionUser)}\n                      className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors\"\n                    >\n                      <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-600\">\n                        {mentionUser.profileImage && (\n                          <img src={mentionUser.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                        )}\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{mentionUser.name}</p>\n                        <p className=\"text-xs text-gray-500\">@{mentionUser.username}</p>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              <div className=\"flex items-end gap-2\">\n                <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user?.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={newComment}\n                  onChange={handleInputChange}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSubmit();\n                    }\n                  }}\n                  placeholder=\"Write a comment...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 resize-none outline-none focus:ring-2 focus:ring-blue-500 max-h-24\"\n                  style={{ minHeight: '40px' }}\n                />\n                \n                <button\n                  onClick={handleSubmit}\n                  disabled={!newComment.trim() || isSubmitting}\n                  className=\"p-2 rounded-full bg-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors\"\n                >\n                  {isSubmitting ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Send className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default Comments;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2511, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/CreatePostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  FileText,\n  Link as LinkIcon,\n  BarChart3,\n  Sparkles,\n  Trophy,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Plus,\n  Trash2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { createPost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { PostType, PostVisibility, CelebrationType, MentionUser } from '@/types/post';\n\ninterface CreatePostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onPostCreated?: () => void;\n}\n\nconst POST_TYPES = [\n  { type: 'TEXT' as PostType, icon: FileText, label: 'Text' },\n  { type: 'IMAGE' as PostType, icon: ImageIcon, label: 'Image' },\n  { type: 'VIDEO' as PostType, icon: Video, label: 'Video' },\n  { type: 'LINK' as PostType, icon: LinkIcon, label: 'Link' },\n  { type: 'POLL' as PostType, icon: BarChart3, label: 'Poll' },\n  { type: 'ARTICLE' as PostType, icon: Sparkles, label: 'Article' },\n  { type: 'CELEBRATION' as PostType, icon: Trophy, label: 'Celebration' },\n];\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst CELEBRATION_TYPES: { value: CelebrationType; label: string; emoji: string }[] = [\n  { value: 'NEW_JOB', label: 'Started a new job', emoji: 'ðŸŽ‰' },\n  { value: 'PROMOTION', label: 'Got promoted', emoji: 'ðŸš€' },\n  { value: 'GRADUATION', label: 'Graduated', emoji: 'ðŸŽ“' },\n  { value: 'CERTIFICATION', label: 'Earned a certification', emoji: 'ðŸ“œ' },\n  { value: 'WORK_ANNIVERSARY', label: 'Work anniversary', emoji: 'ðŸŽŠ' },\n  { value: 'BIRTHDAY', label: 'Birthday', emoji: 'ðŸŽ‚' },\n];\n\nexport function CreatePostModal({ isOpen, onClose, onPostCreated }: CreatePostModalProps) {\n  const { user } = useAuth();\n  const [postType, setPostType] = useState<PostType>('TEXT');\n  const [content, setContent] = useState('');\n  const [visibility, setVisibility] = useState<PostVisibility>('PUBLIC');\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Image state\n  const [images, setImages] = useState<File[]>([]);\n  const [imagePreviews, setImagePreviews] = useState<string[]>([]);\n  \n  // Video state\n  const [video, setVideo] = useState<File | null>(null);\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\n  \n  // Link state\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkPreview, setLinkPreview] = useState<any>(null);\n  const [fetchingLinkPreview, setFetchingLinkPreview] = useState(false);\n  \n  // Poll state\n  const [pollOptions, setPollOptions] = useState<string[]>(['', '']);\n  const [pollDuration, setPollDuration] = useState(24); // hours\n  const [showResultsBeforeVote, setShowResultsBeforeVote] = useState(false);\n  \n  // Article state\n  const [articleTitle, setArticleTitle] = useState('');\n  const [articleCoverImage, setArticleCoverImage] = useState<File | null>(null);\n  const [articleCoverPreview, setArticleCoverPreview] = useState<string | null>(null);\n  const [articleTags, setArticleTags] = useState<string[]>([]);\n  const [tagInput, setTagInput] = useState('');\n  \n  // Celebration state\n  const [celebrationType, setCelebrationType] = useState<CelebrationType | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoInputRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Reset form when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      resetForm();\n    }\n  }, [isOpen]);\n\n  const resetForm = () => {\n    setPostType('TEXT');\n    setContent('');\n    setVisibility('PUBLIC');\n    setImages([]);\n    setImagePreviews([]);\n    setVideo(null);\n    setVideoPreview(null);\n    setLinkUrl('');\n    setLinkPreview(null);\n    setPollOptions(['', '']);\n    setPollDuration(24);\n    setShowResultsBeforeVote(false);\n    setArticleTitle('');\n    setArticleCoverImage(null);\n    setArticleCoverPreview(null);\n    setArticleTags([]);\n    setCelebrationType(null);\n    setMentions([]);\n    setError(null);\n  };\n\n  // Handle image selection\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (images.length + files.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    const validFiles = files.filter(file => {\n      if (file.size > 10 * 1024 * 1024) {\n        setError('Image size must be under 10MB');\n        return false;\n      }\n      return true;\n    });\n    \n    setImages(prev => [...prev, ...validFiles]);\n    \n    validFiles.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreviews(prev => [...prev, e.target?.result as string]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // Handle video selection\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    if (file.size > 500 * 1024 * 1024) {\n      setError('Video size must be under 500MB');\n      return;\n    }\n    \n    setVideo(file);\n    setVideoPreview(URL.createObjectURL(file));\n  };\n\n  // Remove image\n  const removeImage = (index: number) => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Handle poll option change\n  const handlePollOptionChange = (index: number, value: string) => {\n    const newOptions = [...pollOptions];\n    newOptions[index] = value;\n    setPollOptions(newOptions);\n  };\n\n  // Add poll option\n  const addPollOption = () => {\n    if (pollOptions.length < 6) {\n      setPollOptions([...pollOptions, '']);\n    }\n  };\n\n  // Remove poll option\n  const removePollOption = (index: number) => {\n    if (pollOptions.length > 2) {\n      setPollOptions(pollOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  // Handle article tag add\n  const handleAddTag = () => {\n    if (tagInput.trim() && articleTags.length < 5) {\n      setArticleTags([...articleTags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  // Search for mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (err) {\n      console.error('Error searching mentions:', err);\n    }\n  }, []);\n\n  // Handle content change with mention detection\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : textAfterAt.slice(0, spaceIndex);\n      \n      if (query && !textAfterAt.includes(' ')) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (user: MentionUser) => {\n    const lastAtIndex = content.lastIndexOf('@');\n    const newContent = content.slice(0, lastAtIndex) + `@${user.username} `;\n    setContent(newContent);\n    setMentions([...mentions, user.id]);\n    setShowMentionDropdown(false);\n    contentRef.current?.focus();\n  };\n\n  // Submit post\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const formData = new FormData();\n      formData.append('type', postType);\n      formData.append('visibility', visibility);\n      \n      if (content) {\n        formData.append('content', content);\n      }\n      \n      if (mentions.length > 0) {\n        formData.append('mentions', JSON.stringify(mentions));\n      }\n      \n      switch (postType) {\n        case 'IMAGE':\n          if (images.length === 0) {\n            setError('Please add at least one image');\n            setIsSubmitting(false);\n            return;\n          }\n          images.forEach((img) => {\n            formData.append('images', img);\n          });\n          break;\n          \n        case 'VIDEO':\n          if (!video) {\n            setError('Please add a video');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('video', video);\n          break;\n          \n        case 'LINK':\n          if (!linkUrl) {\n            setError('Please add a link');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('linkUrl', linkUrl);\n          break;\n          \n        case 'POLL':\n          const validOptions = pollOptions.filter(opt => opt.trim());\n          if (validOptions.length < 2) {\n            setError('Please add at least 2 poll options');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('pollOptions', JSON.stringify(validOptions));\n          formData.append('pollDuration', String(pollDuration));\n          formData.append('showResultsBeforeVote', String(showResultsBeforeVote));\n          break;\n          \n        case 'ARTICLE':\n          if (!articleTitle) {\n            setError('Please add an article title');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('articleTitle', articleTitle);\n          if (articleCoverImage) {\n            formData.append('articleCoverImage', articleCoverImage);\n          }\n          if (articleTags.length > 0) {\n            formData.append('articleTags', JSON.stringify(articleTags));\n          }\n          break;\n          \n        case 'CELEBRATION':\n          if (!celebrationType) {\n            setError('Please select a celebration type');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('celebrationType', celebrationType);\n          break;\n          \n        case 'TEXT':\n        default:\n          if (!content.trim()) {\n            setError('Please add some content');\n            setIsSubmitting(false);\n            return;\n          }\n          break;\n      }\n      \n      await createPost(formData);\n      onPostCreated?.();\n      onClose();\n    } catch (err: any) {\n      console.error('Error creating post:', err);\n      setError(err.response?.data?.error || 'Failed to create post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" />\n        \n        {/* Modal */}\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0, y: 20 }}\n          animate={{ scale: 1, opacity: 1, y: 0 }}\n          exit={{ scale: 0.9, opacity: 0, y: 20 }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full max-w-2xl max-h-[90vh] overflow-hidden\"\n          style={{\n            background: '#ecf0f3',\n            borderRadius: '20px',\n            boxShadow: '10px 10px 20px #d1d9e6, -10px -10px 20px #f9f9f9',\n          }}\n        >\n          {/* Header */}\n          <div \n            className=\"flex items-center justify-between p-4 border-b\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <h2 className=\"text-xl font-bold text-gray-800\">Create Post</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full transition-all hover:scale-105\"\n              style={{\n                background: '#ecf0f3',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              <X className=\"w-5 h-5 text-gray-600\" />\n            </button>\n          </div>\n          \n          {/* User Info */}\n          <div className=\"flex items-center gap-3 p-4\">\n            <div \n              className=\"w-12 h-12 rounded-full overflow-hidden\"\n              style={{\n                boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {user?.profileImage ? (\n                <img \n                  src={user.profileImage} \n                  alt={user.name} \n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-bold\">\n                  {user?.name?.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n              {/* Visibility Dropdown */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                  className=\"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n                >\n                  {(() => {\n                    const opt = VISIBILITY_OPTIONS.find(o => o.value === visibility);\n                    const Icon = opt?.icon || Globe;\n                    return (\n                      <>\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{opt?.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </>\n                    );\n                  })()}\n                </button>\n                \n                {showVisibilityDropdown && (\n                  <div \n                    className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-10\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => {\n                          setVisibility(opt.value);\n                          setShowVisibilityDropdown(false);\n                        }}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors\"\n                      >\n                        <opt.icon className=\"w-4 h-4\" />\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Post Type Tabs */}\n          <div \n            className=\"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide\"\n            style={{ scrollbarWidth: 'none' }}\n          >\n            {POST_TYPES.map(({ type, icon: Icon, label }) => (\n              <button\n                key={type}\n                onClick={() => setPostType(type)}\n                className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${\n                  postType === type ? 'text-blue-600' : 'text-gray-600 hover:text-gray-800'\n                }`}\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: postType === type \n                    ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                    : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {label}\n              </button>\n            ))}\n          </div>\n          \n          {/* Content Area */}\n          <div className=\"p-4 overflow-y-auto\" style={{ maxHeight: 'calc(90vh - 300px)' }}>\n            {/* Error Message */}\n            {error && (\n              <div className=\"mb-4 p-3 rounded-lg bg-red-100 text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Rich Text Editor Area */}\n            <div className=\"relative\">\n              {/* Formatting Toolbar */}\n              <div \n                className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                }}\n              >\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Bold\">\n                  <Bold className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Italic\">\n                  <Italic className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"List\">\n                  <List className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Code\">\n                  <Code className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Mention\">\n                  <AtSign className=\"w-4 h-4 text-gray-600\" />\n                </button>\n              </div>\n              \n              {/* Content Textarea */}\n              <div className=\"relative\">\n                <textarea\n                  ref={contentRef}\n                  value={content}\n                  onChange={handleContentChange}\n                  placeholder=\"What do you want to share?\"\n                  className=\"w-full min-h-[120px] p-4 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                    fontFamily: \"'Montserrat', sans-serif\",\n                  }}\n                />\n                \n                {/* Mention Dropdown */}\n                {showMentionDropdown && (\n                  <div \n                    className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {mentionResults.map((user) => (\n                      <button\n                        key={user.id}\n                        onClick={() => insertMention(user)}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                      >\n                        <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                          {user.profileImage && (\n                            <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                          )}\n                        </div>\n                        <div className=\"text-left\">\n                          <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                          <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Post Type Specific Content */}\n            {postType === 'IMAGE' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleImageSelect}\n                  className=\"hidden\"\n                />\n                \n                {imagePreviews.length > 0 ? (\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {imagePreviews.map((preview, index) => (\n                      <div key={index} className=\"relative aspect-square rounded-lg overflow-hidden\">\n                        <img src={preview} alt=\"\" className=\"w-full h-full object-cover\" />\n                        <button\n                          onClick={() => removeImage(index)}\n                          className=\"absolute top-1 right-1 p-1 rounded-full bg-red-500 text-white\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    ))}\n                    {images.length < 10 && (\n                      <button\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"aspect-square rounded-lg flex items-center justify-center\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                        }}\n                      >\n                        <Plus className=\"w-8 h-8 text-gray-400\" />\n                      </button>\n                    )}\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <ImageIcon className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add images (max 10)</span>\n                    <span className=\"text-xs text-gray-400\">Up to 10MB each</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'VIDEO' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={videoInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleVideoSelect}\n                  className=\"hidden\"\n                />\n                \n                {videoPreview ? (\n                  <div className=\"relative rounded-xl overflow-hidden\">\n                    <video src={videoPreview} controls className=\"w-full max-h-64 object-contain bg-black\" />\n                    <button\n                      onClick={() => {\n                        setVideo(null);\n                        setVideoPreview(null);\n                      }}\n                      className=\"absolute top-2 right-2 p-2 rounded-full bg-red-500 text-white\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => videoInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <Video className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add video</span>\n                    <span className=\"text-xs text-gray-400\">Up to 500MB</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'LINK' && (\n              <div className=\"mt-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://example.com\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                  />\n                </div>\n                \n                {linkPreview && (\n                  <div className=\"mt-4 rounded-xl overflow-hidden\" style={{ boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9' }}>\n                    {linkPreview.image && (\n                      <img src={linkPreview.image} alt=\"\" className=\"w-full h-40 object-cover\" />\n                    )}\n                    <div className=\"p-3 bg-white/50\">\n                      <p className=\"font-semibold text-gray-800\">{linkPreview.title}</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">{linkPreview.description}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">{linkPreview.domain}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {postType === 'POLL' && (\n              <div className=\"mt-4 space-y-3\">\n                {pollOptions.map((option, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <div\n                      className=\"flex-1 rounded-xl p-3\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      <input\n                        type=\"text\"\n                        value={option}\n                        onChange={(e) => handlePollOptionChange(index, e.target.value)}\n                        placeholder={`Option ${index + 1}`}\n                        className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                      />\n                    </div>\n                    {pollOptions.length > 2 && (\n                      <button\n                        onClick={() => removePollOption(index)}\n                        className=\"p-2 rounded-full text-red-500 hover:bg-red-50 transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    )}\n                  </div>\n                ))}\n                \n                {pollOptions.length < 6 && (\n                  <button\n                    onClick={addPollOption}\n                    className=\"flex items-center gap-2 text-blue-600 text-sm font-medium hover:text-blue-700 transition-colors\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Add option\n                  </button>\n                )}\n                \n                <div className=\"flex items-center gap-4 pt-4 border-t\" style={{ borderColor: '#d1d9e6' }}>\n                  <div className=\"flex-1\">\n                    <label className=\"text-sm text-gray-600\">Poll duration</label>\n                    <select\n                      value={pollDuration}\n                      onChange={(e) => setPollDuration(Number(e.target.value))}\n                      className=\"w-full mt-1 p-2 rounded-lg bg-transparent text-gray-800 outline-none\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                      }}\n                    >\n                      <option value={1}>1 hour</option>\n                      <option value={6}>6 hours</option>\n                      <option value={12}>12 hours</option>\n                      <option value={24}>1 day</option>\n                      <option value={72}>3 days</option>\n                      <option value={168}>1 week</option>\n                    </select>\n                  </div>\n                  \n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={showResultsBeforeVote}\n                      onChange={(e) => setShowResultsBeforeVote(e.target.checked)}\n                      className=\"w-4 h-4 rounded\"\n                    />\n                    <span className=\"text-sm text-gray-600\">Show results before voting</span>\n                  </label>\n                </div>\n              </div>\n            )}\n            \n            {postType === 'ARTICLE' && (\n              <div className=\"mt-4 space-y-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    value={articleTitle}\n                    onChange={(e) => setArticleTitle(e.target.value)}\n                    placeholder=\"Article title\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400 text-lg font-semibold\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  {articleTags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700\"\n                    >\n                      {tag}\n                      <button onClick={() => setArticleTags(tags => tags.filter((_, i) => i !== index))}>\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </span>\n                  ))}\n                  {articleTags.length < 5 && (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                        placeholder=\"Add tag\"\n                        className=\"px-3 py-1 rounded-full text-sm bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                        style={{\n                          boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {postType === 'CELEBRATION' && (\n              <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                {CELEBRATION_TYPES.map(({ value, label, emoji }) => (\n                  <button\n                    key={value}\n                    onClick={() => setCelebrationType(value)}\n                    className={`p-4 rounded-xl text-left transition-all ${\n                      celebrationType === value ? 'ring-2 ring-blue-500' : ''\n                    }`}\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: celebrationType === value\n                        ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                        : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <span className=\"text-2xl\">{emoji}</span>\n                    <p className=\"mt-2 text-sm font-medium text-gray-800\">{label}</p>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Footer */}\n          <div \n            className=\"flex items-center justify-between p-4 border-t\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <div className=\"flex items-center gap-2\">\n              {/* Quick add buttons */}\n              <button\n                onClick={() => setPostType('IMAGE')}\n                className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add image\"\n              >\n                <ImageIcon className=\"w-5 h-5 text-green-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('VIDEO')}\n                className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add video\"\n              >\n                <Video className=\"w-5 h-5 text-purple-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('POLL')}\n                className=\"p-2 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Create poll\"\n              >\n                <BarChart3 className=\"w-5 h-5 text-orange-600\" />\n              </button>\n            </div>\n            \n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"px-6 py-2 rounded-full font-semibold text-white transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n              style={{\n                background: 'linear-gradient(145deg, #4B70E2, #3a5bc7)',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              ) : (\n                'Post'\n              )}\n            </button>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default CreatePostModal;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4118, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/Feed.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Loader2, Plus, RefreshCw } from 'lucide-react';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { Comments } from '@/components/feed/Comments';\nimport { CreatePostModal } from '@/components/feed/CreatePostModal';\nimport { getFeed } from '@/lib/api/posts';\nimport { \n  initializeSocket, \n  disconnectSocket, \n  getSocket,\n  joinPostRoom,\n  leavePostRoom,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { Post, PollOption } from '@/types/post';\n\nexport function Feed() {\n  const { user, isLoading: authLoading } = useAuth();\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [cursor, setCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal states\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedPostForComments, setSelectedPostForComments] = useState<string | null>(null);\n  const [highlightCommentId, setHighlightCommentId] = useState<string | undefined>(undefined);\n  \n  // Refs for infinite scroll\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Initialize Socket.IO\n  useEffect(() => {\n    if (!user) return;\n    \n    const socket = initializeSocket({\n      onConnect: () => {\n        console.log('Feed: Socket connected');\n      },\n      onPostLiked: ({ postId, liked, likesCount }) => {\n        setPosts(prev => prev.map(post => \n          post.id === postId ? { ...post, likesCount, isLiked: liked } : post\n        ));\n      },\n      onCommentCreated: ({ postId, commentsCount }) => {\n        setPosts(prev => prev.map(post => \n          post.id === postId ? { ...post, commentsCount } : post\n        ));\n      },\n      onPollUpdated: ({ postId, pollOptions }) => {\n        setPosts(prev => prev.map(post => \n          post.id === postId ? { ...post, pollOptions } : post\n        ));\n      },\n    });\n    \n    return () => {\n      // Don't disconnect on unmount, just cleanup listeners\n    };\n  }, [user]);\n\n  // Fetch initial feed\n  useEffect(() => {\n    if (authLoading) return;\n    \n    const fetchFeed = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const response = await getFeed(undefined, 20);\n        setPosts(response.posts);\n        setCursor(response.nextCursor);\n        setHasMore(response.hasMore);\n      } catch (err: any) {\n        console.error('Error fetching feed:', err);\n        setError(err.response?.data?.error || 'Failed to load feed');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchFeed();\n  }, [authLoading]);\n\n  // Load more posts\n  const loadMore = useCallback(async () => {\n    if (loadingMore || !hasMore || !cursor) return;\n    \n    setLoadingMore(true);\n    \n    try {\n      const response = await getFeed(cursor, 20);\n      setPosts(prev => [...prev, ...response.posts]);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore);\n    } catch (err: any) {\n      console.error('Error loading more posts:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  }, [cursor, hasMore, loadingMore]);\n\n  // Infinite scroll observer\n  useEffect(() => {\n    if (loading) return;\n    \n    observerRef.current = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && hasMore && !loadingMore) {\n          loadMore();\n        }\n      },\n      { threshold: 0.1 }\n    );\n    \n    if (loadMoreRef.current) {\n      observerRef.current.observe(loadMoreRef.current);\n    }\n    \n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, hasMore, loadingMore, loadMore]);\n\n  // Refresh feed\n  const refreshFeed = async () => {\n    setLoading(true);\n    setCursor(null);\n    \n    try {\n      const response = await getFeed(undefined, 20);\n      setPosts(response.posts);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore);\n    } catch (err: any) {\n      console.error('Error refreshing feed:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle post created\n  const handlePostCreated = () => {\n    refreshFeed();\n  };\n\n  // Handle post deleted\n  const handlePostDeleted = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n  };\n\n  // Handle like update\n  const handleLikeUpdate = (postId: string, liked: boolean, count: number) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, isLiked: liked, likesCount: count } : post\n    ));\n  };\n\n  // Handle poll update\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, pollOptions: options } : post\n    ));\n  };\n\n  // Handle comment click\n  const handleCommentClick = (postId: string) => {\n    setSelectedPostForComments(postId);\n    setHighlightCommentId(undefined);\n    joinPostRoom(postId);\n  };\n\n  // Close comments\n  const closeComments = () => {\n    if (selectedPostForComments) {\n      leavePostRoom(selectedPostForComments);\n    }\n    setSelectedPostForComments(null);\n    setHighlightCommentId(undefined);\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto pb-24\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-40 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"flex items-center justify-between p-4\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Feed</h1>\n          <button\n            onClick={refreshFeed}\n            disabled={loading}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`w-5 h-5 text-gray-600 dark:text-neutral-400 ${loading ? 'animate-spin' : ''}`} />\n          </button>\n        </div>\n      </div>\n\n      {/* Create Post Card */}\n      {user && (\n        <div className=\"m-4\">\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"w-full p-4 bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors text-left\"\n          >\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                {user.profileImage ? (\n                  <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center font-bold text-gray-500\">\n                    {user.name?.charAt(0).toUpperCase()}\n                  </div>\n                )}\n              </div>\n              <span className=\"text-gray-500 dark:text-neutral-400\">What's on your mind?</span>\n            </div>\n          </button>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"m-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-center\">\n          <p>{error}</p>\n          <button\n            onClick={refreshFeed}\n            className=\"mt-2 text-sm font-semibold underline\"\n          >\n            Try again\n          </button>\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!loading && posts.length === 0 && !error && (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center\">\n            <Plus className=\"w-10 h-10 text-gray-400\" />\n          </div>\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n            Your feed is empty\n          </h2>\n          <p className=\"text-gray-500 dark:text-neutral-400 mb-4\">\n            Start by creating your first post or follow some people!\n          </p>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors\"\n          >\n            Create Post\n          </button>\n        </div>\n      )}\n\n      {/* Posts List */}\n      <div className=\"space-y-4 px-4\">\n        <AnimatePresence>\n          {posts.map((post) => (\n            <PostCard\n              key={post.id}\n              post={post}\n              onLikeUpdate={handleLikeUpdate}\n              onPollUpdate={handlePollUpdate}\n              onDelete={handlePostDeleted}\n              onCommentClick={() => handleCommentClick(post.id)}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Load More Trigger */}\n      <div ref={loadMoreRef} className=\"h-20 flex items-center justify-center\">\n        {loadingMore && (\n          <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n        )}\n        {!hasMore && posts.length > 0 && (\n          <p className=\"text-sm text-gray-400 dark:text-neutral-500\">\n            You've reached the end\n          </p>\n        )}\n      </div>\n\n      {/* Floating Create Button (mobile) */}\n      <button\n        onClick={() => setShowCreateModal(true)}\n        className=\"fixed bottom-24 right-4 lg:hidden p-4 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors z-40\"\n      >\n        <Plus className=\"w-6 h-6\" />\n      </button>\n\n      {/* Create Post Modal */}\n      <CreatePostModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onPostCreated={handlePostCreated}\n      />\n\n      {/* Comments Panel */}\n      {selectedPostForComments && (\n        <Comments\n          postId={selectedPostForComments}\n          isOpen={!!selectedPostForComments}\n          onClose={closeComments}\n          highlightCommentId={highlightCommentId}\n          onCommentCountChange={(count) => {\n            setPosts(prev => prev.map(post => \n              post.id === selectedPostForComments ? { ...post, commentsCount: count } : post\n            ));\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4615, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/index.ts"],"sourcesContent":["// Feed Components - Export all feed-related components\n\nexport { Feed } from './Feed';\nexport { PostCard } from './PostCard';\nexport { Comments } from './Comments';\nexport { CreatePostModal } from './CreatePostModal';\n"],"names":[],"mappings":"AAAA,uDAAuD;;AAEvD;AACA;AACA;AACA"}},
    {"offset": {"line": 4629, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { Feed } from '@/components/feed';\n\nexport default function Home() {\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950\">\n        <Feed />\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAKe,SAAS;IACtB,qBACE,8OAAC,8JAAc;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,0IAAI;;;;;;;;;;;;;;;AAIb"}}]
}