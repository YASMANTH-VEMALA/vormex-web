module.exports=[83041,a=>{"use strict";var b=a.i(87924),c=a.i(90925),d=a.i(72131),e=a.i(41579),f=a.i(36339),g=a.i(37927),h=a.i(46271),i=a.i(62036),j=a.i(87532),k=a.i(81464),l=a.i(33508),m=a.i(96221),n=a.i(60246),o=a.i(8406),p=a.i(69769),q=a.i(24987),r=a.i(69520),s=a.i(92e3),t=a.i(38246),u=a.i(64947),v=a.i(17371),w=a.i(46864),x=a.i(41710),y=a.i(33441),z=a.i(70580);function A({person:a,onConnectionChange:c}){let e=a.connectionStatus?.toLowerCase()||"none",[f,g]=(0,d.useState)(e),[i,j]=(0,d.useState)(!1),[k,n]=(0,d.useState)(!1),o=async b=>{if(b.preventDefault(),b.stopPropagation(),!i){j(!0);try{await (0,z.sendConnectionRequest)(a.id),g("pending_sent"),n(!0),c?.(a.id,"pending_sent")}catch(a){console.error("Failed to send connection request:",a)}finally{j(!1)}}},q=async b=>{if(b.preventDefault(),b.stopPropagation(),!i){j(!0);try{await (0,z.acceptConnectionRequest)(a.id),g("connected"),c?.(a.id,"connected")}catch(a){console.error("Failed to accept connection:",a)}finally{j(!1)}}},r=async b=>{if(b.preventDefault(),b.stopPropagation(),!i){j(!0);try{await (0,z.rejectConnectionRequest)(a.id),g("none"),c?.(a.id,"none")}catch(a){console.error("Failed to reject connection:",a)}finally{j(!1)}}},s=async b=>{if(b.preventDefault(),b.stopPropagation(),!i){j(!0);try{await (0,z.cancelConnectionRequest)(a.id),g("none"),c?.(a.id,"none")}catch(a){console.error("Failed to cancel request:",a)}finally{j(!1)}}};return(0,b.jsxs)(h.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden hover:border-gray-300 dark:hover:border-neutral-700 transition-all hover:shadow-lg group",children:[(0,b.jsxs)("div",{className:"relative h-24 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:[a.bannerImageUrl&&(0,b.jsx)("img",{src:a.bannerImageUrl,alt:"",className:"w-full h-full object-cover"}),a.isOnline&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-medium rounded-full",children:[(0,b.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"Online"]})]}),(0,b.jsxs)("div",{className:"relative px-4 pb-4",children:[(0,b.jsx)(t.default,{href:`/profile/${a.username}`,children:(0,b.jsx)("div",{className:"absolute -top-10 left-4 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 overflow-hidden bg-gray-200 dark:bg-neutral-700 group-hover:border-gray-100 dark:group-hover:border-neutral-800 transition-colors",children:a.profileImage?(0,b.jsx)("img",{src:a.profileImage,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl font-bold text-gray-500 dark:text-neutral-400",children:a.name.charAt(0).toUpperCase()})})}),(0,b.jsx)("div",{className:"absolute -top-4 right-4",children:(()=>{if(i)return(0,b.jsx)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-400",children:(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"})});switch(f){case"connected":return(0,b.jsxs)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-medium",children:[(0,b.jsx)(w.UserCheck,{className:"w-4 h-4"}),"Connected"]});case"pending_sent":return(0,b.jsxs)("button",{onClick:s,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-neutral-400 text-sm font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:[(0,b.jsx)(x.Clock,{className:"w-4 h-4"}),"Pending"]});case"pending_received":return(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:q,className:"flex items-center gap-1 px-3 py-2 rounded-full bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,b.jsx)(y.Check,{className:"w-4 h-4"}),"Accept"]}),(0,b.jsx)("button",{onClick:r,className:"flex items-center gap-1 px-3 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-neutral-400 text-sm font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:(0,b.jsx)(l.X,{className:"w-4 h-4"})})]});default:return(0,b.jsxs)("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,b.jsx)(v.UserPlus,{className:"w-4 h-4"}),"Connect"]})}})()}),(0,b.jsxs)("div",{className:"pt-12",children:[(0,b.jsx)(t.default,{href:`/profile/${a.username}`,children:(0,b.jsx)("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white hover:text-blue-500 dark:hover:text-blue-400 transition-colors",children:a.name})}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:["@",a.username]}),a.headline&&(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-neutral-300 mt-1 line-clamp-2",children:a.headline}),a.college&&(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 text-sm text-gray-500 dark:text-neutral-400",children:[(0,b.jsx)(p.GraduationCap,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{className:"truncate",children:a.college}),a.branch&&(0,b.jsxs)("span",{className:"text-gray-400 dark:text-neutral-500",children:["• ",a.branch]})]}),a.skills&&a.skills.length>0&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[a.skills.slice(0,4).map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-medium rounded-full",children:a},c)),a.skills.length>4&&(0,b.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400 text-xs font-medium rounded-full",children:["+",a.skills.length-4]})]})}),a.interests&&a.interests.length>0&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[a.interests.slice(0,3).map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-0.5 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs font-medium rounded-full",children:a},c)),a.interests.length>3&&(0,b.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400 text-xs font-medium rounded-full",children:["+",a.interests.length-3]})]})}),void 0!==a.mutualConnections&&a.mutualConnections>0&&(0,b.jsxs)("p",{className:"mt-3 text-xs text-gray-400 dark:text-neutral-500",children:[a.mutualConnections," mutual connection",1!==a.mutualConnections?"s":""]})]})]}),(0,b.jsx)(u.default,{show:k,recipientName:a.name,onClose:()=>n(!1)})]})}function B(){return(0,b.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden animate-pulse",children:[(0,b.jsx)("div",{className:"h-24 bg-gray-200 dark:bg-neutral-800"}),(0,b.jsxs)("div",{className:"relative px-4 pb-4",children:[(0,b.jsx)("div",{className:"absolute -top-10 left-4 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 bg-gray-200 dark:bg-neutral-700"}),(0,b.jsxs)("div",{className:"pt-12 space-y-2",children:[(0,b.jsx)("div",{className:"h-5 w-32 bg-gray-200 dark:bg-neutral-700 rounded"}),(0,b.jsx)("div",{className:"h-4 w-24 bg-gray-200 dark:bg-neutral-700 rounded"}),(0,b.jsx)("div",{className:"h-4 w-full bg-gray-200 dark:bg-neutral-700 rounded mt-3"}),(0,b.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-neutral-700 rounded"}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,b.jsx)("div",{className:"h-6 w-16 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"}),(0,b.jsx)("div",{className:"h-6 w-20 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"}),(0,b.jsx)("div",{className:"h-6 w-14 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"})]})]})]})]})}var C=a.i(31626),D=a.i(35112),E=a.i(19721),F=a.i(92415);async function G(a,b,c,d){return F.default.post("/location/update",{lat:a,lng:b,accuracy:c,activity:d})}async function H(a=50,b=20,c,d,e){let f={radius:a,limit:b};return null!=c&&null!=d&&(f.lat=c,f.lng=d),e?.trim()&&(f.search=e.trim()),F.default.get("/location/nearby",{params:f})}var I=a.i(12469);let J=(0,E.default)(async()=>{},{loadableGenerated:{modules:[52316]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-neutral-800",children:(0,b.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})})});function K({onBack:a}){let[c,e]=(0,d.useState)([]),[f,g]=(0,d.useState)(!0),[h,i]=(0,d.useState)(!1),[o,p]=(0,d.useState)(null),[w,x]=(0,d.useState)(null),[y,A]=(0,d.useState)(50),[B,E]=(0,d.useState)(null),[F,K]=(0,d.useState)(null),[L,M]=(0,d.useState)(!1),[N,O]=(0,d.useState)(""),P=[10,25,50,100,200],Q=(0,d.useCallback)(()=>new Promise((a,b)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(a,b,{enableHighAccuracy:!0,timeout:15e3,maximumAge:0}):b(Error("Geolocation is not supported by your browser"))}),[]),R=(0,d.useRef)(null),[S,T]=(0,d.useState)(""),[U,V]=(0,d.useState)(""),[W,X]=(0,d.useState)(!1),Y=(0,d.useRef)(null);(0,d.useEffect)(()=>(Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>V(S),300),()=>{Y.current&&clearTimeout(Y.current)}),[S]);let Z=(0,d.useCallback)(async(a,b,c,d)=>{try{let f=a??w?.lat,g=b??w?.lng,h=d??y;if(!f||!g)return void e([]);let i=await H(h,50,f,g,(c??U)||void 0);if(i.locationRequired)return void e([]);e(i.users||[]),!i.userLocation||a&&b||x({lat:i.userLocation.lat,lng:i.userLocation.lng})}catch(a){console.error("[NearbyUsers] Failed to fetch nearby users:",a)}},[y,w?.lat,w?.lng,U]),$=(0,d.useCallback)(async()=>{i(!0),p(null);try{let{latitude:a,longitude:b,accuracy:c}=(await Q()).coords;x({lat:a,lng:b});try{await G(a,b,c)}catch(a){console.warn("Could not update server location:",a)}await Z(a,b)}catch(a){console.error("Location error:",a),1===a.code?p("Location permission denied. Please enable location access."):2===a.code?p("Unable to determine your location. Please try again."):3===a.code?p("Location request timed out. Please try again."):p(a.message||"Failed to get location")}finally{i(!1),g(!1)}},[Q,Z]);(0,d.useEffect)(()=>{$()},[]),(0,d.useEffect)(()=>{if(w&&!o)return R.current=navigator.geolocation?.watchPosition?.(a=>{let{latitude:b,longitude:c,accuracy:d}=a.coords;x({lat:b,lng:c}),G(b,c,d).catch(console.warn),(0,I.updateLocation)({lat:b,lng:c,accuracy:d})},a=>{1===a.code&&p("Location permission denied.")},{enableHighAccuracy:!0,maximumAge:3e4})??null,()=>{null!=R.current&&navigator.geolocation?.clearWatch?.(R.current)}},[!!w,!!o]),(0,d.useEffect)(()=>{f||!w||o||Z(w.lat,w.lng,S,y)},[y,U,w?.lat,w?.lng]);let _=async a=>{K(a);try{await (0,z.sendConnectionRequest)(a);let b=c?.find(b=>b.id===a);O(b?.name||""),M(!0)}catch(a){console.error("Failed to connect:",a)}finally{K(null)}};return(0,b.jsxs)("div",{className:"h-[calc(100vh-200px)] min-h-[500px] flex flex-col bg-gray-50 dark:bg-neutral-950 rounded-xl overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:(0,b.jsx)(q.MapPin,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"People Nearby"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[w&&(0,b.jsxs)(b.Fragment,{children:["Your location: ",w.lat.toFixed(4),", ",w.lng.toFixed(4)," · "]}),c.length," people within ",y,"km"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("select",{value:y,onChange:a=>A(Number(a.target.value)),className:"px-3 py-1.5 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-lg text-sm border-0 focus:ring-2 focus:ring-blue-500",children:P.map(a=>(0,b.jsxs)("option",{value:a,children:[a," km"]},a))}),(0,b.jsx)("button",{onClick:$,disabled:h,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",title:"Refresh location",children:(0,b.jsx)(r.RefreshCw,{className:`w-5 h-5 text-gray-600 dark:text-neutral-400 ${h?"animate-spin":""}`})})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:S,onChange:a=>T(a.target.value),placeholder:"Search by name, username, college, skills...",className:"w-full pl-9 pr-16 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,b.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[S&&(0,b.jsx)("button",{onClick:()=>T(""),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-neutral-700",children:(0,b.jsx)(l.X,{className:"w-4 h-4 text-gray-400"})}),(0,b.jsx)("button",{onClick:()=>X(!W),className:`p-1.5 rounded-full transition-colors ${W?"bg-blue-100 dark:bg-blue-900/30 text-blue-600":"text-gray-500 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:(0,b.jsx)(k.Filter,{className:"w-4 h-4"})})]})]}),W&&(0,b.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-neutral-800 rounded-lg space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 block",children:"Search radius"}),(0,b.jsx)("select",{value:y,onChange:a=>A(Number(a.target.value)),className:"w-full px-3 py-2 bg-white dark:bg-neutral-900 rounded-lg text-sm",children:P.map(a=>(0,b.jsxs)("option",{value:a,children:["Within ",a," km"]},a))})]})]}),(0,b.jsxs)("div",{className:"flex-1 relative",children:[f&&(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-neutral-900 z-10",children:[(0,b.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-blue-500 mb-4"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-neutral-400",children:"Finding people near you..."})]}),!f&&o&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-neutral-900 z-10 p-4",children:(0,b.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 max-w-sm",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(s.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-red-700 dark:text-red-400 font-medium",children:"Location Error"}),(0,b.jsx)("p",{className:"text-red-600 dark:text-red-300 text-sm mt-1",children:o}),(0,b.jsx)("button",{onClick:$,className:"mt-3 text-sm text-red-600 dark:text-red-400 hover:underline font-medium",children:"Try again"})]})]})})}),!f&&!o&&w&&(0,b.jsx)(J,{center:w,radius:y,users:c,onUserClick:a=>E(a)}),!f&&!o&&c.length>0&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 rounded-t-2xl max-h-48 overflow-hidden z-[500]",children:(0,b.jsxs)("div",{className:"p-2",children:[(0,b.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-neutral-700 rounded-full mx-auto mb-2"}),(0,b.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:c.map(a=>(0,b.jsxs)("button",{onClick:()=>E(a),className:"flex-shrink-0 flex items-center gap-2 p-2 bg-gray-50 dark:bg-neutral-800 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:a.profileImage?(0,b.jsx)("img",{src:a.profileImage,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("span",{className:"text-white font-bold text-sm",children:a.name?.charAt(0)||"?"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate max-w-[100px]",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:a.distance<1?`${Math.round(1e3*a.distance)}m`:`${a.distance.toFixed(1)}km`})]})]},a.id))})]})}),!f&&!o&&0===c.length&&w&&(0,b.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 rounded-t-2xl p-6 z-[500]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(n.Users,{className:"w-12 h-12 text-gray-300 dark:text-neutral-700 mx-auto mb-3"}),(0,b.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"No one nearby"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:"Try increasing the search radius to find more people"})]})})]}),B&&"undefined"!=typeof document&&(0,D.createPortal)((0,b.jsx)(({user:a,onClose:c})=>(0,b.jsxs)("div",{style:{zIndex:9999},onClick:a=>{a.target===a.currentTarget&&c()},className:"jsx-ab0afecbe1649125 fixed inset-0 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm",children:[(0,b.jsxs)("div",{style:{animation:"slideUp 0.3s ease-out"},className:"jsx-ab0afecbe1649125 bg-white dark:bg-neutral-900 w-full max-w-md rounded-t-3xl sm:rounded-2xl overflow-hidden max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 h-24 bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 relative",children:[a.bannerImage&&(0,b.jsx)("img",{src:a.bannerImage,alt:"Banner",className:"jsx-ab0afecbe1649125 w-full h-full object-cover"}),(0,b.jsx)("button",{onClick:c,className:"jsx-ab0afecbe1649125 absolute top-3 right-3 p-2 bg-black/30 hover:bg-black/50 rounded-full transition-colors",children:(0,b.jsx)(l.X,{className:"w-4 h-4 text-white"})})]}),(0,b.jsx)("div",{className:"jsx-ab0afecbe1649125 px-4 -mt-10 relative z-10",children:(0,b.jsx)("div",{className:"jsx-ab0afecbe1649125 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:a.profileImage?(0,b.jsx)("img",{src:a.profileImage,alt:a.name,className:"jsx-ab0afecbe1649125 w-full h-full object-cover"}):(0,b.jsx)("span",{className:"jsx-ab0afecbe1649125 text-white font-bold text-2xl",children:a.name?.charAt(0)||"?"})})}),(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 px-4 pb-6 pt-3",children:[(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-3",children:[(0,b.jsx)("h2",{className:"jsx-ab0afecbe1649125 text-xl font-bold text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("p",{className:"jsx-ab0afecbe1649125 text-gray-500 dark:text-neutral-400",children:["@",a.username]})]}),(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex items-center gap-2 mb-4",children:[(0,b.jsxs)("span",{className:"jsx-ab0afecbe1649125 inline-flex items-center gap-1 px-2.5 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-sm font-medium",children:[(0,b.jsx)(q.MapPin,{className:"w-3.5 h-3.5"}),a.distance<1?`${Math.round(1e3*a.distance)}m away`:`${a.distance.toFixed(1)}km away`]}),a.location?.city&&(0,b.jsx)("span",{className:"jsx-ab0afecbe1649125 text-sm text-gray-500 dark:text-neutral-400",children:a.location.city}),a.isOnline&&(0,b.jsxs)("span",{className:"jsx-ab0afecbe1649125 inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs",children:[(0,b.jsx)("span",{className:"jsx-ab0afecbe1649125 w-1.5 h-1.5 bg-green-500 rounded-full"}),"Online"]})]}),a.headline&&(0,b.jsx)("p",{className:"jsx-ab0afecbe1649125 text-gray-700 dark:text-neutral-300 mb-4",children:a.headline}),a.skills&&a.skills.length>0&&(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-4",children:[(0,b.jsx)("h4",{className:"jsx-ab0afecbe1649125 text-xs font-semibold text-gray-500 dark:text-neutral-500 uppercase mb-2",children:"Skills"}),(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex flex-wrap gap-1.5",children:[a.skills.slice(0,6).map((a,c)=>(0,b.jsx)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-full text-xs",children:a},c)),a.skills.length>6&&(0,b.jsxs)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 text-gray-500 text-xs",children:["+",a.skills.length-6," more"]})]})]}),a.interests&&a.interests.length>0&&(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-4",children:[(0,b.jsx)("h4",{className:"jsx-ab0afecbe1649125 text-xs font-semibold text-gray-500 dark:text-neutral-500 uppercase mb-2",children:"Interests"}),(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex flex-wrap gap-1.5",children:[a.interests.slice(0,6).map((a,c)=>(0,b.jsx)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-full text-xs",children:a},c)),a.interests.length>6&&(0,b.jsxs)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 text-gray-500 text-xs",children:["+",a.interests.length-6," more"]})]})]}),(0,b.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex gap-3 mt-4",children:[(0,b.jsx)(t.default,{href:`/profile/${a.username}`,className:"flex-1 py-2.5 text-center bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:"View Profile"}),(0,b.jsxs)("button",{onClick:()=>_(a.id),disabled:F===a.id,className:"jsx-ab0afecbe1649125 flex-1 py-2.5 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[F===a.id?(0,b.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,b.jsx)(v.UserPlus,{className:"w-4 h-4"}),"Connect"]})]})]})]}),(0,b.jsx)(C.default,{id:"ab0afecbe1649125",children:"@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}"})]}),{user:B,onClose:()=>E(null)}),document.body),(0,b.jsx)(u.default,{show:L,recipientName:N,onClose:()=>M(!1)})]})}var L=a.i(63491);function M(){var a;(0,g.useQueryClient)();let[c,t]=(0,d.useState)("all"),[u,v]=(0,d.useState)(""),[w,x]=(0,d.useState)([]),[y,z]=(0,d.useState)([]),[C,D]=(0,d.useState)([]),[E,F]=(0,d.useState)(!0),[G,H]=(0,d.useState)(!1),[I,J]=(0,d.useState)(!1),[M,N]=(0,d.useState)(null),[O,P]=(0,d.useState)(1),[Q,R]=(0,d.useState)(!0),[S,T]=(0,d.useState)(0),[U,V]=(0,d.useState)({}),[W,X]=(0,d.useState)(""),[Y,Z]=(0,d.useState)(""),[$,_]=(0,d.useState)(void 0),aa=(0,d.useRef)(null),ab=(0,d.useRef)(null),ac=(0,d.useRef)(null),{data:ad,isLoading:ae,isError:af,refetch:ag}=(a={queryKey:["find-people-initial"],queryFn:async()=>{let[a,b,c]=await Promise.all([(0,L.getPeople)({},{page:1,limit:20}),(0,L.getSuggestions)(10).catch(()=>({suggestions:[]})),(0,L.getPeopleFromSameCollege)(10).catch(()=>({people:[]}))]);return{people:a.people,total:a.total,hasMore:a.hasMore,suggestions:b.suggestions,colleaguePeople:c.people}},staleTime:3e5,retry:2},(0,f.useBaseQuery)(a,e.QueryObserver,void 0));(0,d.useEffect)(()=>{ad&&(x(ad.people),T(ad.total),R(ad.hasMore),z(ad.suggestions),D(ad.colleaguePeople),F(!1))},[ad]),(0,d.useEffect)(()=>{!ad&&ae&&F(!0),ae||F(!1)},[ae,ad]),(0,d.useEffect)(()=>{(async()=>{try{let a=await (0,L.getFilterOptions)();N(a)}catch(a){console.error("Failed to fetch filter options:",a)}})()},[]);let ah=(0,d.useCallback)(async a=>{if("all"===c){F(!0),P(1);try{let b={...U,search:a||void 0},c=await (0,L.getPeople)(b,{page:1,limit:20});x(c.people),T(c.total),R(c.hasMore)}catch(a){console.error("Search failed:",a)}finally{F(!1)}}},[c,U]);(0,d.useEffect)(()=>{aa.current&&clearTimeout(aa.current);let a=W||Y||$;if(!u&&!a&&"all"===c){ad&&(x(ad.people),T(ad.total),R(ad.hasMore)),F(!1);return}if("all"===c)return aa.current=setTimeout(()=>ah(u),300),()=>{aa.current&&clearTimeout(aa.current)}},[u,c,W,Y,$,ad,ah]);let ai=async()=>{let a={search:u||void 0,college:W||void 0,branch:Y||void 0,graduationYear:$};V(a),F(!0),P(1);try{let b=await (0,L.getPeople)(a,{page:1,limit:20});x(b.people),T(b.total),R(b.hasMore)}catch(a){console.error("Failed to apply filters:",a)}finally{F(!1),J(!1)}},aj=async()=>{if(G||!Q||"all"!==c)return;H(!0);let a=O+1;try{let b=await (0,L.getPeople)({...U,search:u||void 0},{page:a,limit:20});x(a=>[...a,...b.people]),P(a),R(b.hasMore)}catch(a){console.error("Failed to load more:",a)}finally{H(!1)}};(0,d.useEffect)(()=>(ab.current&&ab.current.disconnect(),ab.current=new IntersectionObserver(a=>{a[0].isIntersecting&&Q&&!G&&"all"===c&&aj()},{threshold:.1}),ac.current&&ab.current.observe(ac.current),()=>{ab.current&&ab.current.disconnect()}),[Q,G,c,O]);let ak=(a,b)=>{let c=c=>c.map(c=>c.id===a?{...c,connectionStatus:b}:c);x(c),z(c),D(c)},al=(()=>{switch(c){case"suggestions":return y;case"college":return C;default:return w}})(),am=W||Y||$;return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 pb-24",children:(0,b.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 z-40 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800",children:[(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Find People"}),S>0&&"all"===c&&(0,b.jsxs)("span",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[S.toLocaleString()," people"]})]}),(0,b.jsxs)("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2 -mb-2 scrollbar-hide",children:[(0,b.jsxs)("button",{onClick:()=>t("all"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"all"===c?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,b.jsx)(n.Users,{className:"w-4 h-4"}),"All People"]}),(0,b.jsxs)("button",{onClick:()=>t("suggestions"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"suggestions"===c?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,b.jsx)(o.Sparkles,{className:"w-4 h-4"}),"For You"]}),(0,b.jsxs)("button",{onClick:()=>t("college"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"college"===c?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,b.jsx)(p.GraduationCap,{className:"w-4 h-4"}),"Same College"]}),(0,b.jsxs)("button",{onClick:()=>t("nearby"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"nearby"===c?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,b.jsx)(q.MapPin,{className:"w-4 h-4"}),"Nearby"]})]}),"all"===c&&(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(j.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:u,onChange:a=>v(a.target.value),placeholder:"Search by name, username, college, skills...",className:"w-full pl-10 pr-20 py-3 rounded-xl bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-blue-500 transition-all"}),(0,b.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[u&&(0,b.jsx)("button",{onClick:()=>v(""),className:"p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-neutral-700",children:(0,b.jsx)(l.X,{className:"w-4 h-4 text-gray-400"})}),(0,b.jsx)("button",{onClick:()=>J(!I),className:`p-2 rounded-full transition-colors ${I||am?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-200 dark:hover:bg-neutral-700 text-gray-500"}`,children:(0,b.jsx)(k.Filter,{className:"w-4 h-4"})})]})]})]}),(0,b.jsx)(i.AnimatePresence,{children:I&&"all"===c&&(0,b.jsx)(h.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-t border-gray-100 dark:border-neutral-800",children:(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[M?.colleges&&M.colleges.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"College"}),(0,b.jsxs)("select",{value:W,onChange:a=>X(a.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Colleges"}),M.colleges.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),M?.branches&&M.branches.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"Branch"}),(0,b.jsxs)("select",{value:Y,onChange:a=>Z(a.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Branches"}),M.branches.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),M?.graduationYears&&M.graduationYears.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"Graduation Year"}),(0,b.jsxs)("select",{value:$||"",onChange:a=>_(a.target.value?parseInt(a.target.value):void 0),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"All Years"}),M.graduationYears.sort((a,b)=>b-a).map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,b.jsx)("button",{onClick:ai,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Apply Filters"}),am&&(0,b.jsx)("button",{onClick:()=>{X(""),Z(""),_(void 0),V({}),ah(u)},className:"px-4 py-2 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:"Clear"})]})]})})})]}),(0,b.jsxs)("div",{className:"p-4",children:[am&&"all"===c&&(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[W&&(0,b.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-full",children:[(0,b.jsx)(p.GraduationCap,{className:"w-3 h-3"}),W,(0,b.jsx)("button",{onClick:()=>{X(""),ai()},children:(0,b.jsx)(l.X,{className:"w-3 h-3 ml-1"})})]}),Y&&(0,b.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-sm rounded-full",children:[Y,(0,b.jsx)("button",{onClick:()=>{Z(""),ai()},children:(0,b.jsx)(l.X,{className:"w-3 h-3 ml-1"})})]}),$&&(0,b.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm rounded-full",children:["Class of ",$,(0,b.jsx)("button",{onClick:()=>{_(void 0),ai()},children:(0,b.jsx)(l.X,{className:"w-3 h-3 ml-1"})})]})]}),"nearby"===c&&(0,b.jsx)(K,{}),"nearby"!==c&&E&&(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((a,c)=>(0,b.jsx)(B,{},c))}),"nearby"!==c&&af&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(s.AlertCircle,{className:"w-16 h-16 mx-auto text-red-400 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Failed to load people"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-neutral-400 max-w-md mx-auto mb-4",children:"Something went wrong. Please try again."}),(0,b.jsx)("button",{onClick:()=>ag(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"})]}),"nearby"!==c&&!E&&!af&&0===al.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(n.Users,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-neutral-600 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"suggestions"===c?"No suggestions yet":"college"===c?"No colleagues found":u?"No results found":"No people found"}),(0,b.jsx)("p",{className:"text-gray-500 dark:text-neutral-400 max-w-md mx-auto",children:"suggestions"===c?"Complete your profile to get personalized suggestions":"college"===c?"Add your college information to find colleagues":u?"Try a different search term or adjust your filters":"Check back later for new users"})]}),"nearby"!==c&&!E&&al.length>0&&(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:al.map(a=>(0,b.jsx)(A,{person:a,onConnectionChange:ak},a.id))}),"all"===c&&Q&&!E&&(0,b.jsx)("div",{ref:ac,className:"flex justify-center py-8",children:G?(0,b.jsx)(m.Loader2,{className:"w-6 h-6 animate-spin text-blue-500"}):(0,b.jsxs)("button",{onClick:aj,className:"flex items-center gap-2 px-6 py-2 text-gray-600 dark:text-neutral-400 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:[(0,b.jsx)(r.RefreshCw,{className:"w-4 h-4"}),"Load more"]})})]})]})})}function N(){return(0,b.jsx)(c.ProtectedRoute,{children:(0,b.jsx)(M,{})})}a.s(["default",()=>N],83041)}];

//# sourceMappingURL=src_app_find-people_page_tsx_ea610810._.js.map