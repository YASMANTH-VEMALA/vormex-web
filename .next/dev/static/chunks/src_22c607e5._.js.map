{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/auth/useAuth.ts"],"sourcesContent":["import { useAuthContext } from './authContext';\nimport type { User, LoginCredentials, RegisterData, AuthResponse } from '@/types/auth';\n\nexport function useAuth() {\n  const context = useAuthContext();\n  \n  return {\n    user: context.user,\n    isAuthenticated: context.isAuthenticated,\n    loading: context.loading,\n    login: context.login,\n    logout: context.logout,\n    register: context.register,\n    setAuth: context.setAuth,\n    updateUser: context.updateUser,\n  };\n}\n\n"],"names":["useAuthContext","User","LoginCredentials","RegisterData","AuthResponse","useAuth","$","_c","$i","Symbol","for","context","t0","isAuthenticated","loading","login","logout","register","setAuth","updateUser","user"],"mappings":";;;;;AAAA,SAASA,cAAc,QAAQ,eAAe;;;;AAGvC;;IAAA,MAAAM,CAAA,OAAAC,gLAAA,EAAA;IAAA,IAAAD,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAE,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAF,CAAA,CAAAE,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAJ,CAAA,CAAA,EAAA,GAAA;IAAA;IACL,MAAAK,OAAA;IAAiC,IAAAC,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAE,eAAA,IAAAP,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAG,OAAA,IAAAR,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAI,KAAA,IAAAT,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAK,MAAA,IAAAV,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAM,QAAA,IAAAX,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAO,OAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAQ,UAAA,IAAAb,CAAA,CAAA,EAAA,KAAAK,OAAA,CAAAS,IAAA,EAAA;QAE1BR,EAAA,GAAA;YAAAQ,IAAA,EACCT,OAAO,CAAAS,IAAK;YAAAP,eAAA,EACDF,OAAO,CAAAE,eAAgB;YAAAC,OAAA,EAC/BH,OAAO,CAAAG,OAAQ;YAAAC,KAAA,EACjBJ,OAAO,CAAAI,KAAM;YAAAC,MAAA,EACZL,OAAO,CAAAK,MAAO;YAAAC,QAAA,EACZN,OAAO,CAAAM,QAAS;YAAAC,OAAA,EACjBP,OAAO,CAAAO,OAAQ;YAAAC,UAAA,EACZR,OAAO,CAAAQ,UAAAA;QACrB,CAAC;QAAAb,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAE,eAAA;QAAAP,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAG,OAAA;QAAAR,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAI,KAAA;QAAAT,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAK,MAAA;QAAAV,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAM,QAAA;QAAAX,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAO,OAAA;QAAAZ,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAQ,UAAA;QAAAb,CAAA,CAAA,EAAA,GAAAK,OAAA,CAAAS,IAAA;QAAAd,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IAAA,OATMM,EASN;AAAA;GAZIP,QAAA;;QACWL,uJAAc,CAAC,CAAC","ignoreList":[]}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":["c","_c","React","useRouter","useAuth","ProtectedRouteProps","children","ReactNode","ProtectedRoute","t0","$","$i","Symbol","for","isAuthenticated","loading","router","t1","t2","ProtectedRoute[useEffect()]","push","useEffect","t3"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;;AAJ5C,YAAY;;;;;AAUL,wBAAAK,EAAA;;IAAA,MAAAC,CAAA,OAAAT,gLAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAJ,QAAAA,EAAA,GAAAG,EAAiC;IAC9D,MAAA,EAAAK,eAAA,EAAAC,OAAAA,EAAA;IACA,MAAAC,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAI,eAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAK,OAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,MAAA,EAAA;QAEXC,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACd,IAAI,CAACJ,OAA2B,IAA5B,CAAaD,eAAe,EAAA;oBAC9BE,MAAM,CAAAI,IAAK,CAAC,QAAQ,CAAC;gBAAA;YACtB;SAAA,CAAA,CAAA,8BACF;QAAEF,EAAA,GAAA;YAACJ,eAAe;YAAEC,OAAO;YAAEC,MAAM;SAAC;QAAAN,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,OAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,MAAA;QAAAN,CAAA,CAAA,EAAA,GAAAO,EAAA;QAAAP,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAP,CAAA,CAAA,EAAA;QAAAQ,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAJrCR,wKAAK,CAAAmB,SAAU,CAACJ,EAIf,EAAEC,EAAkC,CAAC;IAEtC,IAAIH,OAAO,EAAA;QAAA,IAAAO,EAAA;QAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPS,EAAA,iBAAA,6LAAA,GAKM;gBALS,SAA+C,EAA/C,+CAA+C;wCAC5D,6LAAA,GAGM;oBAHS,SAAa,EAAb,aAAa;;sCAC1B,6LAAA,GAA8F;4BAA/E,SAAwE,EAAxE,wEAAwE;;;;;;sCACvF,6LAAA,CAAgD;4BAAnC,SAAoB,EAApB,oBAAoB;sCAAC,UAAU,EAA5C,CAAgD,CAClD,EAHA,GAGM,CACR,EALA,GAKM;;;;;;;;;;;;;;;;;YAAAZ,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;QAAA;QAAA,OALNY,EAKM;IAAA;IAIV,IAAI,CAACR,eAAe,EAAA;QAAA,OACX,IAAI;IAAA;IACZ,IAAAQ,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAEMgB,EAAA,iBAAA,EAAGhB;sBAAAA,QAAO,CAAC,GAAI;;QAAAI,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAfY,EAAe;AAAA;;;QAxBelB,2IAAO,CAAC,CAAC;QAC/BD,kJAAS,CAAC,CAAC;;;KAFrBK","ignoreList":[]}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/api/posts.ts"],"sourcesContent":["// Posts API - Complete API client for Posts & Feed endpoints\n\nimport apiClient from './client';\nimport type {\n  Post,\n  FeedResponse,\n  Comment,\n  CommentsResponse,\n  MentionUser,\n  MentionNotification,\n} from '@/types/post';\n\n// ============================================\n// Feed Endpoints\n// ============================================\n\n/**\n * Get home feed with cursor-based pagination\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of posts per page (default: 20)\n */\nexport async function getFeed(cursor?: string, limit: number = 20): Promise<FeedResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  return apiClient.get('/posts/feed', { params });\n}\n\n/**\n * Get a single post by ID\n * @param postId - Post ID\n */\nexport async function getPost(postId: string): Promise<Post> {\n  return apiClient.get(`/posts/${postId}`);\n}\n\n// ============================================\n// Post CRUD Endpoints\n// ============================================\n\n/**\n * Create a new post (supports all post types)\n * Uses FormData for file uploads\n */\nexport async function createPost(formData: FormData): Promise<Post> {\n  return apiClient.post('/posts', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n}\n\n/**\n * Delete a post\n * @param postId - Post ID to delete\n */\nexport async function deletePost(postId: string): Promise<{ success: boolean }> {\n  return apiClient.delete(`/posts/${postId}`);\n}\n\n// ============================================\n// Engagement Endpoints\n// ============================================\n\n/**\n * Toggle like on a post\n * @param postId - Post ID\n */\nexport async function toggleLike(postId: string): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/like`);\n}\n\n/**\n * Vote on a poll\n * @param postId - Post ID\n * @param optionId - Poll option ID\n */\nexport async function votePoll(postId: string, optionId: string): Promise<{ success: boolean; pollOptions: any[] }> {\n  return apiClient.post(`/posts/${postId}/poll/vote`, { optionId });\n}\n\n/**\n * Track post impression (view)\n * @param postId - Post ID\n * @param locationData - Optional location data\n */\nexport async function trackImpression(\n  postId: string, \n  locationData?: { lat: number; lng: number; city?: string; country?: string }\n): Promise<{ success: boolean }> {\n  return apiClient.post(`/posts/${postId}/impression`, locationData);\n}\n\n// ============================================\n// Comments Endpoints\n// ============================================\n\n/**\n * Get comments for a post\n * @param postId - Post ID\n * @param parentId - Optional parent comment ID for replies\n * @param page - Page number\n * @param limit - Comments per page\n */\nexport async function getComments(\n  postId: string,\n  parentId?: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<CommentsResponse> {\n  const params: Record<string, any> = { page, limit };\n  if (parentId) params.parentId = parentId;\n  return apiClient.get(`/posts/${postId}/comments`, { params });\n}\n\n/**\n * Create a comment on a post\n * Note: This is handled via WebSocket for real-time updates\n * This is a fallback HTTP endpoint\n */\nexport async function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): Promise<Comment> {\n  return apiClient.post(`/posts/${postId}/comments`, {\n    content,\n    parentId,\n    mentions,\n  });\n}\n\n/**\n * Toggle like on a comment\n * Note: This is handled via WebSocket for real-time updates\n */\nexport async function toggleCommentLike(\n  postId: string,\n  commentId: string\n): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/comments/${commentId}/like`);\n}\n\n// ============================================\n// Mention Endpoints\n// ============================================\n\n/**\n * Search users for @mention autocomplete\n * @param query - Search query\n */\nexport async function searchUsersForMention(query: string): Promise<MentionUser[]> {\n  return apiClient.get('/mentions/search', { params: { q: query } });\n}\n\n/**\n * Get unread mentions\n */\nexport async function getUnreadMentions(): Promise<MentionNotification[]> {\n  return apiClient.get('/mentions/unread');\n}\n\n/**\n * Get unread mention count\n */\nexport async function getUnreadMentionCount(): Promise<{ count: number }> {\n  return apiClient.get('/mentions/count');\n}\n\n/**\n * Mark mentions as read\n * @param mentionIds - Array of mention IDs to mark as read\n */\nexport async function markMentionsAsRead(mentionIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/mentions/read', { mentionIds });\n}\n\n// ============================================\n// Upload Endpoints\n// ============================================\n\n/**\n * Upload avatar image\n * @param file - Image file\n */\nexport async function uploadAvatar(file: File): Promise<{ avatarUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/avatar', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload banner image\n * @param file - Image file\n */\nexport async function uploadBanner(file: File): Promise<{ bannerUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/banner', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Delete an uploaded file\n * @param fileUrl - URL of file to delete\n * @param type - Type of file (avatar, banner, post)\n */\nexport async function deleteUpload(fileUrl: string, type: 'avatar' | 'banner' | 'post'): Promise<{ success: boolean }> {\n  return apiClient.delete('/upload', { data: { fileUrl, type } });\n}\n\n// ============================================\n// Location Endpoints\n// ============================================\n\n/**\n * Update user location\n */\nexport async function updateLocation(\n  lat: number,\n  lng: number,\n  accuracy?: number,\n  activity?: string\n): Promise<any> {\n  return apiClient.post('/location/update', { lat, lng, accuracy, activity });\n}\n\n/**\n * Get current user's location\n */\nexport async function getMyLocation(): Promise<any> {\n  return apiClient.get('/location/me');\n}\n\n/**\n * Get nearby users\n * @param radius - Search radius in km (default: 50)\n * @param limit - Max users to return (default: 20)\n */\nexport async function getNearbyUsers(radius?: number, limit?: number): Promise<any[]> {\n  const params: Record<string, any> = {};\n  if (radius) params.radius = radius;\n  if (limit) params.limit = limit;\n  return apiClient.get('/location/nearby', { params });\n}\n\n/**\n * Update location settings\n */\nexport async function updateLocationSettings(settings: {\n  locationPermission?: boolean;\n  shareLocationPublic?: boolean;\n}): Promise<{ message: string }> {\n  return apiClient.put('/location/settings', settings);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/socket.ts"],"sourcesContent":["// Socket.IO Client for Real-time Features\n\nimport { io, Socket } from 'socket.io-client';\nimport { getToken } from '@/lib/auth/authHelpers';\n\nconst SOCKET_URL = process.env.NEXT_PUBLIC_API_URL?.replace('/api', '') || 'http://localhost:5000';\n\nlet socket: Socket | null = null;\n\nexport interface SocketEventHandlers {\n  onConnect?: () => void;\n  onDisconnect?: () => void;\n  onError?: (error: { message: string }) => void;\n  \n  // Post events\n  onPostLiked?: (data: { postId: string; userId: string; liked: boolean; likesCount: number }) => void;\n  \n  // Comment events\n  onCommentCreated?: (data: { postId: string; comment: any; commentsCount: number }) => void;\n  onCommentLiked?: (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => void;\n  \n  // Poll events\n  onPollUpdated?: (data: { postId: string; pollOptions: any[]; voterId: string }) => void;\n  \n  // Notification events\n  onNotificationComment?: (data: any) => void;\n  onNotificationMention?: (data: any) => void;\n  onNotificationLike?: (data: any) => void;\n  onNotificationCommentLike?: (data: any) => void;\n  \n  // User events\n  onUserOnline?: (data: { userId: string }) => void;\n  onUserOffline?: (data: { userId: string }) => void;\n  onUserLocationChanged?: (data: { userId: string; city: string; state: string; country: string }) => void;\n  \n  // Location request\n  onLocationRequest?: (data: { message: string; timestamp: Date }) => void;\n}\n\n/**\n * Initialize Socket.IO connection\n */\nexport function initializeSocket(handlers?: SocketEventHandlers): Socket {\n  if (socket?.connected) {\n    return socket;\n  }\n  \n  const token = getToken();\n  \n  socket = io(SOCKET_URL, {\n    auth: { token },\n    transports: ['websocket', 'polling'],\n    reconnection: true,\n    reconnectionAttempts: 5,\n    reconnectionDelay: 1000,\n  });\n  \n  // Connection events\n  socket.on('connect', () => {\n    console.log('âœ… Socket connected:', socket?.id);\n    handlers?.onConnect?.();\n  });\n  \n  socket.on('disconnect', () => {\n    console.log('âŒ Socket disconnected');\n    handlers?.onDisconnect?.();\n  });\n  \n  socket.on('error', (error: { message: string }) => {\n    console.error('Socket error:', error);\n    handlers?.onError?.(error);\n  });\n  \n  // Post events\n  socket.on('post:liked', (data) => {\n    handlers?.onPostLiked?.(data);\n  });\n  \n  // Comment events\n  socket.on('comment:created', (data) => {\n    handlers?.onCommentCreated?.(data);\n  });\n  \n  socket.on('comment:liked', (data) => {\n    handlers?.onCommentLiked?.(data);\n  });\n  \n  // Poll events\n  socket.on('poll:updated', (data) => {\n    handlers?.onPollUpdated?.(data);\n  });\n  \n  // Notification events\n  socket.on('notification:comment', (data) => {\n    handlers?.onNotificationComment?.(data);\n  });\n  \n  socket.on('notification:mention', (data) => {\n    handlers?.onNotificationMention?.(data);\n  });\n  \n  socket.on('notification:like', (data) => {\n    handlers?.onNotificationLike?.(data);\n  });\n  \n  socket.on('notification:comment_like', (data) => {\n    handlers?.onNotificationCommentLike?.(data);\n  });\n  \n  // User events\n  socket.on('user:online', (data) => {\n    handlers?.onUserOnline?.(data);\n  });\n  \n  socket.on('user:offline', (data) => {\n    handlers?.onUserOffline?.(data);\n  });\n  \n  socket.on('user:location_changed', (data) => {\n    handlers?.onUserLocationChanged?.(data);\n  });\n  \n  // Location request\n  socket.on('location:request', (data) => {\n    handlers?.onLocationRequest?.(data);\n  });\n  \n  return socket;\n}\n\n/**\n * Get the current socket instance\n */\nexport function getSocket(): Socket | null {\n  return socket;\n}\n\n/**\n * Disconnect socket\n */\nexport function disconnectSocket(): void {\n  if (socket) {\n    socket.disconnect();\n    socket = null;\n  }\n}\n\n/**\n * Join a post room for real-time updates\n */\nexport function joinPostRoom(postId: string): void {\n  socket?.emit('post:join', { postId });\n}\n\n/**\n * Leave a post room\n */\nexport function leavePostRoom(postId: string): void {\n  socket?.emit('post:leave', { postId });\n}\n\n/**\n * Like/Unlike a post via WebSocket\n */\nexport function likePost(postId: string): void {\n  socket?.emit('post:like', { postId });\n}\n\n/**\n * Create a comment via WebSocket\n */\nexport function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): void {\n  socket?.emit('post:comment', { postId, content, parentId, mentions });\n}\n\n/**\n * Like/Unlike a comment via WebSocket\n */\nexport function likeComment(commentId: string, postId: string): void {\n  socket?.emit('comment:like', { commentId, postId });\n}\n\n/**\n * Vote on a poll via WebSocket\n */\nexport function votePoll(postId: string, optionId: string): void {\n  socket?.emit('poll:vote', { postId, optionId });\n}\n\n/**\n * Update location via WebSocket\n */\nexport function updateLocation(data: {\n  lat?: number;\n  lng?: number;\n  accuracy?: number;\n  activity?: string;\n}): void {\n  socket?.emit('location:update', data);\n}\n\n/**\n * Send typing indicator (for future use)\n */\nexport function sendTypingIndicator(postId: string, isTyping: boolean): void {\n  socket?.emit('typing', { postId, isTyping });\n}\n\nexport default {\n  initializeSocket,\n  getSocket,\n  disconnectSocket,\n  joinPostRoom,\n  leavePostRoom,\n  likePost,\n  createComment,\n  likeComment,\n  votePoll,\n  updateLocation,\n  sendTypingIndicator,\n};\n"],"names":[],"mappings":"AAAA,0CAA0C;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKvB;AAHnB;AACA;;;AAEA,MAAM,aAAa,+DAAiC,QAAQ,QAAQ,OAAO;AAE3E,IAAI,SAAwB;AAmCrB,SAAS,iBAAiB,QAA8B;IAC7D,IAAI,QAAQ,WAAW;QACrB,OAAO;IACT;IAEA,MAAM,QAAQ,IAAA,gJAAQ;IAEtB,SAAS,IAAA,wLAAE,EAAC,YAAY;QACtB,MAAM;YAAE;QAAM;QACd,YAAY;YAAC;YAAa;SAAU;QACpC,cAAc;QACd,sBAAsB;QACtB,mBAAmB;IACrB;IAEA,oBAAoB;IACpB,OAAO,EAAE,CAAC,WAAW;QACnB,QAAQ,GAAG,CAAC,uBAAuB,QAAQ;QAC3C,UAAU;IACZ;IAEA,OAAO,EAAE,CAAC,cAAc;QACtB,QAAQ,GAAG,CAAC;QACZ,UAAU;IACZ;IAEA,OAAO,EAAE,CAAC,SAAS,CAAC;QAClB,QAAQ,KAAK,CAAC,iBAAiB;QAC/B,UAAU,UAAU;IACtB;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,cAAc,CAAC;QACvB,UAAU,cAAc;IAC1B;IAEA,iBAAiB;IACjB,OAAO,EAAE,CAAC,mBAAmB,CAAC;QAC5B,UAAU,mBAAmB;IAC/B;IAEA,OAAO,EAAE,CAAC,iBAAiB,CAAC;QAC1B,UAAU,iBAAiB;IAC7B;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,gBAAgB,CAAC;QACzB,UAAU,gBAAgB;IAC5B;IAEA,sBAAsB;IACtB,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACjC,UAAU,wBAAwB;IACpC;IAEA,OAAO,EAAE,CAAC,wBAAwB,CAAC;QACjC,UAAU,wBAAwB;IACpC;IAEA,OAAO,EAAE,CAAC,qBAAqB,CAAC;QAC9B,UAAU,qBAAqB;IACjC;IAEA,OAAO,EAAE,CAAC,6BAA6B,CAAC;QACtC,UAAU,4BAA4B;IACxC;IAEA,cAAc;IACd,OAAO,EAAE,CAAC,eAAe,CAAC;QACxB,UAAU,eAAe;IAC3B;IAEA,OAAO,EAAE,CAAC,gBAAgB,CAAC;QACzB,UAAU,gBAAgB;IAC5B;IAEA,OAAO,EAAE,CAAC,yBAAyB,CAAC;QAClC,UAAU,wBAAwB;IACpC;IAEA,mBAAmB;IACnB,OAAO,EAAE,CAAC,oBAAoB,CAAC;QAC7B,UAAU,oBAAoB;IAChC;IAEA,OAAO;AACT;AAKO,SAAS;IACd,OAAO;AACT;AAKO,SAAS;IACd,IAAI,QAAQ;QACV,OAAO,UAAU;QACjB,SAAS;IACX;AACF;AAKO,SAAS,aAAa,MAAc;IACzC,QAAQ,KAAK,aAAa;QAAE;IAAO;AACrC;AAKO,SAAS,cAAc,MAAc;IAC1C,QAAQ,KAAK,cAAc;QAAE;IAAO;AACtC;AAKO,SAAS,SAAS,MAAc;IACrC,QAAQ,KAAK,aAAa;QAAE;IAAO;AACrC;AAKO,SAAS,cACd,MAAc,EACd,OAAe,EACf,QAAiB,EACjB,QAAmB;IAEnB,QAAQ,KAAK,gBAAgB;QAAE;QAAQ;QAAS;QAAU;IAAS;AACrE;AAKO,SAAS,YAAY,SAAiB,EAAE,MAAc;IAC3D,QAAQ,KAAK,gBAAgB;QAAE;QAAW;IAAO;AACnD;AAKO,SAAS,SAAS,MAAc,EAAE,QAAgB;IACvD,QAAQ,KAAK,aAAa;QAAE;QAAQ;IAAS;AAC/C;AAKO,SAAS,eAAe,IAK9B;IACC,QAAQ,KAAK,mBAAmB;AAClC;AAKO,SAAS,oBAAoB,MAAc,EAAE,QAAiB;IACnE,QAAQ,KAAK,UAAU;QAAE;QAAQ;IAAS;AAC5C;uCAEe;IACb;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACF"}},
    {"offset": {"line": 539, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { likePost as socketLikePost, votePoll as socketVotePoll } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle like\n  const handleLike = async () => {\n    const newLiked = !isLiked;\n    const newCount = newLiked ? likesCount + 1 : likesCount - 1;\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    onLikeUpdate?.(post.id, newLiked, newCount);\n    \n    try {\n      // Use WebSocket for real-time\n      socketLikePost(post.id);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(!newLiked);\n        setLikesCount(likesCount);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share\n  const handleShare = async () => {\n    const url = `${window.location.origin}/post/${post.id}`;\n    \n    if (navigator.share) {\n      try {\n        await navigator.share({\n          title: post.articleTitle || `Post by ${post.author.name}`,\n          text: post.content?.slice(0, 100) || '',\n          url,\n        });\n      } catch (err) {\n        // User cancelled or error\n      }\n    } else {\n      // Copy to clipboard\n      await navigator.clipboard.writeText(url);\n      // Could show a toast here\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-cover\"\n            loading=\"lazy\"\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[400px] object-cover\"\n            loading=\"lazy\"\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>{post.linkDomain || new URL(post.linkUrl).hostname}</span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: 'ðŸŽ‰',\n      PROMOTION: 'ðŸš€',\n      GRADUATION: 'ðŸŽ“',\n      CERTIFICATION: 'ðŸ“œ',\n      WORK_ANNIVERSARY: 'ðŸŽŠ',\n      BIRTHDAY: 'ðŸŽ‚',\n      JOB_CHANGE: 'âœ¨',\n      NEW_POSITION: 'ðŸŒŸ',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || 'ðŸŽ‰' : 'ðŸŽ‰';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()} â€¢ {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? ` â€¢ ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    if (!text) return null;\n    \n    // Split by @mentions and render as links\n    const parts = text.split(/(@\\w+)/g);\n    \n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        const username = part.slice(1);\n        return (\n          <Link\n            key={index}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost ? (\n                <button\n                  onClick={() => {\n                    handleDelete();\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  Delete post\n                </button>\n              ) : (\n                <button\n                  onClick={() => setShowMenu(false)}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <p className=\"text-gray-900 dark:text-white whitespace-pre-wrap\">\n            {parseContent(post.content)}\n          </p>\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <span>{likesCount} like{likesCount !== 1 ? 's' : ''}</span>\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {post.commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {post.commentsCount} comment{post.commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        <button\n          onClick={handleLike}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isLiked\n              ? 'text-red-500 bg-red-50 dark:bg-red-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Heart className={`w-5 h-5 ${isLiked ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium\">Like</span>\n        </button>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={() => setIsSaved(!isSaved)}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":["React","useState","useRef","useEffect","motion","Link","Heart","MessageCircle","Share2","Bookmark","MoreHorizontal","ExternalLink","FileText","Play","Pause","Volume2","VolumeX","ChevronLeft","ChevronRight","Trash2","Flag","Copy","formatDistanceToNow","Post","PollOption","toggleLike","votePoll","deletePost","likePost","socketLikePost","socketVotePoll","useAuth","PostCardProps","post","onLikeUpdate","postId","liked","count","onPollUpdate","options","onDelete","onCommentClick","highlightCommentId","PostCard","user","isLiked","setIsLiked","likesCount","setLikesCount","isSaved","setIsSaved","showMenu","setShowMenu","selectedPollOption","setSelectedPollOption","userVotedOptionId","pollOptions","setPollOptions","currentImageIndex","setCurrentImageIndex","videoRef","HTMLVideoElement","isPlaying","setIsPlaying","isMuted","setIsMuted","isVideoInView","setIsVideoInView","isOwnPost","id","author","type","current","observer","IntersectionObserver","entry","isIntersecting","play","catch","pause","threshold","observe","disconnect","handleLike","newLiked","newCount","error","err","handlePollVote","optionId","showResultsBeforeVote","updatedOptions","map","opt","votes","totalVotes","reduce","sum","optionsWithPercentage","percentage","Math","round","console","handleDelete","confirm","handleShare","url","window","location","origin","navigator","share","title","articleTitle","name","text","content","slice","clipboard","writeText","renderContent","renderImageContent","renderVideoContent","renderLinkContent","renderPollContent","renderArticleContent","renderCelebrationContent","renderDocumentContent","images","mediaUrls","length","mainImage","thumbnails","filter","_","i","prev","img","index","actualIndex","videoUrl","videoThumbnail","undefined","e","stopPropagation","muted","videoDuration","floor","String","padStart","linkUrl","linkImage","linkTitle","linkDescription","linkDomain","URL","hostname","hasVoted","some","showResults","isPollEnded","pollEndsAt","Date","option","isSelected","width","duration","addSuffix","articleCoverImage","articleTags","tag","articleReadTime","celebrationEmojis","Record","NEW_JOB","PROMOTION","GRADUATION","CERTIFICATION","WORK_ANNIVERSARY","BIRTHDAY","JOB_CHANGE","NEW_POSITION","emoji","celebrationType","replace","toLowerCase","c","toUpperCase","documentUrl","documentName","documentType","documentSize","toFixed","documentPages","parseContent","parts","split","part","startsWith","username","opacity","y","profileImage","charAt","headline","createdAt","commentsCount"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1719, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/Comments.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  ChevronDown,\n  ChevronUp,\n  Send,\n  Loader2,\n  X,\n  CornerDownRight,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Comment } from '@/types/post';\nimport { getComments, searchUsersForMention } from '@/lib/api/posts';\nimport { createComment, likeComment as socketLikeComment, joinPostRoom, leavePostRoom } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { MentionUser } from '@/types/post';\n\ninterface CommentsProps {\n  postId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  highlightCommentId?: string;\n  onCommentCountChange?: (count: number) => void;\n}\n\ninterface CommentItemProps {\n  comment: Comment;\n  postId: string;\n  depth: number;\n  highlightId?: string;\n  onReply: (parentId: string, parentAuthor: string) => void;\n}\n\nfunction CommentItem({ comment, postId, depth, highlightId, onReply }: CommentItemProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(comment.isLiked);\n  const [likesCount, setLikesCount] = useState(comment.likesCount);\n  const [showReplies, setShowReplies] = useState(depth < 2);\n  const [replies, setReplies] = useState<Comment[]>([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [hasMoreReplies, setHasMoreReplies] = useState(comment.replyCount > 0);\n  \n  const commentRef = useRef<HTMLDivElement>(null);\n  const isHighlighted = highlightId === comment.id;\n\n  // Scroll to highlighted comment\n  useEffect(() => {\n    if (isHighlighted && commentRef.current) {\n      commentRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }, [isHighlighted]);\n\n  // Load replies\n  const loadReplies = async () => {\n    if (loadingReplies || replies.length >= comment.replyCount) return;\n    \n    setLoadingReplies(true);\n    try {\n      const response = await getComments(postId, comment.id, 1, 10);\n      setReplies(response.comments);\n      setHasMoreReplies(response.hasMore);\n    } catch (error) {\n      console.error('Error loading replies:', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  // Handle like\n  const handleLike = () => {\n    const newLiked = !isLiked;\n    setIsLiked(newLiked);\n    setLikesCount(prev => newLiked ? prev + 1 : prev - 1);\n    \n    try {\n      socketLikeComment(comment.id, postId);\n    } catch (error) {\n      // Revert on error\n      setIsLiked(!newLiked);\n      setLikesCount(likesCount);\n    }\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    const parts = text.split(/(@\\w+)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        return (\n          <Link\n            key={index}\n            href={`/profile/${part.slice(1)}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <div\n      ref={commentRef}\n      className={`${depth > 0 ? 'ml-8 border-l-2 border-gray-100 dark:border-neutral-800 pl-4' : ''}`}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`py-3 transition-colors ${\n          isHighlighted ? 'bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 rounded-lg' : ''\n        }`}\n      >\n        <div className=\"flex gap-3\">\n          {/* Avatar */}\n          <Link href={`/profile/${comment.author.username}`} className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n              {comment.author.profileImage ? (\n                <img\n                  src={comment.author.profileImage}\n                  alt={comment.author.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                  {comment.author.name.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n          </Link>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"bg-gray-100 dark:bg-neutral-800 rounded-2xl px-4 py-2\">\n              <Link\n                href={`/profile/${comment.author.username}`}\n                className=\"font-semibold text-sm text-gray-900 dark:text-white hover:underline\"\n              >\n                {comment.author.name}\n              </Link>\n              <p className=\"text-sm text-gray-700 dark:text-neutral-300 whitespace-pre-wrap\">\n                {parseContent(comment.content)}\n              </p>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center gap-4 mt-1 ml-2 text-xs\">\n              <span className=\"text-gray-500 dark:text-neutral-500\">\n                {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n              </span>\n              \n              <button\n                onClick={handleLike}\n                className={`font-semibold transition-colors ${\n                  isLiked ? 'text-red-500' : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n                }`}\n              >\n                Like{likesCount > 0 && ` (${likesCount})`}\n              </button>\n              \n              <button\n                onClick={() => onReply(comment.id, comment.author.username)}\n                className=\"font-semibold text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors\"\n              >\n                Reply\n              </button>\n            </div>\n            \n            {/* Replies toggle */}\n            {comment.replyCount > 0 && (\n              <button\n                onClick={() => {\n                  setShowReplies(!showReplies);\n                  if (!showReplies && replies.length === 0) {\n                    loadReplies();\n                  }\n                }}\n                className=\"flex items-center gap-1 mt-2 ml-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300\"\n              >\n                <CornerDownRight className=\"w-3 h-3\" />\n                {showReplies ? 'Hide' : 'View'} {comment.replyCount} {comment.replyCount === 1 ? 'reply' : 'replies'}\n                {showReplies ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Replies */}\n        <AnimatePresence>\n          {showReplies && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-2\"\n            >\n              {loadingReplies && replies.length === 0 ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\n                </div>\n              ) : (\n                replies.map((reply) => (\n                  <CommentItem\n                    key={reply.id}\n                    comment={reply}\n                    postId={postId}\n                    depth={depth + 1}\n                    highlightId={highlightId}\n                    onReply={onReply}\n                  />\n                ))\n              )}\n              \n              {hasMoreReplies && replies.length > 0 && (\n                <button\n                  onClick={loadReplies}\n                  disabled={loadingReplies}\n                  className=\"ml-8 mt-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700\"\n                >\n                  {loadingReplies ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    'Load more replies'\n                  )}\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n\nexport function Comments({ postId, isOpen, onClose, highlightCommentId, onCommentCountChange }: CommentsProps) {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  \n  // Reply state\n  const [replyingTo, setReplyingTo] = useState<{ id: string; username: string } | null>(null);\n  \n  // Input state\n  const [newComment, setNewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const commentsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Join post room for real-time updates\n  useEffect(() => {\n    if (isOpen) {\n      joinPostRoom(postId);\n      return () => leavePostRoom(postId);\n    }\n  }, [isOpen, postId]);\n\n  // Fetch comments\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getComments(postId, undefined, 1, 20);\n        setComments(response.comments);\n        setHasMore(response.hasMore);\n        setPage(1);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchComments();\n  }, [isOpen, postId]);\n\n  // Load more comments\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    try {\n      const nextPage = page + 1;\n      const response = await getComments(postId, undefined, nextPage, 20);\n      setComments(prev => [...prev, ...response.comments]);\n      setHasMore(response.hasMore);\n      setPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more comments:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Handle reply click\n  const handleReply = (parentId: string, username: string) => {\n    setReplyingTo({ id: parentId, username });\n    setNewComment(`@${username} `);\n    setMentions([]);\n    inputRef.current?.focus();\n  };\n\n  // Cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n    setNewComment('');\n    setMentions([]);\n  };\n\n  // Search mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (error) {\n      console.error('Error searching mentions:', error);\n    }\n  }, []);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setNewComment(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : '';\n      \n      if (query) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (mentionUser: MentionUser) => {\n    const lastAtIndex = newComment.lastIndexOf('@');\n    const updatedComment = newComment.slice(0, lastAtIndex) + `@${mentionUser.username} `;\n    setNewComment(updatedComment);\n    setMentions([...mentions, mentionUser.id]);\n    setShowMentionDropdown(false);\n    inputRef.current?.focus();\n  };\n\n  // Submit comment\n  const handleSubmit = async () => {\n    if (!newComment.trim() || isSubmitting) return;\n    \n    setIsSubmitting(true);\n    \n    try {\n      // Use WebSocket for real-time\n      createComment(postId, newComment.trim(), replyingTo?.id, mentions);\n      \n      // Optimistic update\n      const tempComment: Comment = {\n        id: `temp-${Date.now()}`,\n        postId,\n        parentId: replyingTo?.id || null,\n        author: {\n          id: user!.id,\n          username: user!.username!,\n          name: user!.name!,\n          profileImage: user?.profileImage || null,\n          headline: null,\n        },\n        content: newComment.trim(),\n        contentType: 'text',\n        mentions,\n        likesCount: 0,\n        replyCount: 0,\n        isLiked: false,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n      };\n      \n      if (replyingTo) {\n        // Add to replies - will be handled by real-time update\n      } else {\n        setComments(prev => [tempComment, ...prev]);\n      }\n      \n      onCommentCountChange?.(comments.length + 1);\n      setNewComment('');\n      setMentions([]);\n      setReplyingTo(null);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Panel */}\n        <motion.div\n          initial={{ y: '100%' }}\n          animate={{ y: 0 }}\n          exit={{ y: '100%' }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full sm:max-w-xl h-[80vh] sm:h-[70vh] sm:rounded-t-2xl sm:rounded-b-2xl bg-white dark:bg-neutral-900 flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Comments</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n          \n          {/* Comments List */}\n          <div\n            ref={commentsContainerRef}\n            className=\"flex-1 overflow-y-auto p-4\"\n          >\n            {loading ? (\n              <div className=\"flex justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n              </div>\n            ) : comments.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageCircle className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n                <p className=\"text-gray-500 dark:text-neutral-400\">No comments yet</p>\n                <p className=\"text-sm text-gray-400 dark:text-neutral-500\">Be the first to comment!</p>\n              </div>\n            ) : (\n              <>\n                {comments.map((comment) => (\n                  <CommentItem\n                    key={comment.id}\n                    comment={comment}\n                    postId={postId}\n                    depth={0}\n                    highlightId={highlightCommentId}\n                    onReply={handleReply}\n                  />\n                ))}\n                \n                {hasMore && (\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"w-full py-3 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 transition-colors\"\n                  >\n                    {loadingMore ? (\n                      <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" />\n                    ) : (\n                      'Load more comments'\n                    )}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n          \n          {/* Reply indicator */}\n          {replyingTo && (\n            <div className=\"px-4 py-2 bg-gray-50 dark:bg-neutral-800/50 border-t border-gray-200 dark:border-neutral-800 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                Replying to <span className=\"font-semibold text-gray-700 dark:text-neutral-300\">@{replyingTo.username}</span>\n              </span>\n              <button onClick={cancelReply} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          \n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n            <div className=\"relative\">\n              {/* Mention Dropdown */}\n              {showMentionDropdown && (\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 max-h-40 overflow-y-auto bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg z-10\">\n                  {mentionResults.map((mentionUser) => (\n                    <button\n                      key={mentionUser.id}\n                      onClick={() => insertMention(mentionUser)}\n                      className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors\"\n                    >\n                      <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-600\">\n                        {mentionUser.profileImage && (\n                          <img src={mentionUser.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                        )}\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{mentionUser.name}</p>\n                        <p className=\"text-xs text-gray-500\">@{mentionUser.username}</p>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              <div className=\"flex items-end gap-2\">\n                <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user?.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={newComment}\n                  onChange={handleInputChange}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSubmit();\n                    }\n                  }}\n                  placeholder=\"Write a comment...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 resize-none outline-none focus:ring-2 focus:ring-blue-500 max-h-24\"\n                  style={{ minHeight: '40px' }}\n                />\n                \n                <button\n                  onClick={handleSubmit}\n                  disabled={!newComment.trim() || isSubmitting}\n                  className=\"p-2 rounded-full bg-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors\"\n                >\n                  {isSubmitting ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Send className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default Comments;\n"],"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","Link","Heart","MessageCircle","ChevronDown","ChevronUp","Send","Loader2","X","CornerDownRight","formatDistanceToNow","Comment","getComments","searchUsersForMention","createComment","likeComment","socketLikeComment","joinPostRoom","leavePostRoom","useAuth","MentionUser","CommentsProps","postId","isOpen","onClose","highlightCommentId","onCommentCountChange","count","CommentItemProps","comment","depth","highlightId","onReply","parentId","parentAuthor","CommentItem","user","isLiked","setIsLiked","likesCount","setLikesCount","showReplies","setShowReplies","replies","setReplies","loadingReplies","setLoadingReplies","hasMoreReplies","setHasMoreReplies","replyCount","commentRef","HTMLDivElement","isHighlighted","id","current","scrollIntoView","behavior","block","loadReplies","length","response","comments","hasMore","error","console","handleLike","newLiked","prev","parseContent","text","parts","split","map","part","index","startsWith","slice","opacity","y","author","username","profileImage","name","charAt","toUpperCase","content","Date","createdAt","addSuffix","height","reply","Comments","setComments","loading","setLoading","setHasMore","page","setPage","loadingMore","setLoadingMore","replyingTo","setReplyingTo","newComment","setNewComment","isSubmitting","setIsSubmitting","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","mentions","setMentions","inputRef","HTMLTextAreaElement","commentsContainerRef","fetchComments","undefined","loadMore","nextPage","handleReply","focus","cancelReply","searchMentions","query","results","handleInputChange","e","ChangeEvent","value","target","lastAtIndex","lastIndexOf","textAfterAt","spaceIndex","indexOf","insertMention","mentionUser","updatedComment","handleSubmit","trim","tempComment","now","headline","contentType","toISOString","updatedAt","type","damping","stiffness","stopPropagation","key","shiftKey","preventDefault","minHeight"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2657, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/CreatePostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Image as ImageIcon,\n  Video,\n  FileText,\n  Link as LinkIcon,\n  BarChart3,\n  Sparkles,\n  Trophy,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Plus,\n  Trash2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { createPost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { PostType, PostVisibility, CelebrationType, MentionUser } from '@/types/post';\n\ninterface CreatePostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onPostCreated?: () => void;\n}\n\nconst POST_TYPES = [\n  { type: 'TEXT' as PostType, icon: FileText, label: 'Text' },\n  { type: 'IMAGE' as PostType, icon: ImageIcon, label: 'Image' },\n  { type: 'VIDEO' as PostType, icon: Video, label: 'Video' },\n  { type: 'LINK' as PostType, icon: LinkIcon, label: 'Link' },\n  { type: 'POLL' as PostType, icon: BarChart3, label: 'Poll' },\n  { type: 'ARTICLE' as PostType, icon: Sparkles, label: 'Article' },\n  { type: 'CELEBRATION' as PostType, icon: Trophy, label: 'Celebration' },\n];\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst CELEBRATION_TYPES: { value: CelebrationType; label: string; emoji: string }[] = [\n  { value: 'NEW_JOB', label: 'Started a new job', emoji: 'ðŸŽ‰' },\n  { value: 'PROMOTION', label: 'Got promoted', emoji: 'ðŸš€' },\n  { value: 'GRADUATION', label: 'Graduated', emoji: 'ðŸŽ“' },\n  { value: 'CERTIFICATION', label: 'Earned a certification', emoji: 'ðŸ“œ' },\n  { value: 'WORK_ANNIVERSARY', label: 'Work anniversary', emoji: 'ðŸŽŠ' },\n  { value: 'BIRTHDAY', label: 'Birthday', emoji: 'ðŸŽ‚' },\n];\n\nexport function CreatePostModal({ isOpen, onClose, onPostCreated }: CreatePostModalProps) {\n  const { user } = useAuth();\n  const [postType, setPostType] = useState<PostType>('TEXT');\n  const [content, setContent] = useState('');\n  const [visibility, setVisibility] = useState<PostVisibility>('PUBLIC');\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Image state\n  const [images, setImages] = useState<File[]>([]);\n  const [imagePreviews, setImagePreviews] = useState<string[]>([]);\n  \n  // Video state\n  const [video, setVideo] = useState<File | null>(null);\n  const [videoPreview, setVideoPreview] = useState<string | null>(null);\n  \n  // Link state\n  const [linkUrl, setLinkUrl] = useState('');\n  const [linkPreview, setLinkPreview] = useState<any>(null);\n  const [fetchingLinkPreview, setFetchingLinkPreview] = useState(false);\n  \n  // Poll state\n  const [pollOptions, setPollOptions] = useState<string[]>(['', '']);\n  const [pollDuration, setPollDuration] = useState(24); // hours\n  const [showResultsBeforeVote, setShowResultsBeforeVote] = useState(false);\n  \n  // Article state\n  const [articleTitle, setArticleTitle] = useState('');\n  const [articleCoverImage, setArticleCoverImage] = useState<File | null>(null);\n  const [articleCoverPreview, setArticleCoverPreview] = useState<string | null>(null);\n  const [articleTags, setArticleTags] = useState<string[]>([]);\n  const [tagInput, setTagInput] = useState('');\n  \n  // Celebration state\n  const [celebrationType, setCelebrationType] = useState<CelebrationType | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  // Refs\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const videoInputRef = useRef<HTMLInputElement>(null);\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Reset form when modal closes\n  useEffect(() => {\n    if (!isOpen) {\n      resetForm();\n    }\n  }, [isOpen]);\n\n  const resetForm = () => {\n    setPostType('TEXT');\n    setContent('');\n    setVisibility('PUBLIC');\n    setImages([]);\n    setImagePreviews([]);\n    setVideo(null);\n    setVideoPreview(null);\n    setLinkUrl('');\n    setLinkPreview(null);\n    setPollOptions(['', '']);\n    setPollDuration(24);\n    setShowResultsBeforeVote(false);\n    setArticleTitle('');\n    setArticleCoverImage(null);\n    setArticleCoverPreview(null);\n    setArticleTags([]);\n    setCelebrationType(null);\n    setMentions([]);\n    setError(null);\n  };\n\n  // Handle image selection\n  const handleImageSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    if (images.length + files.length > 10) {\n      setError('Maximum 10 images allowed');\n      return;\n    }\n    \n    const validFiles = files.filter(file => {\n      if (file.size > 10 * 1024 * 1024) {\n        setError('Image size must be under 10MB');\n        return false;\n      }\n      return true;\n    });\n    \n    setImages(prev => [...prev, ...validFiles]);\n    \n    validFiles.forEach(file => {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImagePreviews(prev => [...prev, e.target?.result as string]);\n      };\n      reader.readAsDataURL(file);\n    });\n  };\n\n  // Handle video selection\n  const handleVideoSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    \n    if (file.size > 500 * 1024 * 1024) {\n      setError('Video size must be under 500MB');\n      return;\n    }\n    \n    setVideo(file);\n    setVideoPreview(URL.createObjectURL(file));\n  };\n\n  // Remove image\n  const removeImage = (index: number) => {\n    setImages(prev => prev.filter((_, i) => i !== index));\n    setImagePreviews(prev => prev.filter((_, i) => i !== index));\n  };\n\n  // Handle poll option change\n  const handlePollOptionChange = (index: number, value: string) => {\n    const newOptions = [...pollOptions];\n    newOptions[index] = value;\n    setPollOptions(newOptions);\n  };\n\n  // Add poll option\n  const addPollOption = () => {\n    if (pollOptions.length < 6) {\n      setPollOptions([...pollOptions, '']);\n    }\n  };\n\n  // Remove poll option\n  const removePollOption = (index: number) => {\n    if (pollOptions.length > 2) {\n      setPollOptions(pollOptions.filter((_, i) => i !== index));\n    }\n  };\n\n  // Handle article tag add\n  const handleAddTag = () => {\n    if (tagInput.trim() && articleTags.length < 5) {\n      setArticleTags([...articleTags, tagInput.trim()]);\n      setTagInput('');\n    }\n  };\n\n  // Search for mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (err) {\n      console.error('Error searching mentions:', err);\n    }\n  }, []);\n\n  // Handle content change with mention detection\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : textAfterAt.slice(0, spaceIndex);\n      \n      if (query && !textAfterAt.includes(' ')) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (user: MentionUser) => {\n    const lastAtIndex = content.lastIndexOf('@');\n    const newContent = content.slice(0, lastAtIndex) + `@${user.username} `;\n    setContent(newContent);\n    setMentions([...mentions, user.id]);\n    setShowMentionDropdown(false);\n    contentRef.current?.focus();\n  };\n\n  // Submit post\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const formData = new FormData();\n      formData.append('type', postType);\n      formData.append('visibility', visibility);\n      \n      if (content) {\n        formData.append('content', content);\n      }\n      \n      if (mentions.length > 0) {\n        formData.append('mentions', JSON.stringify(mentions));\n      }\n      \n      switch (postType) {\n        case 'IMAGE':\n          if (images.length === 0) {\n            setError('Please add at least one image');\n            setIsSubmitting(false);\n            return;\n          }\n          images.forEach((img) => {\n            formData.append('images', img);\n          });\n          break;\n          \n        case 'VIDEO':\n          if (!video) {\n            setError('Please add a video');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('video', video);\n          break;\n          \n        case 'LINK':\n          if (!linkUrl) {\n            setError('Please add a link');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('linkUrl', linkUrl);\n          break;\n          \n        case 'POLL':\n          const validOptions = pollOptions.filter(opt => opt.trim());\n          if (validOptions.length < 2) {\n            setError('Please add at least 2 poll options');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('pollOptions', JSON.stringify(validOptions));\n          formData.append('pollDuration', String(pollDuration));\n          formData.append('showResultsBeforeVote', String(showResultsBeforeVote));\n          break;\n          \n        case 'ARTICLE':\n          if (!articleTitle) {\n            setError('Please add an article title');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('articleTitle', articleTitle);\n          if (articleCoverImage) {\n            formData.append('articleCoverImage', articleCoverImage);\n          }\n          if (articleTags.length > 0) {\n            formData.append('articleTags', JSON.stringify(articleTags));\n          }\n          break;\n          \n        case 'CELEBRATION':\n          if (!celebrationType) {\n            setError('Please select a celebration type');\n            setIsSubmitting(false);\n            return;\n          }\n          formData.append('celebrationType', celebrationType);\n          break;\n          \n        case 'TEXT':\n        default:\n          if (!content.trim()) {\n            setError('Please add some content');\n            setIsSubmitting(false);\n            return;\n          }\n          break;\n      }\n      \n      await createPost(formData);\n      onPostCreated?.();\n      onClose();\n    } catch (err: any) {\n      console.error('Error creating post:', err);\n      setError(err.response?.data?.error || 'Failed to create post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\" />\n        \n        {/* Modal */}\n        <motion.div\n          initial={{ scale: 0.9, opacity: 0, y: 20 }}\n          animate={{ scale: 1, opacity: 1, y: 0 }}\n          exit={{ scale: 0.9, opacity: 0, y: 20 }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full max-w-3xl max-h-[92vh] overflow-hidden\"\n          style={{\n            background: '#ecf0f3',\n            borderRadius: '24px',\n            boxShadow: '10px 10px 20px #d1d9e6, -10px -10px 20px #f9f9f9',\n          }}\n        >\n          {/* Header */}\n          <div \n            className=\"flex items-center justify-between p-5 border-b\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <h2 className=\"text-2xl font-bold text-gray-800\">Create Post</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2.5 rounded-full transition-all hover:scale-105\"\n              style={{\n                background: '#ecf0f3',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              <X className=\"w-6 h-6 text-gray-600\" />\n            </button>\n          </div>\n          \n          {/* User Info */}\n          <div className=\"flex items-center gap-4 p-5\">\n            <div \n              className=\"w-14 h-14 rounded-full overflow-hidden\"\n              style={{\n                boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {user?.profileImage ? (\n                <img \n                  src={user.profileImage} \n                  alt={user.name} \n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center bg-gray-300 text-gray-600 font-bold\">\n                  {user?.name?.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n            <div className=\"flex-1\">\n              <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n              {/* Visibility Dropdown */}\n              <div className=\"relative\">\n                <button\n                  onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                  className=\"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800 transition-colors\"\n                >\n                  {(() => {\n                    const opt = VISIBILITY_OPTIONS.find(o => o.value === visibility);\n                    const Icon = opt?.icon || Globe;\n                    return (\n                      <>\n                        <Icon className=\"w-4 h-4\" />\n                        <span>{opt?.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </>\n                    );\n                  })()}\n                </button>\n                \n                {showVisibilityDropdown && (\n                  <div \n                    className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-10\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {VISIBILITY_OPTIONS.map((opt) => (\n                      <button\n                        key={opt.value}\n                        onClick={() => {\n                          setVisibility(opt.value);\n                          setShowVisibilityDropdown(false);\n                        }}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors\"\n                      >\n                        <opt.icon className=\"w-4 h-4\" />\n                        {opt.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n          \n          {/* Post Type Tabs */}\n          <div \n            className=\"flex gap-2 px-4 pb-3 overflow-x-auto scrollbar-hide\"\n            style={{ scrollbarWidth: 'none' }}\n          >\n            {POST_TYPES.map(({ type, icon: Icon, label }) => (\n              <button\n                key={type}\n                onClick={() => setPostType(type)}\n                className={`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${\n                  postType === type ? 'text-blue-600' : 'text-gray-600 hover:text-gray-800'\n                }`}\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: postType === type \n                    ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                    : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <Icon className=\"w-4 h-4\" />\n                {label}\n              </button>\n            ))}\n          </div>\n          \n          {/* Content Area */}\n          <div className=\"p-5 overflow-y-auto\" style={{ maxHeight: 'calc(92vh - 280px)' }}>\n            {/* Error Message */}\n            {error && (\n              <div className=\"mb-4 p-3 rounded-lg bg-red-100 text-red-700 text-sm\">\n                {error}\n              </div>\n            )}\n            \n            {/* Rich Text Editor Area */}\n            <div className=\"relative\">\n              {/* Formatting Toolbar */}\n              <div \n                className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                }}\n              >\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Bold\">\n                  <Bold className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Italic\">\n                  <Italic className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"List\">\n                  <List className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Code\">\n                  <Code className=\"w-4 h-4 text-gray-600\" />\n                </button>\n                <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                <button className=\"p-2 rounded hover:bg-gray-200 transition-colors\" title=\"Mention\">\n                  <AtSign className=\"w-4 h-4 text-gray-600\" />\n                </button>\n              </div>\n              \n              {/* Content Textarea */}\n              <div className=\"relative\">\n                <textarea\n                  ref={contentRef}\n                  value={content}\n                  onChange={handleContentChange}\n                  placeholder=\"What do you want to share?\"\n                  className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                    fontFamily: \"'Montserrat', sans-serif\",\n                  }}\n                />\n                \n                {/* Mention Dropdown */}\n                {showMentionDropdown && (\n                  <div \n                    className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {mentionResults.map((user) => (\n                      <button\n                        key={user.id}\n                        onClick={() => insertMention(user)}\n                        className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                      >\n                        <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                          {user.profileImage && (\n                            <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                          )}\n                        </div>\n                        <div className=\"text-left\">\n                          <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                          <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                        </div>\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n            \n            {/* Post Type Specific Content */}\n            {postType === 'IMAGE' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={fileInputRef}\n                  type=\"file\"\n                  accept=\"image/*\"\n                  multiple\n                  onChange={handleImageSelect}\n                  className=\"hidden\"\n                />\n                \n                {imagePreviews.length > 0 ? (\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    {imagePreviews.map((preview, index) => (\n                      <div key={index} className=\"relative aspect-square rounded-lg overflow-hidden\">\n                        <img src={preview} alt=\"\" className=\"w-full h-full object-cover\" />\n                        <button\n                          onClick={() => removeImage(index)}\n                          className=\"absolute top-1 right-1 p-1 rounded-full bg-red-500 text-white\"\n                        >\n                          <X className=\"w-4 h-4\" />\n                        </button>\n                      </div>\n                    ))}\n                    {images.length < 10 && (\n                      <button\n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"aspect-square rounded-lg flex items-center justify-center\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                        }}\n                      >\n                        <Plus className=\"w-8 h-8 text-gray-400\" />\n                      </button>\n                    )}\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => fileInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <ImageIcon className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add images (max 10)</span>\n                    <span className=\"text-xs text-gray-400\">Up to 10MB each</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'VIDEO' && (\n              <div className=\"mt-4\">\n                <input\n                  ref={videoInputRef}\n                  type=\"file\"\n                  accept=\"video/*\"\n                  onChange={handleVideoSelect}\n                  className=\"hidden\"\n                />\n                \n                {videoPreview ? (\n                  <div className=\"relative rounded-xl overflow-hidden\">\n                    <video src={videoPreview} controls className=\"w-full max-h-64 object-contain bg-black\" />\n                    <button\n                      onClick={() => {\n                        setVideo(null);\n                        setVideoPreview(null);\n                      }}\n                      className=\"absolute top-2 right-2 p-2 rounded-full bg-red-500 text-white\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n                ) : (\n                  <button\n                    onClick={() => videoInputRef.current?.click()}\n                    className=\"w-full py-12 rounded-xl flex flex-col items-center justify-center gap-2 transition-all hover:scale-[1.01]\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <Video className=\"w-12 h-12 text-gray-400\" />\n                    <span className=\"text-gray-500\">Click to add video</span>\n                    <span className=\"text-xs text-gray-400\">Up to 500MB</span>\n                  </button>\n                )}\n              </div>\n            )}\n            \n            {postType === 'LINK' && (\n              <div className=\"mt-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"url\"\n                    value={linkUrl}\n                    onChange={(e) => setLinkUrl(e.target.value)}\n                    placeholder=\"https://example.com\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                  />\n                </div>\n                \n                {linkPreview && (\n                  <div className=\"mt-4 rounded-xl overflow-hidden\" style={{ boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9' }}>\n                    {linkPreview.image && (\n                      <img src={linkPreview.image} alt=\"\" className=\"w-full h-40 object-cover\" />\n                    )}\n                    <div className=\"p-3 bg-white/50\">\n                      <p className=\"font-semibold text-gray-800\">{linkPreview.title}</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">{linkPreview.description}</p>\n                      <p className=\"text-xs text-gray-400 mt-2\">{linkPreview.domain}</p>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n            \n            {postType === 'POLL' && (\n              <div className=\"mt-4 space-y-3\">\n                {pollOptions.map((option, index) => (\n                  <div key={index} className=\"flex items-center gap-2\">\n                    <div\n                      className=\"flex-1 rounded-xl p-3\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      <input\n                        type=\"text\"\n                        value={option}\n                        onChange={(e) => handlePollOptionChange(index, e.target.value)}\n                        placeholder={`Option ${index + 1}`}\n                        className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                      />\n                    </div>\n                    {pollOptions.length > 2 && (\n                      <button\n                        onClick={() => removePollOption(index)}\n                        className=\"p-2 rounded-full text-red-500 hover:bg-red-50 transition-colors\"\n                      >\n                        <Trash2 className=\"w-4 h-4\" />\n                      </button>\n                    )}\n                  </div>\n                ))}\n                \n                {pollOptions.length < 6 && (\n                  <button\n                    onClick={addPollOption}\n                    className=\"flex items-center gap-2 text-blue-600 text-sm font-medium hover:text-blue-700 transition-colors\"\n                  >\n                    <Plus className=\"w-4 h-4\" />\n                    Add option\n                  </button>\n                )}\n                \n                <div className=\"flex items-center gap-4 pt-4 border-t\" style={{ borderColor: '#d1d9e6' }}>\n                  <div className=\"flex-1\">\n                    <label className=\"text-sm text-gray-600\">Poll duration</label>\n                    <select\n                      value={pollDuration}\n                      onChange={(e) => setPollDuration(Number(e.target.value))}\n                      className=\"w-full mt-1 p-2 rounded-lg bg-transparent text-gray-800 outline-none\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                      }}\n                    >\n                      <option value={1}>1 hour</option>\n                      <option value={6}>6 hours</option>\n                      <option value={12}>12 hours</option>\n                      <option value={24}>1 day</option>\n                      <option value={72}>3 days</option>\n                      <option value={168}>1 week</option>\n                    </select>\n                  </div>\n                  \n                  <label className=\"flex items-center gap-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={showResultsBeforeVote}\n                      onChange={(e) => setShowResultsBeforeVote(e.target.checked)}\n                      className=\"w-4 h-4 rounded\"\n                    />\n                    <span className=\"text-sm text-gray-600\">Show results before voting</span>\n                  </label>\n                </div>\n              </div>\n            )}\n            \n            {postType === 'ARTICLE' && (\n              <div className=\"mt-4 space-y-4\">\n                <div\n                  className=\"rounded-xl p-3\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <input\n                    type=\"text\"\n                    value={articleTitle}\n                    onChange={(e) => setArticleTitle(e.target.value)}\n                    placeholder=\"Article title\"\n                    className=\"w-full bg-transparent outline-none text-gray-800 placeholder-gray-400 text-lg font-semibold\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center gap-2 flex-wrap\">\n                  {articleTags.map((tag, index) => (\n                    <span\n                      key={index}\n                      className=\"flex items-center gap-1 px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-700\"\n                    >\n                      {tag}\n                      <button onClick={() => setArticleTags(tags => tags.filter((_, i) => i !== index))}>\n                        <X className=\"w-3 h-3\" />\n                      </button>\n                    </span>\n                  ))}\n                  {articleTags.length < 5 && (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={tagInput}\n                        onChange={(e) => setTagInput(e.target.value)}\n                        onKeyDown={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddTag())}\n                        placeholder=\"Add tag\"\n                        className=\"px-3 py-1 rounded-full text-sm bg-transparent outline-none text-gray-800 placeholder-gray-400\"\n                        style={{\n                          boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                        }}\n                      />\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n            \n            {postType === 'CELEBRATION' && (\n              <div className=\"mt-4 grid grid-cols-2 gap-3\">\n                {CELEBRATION_TYPES.map(({ value, label, emoji }) => (\n                  <button\n                    key={value}\n                    onClick={() => setCelebrationType(value)}\n                    className={`p-4 rounded-xl text-left transition-all ${\n                      celebrationType === value ? 'ring-2 ring-blue-500' : ''\n                    }`}\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: celebrationType === value\n                        ? 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9'\n                        : '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    <span className=\"text-2xl\">{emoji}</span>\n                    <p className=\"mt-2 text-sm font-medium text-gray-800\">{label}</p>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n          \n          {/* Footer */}\n          <div \n            className=\"flex items-center justify-between p-5 border-t\"\n            style={{ borderColor: '#d1d9e6' }}\n          >\n            <div className=\"flex items-center gap-3\">\n              {/* Quick add buttons */}\n              <button\n                onClick={() => setPostType('IMAGE')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add image\"\n              >\n                <ImageIcon className=\"w-6 h-6 text-green-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('VIDEO')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Add video\"\n              >\n                <Video className=\"w-6 h-6 text-purple-600\" />\n              </button>\n              <button\n                onClick={() => setPostType('POLL')}\n                className=\"p-2.5 rounded-lg hover:bg-gray-100 transition-colors\"\n                title=\"Create poll\"\n              >\n                <BarChart3 className=\"w-6 h-6 text-orange-600\" />\n              </button>\n            </div>\n            \n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting}\n              className=\"px-8 py-2.5 rounded-full font-semibold text-white transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed text-base\"\n              style={{\n                background: 'linear-gradient(145deg, #4B70E2, #3a5bc7)',\n                boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n              }}\n            >\n              {isSubmitting ? (\n                <Loader2 className=\"w-5 h-5 animate-spin\" />\n              ) : (\n                'Post'\n              )}\n            </button>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default CreatePostModal;\n"],"names":["React","useState","useRef","useCallback","useEffect","motion","AnimatePresence","X","Image","ImageIcon","Video","FileText","Link","LinkIcon","BarChart3","Sparkles","Trophy","Globe","Users","Lock","ChevronDown","Loader2","Plus","Trash2","Bold","Italic","List","Code","AtSign","useAuth","createPost","searchUsersForMention","PostType","PostVisibility","CelebrationType","MentionUser","CreatePostModalProps","isOpen","onClose","onPostCreated","POST_TYPES","type","icon","label","VISIBILITY_OPTIONS","value","ElementType","CELEBRATION_TYPES","emoji","CreatePostModal","user","postType","setPostType","content","setContent","visibility","setVisibility","showVisibilityDropdown","setShowVisibilityDropdown","isSubmitting","setIsSubmitting","error","setError","images","setImages","File","imagePreviews","setImagePreviews","video","setVideo","videoPreview","setVideoPreview","linkUrl","setLinkUrl","linkPreview","setLinkPreview","fetchingLinkPreview","setFetchingLinkPreview","pollOptions","setPollOptions","pollDuration","setPollDuration","showResultsBeforeVote","setShowResultsBeforeVote","articleTitle","setArticleTitle","articleCoverImage","setArticleCoverImage","articleCoverPreview","setArticleCoverPreview","articleTags","setArticleTags","tagInput","setTagInput","celebrationType","setCelebrationType","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","mentions","setMentions","fileInputRef","HTMLInputElement","videoInputRef","contentRef","HTMLTextAreaElement","resetForm","handleImageSelect","e","ChangeEvent","files","Array","from","target","length","validFiles","filter","file","size","prev","forEach","reader","FileReader","onload","result","readAsDataURL","handleVideoSelect","URL","createObjectURL","removeImage","index","_","i","handlePollOptionChange","newOptions","addPollOption","removePollOption","handleAddTag","trim","searchMentions","query","results","err","console","handleContentChange","lastAtIndex","lastIndexOf","textAfterAt","slice","spaceIndex","indexOf","includes","insertMention","newContent","username","id","current","focus","handleSubmit","formData","FormData","append","JSON","stringify","img","validOptions","opt","String","response","data","opacity","scale","y","damping","stiffness","stopPropagation","background","borderRadius","boxShadow","borderColor","profileImage","name","charAt","toUpperCase","find","o","Icon","map","scrollbarWidth","maxHeight","fontFamily","preview","click","image","title","description","domain","option","Number","checked","tag","tags","key","preventDefault"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 4281, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/Feed.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { Loader2, Plus, RefreshCw } from 'lucide-react';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { Comments } from '@/components/feed/Comments';\nimport { CreatePostModal } from '@/components/feed/CreatePostModal';\nimport { getFeed } from '@/lib/api/posts';\nimport { \n  initializeSocket, \n  disconnectSocket, \n  getSocket,\n  joinPostRoom,\n  leavePostRoom,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { Post, PollOption } from '@/types/post';\n\nexport function Feed() {\n  const { user, loading: authLoading } = useAuth();\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [cursor, setCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Modal states\n  const [showCreateModal, setShowCreateModal] = useState(false);\n  const [selectedPostForComments, setSelectedPostForComments] = useState<string | null>(null);\n  const [highlightCommentId, setHighlightCommentId] = useState<string | undefined>(undefined);\n  \n  // Refs for infinite scroll\n  const observerRef = useRef<IntersectionObserver | null>(null);\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Initialize Socket.IO\n  useEffect(() => {\n    if (!user) return;\n    \n    const socket = initializeSocket({\n      onConnect: () => {\n        console.log('Feed: Socket connected');\n      },\n      onPostLiked: ({ postId, userId: likerUserId, liked, likesCount }) => {\n        setPosts(prev => prev.map(post => {\n          if (post.id !== postId) return post;\n          // Only update isLiked if the current user performed the action\n          const isCurrentUser = likerUserId === user.id;\n          return {\n            ...post,\n            likesCount,\n            isLiked: isCurrentUser ? liked : post.isLiked,\n          };\n        }));\n      },\n      onCommentCreated: ({ postId, commentsCount }) => {\n        setPosts(prev => prev.map(post => \n          post.id === postId ? { ...post, commentsCount } : post\n        ));\n      },\n      onPollUpdated: ({ postId, pollOptions }) => {\n        setPosts(prev => prev.map(post => \n          post.id === postId ? { ...post, pollOptions } : post\n        ));\n      },\n    });\n    \n    return () => {\n      // Don't disconnect on unmount, just cleanup listeners\n    };\n  }, [user]);\n\n  // Fetch initial feed\n  useEffect(() => {\n    if (authLoading) return;\n    \n    const fetchFeed = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const response = await getFeed(undefined, 20);\n        setPosts(response.posts);\n        setCursor(response.nextCursor);\n        setHasMore(response.hasMore ?? response.nextCursor !== null);\n      } catch (err: any) {\n        console.error('Error fetching feed:', err);\n        setError(err.response?.data?.error || 'Failed to load feed');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchFeed();\n  }, [authLoading]);\n\n  // Load more posts\n  const loadMore = useCallback(async () => {\n    if (loadingMore || !hasMore || !cursor) return;\n    \n    setLoadingMore(true);\n    \n    try {\n      const response = await getFeed(cursor, 20);\n      setPosts(prev => [...prev, ...response.posts]);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error loading more posts:', err);\n    } finally {\n      setLoadingMore(false);\n    }\n  }, [cursor, hasMore, loadingMore]);\n\n  // Infinite scroll observer\n  useEffect(() => {\n    if (loading) return;\n    \n    observerRef.current = new IntersectionObserver(\n      (entries) => {\n        if (entries[0].isIntersecting && hasMore && !loadingMore) {\n          loadMore();\n        }\n      },\n      { threshold: 0.1 }\n    );\n    \n    if (loadMoreRef.current) {\n      observerRef.current.observe(loadMoreRef.current);\n    }\n    \n    return () => {\n      observerRef.current?.disconnect();\n    };\n  }, [loading, hasMore, loadingMore, loadMore]);\n\n  // Refresh feed\n  const refreshFeed = async () => {\n    setLoading(true);\n    setCursor(null);\n    \n    try {\n      const response = await getFeed(undefined, 20);\n      setPosts(response.posts);\n      setCursor(response.nextCursor);\n      setHasMore(response.hasMore ?? response.nextCursor !== null);\n    } catch (err: any) {\n      console.error('Error refreshing feed:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle post created\n  const handlePostCreated = () => {\n    refreshFeed();\n  };\n\n  // Handle post deleted\n  const handlePostDeleted = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n  };\n\n  // Handle like update\n  const handleLikeUpdate = (postId: string, liked: boolean, count: number) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, isLiked: liked, likesCount: count } : post\n    ));\n  };\n\n  // Handle poll update\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPosts(prev => prev.map(post => \n      post.id === postId ? { ...post, pollOptions: options } : post\n    ));\n  };\n\n  // Handle comment click\n  const handleCommentClick = (postId: string) => {\n    setSelectedPostForComments(postId);\n    setHighlightCommentId(undefined);\n    joinPostRoom(postId);\n  };\n\n  // Close comments\n  const closeComments = () => {\n    if (selectedPostForComments) {\n      leavePostRoom(selectedPostForComments);\n    }\n    setSelectedPostForComments(null);\n    setHighlightCommentId(undefined);\n  };\n\n  if (authLoading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto pb-24\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-40 bg-white/80 dark:bg-neutral-950/80 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"flex items-center justify-between p-4\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Feed</h1>\n          <button\n            onClick={refreshFeed}\n            disabled={loading}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors disabled:opacity-50\"\n          >\n            <RefreshCw className={`w-5 h-5 text-gray-600 dark:text-neutral-400 ${loading ? 'animate-spin' : ''}`} />\n          </button>\n        </div>\n      </div>\n\n      {/* Create Post Card */}\n      {user && (\n        <div className=\"m-4\">\n          <div className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\">\n            {/* Main input area */}\n            <button\n              onClick={() => setShowCreateModal(true)}\n              className=\"w-full p-5 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors text-left\"\n            >\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-14 h-14 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-xl font-bold text-gray-500\">\n                      {user.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex-1 py-3 px-5 rounded-full border border-gray-300 dark:border-neutral-700 bg-gray-50 dark:bg-neutral-800/50\">\n                  <span className=\"text-gray-500 dark:text-neutral-400 text-base\">What's on your mind, {user.name?.split(' ')[0]}?</span>\n                </div>\n              </div>\n            </button>\n            \n            {/* Action buttons */}\n            <div className=\"flex items-center justify-around border-t border-gray-100 dark:border-neutral-800 px-4 py-3\">\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-blue-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Photo</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-green-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Video</span>\n              </button>\n              <button\n                onClick={() => setShowCreateModal(true)}\n                className=\"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-gray-600 dark:text-neutral-400\"\n              >\n                <svg className=\"w-6 h-6 text-orange-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span className=\"text-sm font-medium\">Article</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Error State */}\n      {error && (\n        <div className=\"m-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-xl text-red-600 dark:text-red-400 text-center\">\n          <p>{error}</p>\n          <button\n            onClick={refreshFeed}\n            className=\"mt-2 text-sm font-semibold underline\"\n          >\n            Try again\n          </button>\n        </div>\n      )}\n\n      {/* Loading State */}\n      {loading && (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n        </div>\n      )}\n\n      {/* Empty State */}\n      {!loading && posts.length === 0 && !error && (\n        <div className=\"text-center py-12 px-4\">\n          <div className=\"w-20 h-20 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center\">\n            <Plus className=\"w-10 h-10 text-gray-400\" />\n          </div>\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n            Your feed is empty\n          </h2>\n          <p className=\"text-gray-500 dark:text-neutral-400 mb-4\">\n            Start by creating your first post or follow some people!\n          </p>\n          <button\n            onClick={() => setShowCreateModal(true)}\n            className=\"px-6 py-2 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors\"\n          >\n            Create Post\n          </button>\n        </div>\n      )}\n\n      {/* Posts List */}\n      <div className=\"space-y-4 px-4\">\n        <AnimatePresence>\n          {posts.map((post) => (\n            <PostCard\n              key={post.id}\n              post={post}\n              onLikeUpdate={handleLikeUpdate}\n              onPollUpdate={handlePollUpdate}\n              onDelete={handlePostDeleted}\n              onCommentClick={() => handleCommentClick(post.id)}\n            />\n          ))}\n        </AnimatePresence>\n      </div>\n\n      {/* Load More Trigger */}\n      <div ref={loadMoreRef} className=\"h-20 flex items-center justify-center\">\n        {loadingMore && (\n          <Loader2 className=\"w-6 h-6 animate-spin text-gray-400\" />\n        )}\n        {!hasMore && posts.length > 0 && (\n          <p className=\"text-sm text-gray-400 dark:text-neutral-500\">\n            You've reached the end\n          </p>\n        )}\n      </div>\n\n      {/* Floating Create Button (mobile) */}\n      <button\n        onClick={() => setShowCreateModal(true)}\n        className=\"fixed bottom-24 right-4 lg:hidden p-4 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-colors z-40\"\n      >\n        <Plus className=\"w-6 h-6\" />\n      </button>\n\n      {/* Create Post Modal */}\n      <CreatePostModal\n        isOpen={showCreateModal}\n        onClose={() => setShowCreateModal(false)}\n        onPostCreated={handlePostCreated}\n      />\n\n      {/* Comments Panel */}\n      {selectedPostForComments && (\n        <Comments\n          postId={selectedPostForComments}\n          isOpen={!!selectedPostForComments}\n          onClose={closeComments}\n          highlightCommentId={highlightCommentId}\n          onCommentCountChange={(count) => {\n            setPosts(prev => prev.map(post => \n              post.id === selectedPostForComments ? { ...post, commentsCount: count } : post\n            ));\n          }}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Feed;\n"],"names":["React","useState","useEffect","useCallback","useRef","motion","AnimatePresence","Loader2","Plus","RefreshCw","PostCard","Comments","CreatePostModal","getFeed","initializeSocket","disconnectSocket","getSocket","joinPostRoom","leavePostRoom","useAuth","Post","PollOption","Feed","user","loading","authLoading","posts","setPosts","setLoading","loadingMore","setLoadingMore","cursor","setCursor","hasMore","setHasMore","error","setError","showCreateModal","setShowCreateModal","selectedPostForComments","setSelectedPostForComments","highlightCommentId","setHighlightCommentId","undefined","observerRef","IntersectionObserver","loadMoreRef","HTMLDivElement","socket","onConnect","console","log","onPostLiked","postId","userId","likerUserId","liked","likesCount","prev","map","post","id","isCurrentUser","isLiked","onCommentCreated","commentsCount","onPollUpdated","pollOptions","fetchFeed","response","nextCursor","err","data","loadMore","current","entries","isIntersecting","threshold","observe","disconnect","refreshFeed","handlePostCreated","handlePostDeleted","filter","handleLikeUpdate","count","handlePollUpdate","options","handleCommentClick","closeComments","profileImage","name","charAt","toUpperCase","split","length"],"mappings":";;;;;;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AACvE,SAASC,MAAM,EAAEC,eAAe,QAAQ,eAAe;AACvD,SAASC,OAAO,EAAEC,IAAI,EAAEC,SAAS,QAAQ,cAAc;;;AACvD,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,SAASC,QAAQ,QAAQ,4BAA4B;AACrD,SAASC,eAAe,QAAQ,mCAAmC;AACnE,SAASC,OAAO,QAAQ,iBAAiB;AACzC,SACEC,gBAAgB,EAChBC,gBAAgB,EAChBC,SAAS,EACTC,YAAY,EACZC,aAAa,QACR,cAAc;AACrB,SAASC,OAAO,QAAQ,oBAAoB;;;AAhB5C,YAAY;;;;;;;;;;AAmBL;;IACL,MAAM,EAAEI,IAAI,EAAEC,OAAO,EAAEC,WAAAA,EAAa,kJAAU,CAAC,CAAC;IAChD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,OAAG1B,yKAAQ,CAACmB,CAAQ,EAAE,CAAN,AAAO,EAAL,CAAC;IAC1C,MAAM,CAACI,OAAO,EAAEI,UAAU,CAAC,OAAG3B,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAAC4B,WAAW,EAAEC,cAAc,CAAC,OAAG7B,yKAAQ,EAAC,KAAK,CAAC;IACrD,MAAM,CAAC8B,MAAM,EAAEC,SAAS,CAAC,OAAG/B,yKAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IACnD,MAAM,CAACgC,OAAO,EAAEC,UAAU,CAAC,OAAGjC,yKAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACkC,KAAK,EAAEC,QAAQ,CAAC,OAAGnC,yKAAQ,CAAC,CAAe,IAAI,CAAb,AAAc,GAAX,IAAI,CAAC;IAEjD,eAAA;IACA,MAAM,CAACoC,eAAe,EAAEC,kBAAkB,CAAC,OAAGrC,yKAAQ,EAAC,KAAK,CAAC;IAC7D,MAAM,CAACsC,uBAAuB,EAAEC,0BAA0B,CAAC,OAAGvC,yKAAQ,CAAC,CAAe,IAAI,CAAC,AAAd,GAAG,IAAI,CAAC;IACrF,MAAM,CAACwC,kBAAkB,EAAEC,qBAAqB,CAAC,OAAGzC,yKAAQ,CAAC,CAAoB0C,KAAd,GAAG,CAAoB,CAAC,OAAZ,CAAC;IAEhF,2BAAA;IACA,MAAMC,WAAW,OAAGxC,uKAAM,CAACyC,CAA6B,IAAI,CAAC,cAAd,GAAG,IAAI,CAAC;IACvD,MAAMC,WAAW,GAAG1C,2KAAM,CAAC2C,CAAgB,IAAI,CAAC,QAAP,CAAC;IAE1C,uBAAA;QACA7C,0KAAS;0BAAC,MAAM;YACd,IAAI,CAACqB,IAAI,EAAE;YAEX,MAAMyB,MAAM,OAAGlC,2IAAgB,EAAC;gBAC9BmC,SAAS;6CAAEA,CAAA,KAAM;wBACfC,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;oBACvC,CAAC;;gBACDC,WAAW;6CAAEA,CAAC,EAAEC,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAEC,KAAK,EAAEC,UAAAA,EAAY,KAAK;wBACnE9B,QAAQ;qDAAC+B,IAAI,IAAIA,IAAI,CAACC,GAAG;8DAACC,IAAI,IAAI;wCAChC,IAAIA,IAAI,CAACC,EAAE,KAAKR,MAAM,EAAE,OAAOO,IAAI;wCACnC,+DAAA;wCACA,MAAME,aAAa,GAAGP,WAAW,KAAKhC,IAAI,CAACsC,EAAE;wCAC7C,OAAO;4CACL,GAAGD,IAAI;4CACPH,UAAU;4CACVM,OAAO,EAAED,aAAa,GAAGN,KAAK,GAAGI,IAAI,CAACG,OAAAA;wCACxC,CAAC;oCACH,CAAC,CAAC,CAAC;;;oBACL,CAAC;;gBACDC,gBAAgB;6CAAEA,CAAC,EAAEX,MAAM,EAANA,QAAM,EAAEY,aAAAA,EAAe,KAAK;wBAC/CtC,QAAQ;sDAAC+B,MAAI,GAAIA,MAAI,CAACC,GAAG;8DAACC,MAAI,GAC5BA,MAAI,CAACC,EAAE,KAAKR,QAAM,GAAG;4CAAE,GAAGO,MAAI;4CAAEK;wCAAc,CAAC,GAAGL,MACpD,CAAC,CAAC;;;oBACJ,CAAC;;gBACDM,aAAa;6CAAEA,CAAC,EAAEb,MAAM,EAANA,QAAM,EAAEc,WAAAA,EAAa,KAAK;wBAC1CxC,QAAQ;qDAAC+B,MAAI,IAAIA,MAAI,CAACC,GAAG;6DAACC,MAAI,IAC5BA,MAAI,CAACC,EAAE,KAAKR,QAAM,GAAG;4CAAE,GAAGO,MAAI;4CAAEO;wCAAY,CAAC,GAAGP,MAClD,CAAC,CAAC;;;oBACJ;;YACF,CAAC,CAAC;YAEF;kCAAO,MAAM;gBACX,sDAAA;gBAAA,CACD;;QACH,CAAC;yBAAE;QAACrC,IAAI;KAAC,CAAC;IAEV,qBAAA;QACArB,0KAAS;0BAAC,MAAM;YACd,IAAIuB,WAAW,EAAE;YAEjB,MAAM2C,SAAS;4CAAG,MAAAA,CAAA,KAAY;oBAC5BxC,UAAU,CAAC,IAAI,CAAC;oBAChBQ,QAAQ,CAAC,IAAI,CAAC;oBAEd,IAAI;wBACF,MAAMiC,QAAQ,GAAG,UAAMxD,wIAAO,EAAC8B,SAAS,EAAE,EAAE,CAAC;wBAC7ChB,QAAQ,CAAC0C,QAAQ,CAAC3C,KAAK,CAAC;wBACxBM,SAAS,CAACqC,QAAQ,CAACC,UAAU,CAAC;wBAC9BpC,UAAU,CAACmC,QAAQ,CAACpC,OAAO,IAAIoC,QAAQ,CAACC,UAAU,KAAK,IAAI,CAAC;oBAC9D,CAAC,CAAC,OAAOC,GAAG,EAAE,AAAK,GAAF;wBACfrB,OAAO,CAACf,KAAK,CAAC,sBAAsB,EAAEoC,GAAG,CAAC;wBAC1CnC,QAAQ,CAACmC,GAAG,CAACF,QAAQ,EAAEG,IAAI,EAAErC,KAAK,IAAI,qBAAqB,CAAC;oBAC9D,CAAC,QAAS;wBACRP,UAAU,CAAC,KAAK,CAAC;oBACnB;gBACF,CAAC;;YAEDwC,SAAS,CAAC,CAAC;QACb,CAAC;yBAAE;QAAC3C,WAAW;KAAC,CAAC;IAEjB,kBAAA;IACA,MAAMgD,QAAQ,OAAGtE,4KAAW;sCAAC,YAAY;YACvC,IAAI0B,WAAW,IAAI,CAACI,OAAO,IAAI,CAACF,MAAM,EAAE;YAExCD,cAAc,CAAC,IAAI,CAAC;YAEpB,IAAI;gBACF,MAAMuC,UAAQ,GAAG,UAAMxD,wIAAO,EAACkB,MAAM,EAAE,EAAE,CAAC;gBAC1CJ,QAAQ;mDAAC+B,MAAI,GAAI,CAAC;+BAAGA,MAAI,EAAE;+BAAGW,UAAQ,CAAC3C,KAAK;yBAAC,CAAC;;gBAC9CM,SAAS,CAACqC,UAAQ,CAACC,UAAU,CAAC;gBAC9BpC,UAAU,CAACmC,UAAQ,CAACpC,OAAO,IAAIoC,UAAQ,CAACC,UAAU,KAAK,IAAI,CAAC;YAC9D,CAAC,CAAC,OAAOC,KAAG,EAAE,AAAK,GAAF;gBACfrB,OAAO,CAACf,KAAK,CAAC,2BAA2B,EAAEoC,KAAG,CAAC;YACjD,CAAC,QAAS;gBACRzC,cAAc,CAAC,KAAK,CAAC;YACvB;QACF,CAAC;qCAAE;QAACC,MAAM;QAAEE,OAAO;QAAEJ,WAAW;KAAC,CAAC;IAElC,2BAAA;QACA3B,0KAAS;0BAAC,MAAM;YACd,IAAIsB,OAAO,EAAE;YAEboB,WAAW,CAAC8B,OAAO,GAAG,IAAI7B,oBAAoB;mCAC3C8B,OAAO,IAAK;oBACX,IAAIA,OAAO,CAAC,CAAC,CAAC,CAACC,cAAc,IAAI3C,OAAO,IAAI,CAACJ,WAAW,EAAE;wBACxD4C,QAAQ,CAAC,CAAC;oBACZ;gBACF,CAAC;iCACD;gBAAEI,SAAS,EAAE;YAAI,CACnB,CAAC;YAED,IAAI/B,WAAW,CAAC4B,OAAO,EAAE;gBACvB9B,WAAW,CAAC8B,OAAO,CAACI,OAAO,CAAChC,WAAW,CAAC4B,OAAO,CAAC;YAClD;YAEA;kCAAO,MAAM;oBACX9B,WAAW,CAAC8B,OAAO,EAAEK,UAAU,CAAC,CAAC;gBACnC,CAAC;;QACH,CAAC;yBAAE;QAACvD,OAAO;QAAES,OAAO;QAAEJ,WAAW;QAAE4C,QAAQ;KAAC,CAAC;IAE7C,eAAA;IACA,MAAMO,WAAW,GAAG,MAAAA,CAAA,KAAY;QAC9BpD,UAAU,CAAC,IAAI,CAAC;QAChBI,SAAS,CAAC,IAAI,CAAC;QAEf,IAAI;YACF,MAAMqC,UAAQ,GAAG,UAAMxD,wIAAO,EAAC8B,SAAS,EAAE,EAAE,CAAC;YAC7ChB,QAAQ,CAAC0C,UAAQ,CAAC3C,KAAK,CAAC;YACxBM,SAAS,CAACqC,UAAQ,CAACC,UAAU,CAAC;YAC9BpC,UAAU,CAACmC,UAAQ,CAACpC,OAAO,IAAIoC,UAAQ,CAACC,UAAU,KAAK,IAAI,CAAC;QAC9D,CAAC,CAAC,OAAOC,KAAG,EAAE,AAAK,GAAF;YACfrB,OAAO,CAACf,KAAK,CAAC,wBAAwB,EAAEoC,KAAG,CAAC;QAC9C,CAAC,QAAS;YACR3C,UAAU,CAAC,KAAK,CAAC;QACnB;IACF,CAAC;IAED,sBAAA;IACA,MAAMqD,iBAAiB,GAAGA,CAAA,KAAM;QAC9BD,WAAW,CAAC,CAAC;IACf,CAAC;IAED,sBAAA;IACA,MAAME,iBAAiB,GAAGA,CAAC7B,QAAM,EAAE,MAAM,KAAK;QAC5C1B,QAAQ,CAAC+B,MAAI,IAAIA,MAAI,CAACyB,MAAM,EAACvB,MAAI,GAAIA,MAAI,CAACC,EAAE,KAAKR,QAAM,CAAC,CAAC;IAC3D,CAAC;IAED,qBAAA;IACA,MAAM+B,gBAAgB,GAAGA,CAAC/B,QAAM,EAAE,AAAQG,MAAF,CAAO,EAAE,AAAS6B,KAAK,EAAP,AAAS,MAAM,KAAK;QAC1E1D,QAAQ,EAAC+B,MAAI,GAAIA,MAAI,CAACC,GAAG,CAACC,MAAI,IAC5BA,MAAI,CAACC,EAAE,KAAKR,QAAM,GAAG;oBAAE,GAAGO,MAAI;oBAAEG,OAAO,EAAEP,OAAK;oBAAEC,UAAU,EAAE4B;gBAAM,CAAC,GAAGzB,MACxE,CAAC,CAAC;IACJ,CAAC;IAED,qBAAA;IACA,MAAM0B,gBAAgB,GAAGA,CAACjC,QAAM,EAAE,AAAQkC,MAAF,CAAS,EAAElE,UAAU,EAAE,KAAK;QAClEM,QAAQ,EAAC+B,MAAI,GAAIA,MAAI,CAACC,GAAG,EAACC,MAAI,GAC5BA,MAAI,CAACC,EAAE,KAAKR,QAAM,GAAG;oBAAE,GAAGO,MAAI;oBAAEO,WAAW,EAAEoB;gBAAQ,CAAC,GAAG3B,MAC3D,CAAC,CAAC;IACJ,CAAC;IAED,uBAAA;IACA,MAAM4B,kBAAkB,GAAGA,CAACnC,QAAM,EAAE,MAAM,KAAK;QAC7Cb,0BAA0B,CAACa,QAAM,CAAC;QAClCX,qBAAqB,CAACC,SAAS,CAAC;YAChC1B,uIAAY,EAACoC,QAAM,CAAC;IACtB,CAAC;IAED,iBAAA;IACA,MAAMoC,aAAa,GAAGA,CAAA,KAAM;QAC1B,IAAIlD,uBAAuB,EAAE;gBAC3BrB,wIAAa,EAACqB,uBAAuB,CAAC;QACxC;QACAC,0BAA0B,CAAC,IAAI,CAAC;QAChCE,qBAAqB,CAACC,SAAS,CAAC;IAClC,CAAC;IAED,IAAIlB,WAAW,EAAE;QACf,qBACE,6LAAC,GAAG;YAAC,SAAS,EAAC,+CAA+C;oCAC5D,6LAAC,+NAAO;gBAAC,SAAS,EAAC,oCAAoC;;;;;;;;;;;IAG7D;IAEA,qBACE,6LAAC,GAAG;QAAC,SAAS,EAAC,yBAAyB;;0BAEtC,6LAAC,GAAG;gBAAC,SAAS,EAAC,wHAAwH;wCACrI,6LAAC,GAAG;oBAAC,SAAS,EAAC,uCAAuC;;sCACpD,6LAAC,EAAE;4BAAC,SAAS,EAAC,kDAAkD;sCAAC,IAAI,EAAE,EAAE;;;;;;sCACzE,6LAAC,MAAM;4BACL,OAAO,CAAC,CAACuD,WAAW,CAAC;4BACrB,QAAQ,CAAC,CAACxD,OAAO,CAAC;4BAClB,SAAS,EAAC,oGAAoG;oDAE9G,6LAAC,gOAAS;gCAAC,SAAS,CAAC,CAAC,CAAA,4CAAA,EAA+CA,OAAO,GAAG,cAAc,GAAG,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;YAM1GD,IAAI,kBACH,6LAAC,GAAG;gBAAC,SAAS,EAAC,KAAK;wCAClB,6LAAC,GAAG;oBAAC,SAAS,EAAC,wGAAwG;;sCAErH,6LAAC,MAAM;4BACL,OAAO,CAAC,CAAC,IAAMe,kBAAkB,CAAC,IAAI,CAAC,CAAC;4BACxC,SAAS,EAAC,sFAAsF;oDAEhG,6LAAC,GAAG;gCAAC,SAAS,EAAC,yBAAyB;;kDACtC,6LAAC,GAAG;wCAAC,SAAS,EAAC,sFAAsF;kDAClGf,IAAI,CAACmE,YAAY,iBAChB,6LAAC,GAAG;4CAAC,GAAG,CAAC,CAACnE,IAAI,CAACmE,YAAY,CAAC;4CAAC,GAAG,EAAC,EAAE;4CAAC,SAAS,EAAC,4BAA4B,GAAG;;;;;iEAE7E,6LAAC,GAAG;4CAAC,SAAS,EAAC,gFAAgF;sDAC5FnE,IAAI,CAACoE,IAAI,EAAEC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;;;;;;;;;;;kDAIzC,6LAAC,GAAG;wCAAC,SAAS,EAAC,gHAAgH;gEAC7H,6LAAC,IAAI;4CAAC,SAAS,EAAC,+CAA+C;;gDAAC,qBAAqB;gDAACtE,IAAI,CAACoE,IAAI,EAAEG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;gDAAC,CAAC,EAAE,IAAI;;;;;;;;;;;;;;;;;;;;;;;sCAM5H,6LAAC,GAAG;4BAAC,SAAS,EAAC,6FAA6F;;8CAC1G,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC,IAAMxD,kBAAkB,CAAC,IAAI,CAAC,CAAC;oCACxC,SAAS,EAAC,gJAAgJ;;sDAE1J,6LAAC,GAAG;4CAAC,SAAS,EAAC,uBAAuB;4CAAC,IAAI,EAAC,MAAM;4CAAC,MAAM,EAAC,cAAc;4CAAC,OAAO,EAAC,WAAW;oEAC1F,6LAAC,IAAI;gDAAC,aAAa,EAAC,OAAO;gDAAC,cAAc,EAAC,OAAO;gDAAC,WAAW,CAAC,CAAC,GAAG,CAAC;gDAAC,CAAC,EAAC,2JAA2J;;;;;;;;;;;sDAEpO,6LAAC,IAAI;4CAAC,SAAS,EAAC,qBAAqB;sDAAC,KAAK,EAAE,IAAI;;;;;;;;;;;;8CAEnD,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC,IAAMA,kBAAkB,CAAC,IAAI,CAAC,CAAC;oCACxC,SAAS,EAAC,gJAAgJ;;sDAE1J,6LAAC,GAAG;4CAAC,SAAS,EAAC,wBAAwB;4CAAC,IAAI,EAAC,MAAM;4CAAC,MAAM,EAAC,cAAc;4CAAC,OAAO,EAAC,WAAW;oEAC3F,6LAAC,IAAI;gDAAC,aAAa,EAAC,OAAO;gDAAC,cAAc,EAAC,OAAO;gDAAC,WAAW,CAAC,CAAC,GAAG,CAAC;gDAAC,CAAC,EAAC,oIAAoI;;;;;;;;;;;sDAE7M,6LAAC,IAAI;4CAAC,SAAS,EAAC,qBAAqB;sDAAC,KAAK,EAAE,IAAI;;;;;;;;;;;;8CAEnD,6LAAC,MAAM;oCACL,OAAO,CAAC,CAAC,IAAMA,kBAAkB,CAAC,IAAI,CAAC,CAAC;oCACxC,SAAS,EAAC,gJAAgJ;;sDAE1J,6LAAC,GAAG;4CAAC,SAAS,EAAC,yBAAyB;4CAAC,IAAI,EAAC,MAAM;4CAAC,MAAM,EAAC,cAAc;4CAAC,OAAO,EAAC,WAAW;oEAC5F,6LAAC,IAAI;gDAAC,aAAa,EAAC,OAAO;gDAAC,cAAc,EAAC,OAAO;gDAAC,WAAW,CAAC,CAAC,GAAG,CAAC;gDAAC,CAAC,EAAC,sHAAsH;;;;;;;;;;;sDAE/L,6LAAC,IAAI;4CAAC,SAAS,EAAC,qBAAqB;sDAAC,OAAO,EAAE,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQ5DH,KAAK,kBACJ,6LAAC,GAAG;gBAAC,SAAS,EAAC,4FAA4F;;kCACzG,6LAAC,CAAC,CAAC;kCAACA,KAAK,CAAC,EAAE,CAAC;;;;;;kCACb,6LAAC,MAAM;wBACL,OAAO,CAAC,CAAC6C,WAAW,CAAC;wBACrB,SAAS,EAAC,sCAAsC;kCAAA;;;;;;;;;;;;YAQrDxD,OAAO,kBACN,6LAAC,GAAG;gBAAC,SAAS,EAAC,wCAAwC;wCACrD,6LAAC,+NAAO;oBAAC,SAAS,EAAC,oCAAoC;;;;;;;;;;;YAK1D,CAACA,OAAO,IAAIE,KAAK,CAACqE,MAAM,KAAK,CAAC,IAAI,CAAC5D,KAAK,kBACvC,6LAAC,GAAG;gBAAC,SAAS,EAAC,wBAAwB;;kCACrC,6LAAC,GAAG;wBAAC,SAAS,EAAC,sGAAsG;gDACnH,6LAAC,6MAAI;4BAAC,SAAS,EAAC,yBAAyB;;;;;;;;;;;kCAE3C,6LAAC,EAAE;wBAAC,SAAS,EAAC,0DAA0D;kCAAA;;;;;;kCAGxE,6LAAC,CAAC;wBAAC,SAAS,EAAC,0CAA0C;kCAAA;;;;;;kCAGvD,6LAAC,MAAM;wBACL,OAAO,CAAC,CAAC,IAAMG,kBAAkB,CAAC,IAAI,CAAC,CAAC;wBACxC,SAAS,EAAC,iGAAiG;kCAAA;;;;;;;;;;;;0BAQjH,6LAAC,GAAG;gBAAC,SAAS,EAAC,gBAAgB;wCAC7B,6LAAC,+MAAe;8BACbZ,KAAK,CAACiC,GAAG,EAAEC,MAAI,iBACd,6LAAC,qJAAQ,CACP,GAAG,CAAC;4BACJ,IAAI,CAAC,CAACA,MAAI,CAAC;4BACX,YAAY,CAAC,CAACwB,gBAAgB,CAAC;4BAC/B,YAAY,CAAC,CAACE,gBAAgB,CAAC;4BAC/B,QAAQ,CAAC,CAACJ,iBAAiB,CAAC;4BAC5B,cAAc,CAAC,CAAC,IAAMM,kBAAkB,CAAC5B,MAAI,CAACC,EAAE,CAAC,CAAC,GAErD,CAAC;2BAPOD,MAAI,CAACC,EAAE,CAAC;;;;;;;;;;;;;;;0BAYrB,6LAAC,GAAG;gBAAC,GAAG,CAAC,CAACf,WAAW,CAAC;gBAAC,SAAS,EAAC,uCAAuC;;oBACrEjB,WAAW,kBACV,6LAAC,+NAAO;wBAAC,SAAS,EAAC,oCAAoC,GACxD;;;;;;oBACA,CAACI,OAAO,IAAIP,KAAK,CAACqE,MAAM,GAAG,CAAC,kBAC3B,6LAAC,CAAC;wBAAC,SAAS,EAAC,6CAA6C;kCAAA;;;;;;;;;;;;0BAO9D,6LAAC,MAAM;gBACL,OAAO,CAAC,CAAC,IAAMzD,kBAAkB,CAAC,IAAI,CAAC,CAAC;gBACxC,SAAS,EAAC,8HAA8H;wCAExI,6LAAC,6MAAI;oBAAC,SAAS,EAAC,SAAS;;;;;;;;;;;0BAI3B,6LAAC,mKAAe;gBACd,MAAM,CAAC,CAACD,eAAe,CAAC;gBACxB,OAAO,CAAC,CAAC,IAAMC,kBAAkB,CAAC,KAAK,CAAC,CAAC;gBACzC,aAAa,CAAC,CAAC2C,iBAAiB,CAAC;;;;;;YAIlC1C,uBAAuB,kBACtB,6LAAC,qJAAQ;gBACP,MAAM,CAAC,CAACA,uBAAuB,CAAC;gBAChC,MAAM,CAAC,CAAC,CAAC,CAACA,uBAAuB,CAAC;gBAClC,OAAO,CAAC,CAACkD,aAAa,CAAC;gBACvB,kBAAkB,CAAC,CAAChD,kBAAkB,CAAC;gBACvC,oBAAoB,CAAC,EAAE4C,OAAK,IAAK;oBAC/B1D,QAAQ,EAAC+B,MAAI,GAAIA,MAAI,CAACC,GAAG,EAACC,MAAI,GAC5BA,MAAI,CAACC,EAAE,KAAKtB,uBAAuB,GAAG;gCAAE,GAAGqB,MAAI;gCAAEK,aAAa,EAAEoB;4BAAM,CAAC,GAAGzB,MAC5E,CAAC,CAAC;gBACJ,CAAC,CAAC,GAEL;;;;;;;;;;;;AAGP;GAvWgBtC,IAAIA,CAAA,EAAG;;QACkBH;;;;uCAwW1BG,IAAI","ignoreList":[]}},
    {"offset": {"line": 4977, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/feed/index.ts"],"sourcesContent":["// Feed Components - Export all feed-related components\n\nexport { Feed } from './Feed';\nexport { PostCard } from './PostCard';\nexport { Comments } from './Comments';\nexport { CreatePostModal } from './CreatePostModal';\n"],"names":[],"mappings":"AAAA,uDAAuD;;AAEvD;AACA;AACA;AACA"}},
    {"offset": {"line": 4994, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { Feed } from '@/components/feed';\n\nexport default function Home() {\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950\">\n        <Feed />\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["c","_c","ProtectedRoute","Feed","Home","$","$i","Symbol","for","t0"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,cAAc,QAAQ,kCAAkC;;AACjE,SAASC,IAAI,QAAQ,mBAAmB;AAHxC,YAAY;;;;;AAKG;IAAA,MAAAE,CAAA,OAAAJ,gLAAA,EAAA;IAAA,IAAAI,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAA,IAAAI,EAAA;IAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEXC,EAAA,iBAAA,6LAAC,iKAAc;oCACb,6LAAA,GAEM;gBAFS,SAA6C,EAA7C,6CAA6C;0BAC1D,2MAAC,6IAAI,GACP,EAFA,GAEM,CACR,EAJC,cAAc,CAIE;;;;;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAJ,CAAA,CAAA,EAAA;IAAA;IAAA,OAJjBI,EAIiB;AAAA;KANNL,KAAA","ignoreList":[]}}]
}