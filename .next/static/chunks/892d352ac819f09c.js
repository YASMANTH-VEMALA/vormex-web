(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48010,e=>{"use strict";var t=e.i(43476),a=e.i(932),n=e.i(71645),s=e.i(18566),r=e.i(52962);function i(e){let i,l,c,o=(0,a.c)(8),{children:d}=e,{isAuthenticated:u,loading:x}=(0,r.useAuth)(),h=(0,s.useRouter)();if(o[0]!==u||o[1]!==x||o[2]!==h?(i=()=>{x||u||h.push("/login")},l=[u,x,h],o[0]=u,o[1]=x,o[2]=h,o[3]=i,o[4]=l):(i=o[3],l=o[4]),n.default.useEffect(i,l),x){let e;return o[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-neutral-950",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600 dark:text-neutral-400",children:"Loading..."})]})}),o[5]=e):e=o[5],e}return u?(o[6]!==d?(c=(0,t.jsx)(t.Fragment,{children:d}),o[6]=d,o[7]=c):c=o[7],c):null}e.s(["ProtectedRoute",()=>i])},73375,e=>{"use strict";let t=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],73375)},3116,e=>{"use strict";let t=(0,e.i(75254).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],3116)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},83079,e=>{"use strict";var t=e.i(61238);async function a(e,a){return t.default.post("/connections/request",{receiverId:e,message:a})}async function n(e){return t.default.post(`/connections/${e}/accept`)}async function s(e){return t.default.post(`/connections/${e}/reject`)}async function r(e){return t.default.delete(`/connections/${e}/cancel`)}async function i(e){return t.default.delete(`/connections/${e}`)}async function l(e=1,a=20){return t.default.get(`/connections?page=${e}&limit=${a}`)}async function c(e,a=1,n=20){return t.default.get(`/connections/user/${e}?page=${a}&limit=${n}`)}async function o(e=1,a=20){let n=await t.default.get(`/connections/pending?page=${e}&limit=${a}`);return{connections:n.connections||n.requests||[],total:n.total||0,page:n.page||e,totalPages:n.totalPages||1,hasMore:n.hasMore||!1}}async function d(e=1,a=20){let n=await t.default.get(`/connections/sent?page=${e}&limit=${a}`);return{connections:n.connections||n.requests||[],total:n.total||0,page:n.page||e,totalPages:n.totalPages||1,hasMore:n.hasMore||!1}}async function u(e){return t.default.get(`/connections/status/${e}`)}e.s(["acceptConnectionRequest",()=>n,"cancelConnectionRequest",()=>r,"getConnectionStatus",()=>u,"getConnections",()=>l,"getPendingRequests",()=>o,"getSentRequests",()=>d,"getUserConnections",()=>c,"rejectConnectionRequest",()=>s,"removeConnection",()=>i,"sendConnectionRequest",()=>a])},86311,e=>{"use strict";let t=(0,e.i(75254).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],86311)},92971,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(18566),s=e.i(22016),r=e.i(46932),i=e.i(88653),l=e.i(73375),c=e.i(61911),o=e.i(79002);let d=(0,e.i(75254).default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var u=e.i(3116),x=e.i(14764),h=e.i(43531),m=e.i(37727),g=e.i(31278),y=e.i(55436),p=e.i(86311),f=e.i(48010),b=e.i(83079),j=e.i(75157);function k(){let e=(0,n.useRouter)(),[k,N]=(0,a.useState)("pending"),[v,w]=(0,a.useState)([]),[C,q]=(0,a.useState)([]),[S,R]=(0,a.useState)([]),[$,L]=(0,a.useState)(!0),[M,P]=(0,a.useState)(null),[F,U]=(0,a.useState)(""),[A,z]=(0,a.useState)(0),_=(0,a.useCallback)(async()=>{L(!0);try{if("connections"===k){let e=await (0,b.getConnections)(1,50);w(e.connections||[])}else if("pending"===k){let e=await (0,b.getPendingRequests)(1,50);q(e.connections||[]),z(e.total||0)}else if("sent"===k){let e=await (0,b.getSentRequests)(1,50);R(e.connections||[])}}catch(e){console.error("Failed to fetch data:",e),"connections"===k?w([]):"pending"===k?q([]):"sent"===k&&R([])}finally{L(!1)}},[k]);(0,a.useEffect)(()=>{(async()=>{try{let e=await (0,b.getPendingRequests)(1,1);z(e.total)}catch(e){console.error("Failed to fetch pending count:",e)}})()},[]),(0,a.useEffect)(()=>{_()},[_]);let T=async e=>{P(e);try{await (0,b.acceptConnectionRequest)(e),q(t=>t.filter(t=>t.id!==e)),z(e=>Math.max(0,e-1))}catch(e){console.error("Failed to accept request:",e)}finally{P(null)}},D=async e=>{P(e);try{await (0,b.rejectConnectionRequest)(e),q(t=>t.filter(t=>t.id!==e)),z(e=>Math.max(0,e-1))}catch(e){console.error("Failed to reject request:",e)}finally{P(null)}},E=async e=>{P(e);try{await (0,b.cancelConnectionRequest)(e),R(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to cancel request:",e)}finally{P(null)}},I=async e=>{if(confirm("Are you sure you want to remove this connection?")){P(e);try{await (0,b.removeConnection)(e),w(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Failed to remove connection:",e)}finally{P(null)}}},B=v.filter(e=>e.user.name.toLowerCase().includes(F.toLowerCase())||e.user.username.toLowerCase().includes(F.toLowerCase())),H=[{id:"pending",label:"Requests",icon:o.UserPlus,count:A},{id:"connections",label:"Connections",icon:c.Users},{id:"sent",label:"Sent",icon:x.Send}],K=(e,a)=>{let n=M===e.id,i=`/profile/${e.user.id}`;return(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-800",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(s.default,{href:i,className:"cursor-pointer",children:(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center overflow-hidden flex-shrink-0 hover:opacity-80 transition-opacity",children:e.user.profileImage?(0,t.jsx)("img",{src:e.user.profileImage,alt:e.user.name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:e.user.name?.charAt(0)?.toUpperCase()||"?"})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(s.default,{href:i,className:"cursor-pointer",children:(0,t.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors truncate",children:e.user.name})}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:["@",e.user.username||"user"]}),e.user.headline&&(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1 line-clamp-1",children:e.user.headline}),e.message&&"pending"===a&&(0,t.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 italic bg-gray-50 dark:bg-neutral-800 p-2 rounded-lg",children:['"',e.message,'"']}),(0,t.jsxs)("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[(0,t.jsx)(u.Clock,{className:"w-3 h-3 inline mr-1"}),new Date(e.createdAt).toLocaleDateString()]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:["pending"===a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>T(e.id),disabled:n,className:"p-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded-full transition-colors",title:"Accept",children:n?(0,t.jsx)(g.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(h.Check,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>D(e.id),disabled:n,className:"p-2 bg-gray-200 hover:bg-gray-300 dark:bg-neutral-700 dark:hover:bg-neutral-600 disabled:opacity-50 text-gray-700 dark:text-gray-300 rounded-full transition-colors",title:"Decline",children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),"sent"===a&&(0,t.jsx)("button",{onClick:()=>E(e.id),disabled:n,className:"px-3 py-1.5 text-sm text-gray-600 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 border border-gray-300 dark:border-neutral-600 rounded-lg transition-colors disabled:opacity-50",children:n?(0,t.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"}):"Cancel"}),"connection"===a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.default,{href:`/messages?userId=${e.user.id}`,className:"p-2 bg-blue-100 hover:bg-blue-200 dark:bg-blue-900/30 dark:hover:bg-blue-900/50 text-blue-600 dark:text-blue-400 rounded-full transition-colors",title:"Message",children:(0,t.jsx)(p.MessageSquare,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>I(e.id),disabled:n,className:"p-2 text-gray-400 hover:text-red-500 dark:hover:text-red-400 transition-colors disabled:opacity-50",title:"Remove connection",children:n?(0,t.jsx)(g.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(d,{className:"w-5 h-5"})})]})]})]})},e.id)},O=e=>{let a={pending:{icon:o.UserPlus,title:"No pending requests",description:"When someone sends you a connection request, it will appear here."},connections:{icon:c.Users,title:"No connections yet",description:"Start connecting with other developers to grow your network!"},sent:{icon:x.Send,title:"No sent requests",description:"Connection requests you send will appear here."}}[e],n=a.icon;return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center mb-4",children:(0,t.jsx)(n,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:a.title}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 max-w-xs",children:a.description}),"connections"===e&&(0,t.jsx)(s.default,{href:"/find-people",className:"mt-4 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-lg transition-colors",children:"Find People"})]})};return(0,t.jsx)(f.ProtectedRoute,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>e.push("/more"),className:"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-full transition-colors",children:(0,t.jsx)(l.ChevronLeft,{className:"w-5 h-5 text-gray-600 dark:text-neutral-400"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:(0,t.jsx)(c.Users,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Connections"})]})]})})}),(0,t.jsx)("div",{className:"bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800",children:(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,t.jsx)("div",{className:"flex",children:H.map(e=>{let a=e.icon,n=k===e.id;return(0,t.jsxs)("button",{onClick:()=>N(e.id),className:(0,j.cn)("flex-1 flex items-center justify-center gap-2 py-3 text-sm font-medium border-b-2 transition-colors",n?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[(0,t.jsx)(a,{className:"w-4 h-4"}),e.label,void 0!==e.count&&e.count>0&&(0,t.jsx)("span",{className:"px-1.5 py-0.5 text-xs bg-blue-600 text-white rounded-full",children:e.count})]},e.id)})})})}),"connections"===k&&(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(y.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search connections...",value:F,onChange:e=>U(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-gray-100 dark:bg-neutral-800 border border-transparent focus:border-blue-500 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 outline-none transition-colors"})]})}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:$?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,t.jsx)(i.AnimatePresence,{mode:"wait",children:(0,t.jsxs)(r.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-3",children:["pending"===k&&((C?.length||0)>0?C.map(e=>K(e,"pending")):O("pending")),"connections"===k&&((B?.length||0)>0?B.map(e=>K(e,"connection")):F?(0,t.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No connections match your search"}):O("connections")),"sent"===k&&((S?.length||0)>0?S.map(e=>K(e,"sent")):O("sent"))]},k)})})]})})}e.s(["default",()=>k],92971)}]);