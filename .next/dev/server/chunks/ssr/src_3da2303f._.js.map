{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUO,SAAS,eAAe,EAAE,QAAQ,EAAuB;IAC9D,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG,IAAA,wIAAO;IAC5C,MAAM,SAAS,IAAA,+IAAS;IAExB,gNAAK,CAAC,SAAS,CAAC;QACd,IAAI,CAAC,WAAW,CAAC,iBAAiB;YAChC,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAiB;QAAS;KAAO;IAErC,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAqB;;;;;;;;;;;;;;;;;IAI1C;IAEA,IAAI,CAAC,iBAAiB;QACpB,OAAO;IACT;IAEA,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/posts.ts"],"sourcesContent":["// Posts API - Complete API client for Posts & Feed endpoints\n\nimport apiClient from './client';\nimport type {\n  Post,\n  FeedResponse,\n  Comment,\n  CommentsResponse,\n  MentionUser,\n  MentionNotification,\n} from '@/types/post';\n\n// ============================================\n// Feed Endpoints\n// ============================================\n\n/**\n * Get home feed with cursor-based pagination\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of posts per page (default: 20)\n */\nexport async function getFeed(cursor?: string, limit: number = 20): Promise<FeedResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  return apiClient.get('/posts/feed', { params });\n}\n\n/**\n * Get a single post by ID\n * @param postId - Post ID\n */\nexport async function getPost(postId: string): Promise<Post> {\n  return apiClient.get(`/posts/${postId}`);\n}\n\n// ============================================\n// Post CRUD Endpoints\n// ============================================\n\n/**\n * Create a new post (supports all post types)\n * Uses FormData for file uploads\n */\nexport async function createPost(formData: FormData): Promise<Post> {\n  // Content-Type is automatically handled by the request interceptor for FormData\n  return apiClient.post('/posts', formData);\n}\n\n/**\n * Delete a post\n * @param postId - Post ID to delete\n */\nexport async function deletePost(postId: string): Promise<{ success: boolean }> {\n  return apiClient.delete(`/posts/${postId}`);\n}\n\n/**\n * Update a post (content and visibility only)\n * @param postId - Post ID to update\n * @param data - Updated content and/or visibility\n */\nexport async function updatePost(\n  postId: string,\n  data: { content?: string; visibility?: string }\n): Promise<Post> {\n  return apiClient.put(`/posts/${postId}`, data);\n}\n\n// ============================================\n// Engagement Endpoints\n// ============================================\n\n/**\n * Toggle like on a post\n * @param postId - Post ID\n */\nexport async function toggleLike(postId: string): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/like`);\n}\n\n/**\n * Vote on a poll\n * @param postId - Post ID\n * @param optionId - Poll option ID\n */\nexport async function votePoll(postId: string, optionId: string): Promise<{ success: boolean; pollOptions: any[] }> {\n  return apiClient.post(`/posts/${postId}/poll/vote`, { optionId });\n}\n\n/**\n * Share post to user(s)\n * @param postId - Post ID\n * @param userId - Target user ID to share with\n */\nexport async function sharePostToUser(postId: string, userId: string): Promise<{ message: string }> {\n  return apiClient.post(`/posts/${postId}/share`, { userId });\n}\n\n/**\n * Track post impression (view)\n * @param postId - Post ID\n * @param locationData - Optional location data\n */\nexport async function trackImpression(\n  postId: string,\n  locationData?: { lat: number; lng: number; city?: string; country?: string }\n): Promise<{ success: boolean }> {\n  return apiClient.post(`/posts/${postId}/impression`, locationData);\n}\n\n// ============================================\n// Comments Endpoints\n// ============================================\n\n/**\n * Get comments for a post\n * @param postId - Post ID\n * @param parentId - Optional parent comment ID for replies\n * @param page - Page number\n * @param limit - Comments per page\n */\nexport async function getComments(\n  postId: string,\n  parentId?: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<CommentsResponse> {\n  const params: Record<string, any> = { page, limit };\n  if (parentId) params.parentId = parentId;\n  return apiClient.get(`/posts/${postId}/comments`, { params });\n}\n\n/**\n * Create a comment on a post\n * Note: This is handled via WebSocket for real-time updates\n * This is a fallback HTTP endpoint\n */\nexport async function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): Promise<Comment> {\n  return apiClient.post(`/posts/${postId}/comments`, {\n    content,\n    parentId,\n    mentions,\n  });\n}\n\n/**\n * Toggle like on a comment\n * Note: This is handled via WebSocket for real-time updates\n */\nexport async function toggleCommentLike(\n  postId: string,\n  commentId: string\n): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/comments/${commentId}/like`);\n}\n\n// ============================================\n// Mention Endpoints\n// ============================================\n\n/**\n * Search users for @mention autocomplete\n * @param query - Search query\n */\nexport async function searchUsersForMention(query: string): Promise<MentionUser[]> {\n  const res = await apiClient.get('/mentions/search', { params: { q: query } });\n  return (res as { users?: MentionUser[] }).users ?? [];\n}\n\n/**\n * Get unread mentions\n */\nexport async function getUnreadMentions(): Promise<MentionNotification[]> {\n  return apiClient.get('/mentions/unread');\n}\n\n/**\n * Get unread mention count\n */\nexport async function getUnreadMentionCount(): Promise<{ count: number }> {\n  return apiClient.get('/mentions/count');\n}\n\n/**\n * Mark mentions as read\n * @param mentionIds - Array of mention IDs to mark as read\n */\nexport async function markMentionsAsRead(mentionIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/mentions/read', { mentionIds });\n}\n\n// ============================================\n// Upload Endpoints\n// ============================================\n\n/**\n * Upload avatar image\n * @param file - Image file\n */\nexport async function uploadAvatar(file: File): Promise<{ avatarUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/avatar', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload banner image\n * @param file - Image file\n */\nexport async function uploadBanner(file: File): Promise<{ bannerUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/banner', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload certificate/document image\n * @param file - Image file\n */\nexport async function uploadCertificate(file: File): Promise<{ certificateUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/certificate', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload project image\n * @param file - Image file\n */\nexport async function uploadProjectImage(file: File): Promise<{ imageUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/project', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Delete an uploaded file\n * @param fileUrl - URL of file to delete\n * @param type - Type of file (avatar, banner, post)\n */\nexport async function deleteUpload(fileUrl: string, type: 'avatar' | 'banner' | 'post'): Promise<{ success: boolean }> {\n  return apiClient.delete('/upload', { data: { fileUrl, type } });\n}\n\n// ============================================\n// Location Endpoints\n// ============================================\n\n/**\n * Update user location\n */\nexport async function updateLocation(\n  lat: number,\n  lng: number,\n  accuracy?: number,\n  activity?: string\n): Promise<any> {\n  return apiClient.post('/location/update', { lat, lng, accuracy, activity });\n}\n\n/**\n * Get current user's location\n */\nexport async function getMyLocation(): Promise<any> {\n  return apiClient.get('/location/me');\n}\n\n/**\n * Get nearby users\n * @param radius - Search radius in km (default: 50)\n * @param limit - Max users to return (default: 20)\n */\nexport async function getNearbyUsers(radius?: number, limit?: number): Promise<any[]> {\n  const params: Record<string, any> = {};\n  if (radius) params.radius = radius;\n  if (limit) params.limit = limit;\n  return apiClient.get('/location/nearby', { params });\n}\n\n/**\n * Update location settings\n */\nexport async function updateLocationSettings(settings: {\n  locationPermission?: boolean;\n  shareLocationPublic?: boolean;\n}): Promise<{ message: string }> {\n  return apiClient.put('/location/settings', settings);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/saved.ts"],"sourcesContent":["import apiClient from './client';\nimport type { Post } from '@/types/post';\n\nexport interface SavedPostsResponse {\n  posts: (Post & { savedAt?: string })[];\n  nextCursor: string | null;\n  hasMore: boolean;\n  pagination?: {\n    page: number;\n    limit: number;\n    totalCount: number;\n    totalPages: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface ToggleSaveResponse {\n  message: string;\n  saved: boolean;\n  savesCount: number;\n}\n\n// Get all saved posts (cursor-based pagination)\nexport const getSavedPosts = async (\n  cursor?: string | null,\n  limit = 20\n): Promise<SavedPostsResponse> => {\n  const params: Record<string, string | number> = { limit };\n  if (cursor) params.cursor = cursor;\n  const res = await apiClient.get('/saved', { params });\n  return {\n    posts: res.posts || [],\n    nextCursor: res.nextCursor ?? null,\n    hasMore: res.hasMore ?? false,\n    pagination: {\n      page: 1,\n      limit,\n      totalCount: res.posts?.length ?? 0,\n      totalPages: res.hasMore ? 2 : 1,\n      hasMore: res.hasMore ?? false,\n    },\n  };\n};\n\n// Toggle save status\nexport const toggleSavePost = async (postId: string): Promise<ToggleSaveResponse> => {\n  return apiClient.post(`/saved/${postId}/toggle`);\n};\n\n// Save a post\nexport const savePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.post(`/saved/${postId}`);\n};\n\n// Unsave a post\nexport const unsavePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/saved/${postId}`);\n};\n\n// Check if post is saved\nexport const checkPostSaved = async (postId: string): Promise<{ saved: boolean }> => {\n  return apiClient.get(`/saved/${postId}/check`);\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAuBO,MAAM,gBAAgB,OAC3B,QACA,QAAQ,EAAE;IAEV,MAAM,SAA0C;QAAE;IAAM;IACxD,IAAI,QAAQ,OAAO,MAAM,GAAG;IAC5B,MAAM,MAAM,MAAM,sIAAS,CAAC,GAAG,CAAC,UAAU;QAAE;IAAO;IACnD,OAAO;QACL,OAAO,IAAI,KAAK,IAAI,EAAE;QACtB,YAAY,IAAI,UAAU,IAAI;QAC9B,SAAS,IAAI,OAAO,IAAI;QACxB,YAAY;YACV,MAAM;YACN;YACA,YAAY,IAAI,KAAK,EAAE,UAAU;YACjC,YAAY,IAAI,OAAO,GAAG,IAAI;YAC9B,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;AACF;AAGO,MAAM,iBAAiB,OAAO;IACnC,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,OAAO,CAAC;AACjD;AAGO,MAAM,WAAW,OAAO;IAC7B,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ;AAC1C;AAGO,MAAM,aAAa,OAAO;IAC/B,OAAO,sIAAS,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ;AAC5C;AAGO,MAAM,iBAAiB,OAAO;IACnC,OAAO,sIAAS,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,OAAO,MAAM,CAAC;AAC/C"}},
    {"offset": {"line": 326, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ReactionPicker.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ThumbsUp, \n  PartyPopper, \n  Heart, \n  Lightbulb, \n  HelpCircle \n} from 'lucide-react';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface ReactionPickerProps {\n  isOpen: boolean;\n  currentReaction?: ReactionType | null;\n  onSelect: (reaction: ReactionType) => void;\n  onClose: () => void;\n}\n\n// Reaction configurations with LinkedIn-style icons\nexport const REACTIONS: {\n  type: ReactionType;\n  icon: React.ElementType;\n  label: string;\n  color: string;\n  bgColor: string;\n  hoverScale: number;\n}[] = [\n  { \n    type: 'LIKE', \n    icon: ThumbsUp, \n    label: 'Like', \n    color: 'text-blue-600',\n    bgColor: 'bg-blue-100 dark:bg-blue-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CELEBRATE', \n    icon: PartyPopper, \n    label: 'Celebrate', \n    color: 'text-green-600',\n    bgColor: 'bg-green-100 dark:bg-green-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'SUPPORT', \n    icon: Heart, \n    label: 'Support', \n    color: 'text-purple-600',\n    bgColor: 'bg-purple-100 dark:bg-purple-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'INSIGHTFUL', \n    icon: Lightbulb, \n    label: 'Insightful', \n    color: 'text-amber-600',\n    bgColor: 'bg-amber-100 dark:bg-amber-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CURIOUS', \n    icon: HelpCircle, \n    label: 'Curious', \n    color: 'text-pink-600',\n    bgColor: 'bg-pink-100 dark:bg-pink-900/30',\n    hoverScale: 1.3,\n  },\n];\n\n// Helper to get reaction config by type\nexport function getReactionConfig(type: ReactionType) {\n  return REACTIONS.find(r => r.type === type) || REACTIONS[0];\n}\n\n// Reaction icons for summary display\nexport function ReactionIcon({ \n  type, \n  size = 16,\n  className = '' \n}: { \n  type: ReactionType; \n  size?: number;\n  className?: string;\n}) {\n  const config = getReactionConfig(type);\n  const Icon = config.icon;\n  \n  return (\n    <div className={`inline-flex items-center justify-center rounded-full p-1 ${config.bgColor} ${className}`}>\n      <Icon className={`${config.color}`} size={size} />\n    </div>\n  );\n}\n\nexport function ReactionPicker({ \n  isOpen, \n  currentReaction,\n  onSelect, \n  onClose \n}: ReactionPickerProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Reaction picker */}\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"absolute bottom-full left-0 mb-2 z-50\"\n          >\n            <div className=\"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1\">\n              {REACTIONS.map((reaction) => {\n                const Icon = reaction.icon;\n                const isSelected = currentReaction === reaction.type;\n                \n                return (\n                  <motion.button\n                    key={reaction.type}\n                    whileHover={{ scale: reaction.hoverScale, y: -8 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => {\n                      onSelect(reaction.type);\n                      onClose();\n                    }}\n                    className={`relative p-2 rounded-full transition-colors group ${\n                      isSelected \n                        ? reaction.bgColor \n                        : 'hover:bg-gray-100 dark:hover:bg-neutral-700'\n                    }`}\n                    title={reaction.label}\n                  >\n                    <Icon \n                      className={`w-6 h-6 transition-transform ${\n                        isSelected ? reaction.color : 'text-gray-500 dark:text-neutral-400'\n                      } group-hover:${reaction.color}`}\n                    />\n                    \n                    {/* Tooltip */}\n                    <motion.span\n                      initial={{ opacity: 0, y: 5 }}\n                      whileHover={{ opacity: 1, y: 0 }}\n                      className=\"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none\"\n                    >\n                      {reaction.label}\n                    </motion.span>\n                  </motion.button>\n                );\n              })}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Summary of reactions (shows top 3 reaction icons)\nexport function ReactionSummaryDisplay({ \n  reactionSummary,\n  totalCount,\n  onClick,\n}: { \n  reactionSummary: ReactionSummaryType[];\n  totalCount: number;\n  onClick?: () => void;\n}) {\n  if (totalCount === 0) return null;\n  \n  // Get top 3 unique reaction types\n  const topReactions = reactionSummary.slice(0, 3);\n  \n  return (\n    <button \n      onClick={onClick}\n      className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline\"\n    >\n      <div className=\"flex -space-x-1\">\n        {topReactions.map((reaction, index) => (\n          <ReactionIcon \n            key={reaction.type} \n            type={reaction.type} \n            size={14}\n            className=\"border-2 border-white dark:border-neutral-900\"\n          />\n        ))}\n      </div>\n      <span>{totalCount}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 558, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/FormattedContent.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface FormattedContentProps {\n  content: string;\n  className?: string;\n}\n\n/**\n * Renders formatted post content with support for:\n * - **bold** text\n * - *italic* text\n * - `code` inline\n * - @mentions (clickable links)\n * - [color:red]colored text[/color]\n * - URLs (auto-linked)\n * - Line breaks\n */\nexport function FormattedContent({ content, className = '' }: FormattedContentProps) {\n  if (!content) return null;\n\n  const renderFormattedText = (text: string): React.ReactNode[] => {\n    const elements: React.ReactNode[] = [];\n    let remaining = text;\n    let key = 0;\n\n    while (remaining.length > 0) {\n      // Check for color tags: [color:red]text[/color]\n      const colorMatch = remaining.match(/^\\[color:([a-zA-Z]+|#[0-9a-fA-F]{3,6})\\]([\\s\\S]*?)\\[\\/color\\]/);\n      if (colorMatch) {\n        const [fullMatch, color, innerText] = colorMatch;\n        elements.push(\n          <span key={key++} style={{ color }}>\n            {renderFormattedText(innerText)}\n          </span>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: **text**\n      const boldMatch = remaining.match(/^\\*\\*(.+?)\\*\\*/);\n      if (boldMatch) {\n        const [fullMatch, innerText] = boldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for italic: *text* (but not **)\n      const italicMatch = remaining.match(/^\\*([^*]+?)\\*/);\n      if (italicMatch) {\n        const [fullMatch, innerText] = italicMatch;\n        elements.push(\n          <em key={key++} className=\"italic\">\n            {renderFormattedText(innerText)}\n          </em>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for inline code: `code`\n      const codeMatch = remaining.match(/^`([^`]+?)`/);\n      if (codeMatch) {\n        const [fullMatch, innerText] = codeMatch;\n        elements.push(\n          <code \n            key={key++} \n            className=\"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm\"\n          >\n            {innerText}\n          </code>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for mentions: @username\n      const mentionMatch = remaining.match(/^@([a-zA-Z0-9_]+)/);\n      if (mentionMatch) {\n        const [fullMatch, username] = mentionMatch;\n        elements.push(\n          <Link \n            key={key++}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\n          >\n            @{username}\n          </Link>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for URLs\n      const urlMatch = remaining.match(/^(https?:\\/\\/[^\\s]+)/);\n      if (urlMatch) {\n        const [fullMatch] = urlMatch;\n        elements.push(\n          <a \n            key={key++}\n            href={fullMatch}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline break-all\"\n          >\n            {fullMatch}\n          </a>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for line breaks\n      if (remaining.startsWith('\\n')) {\n        elements.push(<br key={key++} />);\n        remaining = remaining.slice(1);\n        continue;\n      }\n\n      // Find next special character or take the rest\n      const nextSpecialIndex = remaining.search(/[\\*`@\\[\\n]|https?:\\/\\//);\n      if (nextSpecialIndex === -1) {\n        // No more special chars, add rest as plain text\n        elements.push(<span key={key++}>{remaining}</span>);\n        break;\n      } else if (nextSpecialIndex === 0) {\n        // Special char at start but didn't match pattern - add single char\n        elements.push(<span key={key++}>{remaining[0]}</span>);\n        remaining = remaining.slice(1);\n      } else {\n        // Add text before special char\n        elements.push(<span key={key++}>{remaining.slice(0, nextSpecialIndex)}</span>);\n        remaining = remaining.slice(nextSpecialIndex);\n      }\n    }\n\n    return elements;\n  };\n\n  return (\n    <div className={`whitespace-pre-wrap break-words ${className}`}>\n      {renderFormattedText(content)}\n    </div>\n  );\n}\n\n// Color presets for the color picker\nexport const COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n  { name: 'Cyan', value: '#06b6d4' },\n];\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/EditPostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { updatePost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { Post, PostVisibility, MentionUser } from '@/types/post';\n\ninterface EditPostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  post: Post;\n  onPostUpdated?: (updatedPost: Post) => void;\n}\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Teal', value: '#14b8a6' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n];\n\nexport function EditPostModal({ isOpen, onClose, post, onPostUpdated }: EditPostModalProps) {\n  const { user } = useAuth();\n  const [content, setContent] = useState(post.content || '');\n  const [visibility, setVisibility] = useState<PostVisibility>(post.visibility);\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Update content when post prop changes\n  useEffect(() => {\n    setContent(post.content || '');\n    setVisibility(post.visibility);\n  }, [post]);\n\n  // Mention search\n  useEffect(() => {\n    const searchMentions = async () => {\n      if (mentionQuery.length >= 2) {\n        try {\n          const results = await searchUsersForMention(mentionQuery);\n          setMentionResults(results);\n          setShowMentionDropdown(true);\n        } catch (error) {\n          console.error('Error searching mentions:', error);\n        }\n      } else {\n        setMentionResults([]);\n        setShowMentionDropdown(false);\n      }\n    };\n\n    const debounce = setTimeout(searchMentions, 300);\n    return () => clearTimeout(debounce);\n  }, [mentionQuery]);\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n\n    // Check for @ mentions\n    const cursorPos = e.target.selectionStart;\n    const textBeforeCursor = value.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (lastAtIndex !== -1) {\n      const textAfterAt = textBeforeCursor.slice(lastAtIndex + 1);\n      if (!textAfterAt.includes(' ') && textAfterAt.length >= 1) {\n        setMentionQuery(textAfterAt);\n      } else {\n        setMentionQuery('');\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setMentionQuery('');\n      setShowMentionDropdown(false);\n    }\n  };\n\n  const insertMention = (user: MentionUser) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const cursorPos = textarea.selectionStart;\n    const textBeforeCursor = content.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n    const textAfterCursor = content.slice(cursorPos);\n\n    const newContent = \n      content.slice(0, lastAtIndex) + \n      `@${user.username} ` + \n      textAfterCursor;\n\n    setContent(newContent);\n    setMentionQuery('');\n    setShowMentionDropdown(false);\n\n    setTimeout(() => {\n      const newCursorPos = lastAtIndex + user.username.length + 2;\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Text formatting helpers\n  const formatText = (wrapper: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + wrapper + selectedText + wrapper + content.slice(end);\n      newCursorPos = end + wrapper.length * 2;\n    } else {\n      newContent = content.slice(0, start) + wrapper + wrapper + content.slice(end);\n      newCursorPos = start + wrapper.length;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleBold = () => formatText('**');\n  const handleItalic = () => formatText('*');\n  const handleCode = () => formatText('`');\n\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (lineContent.startsWith('- ')) {\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Submit update\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const updatedPost = await updatePost(post.id, {\n        content,\n        visibility,\n      });\n      \n      onPostUpdated?.(updatedPost);\n      onClose();\n    } catch (err: any) {\n      console.error('Update post error:', err);\n      setError(err.message || 'Failed to update post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const selectedVisibility = VISIBILITY_OPTIONS.find(v => v.value === visibility) || VISIBILITY_OPTIONS[0];\n  const VisibilityIcon = selectedVisibility.icon;\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl\"\n            style={{\n              background: '#ecf0f3',\n              boxShadow: '20px 20px 60px #c9ccd1, -20px -20px 60px #ffffff',\n            }}\n          >\n            {/* Header */}\n            <div \n              className=\"flex items-center justify-between p-6 border-b\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div \n                  className=\"p-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <Pencil className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <h2 \n                  className=\"text-xl font-bold\"\n                  style={{\n                    fontFamily: \"'Montserrat', sans-serif\",\n                    color: '#2d3748',\n                  }}\n                >\n                  Edit Post\n                </h2>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* User Info & Visibility */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div \n                    className=\"w-12 h-12 rounded-full overflow-hidden\"\n                    style={{\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {user?.profileImage ? (\n                      <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold\">\n                        {user?.name?.charAt(0).toUpperCase() || 'U'}\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n                    <div className=\"relative\">\n                      <button\n                        onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                        className=\"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700\"\n                      >\n                        <VisibilityIcon className=\"w-3 h-3\" />\n                        <span>{selectedVisibility.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </button>\n                      \n                      {showVisibilityDropdown && (\n                        <div \n                          className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-20 min-w-[140px]\"\n                          style={{\n                            background: '#ecf0f3',\n                            boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                          }}\n                        >\n                          {VISIBILITY_OPTIONS.map((option) => (\n                            <button\n                              key={option.value}\n                              onClick={() => {\n                                setVisibility(option.value);\n                                setShowVisibilityDropdown(false);\n                              }}\n                              className=\"flex items-center gap-2 w-full px-4 py-2 text-left text-sm hover:bg-gray-100\"\n                            >\n                              <option.icon className=\"w-4 h-4 text-gray-500\" />\n                              <span className=\"text-gray-700\">{option.label}</span>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <span className=\"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded\">\n                  {post.type}\n                </span>\n              </div>\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"p-3 rounded-lg bg-red-50 text-red-600 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* Rich Text Editor Area */}\n              <div className=\"relative\">\n                {/* Formatting Toolbar */}\n                <div \n                  className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                  }}\n                >\n                  <button \n                    type=\"button\"\n                    onClick={handleBold}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bold (**text**)\"\n                  >\n                    <Bold className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleItalic}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Italic (*text*)\"\n                  >\n                    <Italic className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleList}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bullet List\"\n                  >\n                    <List className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleCode}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Code (`code`)\"\n                  >\n                    <Code className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                  <button \n                    type=\"button\"\n                    onClick={handleMentionClick}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Mention someone (@)\"\n                  >\n                    <AtSign className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"relative\" ref={colorPickerRef}>\n                    <button \n                      type=\"button\"\n                      onClick={() => setShowColorPicker(!showColorPicker)}\n                      className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                      title=\"Text Color\"\n                    >\n                      <Palette className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n                    {/* Color Picker Dropdown */}\n                    {showColorPicker && (\n                      <div \n                        className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                        }}\n                      >\n                        <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                        <div className=\"grid grid-cols-4 gap-2\">\n                          {COLOR_PRESETS.map((color) => (\n                            <button\n                              key={color.value}\n                              type=\"button\"\n                              onClick={() => handleColorInsert(color.value)}\n                              className=\"group flex flex-col items-center gap-1\"\n                            >\n                              <div \n                                className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                                style={{ backgroundColor: color.value }}\n                              />\n                              <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Content Textarea */}\n                <div className=\"relative\">\n                  <textarea\n                    ref={contentRef}\n                    value={content}\n                    onChange={handleContentChange}\n                    placeholder=\"What do you want to share?\"\n                    className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      fontFamily: \"'Montserrat', sans-serif\",\n                    }}\n                  />\n                  \n                  {/* Mention Dropdown */}\n                  {showMentionDropdown && (\n                    <div \n                      className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      {mentionResults.map((user) => (\n                        <button\n                          key={user.id}\n                          onClick={() => insertMention(user)}\n                          className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                        >\n                          <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                            {user.profileImage && (\n                              <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                            )}\n                          </div>\n                          <div className=\"text-left\">\n                            <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                            <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Post type note */}\n              <p className=\"text-xs text-gray-400 text-center\">\n                Note: Only text content and visibility can be edited. Media, polls, and links cannot be changed.\n              </p>\n            </div>\n\n            {/* Footer */}\n            <div \n              className=\"flex justify-end gap-3 p-6 border-t\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2.5 rounded-xl text-gray-600 font-medium transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={isSubmitting || !content.trim()}\n                className=\"px-8 py-2.5 rounded-xl text-white font-semibold transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                style={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center gap-2\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Saving...\n                  </span>\n                ) : (\n                  'Save Changes'\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1694, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/LikeListModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getReactionConfig, REACTIONS } from './ReactionPicker';\nimport type { ReactionType } from '@/types/post';\nimport apiClient from '@/lib/api/client';\n\ninterface LikeUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  headline: string | null;\n  reactionType: ReactionType;\n  createdAt: string;\n}\n\ninterface LikeListModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  totalCount: number;\n}\n\nexport function LikeListModal({ isOpen, onClose, postId, totalCount }: LikeListModalProps) {\n  const [likes, setLikes] = useState<LikeUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedFilter, setSelectedFilter] = useState<ReactionType | 'ALL'>('ALL');\n  const [reactionCounts, setReactionCounts] = useState<Record<ReactionType, number>>({\n    LIKE: 0,\n    CELEBRATE: 0,\n    SUPPORT: 0,\n    INSIGHTFUL: 0,\n    CURIOUS: 0,\n  });\n\n  useEffect(() => {\n    if (!isOpen || !postId) return;\n\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        // apiClient already extracts response.data, so response IS the data\n        const data = await apiClient.get(`/posts/${postId}/likes`) as any;\n        setLikes(data.likes || []);\n        \n        // Calculate reaction counts\n        const counts: Record<ReactionType, number> = {\n          LIKE: 0,\n          CELEBRATE: 0,\n          SUPPORT: 0,\n          INSIGHTFUL: 0,\n          CURIOUS: 0,\n        };\n        data.likes?.forEach((like: LikeUser) => {\n          if (like.reactionType && counts[like.reactionType] !== undefined) {\n            counts[like.reactionType]++;\n          }\n        });\n        setReactionCounts(counts);\n      } catch (error) {\n        console.error('Error fetching likes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [isOpen, postId]);\n\n  const filteredLikes = selectedFilter === 'ALL' \n    ? likes \n    : likes.filter(like => like.reactionType === selectedFilter);\n\n  // Get reactions with counts > 0\n  const activeReactions = REACTIONS.filter(r => reactionCounts[r.type] > 0);\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Reactions\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n              </button>\n            </div>\n\n            {/* Reaction Filter Tabs */}\n            <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedFilter('ALL')}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                  selectedFilter === 'ALL'\n                    ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                }`}\n              >\n                All\n                <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                  {totalCount}\n                </span>\n              </button>\n\n              {activeReactions.map((reaction) => {\n                const Icon = reaction.icon;\n                const count = reactionCounts[reaction.type];\n                \n                return (\n                  <button\n                    key={reaction.type}\n                    onClick={() => setSelectedFilter(reaction.type)}\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                      selectedFilter === reaction.type\n                        ? `${reaction.bgColor} ${reaction.color}`\n                        : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                      {count}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* User List */}\n            <div className=\"overflow-y-auto max-h-[50vh]\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filteredLikes.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-neutral-400\">\n                  No reactions yet\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n                  {filteredLikes.map((like) => {\n                    const reactionConfig = getReactionConfig(like.reactionType);\n                    const Icon = reactionConfig.icon;\n                    \n                    return (\n                      <Link\n                        key={like.id}\n                        href={`/profile/${like.username}`}\n                        onClick={onClose}\n                        className=\"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n                      >\n                        {/* Avatar with Reaction Badge */}\n                        <div className=\"relative\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                            {like.profileImage ? (\n                              <Image\n                                src={like.profileImage}\n                                alt={like.name}\n                                width={48}\n                                height={48}\n                                className=\"object-cover w-full h-full\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300\">\n                                {like.name.charAt(0).toUpperCase()}\n                              </div>\n                            )}\n                          </div>\n                          {/* Reaction Badge */}\n                          <div className={`absolute -bottom-1 -right-1 p-1 rounded-full ${reactionConfig.bgColor} border-2 border-white dark:border-neutral-900`}>\n                            <Icon className={`w-3 h-3 ${reactionConfig.color}`} />\n                          </div>\n                        </div>\n\n                        {/* User Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n                            {like.name}\n                          </p>\n                          {like.headline && (\n                            <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">\n                              {like.headline}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Connect Button (optional, can be added later) */}\n                        {/* <button className=\"px-4 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors\">\n                          Connect\n                        </button> */}\n                      </Link>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2036, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/connections.ts"],"sourcesContent":["import apiClient from './client';\nimport type { PersonCard } from './people';\n\n// \n// TYPES\n// \n\nexport type ConnectionStatus = 'none' | 'pending_sent' | 'pending_received' | 'connected' | 'blocked';\n\nexport interface Connection {\n  id: string;\n  status: 'PENDING' | 'ACCEPTED' | 'REJECTED' | 'BLOCKED';\n  message: string | null;\n  createdAt: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n    profileImage: string | null;\n    headline: string | null;\n    college: string | null;\n  };\n}\n\nexport interface ConnectionsResponse {\n  connections: Connection[];\n  total: number;\n  page: number;\n  totalPages: number;\n  hasMore: boolean;\n}\n\nexport interface ConnectionStatusResponse {\n  status: ConnectionStatus;\n  connectionId?: string;\n  direction?: 'sent' | 'received';\n}\n\n// \n// API FUNCTIONS\n// \n\n/**\n * Send a connection request to another user\n */\nexport async function sendConnectionRequest(\n  receiverId: string,\n  message?: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post('/connections/request', { receiverId, message });\n}\n\n/**\n * Accept a connection request\n */\nexport async function acceptConnectionRequest(\n  connectionId: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post(`/connections/${connectionId}/accept`);\n}\n\n/**\n * Reject a connection request\n */\nexport async function rejectConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.post(`/connections/${connectionId}/reject`);\n}\n\n/**\n * Cancel a sent connection request\n */\nexport async function cancelConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}/cancel`);\n}\n\n/**\n * Remove an existing connection\n */\nexport async function removeConnection(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}`);\n}\n\n/**\n * Get all connections for current user\n */\nexport async function getConnections(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get all connections for a specific user\n */\nexport async function getUserConnections(\n  userId: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections/user/${userId}?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get pending connection requests (received)\n */\nexport async function getPendingRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/pending?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get sent connection requests\n */\nexport async function getSentRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/sent?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get connection status with a specific user\n */\nexport async function getConnectionStatus(\n  userId: string\n): Promise<ConnectionStatusResponse> {\n  return apiClient.get(`/connections/status/${userId}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AA6CO,eAAe,sBACpB,UAAkB,EAClB,OAAgB;IAEhB,OAAO,sIAAS,CAAC,IAAI,CAAC,wBAAwB;QAAE;QAAY;IAAQ;AACtE;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,sIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC/D;AAKO,eAAe,iBACpB,YAAoB;IAEpB,OAAO,sIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,cAAc;AACxD;AAKO,eAAe,eACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,sIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,KAAK,OAAO,EAAE,OAAO;AACjE;AAKO,eAAe,mBACpB,MAAc,EACd,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,sIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,MAAM,EAAE,KAAK,OAAO,EAAE,OAAO;AAChF;AAKO,eAAe,mBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,sIAAS,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,OAAO,EAAE,OAAO;IAC5F,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,gBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,sIAAS,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,KAAK,OAAO,EAAE,OAAO;IACzF,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,oBACpB,MAAc;IAEd,OAAO,sIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,QAAQ;AACtD"}},
    {"offset": {"line": 2113, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/chat.ts"],"sourcesContent":["import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface ChatUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  isOnline: boolean;\n  lastActiveAt: string | null;\n}\n\nexport interface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  receiverId: string;\n  content: string;\n  contentType: string;\n  mediaUrl?: string;\n  mediaType?: string;\n  fileName?: string;\n  fileSize?: number;\n  status: 'SENT' | 'DELIVERED' | 'READ';\n  deliveredAt?: string;\n  readAt?: string;\n  isDeleted: boolean;\n  isEdited?: boolean; // Client-side flag to track if message was edited\n  replyToId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n  };\n  sender: ChatUser;\n  reactions: MessageReaction[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface MessageReaction {\n  id: string;\n  userId: string;\n  emoji: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n  };\n}\n\nexport interface Conversation {\n  id: string;\n  participant1Id: string;\n  participant2Id: string;\n  participant1: ChatUser;\n  participant2: ChatUser;\n  otherParticipant: ChatUser;\n  lastMessage?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n    status: 'SENT' | 'DELIVERED' | 'READ';\n    createdAt: string;\n  };\n  lastMessageAt?: string;\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ConversationsResponse {\n  conversations: Conversation[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\nexport interface MessagesResponse {\n  messages: Message[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n// ============================================\n// Chat API Functions\n// ============================================\n\n/**\n * Get all conversations for the current user\n */\nexport async function getConversations(\n  limit?: number,\n  cursor?: string\n): Promise<ConversationsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations?${params.toString()}`);\n}\n\n/**\n * Get or create a conversation with another user\n */\nexport async function getOrCreateConversation(participantId: string): Promise<Conversation> {\n  return apiClient.post('/chat/conversations', { participantId });\n}\n\n/**\n * Get a specific conversation\n */\nexport async function getConversation(conversationId: string): Promise<Conversation> {\n  return apiClient.get(`/chat/conversations/${conversationId}`);\n}\n\n/**\n * Get messages for a conversation\n */\nexport async function getMessages(\n  conversationId: string,\n  limit?: number,\n  cursor?: string\n): Promise<MessagesResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations/${conversationId}/messages?${params.toString()}`);\n}\n\n/**\n * Send a message (REST fallback - prefer WebSocket)\n */\nexport async function sendMessage(\n  conversationId: string,\n  data: {\n    content: string;\n    contentType?: string;\n    mediaUrl?: string;\n    mediaType?: string;\n    fileName?: string;\n    fileSize?: number;\n    replyToId?: string;\n  }\n): Promise<Message> {\n  return apiClient.post(`/chat/conversations/${conversationId}/messages`, data);\n}\n\n/**\n * Mark messages as read\n */\nexport async function markAsRead(conversationId: string): Promise<{ updatedCount: number; readAt: string }> {\n  return apiClient.post(`/chat/conversations/${conversationId}/read`);\n}\n\n/**\n * Delete a message\n */\nexport async function deleteMessage(\n  messageId: string,\n  forEveryone?: boolean\n): Promise<{ success: boolean }> {\n  return apiClient.delete(`/chat/messages/${messageId}`, { \n    data: { forEveryone } \n  });\n}\n\n/**\n * Edit a message\n */\nexport async function editMessage(messageId: string, content: string): Promise<Message> {\n  return apiClient.patch(`/chat/messages/${messageId}`, { content });\n}\n\n/**\n * Add reaction to a message\n */\nexport async function addReaction(\n  messageId: string,\n  emoji: string\n): Promise<{ action: 'added' | 'removed' | 'updated'; emoji: string }> {\n  return apiClient.post(`/chat/messages/${messageId}/reactions`, { emoji });\n}\n\n/**\n * Get unread message count\n */\nexport async function getUnreadCount(): Promise<{ unreadCount: number }> {\n  return apiClient.get('/chat/unread-count');\n}\n\n/**\n * Search messages\n */\nexport async function searchMessages(\n  query: string,\n  limit?: number\n): Promise<{ messages: Message[] }> {\n  const params = new URLSearchParams();\n  params.append('q', query);\n  if (limit) params.append('limit', String(limit));\n  \n  return apiClient.get(`/chat/search?${params.toString()}`);\n}\n\n/**\n * Upload chat media (image, video, document, audio)\n */\nexport async function uploadChatMedia(\n  file: File,\n  mediaType: 'image' | 'video' | 'document' | 'audio',\n  onProgress?: (progress: number) => void\n): Promise<{\n  mediaUrl: string;\n  fileName: string;\n  fileSize: number;\n  mediaType: string;\n}> {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('mediaType', mediaType);\n  \n  // Use axios with proper config for file uploads\n  return apiClient.post('/chat/upload', formData, {\n    timeout: 120000, // 2 minutes timeout for large files\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n    onUploadProgress: (progressEvent) => {\n      if (onProgress && progressEvent.total) {\n        const progress = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n        onProgress(progress);\n      }\n    },\n  });\n}\n\n// ============================================\n// Message Limit (Connection-based)\n// ============================================\n\nexport interface MessageLimitStatus {\n  canSend: boolean;\n  isConnected: boolean;\n  messagesSent: number;\n  messagesRemaining: number;\n  limit: number;\n}\n\n/**\n * Get message limit status for a user\n * Non-connected users can only send 2 messages\n * Connected users have unlimited messaging\n */\nexport async function getMessageLimitStatus(userId: string): Promise<MessageLimitStatus> {\n  return apiClient.get(`/chat/message-limit/${userId}`);\n}\n\n// ============================================\n// Message Requests (from non-connected users)\n// ============================================\n\nexport interface MessageRequest extends Conversation {\n  isMessageRequest: boolean;\n  messageRequestAcceptedAt: string | null;\n}\n\nexport interface MessageRequestsResponse {\n  messageRequests: MessageRequest[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n/**\n * Get message requests (conversations from non-connected users)\n */\nexport async function getMessageRequests(\n  limit?: number,\n  cursor?: string\n): Promise<MessageRequestsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/requests?${params.toString()}`);\n}\n\n/**\n * Get message requests count\n */\nexport async function getMessageRequestsCount(): Promise<{ count: number }> {\n  return apiClient.get('/chat/requests/count');\n}\n\n/**\n * Accept a message request\n */\nexport async function acceptMessageRequest(\n  conversationId: string\n): Promise<{ message: string; conversation: Conversation }> {\n  return apiClient.post(`/chat/requests/${conversationId}/accept`);\n}\n\n/**\n * Decline a message request\n */\nexport async function declineMessageRequest(\n  conversationId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/chat/requests/${conversationId}`);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2242, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ShareModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { X, Search, Send, Loader2 } from 'lucide-react';\nimport { getConnections } from '@/lib/api/connections';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport { getOrCreateConversation, sendMessage } from '@/lib/api/chat';\nimport { sharePostToUser } from '@/lib/api/posts';\nimport type { Connection } from '@/lib/api/connections';\nimport type { MentionUser } from '@/types/post';\n\ninterface ShareModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  postPreview?: string;\n}\n\nexport function ShareModal({ isOpen, onClose, postId, postPreview }: ShareModalProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [connections, setConnections] = useState<Connection[]>([]);\n  const [searchResults, setSearchResults] = useState<MentionUser[]>([]);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const postUrl = typeof window !== 'undefined' ? `${window.location.origin}/post/${postId}` : '';\n  const shareMessage = postPreview\n    ? `${postPreview.slice(0, 100)}${postPreview.length > 100 ? '...' : ''}\\n${postUrl}`\n    : `Check out this post: ${postUrl}`;\n\n  const loadConnections = useCallback(async () => {\n    try {\n      const res = await getConnections(1, 50);\n      setConnections(res.connections?.filter((c) => c.status === 'ACCEPTED') || []);\n    } catch (err) {\n      console.error('Error loading connections:', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      loadConnections();\n      setSearchQuery('');\n      setSearchResults([]);\n      setSelectedIds(new Set());\n      setError(null);\n    }\n  }, [isOpen, loadConnections]);\n\n  useEffect(() => {\n    if (!searchQuery || searchQuery.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const timer = setTimeout(async () => {\n      setLoading(true);\n      try {\n        const users = await searchUsersForMention(searchQuery);\n        setSearchResults(users);\n      } catch (err) {\n        setSearchResults([]);\n      } finally {\n        setLoading(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n\n  const toggleSelect = (userId: string) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(userId)) next.delete(userId);\n      else next.add(userId);\n      return next;\n    });\n  };\n\n  const handleSend = async () => {\n    if (selectedIds.size === 0) {\n      setError('Select at least one person to share with');\n      return;\n    }\n    setSending(true);\n    setError(null);\n    try {\n      for (const userId of selectedIds) {\n        const conv = await getOrCreateConversation(userId);\n        await sendMessage(conv.id, {\n          content: shareMessage,\n          contentType: 'text/plain',\n        });\n        await sharePostToUser(postId, userId);\n      }\n      onClose();\n    } catch (err: any) {\n      setError(err?.response?.data?.error || err?.message || 'Failed to share');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const displayConnections = connections.filter(\n    (c) =>\n      !searchQuery ||\n      c.user?.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.user?.username?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n  const displaySearch = searchQuery.length >= 2 ? searchResults : [];\n  const hasResults = displayConnections.length > 0 || displaySearch.length > 0;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\n      <div\n        className=\"relative w-full max-w-md max-h-[80vh] flex flex-col rounded-2xl bg-white dark:bg-neutral-900 shadow-xl\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Share post</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"p-3 border-b border-gray-200 dark:border-neutral-800\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search connections or people...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-100 dark:bg-neutral-800 border-0 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-3 min-h-[200px]\">\n          {loading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n            </div>\n          ) : (\n            <>\n              {searchQuery.length >= 2 && displaySearch.length > 0 && (\n                <div className=\"mb-4\">\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">Search results</p>\n                  {displaySearch.map((u) => (\n                    <ProfileRow\n                      key={u.id}\n                      id={u.id}\n                      name={u.name}\n                      username={u.username}\n                      avatar={u.profileImage}\n                      selected={selectedIds.has(u.id)}\n                      onToggle={() => toggleSelect(u.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {(searchQuery.length < 2 || displayConnections.length > 0) && (\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">\n                    {searchQuery.length < 2 ? 'Connections' : 'Matching connections'}\n                  </p>\n                  {displayConnections.map((c) => (\n                    <ProfileRow\n                      key={c.user.id}\n                      id={c.user.id}\n                      name={c.user.name}\n                      username={c.user.username}\n                      avatar={c.user.profileImage}\n                      selected={selectedIds.has(c.user.id)}\n                      onToggle={() => toggleSelect(c.user.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {!hasResults && !loading && (\n                <p className=\"text-center text-gray-500 dark:text-neutral-400 py-8\">\n                  {searchQuery.length >= 2 ? 'No users found' : 'No connections yet'}\n                </p>\n              )}\n            </>\n          )}\n        </div>\n\n        {error && (\n          <p className=\"px-4 py-2 text-sm text-red-500\">{error}</p>\n        )}\n\n        <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n          <button\n            onClick={handleSend}\n            disabled={selectedIds.size === 0 || sending}\n            className=\"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors\"\n          >\n            {sending ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <Send className=\"w-5 h-5\" />\n            )}\n            Send to {selectedIds.size} {selectedIds.size === 1 ? 'person' : 'people'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileRow({\n  id,\n  name,\n  username,\n  avatar,\n  selected,\n  onToggle,\n}: {\n  id: string;\n  name: string;\n  username: string;\n  avatar: string | null;\n  selected: boolean;\n  onToggle: () => void;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onToggle}\n      className=\"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-left\"\n    >\n      <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 overflow-hidden flex-shrink-0\">\n        {avatar ? (\n          <img src={avatar} alt=\"\" className=\"w-full h-full object-cover\" />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center text-gray-500 font-medium\">\n            {(name || username)?.[0]?.toUpperCase() || '?'}\n          </div>\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"font-medium text-gray-900 dark:text-white truncate\">{name || username}</p>\n        <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">@{username}</p>\n      </div>\n      <div\n        className={`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${\n          selected\n            ? 'border-blue-600 bg-blue-600'\n            : 'border-gray-300 dark:border-neutral-600'\n        }`}\n      >\n        {selected && <span className=\"text-white text-xs\"></span>}\n      </div>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2657, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/reports.ts"],"sourcesContent":["import apiClient from './client';\n\nexport interface ReportReason {\n  value: string;\n  label: string;\n  description: string;\n}\n\nexport interface ReportResponse {\n  message: string;\n  reportId: string;\n}\n\nexport interface MyReport {\n  id: string;\n  reportType: 'POST' | 'CHAT' | 'USER' | 'COMMENT' | 'GROUP';\n  reason: string;\n  description: string | null;\n  status: 'PENDING' | 'UNDER_REVIEW' | 'RESOLVED' | 'DISMISSED';\n  actionTaken: string;\n  createdAt: string;\n  reviewedAt: string | null;\n  post: {\n    id: string;\n    content: string;\n    type: string;\n  } | null;\n  reportedUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage: string | null;\n  } | null;\n}\n\nexport interface ReportRequest {\n  reason: string;\n  description?: string;\n}\n\nexport interface ChatReportRequest extends ReportRequest {\n  reportedUserId: string;\n}\n\nexport const reportAPI = {\n  // Get available report reasons\n  getReasons: async (): Promise<{ reasons: ReportReason[] }> => {\n    return apiClient.get('/reports/reasons');\n  },\n\n  // Report a post\n  reportPost: async (postId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/post/${postId}`, data);\n  },\n\n  // Report a comment\n  reportComment: async (commentId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/comment/${commentId}`, data);\n  },\n\n  // Report a user in chat\n  reportChatUser: async (conversationId: string, data: ChatReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/chat/${conversationId}`, data);\n  },\n\n  // Report a user profile\n  reportUser: async (userId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/user/${userId}`, data);\n  },\n\n  // Report a group\n  reportGroup: async (groupId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/group/${groupId}`, data);\n  },\n\n  // Get user's own reports\n  getMyReports: async (page = 1, limit = 10): Promise<{\n    reports: MyReport[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n    };\n  }> => {\n    return apiClient.get(`/reports/my-reports?page=${page}&limit=${limit}`);\n  },\n};\n"],"names":[],"mappings":";;;;AAAA;;AA4CO,MAAM,YAAY;IACvB,+BAA+B;IAC/B,YAAY;QACV,OAAO,sIAAS,CAAC,GAAG,CAAC;IACvB;IAEA,gBAAgB;IAChB,YAAY,OAAO,QAAgB;QACjC,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,mBAAmB;IACnB,eAAe,OAAO,WAAmB;QACvC,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,WAAW,EAAE;IACzD;IAEA,wBAAwB;IACxB,gBAAgB,OAAO,gBAAwB;QAC7C,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,gBAAgB,EAAE;IAC3D;IAEA,wBAAwB;IACxB,YAAY,OAAO,QAAgB;QACjC,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,iBAAiB;IACjB,aAAa,OAAO,SAAiB;QACnC,OAAO,sIAAS,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,SAAS,EAAE;IACrD;IAEA,yBAAyB;IACzB,cAAc,OAAO,OAAO,CAAC,EAAE,QAAQ,EAAE;QASvC,OAAO,sIAAS,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,KAAK,OAAO,EAAE,OAAO;IACxE;AACF"}},
    {"offset": {"line": 2697, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/reports/ReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Flag, AlertTriangle, Loader2, CheckCircle } from 'lucide-react';\nimport { reportAPI, ReportReason } from '@/lib/api/reports';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'post' | 'comment' | 'user' | 'group' | 'chat';\n  targetId: string;\n  targetName?: string;\n  conversationId?: string; // For chat reports\n  reportedUserId?: string; // For chat reports\n}\n\nexport default function ReportModal({\n  isOpen,\n  onClose,\n  type,\n  targetId,\n  targetName,\n  conversationId,\n  reportedUserId,\n}: ReportModalProps) {\n  const [reasons, setReasons] = useState<ReportReason[]>([]);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchingReasons, setFetchingReasons] = useState(true);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchReasons = async () => {\n      try {\n        const response = await reportAPI.getReasons();\n        setReasons(response.reasons);\n      } catch (err) {\n        console.error('Failed to fetch report reasons:', err);\n      } finally {\n        setFetchingReasons(false);\n      }\n    };\n\n    if (isOpen) {\n      fetchReasons();\n      // Reset state\n      setSelectedReason('');\n      setDescription('');\n      setSuccess(false);\n      setError('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = async () => {\n    if (!selectedReason) {\n      setError('Please select a reason');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = {\n        reason: selectedReason,\n        description: description.trim() || undefined,\n      };\n\n      switch (type) {\n        case 'post':\n          await reportAPI.reportPost(targetId, data);\n          break;\n        case 'comment':\n          await reportAPI.reportComment(targetId, data);\n          break;\n        case 'user':\n          await reportAPI.reportUser(targetId, data);\n          break;\n        case 'group':\n          await reportAPI.reportGroup(targetId, data);\n          break;\n        case 'chat':\n          if (!conversationId || !reportedUserId) {\n            throw new Error('Missing conversation or user info');\n          }\n          await reportAPI.reportChatUser(conversationId, {\n            ...data,\n            reportedUserId,\n          });\n          break;\n      }\n\n      setSuccess(true);\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTitle = () => {\n    switch (type) {\n      case 'post':\n        return 'Report Post';\n      case 'comment':\n        return 'Report Comment';\n      case 'user':\n        return `Report ${targetName || 'User'}`;\n      case 'group':\n        return 'Report Group';\n      case 'chat':\n        return `Report ${targetName || 'User'}`;\n      default:\n        return 'Report';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        {/* Backdrop */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"relative w-full max-w-md mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-full\">\n                <Flag className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                {getTitle()}\n              </h2>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {success ? (\n              <div className=\"text-center py-8\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\n                  <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Report Submitted\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Thank you for helping keep our community safe. We'll review your report shortly.\n                </p>\n              </div>\n            ) : fetchingReasons ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Why are you reporting this {type}? Your report will be reviewed by our team.\n                </p>\n\n                {/* Reason Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Select a reason <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {reasons.map((reason) => (\n                      <label\n                        key={reason.value}\n                        className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                          selectedReason === reason.value\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"reason\"\n                          value={reason.value}\n                          checked={selectedReason === reason.value}\n                          onChange={(e) => setSelectedReason(e.target.value)}\n                          className=\"mt-1 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <div>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {reason.label}\n                          </span>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                            {reason.description}\n                          </p>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Additional Details */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional details (optional)\n                  </label>\n                  <textarea\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Provide any additional context that might help us review this report...\"\n                    rows={3}\n                    maxLength={500}\n                    className=\"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                  />\n                  <p className=\"text-xs text-gray-400 text-right\">\n                    {description.length}/500\n                  </p>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm\">\n                    <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                    {error}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!success && (\n            <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading || !selectedReason}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>\n                    <Flag className=\"w-4 h-4\" />\n                    Submit Report\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AALA;;;;;;AAiBe,SAAS,YAAY,EAClC,MAAM,EACN,OAAO,EACP,IAAI,EACJ,QAAQ,EACR,UAAU,EACV,cAAc,EACd,cAAc,EACG;IACjB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB,EAAE;IACzD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAC;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,WAAW,MAAM,yIAAS,CAAC,UAAU;gBAC3C,WAAW,SAAS,OAAO;YAC7B,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC,mCAAmC;YACnD,SAAU;gBACR,mBAAmB;YACrB;QACF;QAEA,IAAI,QAAQ;YACV;YACA,cAAc;YACd,kBAAkB;YAClB,eAAe;YACf,WAAW;YACX,SAAS;QACX;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,eAAe;QACnB,IAAI,CAAC,gBAAgB;YACnB,SAAS;YACT;QACF;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,OAAO;gBACX,QAAQ;gBACR,aAAa,YAAY,IAAI,MAAM;YACrC;YAEA,OAAQ;gBACN,KAAK;oBACH,MAAM,yIAAS,CAAC,UAAU,CAAC,UAAU;oBACrC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,aAAa,CAAC,UAAU;oBACxC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,UAAU,CAAC,UAAU;oBACrC;gBACF,KAAK;oBACH,MAAM,yIAAS,CAAC,WAAW,CAAC,UAAU;oBACtC;gBACF,KAAK;oBACH,IAAI,CAAC,kBAAkB,CAAC,gBAAgB;wBACtC,MAAM,IAAI,MAAM;oBAClB;oBACA,MAAM,yIAAS,CAAC,cAAc,CAAC,gBAAgB;wBAC7C,GAAG,IAAI;wBACP;oBACF;oBACA;YACJ;YAEA,WAAW;YACX,WAAW;gBACT;YACF,GAAG;QACL,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,QAAQ,EAAE,MAAM,SAAS;QACxC,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,WAAW;QACf,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO,CAAC,OAAO,EAAE,cAAc,QAAQ;YACzC,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO,CAAC,OAAO,EAAE,cAAc,QAAQ;YACzC;gBACE,OAAO;QACX;IACF;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,8OAAC,4MAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,MAAM;wBAAE,SAAS;oBAAE;oBACnB,WAAU;oBACV,SAAS;;;;;;8BAIX,8OAAC,oMAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBACnC,SAAS;wBAAE,SAAS;wBAAG,OAAO;oBAAE;oBAChC,MAAM;wBAAE,SAAS;wBAAG,OAAO;oBAAK;oBAChC,WAAU;;sCAGV,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAI,WAAU;sDACb,cAAA,8OAAC,0MAAI;gDAAC,WAAU;;;;;;;;;;;sDAElB,8OAAC;4CAAG,WAAU;sDACX;;;;;;;;;;;;8CAGL,8OAAC;oCACC,SAAS;oCACT,WAAU;8CAEV,cAAA,8OAAC,iMAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;sCAKjB,8OAAC;4BAAI,WAAU;sCACZ,wBACC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;kDACb,cAAA,8OAAC,0OAAW;4CAAC,WAAU;;;;;;;;;;;kDAEzB,8OAAC;wCAAG,WAAU;kDAA2D;;;;;;kDAGzE,8OAAC;wCAAE,WAAU;kDAAmC;;;;;;;;;;;uCAIhD,gCACF,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC,4NAAO;oCAAC,WAAU;;;;;;;;;;qDAGrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;;4CAA2C;4CAC1B;4CAAK;;;;;;;kDAInC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAM,WAAU;;oDAAuD;kEACtD,8OAAC;wDAAK,WAAU;kEAAe;;;;;;;;;;;;0DAEjD,8OAAC;gDAAI,WAAU;0DACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wDAEC,WAAW,CAAC,2EAA2E,EACrF,mBAAmB,OAAO,KAAK,GAC3B,mDACA,yFACJ;;0EAEF,8OAAC;gEACC,MAAK;gEACL,MAAK;gEACL,OAAO,OAAO,KAAK;gEACnB,SAAS,mBAAmB,OAAO,KAAK;gEACxC,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gEACjD,WAAU;;;;;;0EAEZ,8OAAC;;kFACC,8OAAC;wEAAK,WAAU;kFACb,OAAO,KAAK;;;;;;kFAEf,8OAAC;wEAAE,WAAU;kFACV,OAAO,WAAW;;;;;;;;;;;;;uDApBlB,OAAO,KAAK;;;;;;;;;;;;;;;;kDA6BzB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAM,WAAU;0DAAuD;;;;;;0DAGxE,8OAAC;gDACC,OAAO;gDACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gDAC9C,aAAY;gDACZ,MAAM;gDACN,WAAW;gDACX,WAAU;;;;;;0DAEZ,8OAAC;gDAAE,WAAU;;oDACV,YAAY,MAAM;oDAAC;;;;;;;;;;;;;oCAKvB,uBACC,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,yOAAa;gDAAC,WAAU;;;;;;4CACxB;;;;;;;;;;;;;;;;;;wBAQV,CAAC,yBACA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,SAAS;oCACT,UAAU,WAAW,CAAC;oCACtB,WAAU;8CAET,wBACC;;0DACE,8OAAC,4NAAO;gDAAC,WAAU;;;;;;4CAAyB;;qEAI9C;;0DACE,8OAAC,0MAAI;gDAAC,WAAU;;;;;;4CAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWhD"}},
    {"offset": {"line": 3187, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  ThumbsUp,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n  Pencil,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { toggleSavePost } from '@/lib/api/saved';\nimport { \n  likePost as socketLikePost, \n  reactToPost as socketReactToPost,\n  votePoll as socketVotePoll,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { \n  ReactionPicker, \n  ReactionSummaryDisplay, \n  getReactionConfig,\n} from './ReactionPicker';\nimport { FormattedContent } from './FormattedContent';\nimport { EditPostModal } from './EditPostModal';\nimport { LikeListModal } from './LikeListModal';\nimport { ShareModal } from './ShareModal';\nimport ReportModal from '@/components/reports/ReportModal';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number, reactionType?: ReactionType | null, reactionSummary?: ReactionSummaryType[]) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onEdit?: (postId: string, updatedPost: Post) => void;\n  onUnsave?: (postId: string) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onEdit,\n  onUnsave,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [currentReaction, setCurrentReaction] = useState<ReactionType | null>(post.userReactionType || null);\n  const [reactionSummary, setReactionSummary] = useState<ReactionSummaryType[]>(post.reactionSummary || []);\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\n  const [showLikeListModal, setShowLikeListModal] = useState(false);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n  \n  // Sync like state with real-time updates from parent\n  useEffect(() => {\n    setIsLiked(post.isLiked);\n    setLikesCount(post.likesCount);\n    setCurrentReaction(post.userReactionType || null);\n    setReactionSummary(post.reactionSummary || []);\n  }, [post.isLiked, post.likesCount, post.userReactionType, post.reactionSummary]);\n  \n  // Sync poll options with real-time updates from parent\n  useEffect(() => {\n    if (post.pollOptions) {\n      setPollOptions(post.pollOptions);\n    }\n  }, [post.pollOptions]);\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle quick like (default LIKE reaction)\n  const handleLike = async () => {\n    if (currentReaction === 'LIKE') {\n      // Remove reaction\n      handleReaction('LIKE');\n    } else {\n      // Add LIKE reaction\n      handleReaction('LIKE');\n    }\n  };\n\n  // Handle reaction selection\n  const handleReaction = async (reactionType: ReactionType) => {\n    const wasLiked = isLiked;\n    const oldReaction = currentReaction;\n    const oldCount = likesCount;\n    \n    let newLiked: boolean;\n    let newCount: number;\n    let newReaction: ReactionType | null;\n    \n    if (currentReaction === reactionType) {\n      // Remove reaction (clicking same reaction again)\n      newLiked = false;\n      newCount = likesCount - 1;\n      newReaction = null;\n    } else if (currentReaction) {\n      // Change reaction (already reacted, changing type)\n      newLiked = true;\n      newCount = likesCount; // Count stays same\n      newReaction = reactionType;\n    } else {\n      // Add new reaction\n      newLiked = true;\n      newCount = likesCount + 1;\n      newReaction = reactionType;\n    }\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    setCurrentReaction(newReaction);\n    onLikeUpdate?.(post.id, newLiked, newCount, newReaction, reactionSummary);\n    \n    try {\n      // Use WebSocket for real-time\n      socketReactToPost(post.id, reactionType);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(wasLiked);\n        setLikesCount(oldCount);\n        setCurrentReaction(oldReaction);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share - open share modal\n  const handleShare = () => {\n    setShowShareModal(true);\n  };\n\n  // Handle save/unsave\n  const handleSave = async () => {\n    try {\n      const response = await toggleSavePost(post.id);\n      if (response && typeof response.saved === 'boolean') {\n        setIsSaved(response.saved);\n        if (!response.saved) onUnsave?.(post.id);\n      } else {\n        setIsSaved(!isSaved);\n        if (isSaved) onUnsave?.(post.id);\n      }\n    } catch (error) {\n      console.error('Error toggling save:', error);\n      setIsSaved(!isSaved);\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[600px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>\n              {post.linkDomain || (post.linkUrl ? (() => {\n                try {\n                  return new URL(post.linkUrl).hostname;\n                } catch {\n                  return 'Link';\n                }\n              })() : 'Link')}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: '',\n      PROMOTION: '',\n      GRADUATION: '',\n      CERTIFICATION: '',\n      WORK_ANNIVERSARY: '',\n      BIRTHDAY: '',\n      JOB_CHANGE: '',\n      NEW_POSITION: '',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || '' : '';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()}  {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? `  ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost && (\n                <>\n                  <button\n                    onClick={() => {\n                      setShowEditModal(true);\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                    Edit post\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleDelete();\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete post\n                  </button>\n                </>\n              )}\n              \n              {!isOwnPost && (\n                <button\n                  onClick={() => {\n                    setShowReportModal(true);\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <FormattedContent \n            content={post.content} \n            className=\"text-gray-900 dark:text-white\"\n          />\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <ReactionSummaryDisplay \n              reactionSummary={reactionSummary}\n              totalCount={likesCount}\n              onClick={() => setShowLikeListModal(true)}\n            />\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {post.commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {post.commentsCount} comment{post.commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        {/* Reaction Button with Picker */}\n        <div \n          className=\"relative\"\n          onMouseEnter={() => setShowReactionPicker(true)}\n          onMouseLeave={() => setShowReactionPicker(false)}\n        >\n          <button\n            onClick={handleLike}\n            className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n              isLiked && currentReaction\n                ? `${getReactionConfig(currentReaction).color} ${getReactionConfig(currentReaction).bgColor}`\n                : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n            }`}\n          >\n            {currentReaction ? (\n              <>\n                {React.createElement(getReactionConfig(currentReaction).icon, { \n                  className: `w-5 h-5 ${isLiked ? 'fill-current' : ''}` \n                })}\n                <span className=\"text-sm font-medium\">{getReactionConfig(currentReaction).label}</span>\n              </>\n            ) : (\n              <>\n                <ThumbsUp className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">Like</span>\n              </>\n            )}\n          </button>\n          \n          <ReactionPicker\n            isOpen={showReactionPicker}\n            currentReaction={currentReaction}\n            onSelect={handleReaction}\n            onClose={() => setShowReactionPicker(false)}\n          />\n        </div>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={handleSave}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n\n      {/* Like List Modal */}\n      <LikeListModal\n        isOpen={showLikeListModal}\n        onClose={() => setShowLikeListModal(false)}\n        postId={post.id}\n        totalCount={likesCount}\n      />\n\n      {/* Edit Post Modal */}\n      <EditPostModal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        post={post}\n        onPostUpdated={(updatedPost) => {\n          onEdit?.(post.id, updatedPost);\n        }}\n      />\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"post\"\n        targetId={post.id}\n        targetName={`Post by ${post.author.name}`}\n      />\n\n      {/* Share Modal */}\n      <ShareModal\n        isOpen={showShareModal}\n        onClose={() => setShowShareModal(false)}\n        postId={post.id}\n        postPreview={post.content || undefined}\n      />\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4513, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/app/more/saved/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  ArrowLeft,\n  Bookmark,\n  Loader2,\n  BookmarkX,\n} from 'lucide-react';\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { getSavedPosts, type SavedPostsResponse } from '@/lib/api/saved';\nimport type { Post, PollOption, ReactionType, ReactionSummary } from '@/types/post';\n\nexport default function SavedPostsPage() {\n  const router = useRouter();\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(true);\n  const [totalCount, setTotalCount] = useState(0);\n\n  const fetchSavedPosts = useCallback(async (cursor?: string | null, append = false) => {\n    try {\n      if (!cursor) {\n        setLoading(true);\n      } else {\n        setLoadingMore(true);\n      }\n\n      const response: SavedPostsResponse = await getSavedPosts(cursor, 20);\n      \n      if (append) {\n        setPosts(prev => [...prev, ...response.posts]);\n      } else {\n        setPosts(response.posts);\n      }\n      \n      setNextCursor(response.nextCursor);\n      setHasMore(response.hasMore);\n      setTotalCount(prev => append ? prev + response.posts.length : response.posts.length);\n    } catch (error) {\n      console.error('Error fetching saved posts:', error);\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchSavedPosts(null);\n  }, [fetchSavedPosts]);\n\n  const loadMore = () => {\n    if (!loadingMore && hasMore && nextCursor) {\n      fetchSavedPosts(nextCursor, true);\n    }\n  };\n\n  const handleLikeUpdate = (\n    postId: string,\n    liked: boolean,\n    count: number,\n    reactionType?: ReactionType | null,\n    reactionSummary?: ReactionSummary[]\n  ) => {\n    setPosts(prev =>\n      prev.map(post =>\n        post.id === postId\n          ? {\n              ...post,\n              isLiked: liked,\n              likesCount: count,\n              userReactionType: reactionType || null,\n              reactionSummary: reactionSummary || post.reactionSummary,\n            }\n          : post\n      )\n    );\n  };\n\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPosts(prev =>\n      prev.map(post =>\n        post.id === postId ? { ...post, pollOptions: options } : post\n      )\n    );\n  };\n\n  const handlePostDelete = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n    setTotalCount(prev => prev - 1);\n  };\n\n  const handlePostEdit = (postId: string, updatedPost: Post) => {\n    setPosts(prev =>\n      prev.map(post => (post.id === postId ? updatedPost : post))\n    );\n  };\n\n  // Handle unsave - remove from list when unsaved\n  const handleUnsave = (postId: string) => {\n    setPosts(prev => prev.filter(post => post.id !== postId));\n    setTotalCount(prev => Math.max(0, prev - 1));\n  };\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950\">\n        {/* Header */}\n        <div className=\"sticky top-0 z-40 bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800\">\n          <div className=\"max-w-2xl mx-auto px-4 py-3 flex items-center gap-4\">\n            <button\n              onClick={() => router.back()}\n              className=\"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <ArrowLeft className=\"w-5 h-5 text-gray-700 dark:text-neutral-300\" />\n            </button>\n            <div>\n              <h1 className=\"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2\">\n                <Bookmark className=\"w-5 h-5 text-blue-500\" />\n                Saved Posts\n              </h1>\n              {posts.length > 0 && (\n                <p className=\"text-xs text-gray-500 dark:text-neutral-500\">\n                  {posts.length} saved post{posts.length !== 1 ? 's' : ''}\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Content */}\n        <div className=\"max-w-2xl mx-auto px-4 py-6\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-20\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n            </div>\n          ) : posts.length === 0 ? (\n            <motion.div\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              className=\"text-center py-20\"\n            >\n              <div className=\"w-20 h-20 mx-auto mb-6 bg-gray-100 dark:bg-neutral-800 rounded-full flex items-center justify-center\">\n                <BookmarkX className=\"w-10 h-10 text-gray-400 dark:text-neutral-600\" />\n              </div>\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white mb-2\">\n                No saved posts yet\n              </h2>\n              <p className=\"text-gray-500 dark:text-neutral-400 max-w-sm mx-auto\">\n                When you save posts, they'll appear here so you can easily find them later.\n              </p>\n            </motion.div>\n          ) : (\n            <div className=\"space-y-4\">\n              <AnimatePresence mode=\"popLayout\">\n                {posts.map((post) => (\n                  <motion.div\n                    key={post.id}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    exit={{ opacity: 0, x: -100 }}\n                    layout\n                  >\n                    <PostCard\n                      post={post}\n                      onLikeUpdate={handleLikeUpdate}\n                      onPollUpdate={handlePollUpdate}\n                      onDelete={handlePostDelete}\n                      onEdit={handlePostEdit}\n                      onUnsave={handleUnsave}\n                    />\n                  </motion.div>\n                ))}\n              </AnimatePresence>\n\n              {/* Load More */}\n              {hasMore && nextCursor && (\n                <div className=\"flex justify-center py-4\">\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2\"\n                  >\n                    {loadingMore ? (\n                      <>\n                        <Loader2 className=\"w-4 h-4 animate-spin\" />\n                        Loading...\n                      </>\n                    ) : (\n                      'Load More'\n                    )}\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}