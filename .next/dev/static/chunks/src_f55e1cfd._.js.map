{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":["c","_c","React","useRouter","useAuth","ProtectedRouteProps","children","ReactNode","ProtectedRoute","t0","$","$i","Symbol","for","isAuthenticated","loading","router","t1","t2","ProtectedRoute[useEffect()]","push","useEffect","t3"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;;AAJ5C,YAAY;;;;;AAUL,wBAAAK,EAAA;;IAAA,MAAAC,CAAA,OAAAT,gLAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAJ,QAAAA,EAAA,GAAAG,EAAiC;IAC9D,MAAA,EAAAK,eAAA,EAAAC,OAAAA,EAAA;IACA,MAAAC,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAI,eAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAK,OAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,MAAA,EAAA;QAEXC,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACd,IAAI,CAACJ,OAA2B,IAA5B,CAAaD,eAAe,EAAA;oBAC9BE,MAAM,CAAAI,IAAK,CAAC,QAAQ,CAAC;gBAAA;YACtB;SAAA,CAAA,CAAA,8BACF;QAAEF,EAAA,GAAA;YAACJ,eAAe;YAAEC,OAAO;YAAEC,MAAM;SAAC;QAAAN,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,OAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,MAAA;QAAAN,CAAA,CAAA,EAAA,GAAAO,EAAA;QAAAP,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAP,CAAA,CAAA,EAAA;QAAAQ,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAJrCR,wKAAK,CAAAmB,SAAU,CAACJ,EAIf,EAAEC,EAAkC,CAAC;IAEtC,IAAIH,OAAO,EAAA;QAAA,IAAAO,EAAA;QAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPS,EAAA,iBAAA,6LAAA,GAKM;gBALS,SAA+C,EAA/C,+CAA+C;wCAC5D,6LAAA,GAGM;oBAHS,SAAa,EAAb,aAAa;;sCAC1B,6LAAA,GAA8F;4BAA/E,SAAwE,EAAxE,wEAAwE;;;;;;sCACvF,6LAAA,CAAgD;4BAAnC,SAAoB,EAApB,oBAAoB;sCAAC,UAAU,EAA5C,CAAgD,CAClD,EAHA,GAGM,CACR,EALA,GAKM;;;;;;;;;;;;;;;;;YAAAZ,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;QAAA;QAAA,OALNY,EAKM;IAAA;IAIV,IAAI,CAACR,eAAe,EAAA;QAAA,OACX,IAAI;IAAA;IACZ,IAAAQ,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAEMgB,EAAA,iBAAA,EAAGhB;sBAAAA,QAAO,CAAC,GAAI;;QAAAI,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAfY,EAAe;AAAA;;;QAxBelB,2IAAO,CAAC,CAAC;QAC/BD,kJAAS,CAAC,CAAC;;;KAFrBK","ignoreList":[]}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/lib/api/chat.ts"],"sourcesContent":["import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface ChatUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  isOnline: boolean;\n  lastActiveAt: string | null;\n}\n\nexport interface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  receiverId: string;\n  content: string;\n  contentType: string;\n  mediaUrl?: string;\n  mediaType?: string;\n  fileName?: string;\n  fileSize?: number;\n  status: 'SENT' | 'DELIVERED' | 'READ';\n  deliveredAt?: string;\n  readAt?: string;\n  isDeleted: boolean;\n  replyToId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n  };\n  sender: ChatUser;\n  reactions: MessageReaction[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface MessageReaction {\n  id: string;\n  userId: string;\n  emoji: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n  };\n}\n\nexport interface Conversation {\n  id: string;\n  participant1Id: string;\n  participant2Id: string;\n  participant1: ChatUser;\n  participant2: ChatUser;\n  otherParticipant: ChatUser;\n  lastMessage?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n    status: 'SENT' | 'DELIVERED' | 'READ';\n    createdAt: string;\n  };\n  lastMessageAt?: string;\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ConversationsResponse {\n  conversations: Conversation[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\nexport interface MessagesResponse {\n  messages: Message[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n// ============================================\n// Chat API Functions\n// ============================================\n\n/**\n * Get all conversations for the current user\n */\nexport async function getConversations(\n  limit?: number,\n  cursor?: string\n): Promise<ConversationsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations?${params.toString()}`);\n}\n\n/**\n * Get or create a conversation with another user\n */\nexport async function getOrCreateConversation(participantId: string): Promise<Conversation> {\n  return apiClient.post('/chat/conversations', { participantId });\n}\n\n/**\n * Get a specific conversation\n */\nexport async function getConversation(conversationId: string): Promise<Conversation> {\n  return apiClient.get(`/chat/conversations/${conversationId}`);\n}\n\n/**\n * Get messages for a conversation\n */\nexport async function getMessages(\n  conversationId: string,\n  limit?: number,\n  cursor?: string\n): Promise<MessagesResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations/${conversationId}/messages?${params.toString()}`);\n}\n\n/**\n * Send a message (REST fallback - prefer WebSocket)\n */\nexport async function sendMessage(\n  conversationId: string,\n  data: {\n    content: string;\n    contentType?: string;\n    mediaUrl?: string;\n    mediaType?: string;\n    fileName?: string;\n    fileSize?: number;\n    replyToId?: string;\n  }\n): Promise<Message> {\n  return apiClient.post(`/chat/conversations/${conversationId}/messages`, data);\n}\n\n/**\n * Mark messages as read\n */\nexport async function markAsRead(conversationId: string): Promise<{ updatedCount: number; readAt: string }> {\n  return apiClient.post(`/chat/conversations/${conversationId}/read`);\n}\n\n/**\n * Delete a message\n */\nexport async function deleteMessage(\n  messageId: string,\n  forEveryone?: boolean\n): Promise<{ success: boolean }> {\n  return apiClient.delete(`/chat/messages/${messageId}`, { \n    data: { forEveryone } \n  });\n}\n\n/**\n * Edit a message\n */\nexport async function editMessage(messageId: string, content: string): Promise<Message> {\n  return apiClient.patch(`/chat/messages/${messageId}`, { content });\n}\n\n/**\n * Add reaction to a message\n */\nexport async function addReaction(\n  messageId: string,\n  emoji: string\n): Promise<{ action: 'added' | 'removed' | 'updated'; emoji: string }> {\n  return apiClient.post(`/chat/messages/${messageId}/reactions`, { emoji });\n}\n\n/**\n * Get unread message count\n */\nexport async function getUnreadCount(): Promise<{ unreadCount: number }> {\n  return apiClient.get('/chat/unread-count');\n}\n\n/**\n * Search messages\n */\nexport async function searchMessages(\n  query: string,\n  limit?: number\n): Promise<{ messages: Message[] }> {\n  const params = new URLSearchParams();\n  params.append('q', query);\n  if (limit) params.append('limit', String(limit));\n  \n  return apiClient.get(`/chat/search?${params.toString()}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AA8FO,eAAe,iBACpB,KAAc,EACd,MAAe;IAEf,MAAM,SAAS,IAAI;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IACzC,IAAI,QAAQ,OAAO,MAAM,CAAC,UAAU;IAEpC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,OAAO,QAAQ,IAAI;AACjE;AAKO,eAAe,wBAAwB,aAAqB;IACjE,OAAO,yIAAS,CAAC,IAAI,CAAC,uBAAuB;QAAE;IAAc;AAC/D;AAKO,eAAe,gBAAgB,cAAsB;IAC1D,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,gBAAgB;AAC9D;AAKO,eAAe,YACpB,cAAsB,EACtB,KAAc,EACd,MAAe;IAEf,MAAM,SAAS,IAAI;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IACzC,IAAI,QAAQ,OAAO,MAAM,CAAC,UAAU;IAEpC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,eAAe,UAAU,EAAE,OAAO,QAAQ,IAAI;AAC5F;AAKO,eAAe,YACpB,cAAsB,EACtB,IAQC;IAED,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,eAAe,SAAS,CAAC,EAAE;AAC1E;AAKO,eAAe,WAAW,cAAsB;IACrD,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,eAAe,KAAK,CAAC;AACpE;AAKO,eAAe,cACpB,SAAiB,EACjB,WAAqB;IAErB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;QACrD,MAAM;YAAE;QAAY;IACtB;AACF;AAKO,eAAe,YAAY,SAAiB,EAAE,OAAe;IAClE,OAAO,yIAAS,CAAC,KAAK,CAAC,CAAC,eAAe,EAAE,WAAW,EAAE;QAAE;IAAQ;AAClE;AAKO,eAAe,YACpB,SAAiB,EACjB,KAAa;IAEb,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,UAAU,UAAU,CAAC,EAAE;QAAE;IAAM;AACzE;AAKO,eAAe;IACpB,OAAO,yIAAS,CAAC,GAAG,CAAC;AACvB;AAKO,eAAe,eACpB,KAAa,EACb,KAAc;IAEd,MAAM,SAAS,IAAI;IACnB,OAAO,MAAM,CAAC,KAAK;IACnB,IAAI,OAAO,OAAO,MAAM,CAAC,SAAS,OAAO;IAEzC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,aAAa,EAAE,OAAO,QAAQ,IAAI;AAC1D"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatList.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { getConversations, Conversation } from '@/lib/api/chat';\nimport { initializeSocket, getSocket } from '@/lib/socket';\nimport { formatDistanceToNow } from 'date-fns';\nimport { cn } from '@/lib/utils';\n\ninterface ChatListProps {\n  selectedConversationId?: string;\n  onSelectConversation?: (conversation: Conversation) => void;\n  currentUserId?: string;\n}\n\nexport default function ChatList({ \n  selectedConversationId, \n  onSelectConversation,\n  currentUserId \n}: ChatListProps) {\n  const router = useRouter();\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n\n  const fetchConversations = useCallback(async (cursor?: string) => {\n    try {\n      setLoading(true);\n      const result = await getConversations(30, cursor);\n      \n      if (cursor) {\n        setConversations(prev => [...prev, ...result.conversations]);\n      } else {\n        setConversations(result.conversations);\n      }\n      \n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: any) {\n      setError(err.message || 'Failed to load conversations');\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchConversations();\n  }, [fetchConversations]);\n\n  // Listen for new messages to update conversation list\n  useEffect(() => {\n    const socket = getSocket();\n    \n    if (!socket) return;\n\n    const handleNewMessage = (data: { conversationId: string; message: any }) => {\n      setConversations(prev => {\n        const existingIndex = prev.findIndex(c => c.id === data.conversationId);\n        \n        if (existingIndex >= 0) {\n          // Update existing conversation and move to top\n          const updated = [...prev];\n          const conv = { ...updated[existingIndex] };\n          conv.lastMessage = {\n            id: data.message.id,\n            content: data.message.content,\n            contentType: data.message.contentType,\n            senderId: data.message.senderId,\n            status: data.message.status,\n            createdAt: data.message.createdAt,\n          };\n          conv.lastMessageAt = data.message.createdAt;\n          \n          // Increment unread if not the sender\n          if (data.message.senderId !== currentUserId && data.conversationId !== selectedConversationId) {\n            conv.unreadCount = (conv.unreadCount || 0) + 1;\n          }\n          \n          updated.splice(existingIndex, 1);\n          return [conv, ...updated];\n        }\n        \n        // Refresh to get new conversation\n        fetchConversations();\n        return prev;\n      });\n    };\n\n    const handleMessagesRead = (data: { conversationId: string }) => {\n      setConversations(prev => \n        prev.map(c => \n          c.id === data.conversationId \n            ? { ...c, unreadCount: 0 } \n            : c\n        )\n      );\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:notification', handleNewMessage);\n    socket.on('chat:messages_read', handleMessagesRead);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:notification', handleNewMessage);\n      socket.off('chat:messages_read', handleMessagesRead);\n    };\n  }, [currentUserId, selectedConversationId, fetchConversations]);\n\n  const handleSelectConversation = (conversation: Conversation) => {\n    if (onSelectConversation) {\n      onSelectConversation(conversation);\n    } else {\n      router.push(`/messages/${conversation.id}`);\n    }\n  };\n\n  const loadMore = () => {\n    if (hasMore && nextCursor) {\n      fetchConversations(nextCursor);\n    }\n  };\n\n  if (loading && conversations.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-4 text-center text-red-500\">\n        {error}\n        <button \n          onClick={() => fetchConversations()}\n          className=\"block mx-auto mt-2 text-blue-500 hover:underline\"\n        >\n          Retry\n        </button>\n      </div>\n    );\n  }\n\n  if (conversations.length === 0) {\n    return (\n      <div className=\"p-8 text-center text-gray-500 dark:text-gray-400\">\n        <div className=\"text-4xl mb-4\">üí¨</div>\n        <p>No conversations yet</p>\n        <p className=\"text-sm mt-2\">Start a chat with someone!</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 overflow-y-auto\">\n        {conversations.map((conversation) => (\n          <ConversationItem\n            key={conversation.id}\n            conversation={conversation}\n            isSelected={selectedConversationId === conversation.id}\n            currentUserId={currentUserId}\n            onClick={() => handleSelectConversation(conversation)}\n          />\n        ))}\n        \n        {hasMore && (\n          <button\n            onClick={loadMore}\n            disabled={loading}\n            className=\"w-full py-3 text-sm text-blue-600 hover:bg-gray-50 dark:hover:bg-gray-800\"\n          >\n            {loading ? 'Loading...' : 'Load more'}\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Conversation Item Component\n// ============================================\ninterface ConversationItemProps {\n  conversation: Conversation;\n  isSelected: boolean;\n  currentUserId?: string;\n  onClick: () => void;\n}\n\nfunction ConversationItem({ \n  conversation, \n  isSelected, \n  currentUserId,\n  onClick \n}: ConversationItemProps) {\n  const other = conversation.otherParticipant;\n  const lastMessage = conversation.lastMessage;\n  const isUnread = conversation.unreadCount > 0;\n  const isSentByMe = lastMessage?.senderId === currentUserId;\n\n  return (\n    <div\n      onClick={onClick}\n      className={cn(\n        'flex items-center gap-3 p-3 cursor-pointer transition-colors border-b border-gray-100 dark:border-gray-800',\n        isSelected \n          ? 'bg-blue-50 dark:bg-blue-900/20' \n          : 'hover:bg-gray-50 dark:hover:bg-gray-800/50',\n        isUnread && !isSelected && 'bg-gray-50 dark:bg-gray-800/30'\n      )}\n    >\n      {/* Avatar */}\n      <div className=\"relative flex-shrink-0\">\n        <div className=\"w-12 h-12 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {other.profileImage ? (\n            <img\n              src={other.profileImage}\n              alt={other.name}\n              className=\"w-12 h-12 rounded-full object-cover\"\n            />\n          ) : (\n            other.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {other.isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </div>\n\n      {/* Content */}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center justify-between\">\n          <span className={cn(\n            'font-medium truncate',\n            isUnread && 'text-gray-900 dark:text-white font-semibold'\n          )}>\n            {other.name}\n          </span>\n          {lastMessage && (\n            <span className=\"text-xs text-gray-500 flex-shrink-0\">\n              {formatDistanceToNow(new Date(lastMessage.createdAt), { addSuffix: false })}\n            </span>\n          )}\n        </div>\n        \n        <div className=\"flex items-center gap-1\">\n          {lastMessage ? (\n            <>\n              {isSentByMe && (\n                <span className=\"text-gray-400 text-sm\">\n                  {lastMessage.status === 'READ' ? '‚úì‚úì' : lastMessage.status === 'DELIVERED' ? '‚úì‚úì' : '‚úì'}\n                </span>\n              )}\n              <p className={cn(\n                'text-sm truncate',\n                isUnread \n                  ? 'text-gray-900 dark:text-white font-medium' \n                  : 'text-gray-500 dark:text-gray-400'\n              )}>\n                {lastMessage.contentType === 'image' ? 'üì∑ Photo' :\n                 lastMessage.contentType === 'file' ? 'üìé File' :\n                 lastMessage.contentType === 'voice' ? 'üé§ Voice message' :\n                 lastMessage.content}\n              </p>\n            </>\n          ) : (\n            <p className=\"text-sm text-gray-400 italic\">No messages yet</p>\n          )}\n        </div>\n      </div>\n\n      {/* Unread badge */}\n      {isUnread && (\n        <div className=\"flex-shrink-0 w-5 h-5 bg-blue-600 rounded-full flex items-center justify-center\">\n          <span className=\"text-xs text-white font-medium\">\n            {conversation.unreadCount > 9 ? '9+' : conversation.unreadCount}\n          </span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["c","_c","React","useEffect","useState","useCallback","useRouter","getConversations","Conversation","initializeSocket","getSocket","formatDistanceToNow","cn","ChatListProps","selectedConversationId","onSelectConversation","conversation","currentUserId","ChatList","router","conversations","setConversations","loading","setLoading","error","setError","hasMore","setHasMore","nextCursor","setNextCursor","fetchConversations","cursor","result","prev","err","message","socket","handleNewMessage","data","conversationId","existingIndex","findIndex","id","updated","conv","lastMessage","content","contentType","senderId","status","createdAt","lastMessageAt","unreadCount","splice","handleMessagesRead","map","on","off","handleSelectConversation","push","loadMore","length","ConversationItemProps","isSelected","onClick","ConversationItem","t0","$","$i","Symbol","for","other","otherParticipant","isUnread","isSentByMe","t1","t2","t3","t4","name","profileImage","charAt","toUpperCase","t5","t6","isOnline","t7","t8","t9","t10","t11","Date","addSuffix","t12","t13","t14","t15","t16"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 746, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatMessages.tsx"],"sourcesContent":["'use client';\n\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { Message, getMessages, MessagesResponse } from '@/lib/api/chat';\nimport { \n  getSocket, \n  joinChatRoom, \n  leaveChatRoom, \n  markChatAsRead,\n  deleteChatMessage,\n  editChatMessage,\n  reactToChatMessage\n} from '@/lib/socket';\nimport { format, isToday, isYesterday, isSameDay } from 'date-fns';\nimport { cn } from '@/lib/utils';\nimport MessageMenu, { MessageQuickActions } from './MessageMenu';\nimport { WALLPAPER_OPTIONS } from './ChatSettingsPanel';\n\ninterface ChatMessagesProps {\n  conversationId: string;\n  currentUserId: string;\n  otherUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n  };\n  wallpaper?: string;\n  onReply?: (message: { id: string; content: string; senderName: string }) => void;\n}\n\nconst REACTION_EMOJIS = ['‚ù§Ô∏è', 'üëç', 'üòÇ', 'üòÆ', 'üò¢', 'üôè'];\n\nexport default function ChatMessages({\n  conversationId,\n  currentUserId,\n  otherUser,\n  wallpaper = 'default',\n  onReply,\n}: ChatMessagesProps) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n  const [nextCursor, setNextCursor] = useState<string | undefined>();\n  const [typingUser, setTypingUser] = useState<string | null>(null);\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const messagesContainerRef = useRef<HTMLDivElement>(null);\n  const [shouldAutoScroll, setShouldAutoScroll] = useState(true);\n\n  // Fetch messages\n  const fetchMessages = useCallback(async (cursor?: string) => {\n    try {\n      if (cursor) {\n        setLoadingMore(true);\n      } else {\n        setLoading(true);\n      }\n\n      const result = await getMessages(conversationId, 50, cursor);\n\n      if (cursor) {\n        // Prepend older messages\n        setMessages(prev => [...result.messages, ...prev]);\n      } else {\n        setMessages(result.messages);\n      }\n\n      setHasMore(result.hasMore);\n      setNextCursor(result.nextCursor);\n    } catch (err: any) {\n      console.error('Failed to fetch messages:', err);\n    } finally {\n      setLoading(false);\n      setLoadingMore(false);\n    }\n  }, [conversationId]);\n\n  // Initial load and join room\n  useEffect(() => {\n    fetchMessages();\n    joinChatRoom(conversationId);\n    markChatAsRead(conversationId);\n\n    return () => {\n      leaveChatRoom(conversationId);\n    };\n  }, [conversationId, fetchMessages]);\n\n  // Socket event listeners\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleNewMessage = (data: { conversationId: string; message: Message }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => [...prev, data.message]);\n        setShouldAutoScroll(true);\n        \n        // Mark as read if from other user\n        if (data.message.senderId !== currentUserId) {\n          markChatAsRead(conversationId);\n        }\n      }\n    };\n\n    const handleTyping = (data: { conversationId: string; userId: string; isTyping: boolean }) => {\n      if (data.conversationId === conversationId && data.userId !== currentUserId) {\n        setTypingUser(data.isTyping ? data.userId : null);\n      }\n    };\n\n    const handleMessagesRead = (data: { conversationId: string; readBy: string; readAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status !== 'READ'\n              ? { ...m, status: 'READ', readAt: new Date(data.readAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleMessagesDelivered = (data: { conversationId: string; deliveredAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.senderId === currentUserId && m.status === 'SENT'\n              ? { ...m, status: 'DELIVERED', deliveredAt: new Date(data.deliveredAt).toISOString() }\n              : m\n          )\n        );\n      }\n    };\n\n    const handleError = (data: { message: string }) => {\n      console.error('Chat socket error:', data.message);\n    };\n\n    const handleMessageDeleted = (data: { messageId: string; conversationId: string; forEveryone: boolean }) => {\n      if (data.conversationId === conversationId) {\n        if (data.forEveryone) {\n          setMessages(prev => \n            prev.map(m => \n              m.id === data.messageId \n                ? { ...m, isDeleted: true, content: 'This message was deleted' } \n                : m\n            )\n          );\n        } else {\n          setMessages(prev => prev.filter(m => m.id !== data.messageId));\n        }\n      }\n    };\n\n    const handleMessageEdited = (data: { messageId: string; conversationId: string; content: string; editedAt: Date }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => \n            m.id === data.messageId \n              ? { ...m, content: data.content, updatedAt: String(data.editedAt) } \n              : m\n          )\n        );\n      }\n    };\n\n    const handleReaction = (data: { messageId: string; conversationId: string; userId: string; emoji: string; action: string }) => {\n      if (data.conversationId === conversationId) {\n        setMessages(prev => \n          prev.map(m => {\n            if (m.id !== data.messageId) return m;\n            \n            let reactions = [...(m.reactions || [])];\n            \n            if (data.action === 'removed') {\n              reactions = reactions.filter(r => !(r.userId === data.userId));\n            } else if (data.action === 'added') {\n              reactions.push({\n                id: `temp-${Date.now()}`,\n                userId: data.userId,\n                emoji: data.emoji,\n                user: { id: data.userId, username: '', name: '' }\n              });\n            } else if (data.action === 'updated') {\n              const index = reactions.findIndex(r => r.userId === data.userId);\n              if (index >= 0) {\n                reactions[index] = { ...reactions[index], emoji: data.emoji };\n              }\n            }\n            \n            return { ...m, reactions };\n          })\n        );\n      }\n    };\n\n    socket.on('chat:new_message', handleNewMessage);\n    socket.on('chat:user_typing', handleTyping);\n    socket.on('chat:messages_read', handleMessagesRead);\n    socket.on('chat:messages_delivered', handleMessagesDelivered);\n    socket.on('chat:message_deleted', handleMessageDeleted);\n    socket.on('chat:message_edited', handleMessageEdited);\n    socket.on('chat:message_reaction', handleReaction);\n    socket.on('error', handleError);\n\n    return () => {\n      socket.off('chat:new_message', handleNewMessage);\n      socket.off('chat:user_typing', handleTyping);\n      socket.off('chat:messages_read', handleMessagesRead);\n      socket.off('chat:messages_delivered', handleMessagesDelivered);\n      socket.off('chat:message_deleted', handleMessageDeleted);\n      socket.off('chat:message_edited', handleMessageEdited);\n      socket.off('chat:message_reaction', handleReaction);\n      socket.off('error', handleError);\n    };\n  }, [conversationId, currentUserId, otherUser.id]);\n\n  // Auto-scroll to bottom\n  useEffect(() => {\n    if (shouldAutoScroll && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n      setShouldAutoScroll(false);\n    }\n  }, [messages, shouldAutoScroll]);\n\n  // Scroll detection for loading more\n  const handleScroll = (e: React.UIEvent<HTMLDivElement>) => {\n    const target = e.currentTarget;\n    if (target.scrollTop < 100 && hasMore && !loadingMore) {\n      fetchMessages(nextCursor);\n    }\n  };\n\n  // Group messages by date\n  const groupedMessages = messages.reduce((groups, message) => {\n    const date = new Date(message.createdAt);\n    const dateKey = format(date, 'yyyy-MM-dd');\n    \n    if (!groups[dateKey]) {\n      groups[dateKey] = [];\n    }\n    groups[dateKey].push(message);\n    \n    return groups;\n  }, {} as Record<string, Message[]>);\n\n  if (loading) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      ref={messagesContainerRef}\n      className=\"flex-1 overflow-y-auto p-4 space-y-4\"\n      onScroll={handleScroll}\n    >\n      {loadingMore && (\n        <div className=\"flex justify-center py-2\">\n          <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600\"></div>\n        </div>\n      )}\n\n      {Object.entries(groupedMessages).map(([dateKey, dateMessages]) => (\n        <div key={dateKey}>\n          {/* Date separator */}\n          <div className=\"flex items-center justify-center my-4\">\n            <div className=\"bg-gray-200 dark:bg-gray-700 px-3 py-1 rounded-full text-xs text-gray-600 dark:text-gray-300\">\n              {formatDateSeparator(new Date(dateKey))}\n            </div>\n          </div>\n\n          {/* Messages for this date */}\n          {dateMessages.map((message, index) => {\n            const prevMessage = index > 0 ? dateMessages[index - 1] : null;\n            const showAvatar = !prevMessage || prevMessage.senderId !== message.senderId;\n            \n            return (\n              <MessageBubble\n                key={message.id}\n                message={message}\n                isOwn={message.senderId === currentUserId}\n                showAvatar={showAvatar}\n                otherUser={otherUser}\n                conversationId={conversationId}\n              />\n            );\n          })}\n        </div>\n      ))}\n\n      {/* Typing indicator */}\n      {typingUser && (\n        <div className=\"flex items-center gap-2 text-gray-500 text-sm\">\n          <div className=\"flex gap-1\">\n            <span className=\"animate-bounce\">‚Ä¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.1s' }}>‚Ä¢</span>\n            <span className=\"animate-bounce\" style={{ animationDelay: '0.2s' }}>‚Ä¢</span>\n          </div>\n          <span>{otherUser.name} is typing...</span>\n        </div>\n      )}\n\n      <div ref={messagesEndRef} />\n    </div>\n  );\n}\n\n// ============================================\n// Message Bubble Component\n// ============================================\ninterface MessageBubbleProps {\n  message: Message;\n  isOwn: boolean;\n  showAvatar: boolean;\n  otherUser: {\n    name: string;\n    profileImage?: string | null;\n  };\n  conversationId: string;\n}\n\nfunction MessageBubble({ \n  message, \n  isOwn, \n  showAvatar, \n  otherUser,\n  conversationId \n}: MessageBubbleProps) {\n  const [showActions, setShowActions] = useState(false);\n  const [showReactions, setShowReactions] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [editContent, setEditContent] = useState(message.content);\n\n  const handleDelete = (forEveryone: boolean) => {\n    deleteChatMessage(message.id, conversationId, forEveryone);\n    setShowActions(false);\n  };\n\n  const handleEdit = () => {\n    if (editContent.trim() && editContent !== message.content) {\n      editChatMessage(message.id, conversationId, editContent);\n    }\n    setIsEditing(false);\n  };\n\n  const handleReaction = (emoji: string) => {\n    reactToChatMessage(message.id, conversationId, emoji);\n    setShowReactions(false);\n  };\n\n  if (message.isDeleted) {\n    return (\n      <div className={cn(\n        'flex items-center gap-2',\n        isOwn ? 'justify-end' : 'justify-start'\n      )}>\n        <div className=\"bg-gray-100 dark:bg-gray-800 text-gray-500 italic px-4 py-2 rounded-lg text-sm\">\n          This message was deleted\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div \n      className={cn(\n        'flex gap-2 group',\n        isOwn ? 'justify-end' : 'justify-start'\n      )}\n      onMouseEnter={() => setShowActions(true)}\n      onMouseLeave={() => { setShowActions(false); setShowReactions(false); }}\n    >\n      {/* Avatar for received messages */}\n      {!isOwn && (\n        <div className={cn('w-8 h-8 flex-shrink-0', !showAvatar && 'invisible')}>\n          {showAvatar && (\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium\">\n              {otherUser.profileImage ? (\n                <img\n                  src={otherUser.profileImage}\n                  alt={otherUser.name}\n                  className=\"w-8 h-8 rounded-full object-cover\"\n                />\n              ) : (\n                otherUser.name.charAt(0).toUpperCase()\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      <div className={cn('max-w-[70%] relative', isOwn && 'order-first')}>\n        {/* Reply preview */}\n        {message.replyTo && (\n          <div className={cn(\n            'text-xs p-2 rounded-t-lg border-l-2',\n            isOwn \n              ? 'bg-blue-600/20 border-blue-400' \n              : 'bg-gray-100 dark:bg-gray-800 border-gray-400'\n          )}>\n            <span className=\"text-gray-500\">Replying to</span>\n            <p className=\"truncate\">{message.replyTo.content}</p>\n          </div>\n        )}\n\n        {/* Message content */}\n        <div className={cn(\n          'px-4 py-2 rounded-2xl relative',\n          isOwn \n            ? 'bg-blue-600 text-white rounded-br-sm' \n            : 'bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-sm',\n          message.replyTo && 'rounded-t-none'\n        )}>\n          {/* Media content */}\n          {message.mediaUrl && message.contentType === 'image' && (\n            <img \n              src={message.mediaUrl} \n              alt=\"Shared image\" \n              className=\"rounded-lg max-w-full mb-2\"\n            />\n          )}\n\n          {message.mediaUrl && message.contentType === 'file' && (\n            <a \n              href={message.mediaUrl} \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n              className=\"flex items-center gap-2 bg-white/10 p-2 rounded mb-2 hover:bg-white/20\"\n            >\n              <span>üìé</span>\n              <span className=\"truncate\">{message.fileName || 'File'}</span>\n            </a>\n          )}\n\n          {/* Text content */}\n          {isEditing ? (\n            <div className=\"flex gap-2\">\n              <input\n                type=\"text\"\n                value={editContent}\n                onChange={(e) => setEditContent(e.target.value)}\n                className=\"flex-1 bg-white/20 rounded px-2 py-1 text-sm\"\n                autoFocus\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') handleEdit();\n                  if (e.key === 'Escape') setIsEditing(false);\n                }}\n              />\n              <button onClick={handleEdit} className=\"text-xs\">Save</button>\n            </div>\n          ) : (\n            <p className=\"break-words whitespace-pre-wrap\">{message.content}</p>\n          )}\n\n          {/* Edited indicator - only show if updated more than 5 seconds after creation */}\n          {!message.isDeleted && (() => {\n            const created = new Date(message.createdAt).getTime();\n            const updated = new Date(message.updatedAt).getTime();\n            const diffSeconds = (updated - created) / 1000;\n            return diffSeconds > 5;\n          })() && (\n            <span className=\"text-xs opacity-60 ml-1\">(edited)</span>\n          )}\n        </div>\n\n        {/* Reactions */}\n        {message.reactions && message.reactions.length > 0 && (\n          <div className={cn(\n            'flex flex-wrap gap-1 mt-1',\n            isOwn ? 'justify-end' : 'justify-start'\n          )}>\n            {Array.from(new Set(message.reactions.map(r => r.emoji))).map(emoji => {\n              const count = message.reactions.filter(r => r.emoji === emoji).length;\n              return (\n                <button\n                  key={emoji}\n                  onClick={() => handleReaction(emoji)}\n                  className=\"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded-full text-sm flex items-center gap-1 hover:bg-gray-200 dark:hover:bg-gray-700\"\n                >\n                  <span>{emoji}</span>\n                  <span className=\"text-xs text-gray-500\">{count}</span>\n                </button>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Time and status */}\n        <div className={cn(\n          'text-xs text-gray-500 mt-1 flex items-center gap-1',\n          isOwn ? 'justify-end' : 'justify-start'\n        )}>\n          <span>{format(new Date(message.createdAt), 'HH:mm')}</span>\n          {isOwn && (\n            <span className={cn(\n              message.status === 'READ' && 'text-blue-500'\n            )}>\n              {message.status === 'READ' ? '‚úì‚úì' : message.status === 'DELIVERED' ? '‚úì‚úì' : '‚úì'}\n            </span>\n          )}\n        </div>\n\n        {/* Action buttons */}\n        {showActions && !isEditing && (\n          <div className={cn(\n            'absolute top-0 flex items-center gap-1 bg-white dark:bg-gray-900 shadow-lg rounded-lg p-1',\n            isOwn ? 'right-full mr-2' : 'left-full ml-2'\n          )}>\n            <button\n              onClick={() => setShowReactions(!showReactions)}\n              className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded\"\n              title=\"React\"\n            >\n              üòÄ\n            </button>\n            \n            {isOwn && (\n              <>\n                <button\n                  onClick={() => setIsEditing(true)}\n                  className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded text-sm\"\n                  title=\"Edit\"\n                >\n                  ‚úèÔ∏è\n                </button>\n                <button\n                  onClick={() => handleDelete(true)}\n                  className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded text-sm\"\n                  title=\"Delete for everyone\"\n                >\n                  üóëÔ∏è\n                </button>\n              </>\n            )}\n            <button\n              onClick={() => handleDelete(false)}\n              className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded text-sm\"\n              title=\"Delete for me\"\n            >\n              ‚ùå\n            </button>\n          </div>\n        )}\n\n        {/* Reaction picker */}\n        {showReactions && (\n          <div className={cn(\n            'absolute -top-10 flex items-center gap-1 bg-white dark:bg-gray-900 shadow-lg rounded-full px-2 py-1',\n            isOwn ? 'right-0' : 'left-0'\n          )}>\n            {REACTION_EMOJIS.map(emoji => (\n              <button\n                key={emoji}\n                onClick={() => handleReaction(emoji)}\n                className=\"hover:scale-125 transition-transform p-1\"\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ============================================\n// Utility Functions\n// ============================================\nfunction formatDateSeparator(date: Date): string {\n  if (isToday(date)) return 'Today';\n  if (isYesterday(date)) return 'Yesterday';\n  return format(date, 'MMMM d, yyyy');\n}\n"],"names":["c","_c","React","useEffect","useRef","useState","useCallback","Message","getMessages","MessagesResponse","getSocket","joinChatRoom","leaveChatRoom","markChatAsRead","deleteChatMessage","editChatMessage","reactToChatMessage","format","isToday","isYesterday","isSameDay","cn","MessageMenu","MessageQuickActions","WALLPAPER_OPTIONS","ChatMessagesProps","conversationId","currentUserId","otherUser","id","name","username","profileImage","isOnline","wallpaper","onReply","message","content","senderName","REACTION_EMOJIS","ChatMessages","messages","setMessages","loading","setLoading","loadingMore","setLoadingMore","hasMore","setHasMore","nextCursor","setNextCursor","typingUser","setTypingUser","messagesEndRef","HTMLDivElement","messagesContainerRef","shouldAutoScroll","setShouldAutoScroll","fetchMessages","cursor","result","prev","err","console","error","socket","handleNewMessage","data","senderId","handleTyping","userId","isTyping","handleMessagesRead","readBy","readAt","Date","map","m","status","toISOString","handleMessagesDelivered","deliveredAt","handleError","handleMessageDeleted","messageId","forEveryone","isDeleted","filter","handleMessageEdited","editedAt","updatedAt","String","handleReaction","emoji","action","reactions","r","push","now","user","index","findIndex","on","off","current","scrollIntoView","behavior","handleScroll","e","UIEvent","target","currentTarget","scrollTop","groupedMessages","reduce","groups","date","createdAt","dateKey","Record","Object","entries","dateMessages","formatDateSeparator","prevMessage","showAvatar","animationDelay","MessageBubbleProps","isOwn","MessageBubble","t0","$","$i","Symbol","for","showActions","setShowActions","showReactions","setShowReactions","isEditing","setIsEditing","editContent","setEditContent","t1","handleDelete","t2","MessageBubble[handleEdit]","trim","handleEdit","t3","t4","t5","t6","t7","MessageBubble[<div>.onMouseEnter]","MessageBubble[<div>.onMouseLeave]","t8","charAt","toUpperCase","t9","t10","t11","replyTo","t12","t13","t14","t15","contentType","mediaUrl","t16","fileName","t17","value","e_0","key","t18","created","getTime","updated","diffSeconds","t19","t20","length","Array","from","Set","_MessageBubbleMessageReactionsMap","emoji_0","count","r_0","MessageBubble[(anonymous)() > <button>.onClick]","t21","t22","t23","t24","t25","t26","t27","MessageBubble[<button>.onClick]","t28","emoji_1","MessageBubble[REACTION_EMOJIS.map() > <button>.onClick]","t29","t30"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1854, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatInput.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\nimport { sendChatMessage, sendChatTyping, getSocket } from '@/lib/socket';\nimport { cn } from '@/lib/utils';\n\ninterface ChatInputProps {\n  conversationId: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    senderName: string;\n  };\n  onCancelReply?: () => void;\n  disabled?: boolean;\n}\n\nexport default function ChatInput({\n  conversationId,\n  replyTo,\n  onCancelReply,\n  disabled = false,\n}: ChatInputProps) {\n  const [message, setMessage] = useState('');\n  const [isTyping, setIsTyping] = useState(false);\n  const [showEmoji, setShowEmoji] = useState(false);\n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Auto-resize textarea\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.style.height = 'auto';\n      inputRef.current.style.height = `${Math.min(inputRef.current.scrollHeight, 120)}px`;\n    }\n  }, [message]);\n\n  // Handle typing indicator\n  const handleTyping = useCallback(() => {\n    if (!isTyping) {\n      setIsTyping(true);\n      sendChatTyping(conversationId, true);\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n    }\n\n    // Set new timeout to stop typing indicator\n    typingTimeoutRef.current = setTimeout(() => {\n      setIsTyping(false);\n      sendChatTyping(conversationId, false);\n    }, 2000);\n  }, [conversationId, isTyping]);\n\n  // Clean up typing timeout\n  useEffect(() => {\n    return () => {\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current);\n      }\n    };\n  }, []);\n\n  const handleSend = () => {\n    const trimmedMessage = message.trim();\n    \n    if (!trimmedMessage) return;\n\n    // Immediately clear typing state and stop broadcasting\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current);\n      typingTimeoutRef.current = null;\n    }\n    setIsTyping(false);\n    sendChatTyping(conversationId, false);\n\n    // Send message\n    sendChatMessage({\n      conversationId,\n      content: trimmedMessage,\n      contentType: 'text',\n      replyToId: replyTo?.id,\n    });\n\n    // Reset\n    setMessage('');\n    onCancelReply?.();\n    \n    // Focus input\n    inputRef.current?.focus();\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSend();\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setMessage(e.target.value);\n    handleTyping();\n  };\n\n  const handleEmojiClick = (emoji: string) => {\n    setMessage(prev => prev + emoji);\n    setShowEmoji(false);\n    inputRef.current?.focus();\n  };\n\n  const commonEmojis = ['üòÄ', 'üòÇ', '‚ù§Ô∏è', 'üëç', 'üî•', 'üéâ', 'üòä', 'üôè', 'üíØ', '‚ú®'];\n\n  return (\n    <div className=\"border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-4\">\n      {/* Reply preview */}\n      {replyTo && (\n        <div className=\"flex items-center justify-between mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg\">\n          <div className=\"flex items-center gap-2 min-w-0\">\n            <div className=\"w-1 h-8 bg-blue-500 rounded-full\" />\n            <div className=\"min-w-0\">\n              <p className=\"text-xs text-blue-600 dark:text-blue-400 font-medium\">\n                Replying to {replyTo.senderName}\n              </p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400 truncate\">\n                {replyTo.content}\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onCancelReply}\n            className=\"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded\"\n          >\n            ‚úï\n          </button>\n        </div>\n      )}\n\n      {/* Input area */}\n      <div className=\"flex items-end gap-2\">\n        {/* Attachment button */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Attach file\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n          </svg>\n        </button>\n\n        {/* Emoji button */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowEmoji(!showEmoji)}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            title=\"Add emoji\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </button>\n\n          {/* Emoji picker */}\n          {showEmoji && (\n            <div className=\"absolute bottom-full left-0 mb-2 p-2 bg-white dark:bg-gray-800 shadow-lg rounded-lg border border-gray-200 dark:border-gray-700 z-10\">\n              <div className=\"flex gap-1 flex-wrap max-w-[200px]\">\n                {commonEmojis.map(emoji => (\n                  <button\n                    key={emoji}\n                    onClick={() => handleEmojiClick(emoji)}\n                    className=\"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded text-xl\"\n                  >\n                    {emoji}\n                  </button>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Text input */}\n        <div className=\"flex-1 relative\">\n          <textarea\n            ref={inputRef}\n            value={message}\n            onChange={handleChange}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Type a message...\"\n            disabled={disabled}\n            rows={1}\n            className={cn(\n              'w-full resize-none rounded-2xl px-4 py-2 pr-12',\n              'bg-gray-100 dark:bg-gray-800',\n              'border border-transparent focus:border-blue-500',\n              'focus:outline-none focus:ring-2 focus:ring-blue-500/20',\n              'text-gray-900 dark:text-white placeholder-gray-500',\n              'disabled:opacity-50 disabled:cursor-not-allowed',\n              'max-h-32'\n            )}\n          />\n        </div>\n\n        {/* Send button */}\n        <button\n          onClick={handleSend}\n          disabled={!message.trim() || disabled}\n          className={cn(\n            'p-3 rounded-full transition-all',\n            message.trim()\n              ? 'bg-blue-600 text-white hover:bg-blue-700 scale-100'\n              : 'bg-gray-200 dark:bg-gray-700 text-gray-400 scale-95',\n            'disabled:opacity-50 disabled:cursor-not-allowed'\n          )}\n        >\n          <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":["c","_c","React","useState","useRef","useEffect","useCallback","sendChatMessage","sendChatTyping","getSocket","cn","ChatInputProps","conversationId","replyTo","id","content","senderName","onCancelReply","disabled","ChatInput","t0","$","$i","Symbol","for","t1","undefined","message","setMessage","isTyping","setIsTyping","showEmoji","setShowEmoji","inputRef","typingTimeoutRef","t2","ChatInput[useEffect()]","current","style","height","Math","min","scrollHeight","t3","t4","ChatInput[handleTyping]","clearTimeout","setTimeout","ChatInput[handleTyping > setTimeout()]","handleTyping","t5","t6","t7","ChatInput[handleSend]","trimmedMessage","trim","contentType","replyToId","focus","handleSend","t8","e","key","shiftKey","preventDefault","handleKeyDown","t9","e_0","target","value","handleChange","t10","t11","t12","t13","t14","t15","t16","handleEmojiClick","emoji","prev","commonEmojis","t17","ChatInput[<button>.onClick]","t18","map","emoji_0","ChatInput[commonEmojis.map() > <button>.onClick]","t19","t20","t21","t22","t23","t24","t25","t26"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2432, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/ChatHeader.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { formatDistanceToNow } from 'date-fns';\nimport { getSocket } from '@/lib/socket';\nimport { cn } from '@/lib/utils';\n\ninterface ChatHeaderProps {\n  user: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage?: string | null;\n    isOnline?: boolean;\n    lastActiveAt?: string | null;\n  };\n  onBack?: () => void;\n  onInfo?: () => void;\n}\n\nexport default function ChatHeader({ user, onBack, onInfo }: ChatHeaderProps) {\n  const [isOnline, setIsOnline] = useState(user.isOnline || false);\n  const [lastActive, setLastActive] = useState(user.lastActiveAt);\n\n  // Listen for online/offline status\n  useEffect(() => {\n    const socket = getSocket();\n    if (!socket) return;\n\n    const handleOnline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(true);\n      }\n    };\n\n    const handleOffline = (data: { userId: string }) => {\n      if (data.userId === user.id) {\n        setIsOnline(false);\n        setLastActive(new Date().toISOString());\n      }\n    };\n\n    socket.on('user:online', handleOnline);\n    socket.on('user:offline', handleOffline);\n\n    return () => {\n      socket.off('user:online', handleOnline);\n      socket.off('user:offline', handleOffline);\n    };\n  }, [user.id]);\n\n  // Update initial state when user prop changes\n  useEffect(() => {\n    setIsOnline(user.isOnline || false);\n    setLastActive(user.lastActiveAt);\n  }, [user.isOnline, user.lastActiveAt]);\n\n  return (\n    <div className=\"flex items-center gap-3 p-4 border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\">\n      {/* Back button (mobile) */}\n      {onBack && (\n        <button\n          onClick={onBack}\n          className=\"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full md:hidden\"\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n          </svg>\n        </button>\n      )}\n\n      {/* Avatar */}\n      <Link href={`/profile/${user.username}`} className=\"relative flex-shrink-0\">\n        <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center text-white font-semibold\">\n          {user.profileImage ? (\n            <img\n              src={user.profileImage}\n              alt={user.name}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n          ) : (\n            user.name.charAt(0).toUpperCase()\n          )}\n        </div>\n        {/* Online indicator */}\n        {isOnline && (\n          <div className=\"absolute bottom-0 right-0 w-3 h-3 bg-green-500 rounded-full border-2 border-white dark:border-gray-900\"></div>\n        )}\n      </Link>\n\n      {/* User info */}\n      <div className=\"flex-1 min-w-0\">\n        <Link \n          href={`/profile/${user.username}`}\n          className=\"font-semibold text-gray-900 dark:text-white hover:underline truncate block\"\n        >\n          {user.name}\n        </Link>\n        <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n          {isOnline ? (\n            <span className=\"text-green-600 dark:text-green-400\">Online</span>\n          ) : lastActive ? (\n            `Last seen ${formatDistanceToNow(new Date(lastActive), { addSuffix: true })}`\n          ) : (\n            `@${user.username}`\n          )}\n        </p>\n      </div>\n\n      {/* Action buttons */}\n      <div className=\"flex items-center gap-2\">\n        {/* Voice call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Voice call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n          </svg>\n        </button>\n\n        {/* Video call (future) */}\n        <button\n          className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n          title=\"Video call (coming soon)\"\n          disabled\n        >\n          <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\n          </svg>\n        </button>\n\n        {/* Info button */}\n        {onInfo && (\n          <button\n            onClick={onInfo}\n            className=\"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            title=\"Chat info\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["c","_c","React","useState","useEffect","Link","formatDistanceToNow","getSocket","cn","ChatHeaderProps","user","id","name","username","profileImage","isOnline","lastActiveAt","onBack","onInfo","ChatHeader","t0","$","$i","Symbol","for","setIsOnline","lastActive","setLastActive","t1","t2","ChatHeader[useEffect()]","socket","handleOnline","data","userId","handleOffline","data_0","Date","toISOString","on","off","t3","t4","t5","t6","t7","charAt","toUpperCase","t8","t9","t10","t11","t12","t13","addSuffix","t14","t15","t16","t17","t18","t19","t20"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2862, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/components/chat/index.ts"],"sourcesContent":["export { default as ChatList } from './ChatList';\nexport { default as ChatMessages } from './ChatMessages';\nexport { default as ChatInput } from './ChatInput';\nexport { default as ChatHeader } from './ChatHeader';\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA"}},
    {"offset": {"line": 2914, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Videos/vormex/vormex-web/src/app/messages/%5BconversationId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, use } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { ChatList, ChatMessages, ChatInput, ChatHeader } from '@/components/chat';\nimport { getConversation, Conversation } from '@/lib/api/chat';\nimport { initializeSocket } from '@/lib/socket';\n\ninterface ConversationPageProps {\n  params: Promise<{ conversationId: string }>;\n}\n\nexport default function ConversationPage({ params }: ConversationPageProps) {\n  const resolvedParams = use(params);\n  const router = useRouter();\n  const { user } = useAuth();\n  const [conversation, setConversation] = useState<Conversation | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [replyTo, setReplyTo] = useState<{ id: string; content: string; senderName: string } | null>(null);\n\n  // Initialize socket\n  useEffect(() => {\n    if (user?.id) {\n      initializeSocket();\n    }\n  }, [user?.id]);\n\n  // Fetch conversation\n  useEffect(() => {\n    const fetchConversation = async () => {\n      try {\n        setLoading(true);\n        const conv = await getConversation(resolvedParams.conversationId);\n        setConversation(conv);\n      } catch (err: any) {\n        setError(err.message || 'Failed to load conversation');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (resolvedParams.conversationId && user?.id) {\n      fetchConversation();\n    }\n  }, [resolvedParams.conversationId, user?.id]);\n\n  const handleBack = () => {\n    router.push('/messages');\n  };\n\n  const handleSelectConversation = (conv: Conversation) => {\n    router.push(`/messages/${conv.id}`);\n  };\n\n  if (loading) {\n    return (\n      <ProtectedRoute>\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        </div>\n      </ProtectedRoute>\n    );\n  }\n\n  if (error || !conversation) {\n    return (\n      <ProtectedRoute>\n        <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n          <div className=\"text-center\">\n            <p className=\"text-red-500 mb-4\">{error || 'Conversation not found'}</p>\n            <button\n              onClick={handleBack}\n              className=\"text-blue-600 hover:underline\"\n            >\n              Go back to messages\n            </button>\n          </div>\n        </div>\n      </ProtectedRoute>\n    );\n  }\n\n  const otherUser = conversation.otherParticipant;\n\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n        <div className=\"max-w-7xl mx-auto\">\n          <div className=\"flex h-screen\">\n            {/* Sidebar - Chat List (hidden on mobile when viewing a conversation) */}\n            <div className=\"hidden md:flex md:w-96 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 flex-col\">\n              {/* Header */}\n              <div className=\"p-4 border-b border-gray-200 dark:border-gray-700\">\n                <div className=\"flex items-center justify-between\">\n                  <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Messages</h1>\n                </div>\n              </div>\n\n              {/* Chat list */}\n              <ChatList \n                selectedConversationId={resolvedParams.conversationId}\n                onSelectConversation={handleSelectConversation}\n                currentUserId={user?.id}\n              />\n            </div>\n\n            {/* Main Chat Area */}\n            <div className=\"flex-1 flex flex-col bg-white dark:bg-gray-900 pb-24\">\n              {/* Chat Header */}\n              <ChatHeader \n                user={otherUser} \n                onBack={handleBack}\n              />\n\n              {/* Messages */}\n              <ChatMessages\n                conversationId={resolvedParams.conversationId}\n                currentUserId={user!.id}\n                otherUser={otherUser}\n              />\n\n              {/* Input */}\n              <ChatInput\n                conversationId={resolvedParams.conversationId}\n                replyTo={replyTo || undefined}\n                onCancelReply={() => setReplyTo(null)}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["useEffect","useState","use","useRouter","ProtectedRoute","useAuth","ChatList","ChatMessages","ChatInput","ChatHeader","getConversation","Conversation","initializeSocket","ConversationPageProps","params","Promise","conversationId","ConversationPage","resolvedParams","router","user","conversation","setConversation","loading","setLoading","error","setError","replyTo","setReplyTo","id","content","senderName","fetchConversation","conv","err","message","handleBack","push","handleSelectConversation","otherUser","otherParticipant","undefined"],"mappings":"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","ignoreList":[]}}]
}