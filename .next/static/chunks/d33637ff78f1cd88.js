(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9747,e=>{"use strict";var a=e.i(43476),t=e.i(932),r=e.i(48010),l=e.i(71645),s=e.i(69230),n=e.i(69637),i=e.i(12598),o=e.i(46932),c=e.i(88653),d=e.i(55436),u=e.i(97548),x=e.i(37727),g=e.i(31278),m=e.i(61911),b=e.i(83086),h=e.i(32095),p=e.i(46897),f=e.i(16715),y=e.i(63209),j=e.i(22016),k=e.i(31193),v=e.i(79002),N=e.i(82293),w=e.i(3116),C=e.i(43531),S=e.i(83079);function P({person:e,onConnectionChange:t}){let r=e.connectionStatus?.toLowerCase()||"none",[s,n]=(0,l.useState)(r),[i,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),m=async a=>{if(a.preventDefault(),a.stopPropagation(),!i){c(!0);try{await (0,S.sendConnectionRequest)(e.id),n("pending_sent"),u(!0),t?.(e.id,"pending_sent")}catch(e){console.error("Failed to send connection request:",e)}finally{c(!1)}}},b=async a=>{if(a.preventDefault(),a.stopPropagation(),!i){c(!0);try{await (0,S.acceptConnectionRequest)(e.id),n("connected"),t?.(e.id,"connected")}catch(e){console.error("Failed to accept connection:",e)}finally{c(!1)}}},p=async a=>{if(a.preventDefault(),a.stopPropagation(),!i){c(!0);try{await (0,S.rejectConnectionRequest)(e.id),n("none"),t?.(e.id,"none")}catch(e){console.error("Failed to reject connection:",e)}finally{c(!1)}}},f=async a=>{if(a.preventDefault(),a.stopPropagation(),!i){c(!0);try{await (0,S.cancelConnectionRequest)(e.id),n("none"),t?.(e.id,"none")}catch(e){console.error("Failed to cancel request:",e)}finally{c(!1)}}};return(0,a.jsxs)(o.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden hover:border-gray-300 dark:hover:border-neutral-700 transition-all hover:shadow-lg group",children:[(0,a.jsxs)("div",{className:"relative h-24 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:[e.bannerImageUrl&&(0,a.jsx)("img",{src:e.bannerImageUrl,alt:"",className:"w-full h-full object-cover"}),e.isOnline&&(0,a.jsxs)("div",{className:"absolute top-2 right-2 flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-medium rounded-full",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 bg-white rounded-full animate-pulse"}),"Online"]})]}),(0,a.jsxs)("div",{className:"relative px-4 pb-4",children:[(0,a.jsx)(j.default,{href:`/profile/${e.username}`,children:(0,a.jsx)("div",{className:"absolute -top-10 left-4 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 overflow-hidden bg-gray-200 dark:bg-neutral-700 group-hover:border-gray-100 dark:group-hover:border-neutral-800 transition-colors",children:e.profileImage?(0,a.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center text-2xl font-bold text-gray-500 dark:text-neutral-400",children:e.name.charAt(0).toUpperCase()})})}),(0,a.jsx)("div",{className:"absolute -top-4 right-4",children:(()=>{if(i)return(0,a.jsx)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-400",children:(0,a.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"})});switch(s){case"connected":return(0,a.jsxs)("button",{disabled:!0,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm font-medium",children:[(0,a.jsx)(N.UserCheck,{className:"w-4 h-4"}),"Connected"]});case"pending_sent":return(0,a.jsxs)("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-neutral-400 text-sm font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:[(0,a.jsx)(w.Clock,{className:"w-4 h-4"}),"Pending"]});case"pending_received":return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:b,className:"flex items-center gap-1 px-3 py-2 rounded-full bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,a.jsx)(C.Check,{className:"w-4 h-4"}),"Accept"]}),(0,a.jsx)("button",{onClick:p,className:"flex items-center gap-1 px-3 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-neutral-400 text-sm font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:(0,a.jsx)(x.X,{className:"w-4 h-4"})})]});default:return(0,a.jsxs)("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 rounded-full bg-blue-500 text-white text-sm font-medium hover:bg-blue-600 transition-colors",children:[(0,a.jsx)(v.UserPlus,{className:"w-4 h-4"}),"Connect"]})}})()}),(0,a.jsxs)("div",{className:"pt-12",children:[(0,a.jsx)(j.default,{href:`/profile/${e.username}`,children:(0,a.jsx)("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white hover:text-blue-500 dark:hover:text-blue-400 transition-colors",children:e.name})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:["@",e.username]}),e.headline&&(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-neutral-300 mt-1 line-clamp-2",children:e.headline}),e.college&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 text-sm text-gray-500 dark:text-neutral-400",children:[(0,a.jsx)(h.GraduationCap,{className:"w-4 h-4 flex-shrink-0"}),(0,a.jsx)("span",{className:"truncate",children:e.college}),e.branch&&(0,a.jsxs)("span",{className:"text-gray-400 dark:text-neutral-500",children:["• ",e.branch]})]}),e.skills&&e.skills.length>0&&(0,a.jsx)("div",{className:"mt-3",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[e.skills.slice(0,4).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-xs font-medium rounded-full",children:e},t)),e.skills.length>4&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400 text-xs font-medium rounded-full",children:["+",e.skills.length-4]})]})}),e.interests&&e.interests.length>0&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[e.interests.slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-0.5 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-xs font-medium rounded-full",children:e},t)),e.interests.length>3&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-neutral-800 text-gray-500 dark:text-neutral-400 text-xs font-medium rounded-full",children:["+",e.interests.length-3]})]})}),void 0!==e.mutualConnections&&e.mutualConnections>0&&(0,a.jsxs)("p",{className:"mt-3 text-xs text-gray-400 dark:text-neutral-500",children:[e.mutualConnections," mutual connection",1!==e.mutualConnections?"s":""]})]})]}),(0,a.jsx)(k.default,{show:d,recipientName:e.name,onClose:()=>u(!1)})]})}function F(){let e,r,l,s,n,i,o,c=(0,t.c)(7);return c[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)("div",{className:"h-24 bg-gray-200 dark:bg-neutral-800"}),c[0]=e):e=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(r=(0,a.jsx)("div",{className:"absolute -top-10 left-4 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 bg-gray-200 dark:bg-neutral-700"}),c[1]=r):r=c[1],c[2]===Symbol.for("react.memo_cache_sentinel")?(l=(0,a.jsx)("div",{className:"h-5 w-32 bg-gray-200 dark:bg-neutral-700 rounded"}),s=(0,a.jsx)("div",{className:"h-4 w-24 bg-gray-200 dark:bg-neutral-700 rounded"}),n=(0,a.jsx)("div",{className:"h-4 w-full bg-gray-200 dark:bg-neutral-700 rounded mt-3"}),i=(0,a.jsx)("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-neutral-700 rounded"}),c[2]=l,c[3]=s,c[4]=n,c[5]=i):(l=c[2],s=c[3],n=c[4],i=c[5]),c[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden animate-pulse",children:[e,(0,a.jsxs)("div",{className:"relative px-4 pb-4",children:[r,(0,a.jsxs)("div",{className:"pt-12 space-y-2",children:[l,s,n,i,(0,a.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,a.jsx)("div",{className:"h-6 w-16 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"}),(0,a.jsx)("div",{className:"h-6 w-20 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"}),(0,a.jsx)("div",{className:"h-6 w-14 bg-gray-200 dark:bg-neutral-700 rounded-full shrink-0"})]})]})]})]}),c[6]=o):o=c[6],o}var _=e.i(37902),A=e.i(74080),L=e.i(70703),R=e.i(61238);async function U(e,a,t,r){return R.default.post("/location/update",{lat:e,lng:a,accuracy:t,activity:r})}async function I(e=50,a=20,t,r,l){let s={radius:e,limit:a};return null!=t&&null!=r&&(s.lat=t,s.lng=r),l?.trim()&&(s.search=l.trim()),R.default.get("/location/nearby",{params:s})}var T=e.i(13751);let $=(0,L.default)(()=>e.A(87012).then(e=>e.LocationMap),{loadableGenerated:{modules:[52316]},ssr:!1,loading:()=>(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-neutral-800",children:(0,a.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})})});function M({onBack:e}){let[t,r]=(0,l.useState)([]),[s,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(!1),[c,b]=(0,l.useState)(null),[h,N]=(0,l.useState)(null),[w,C]=(0,l.useState)(50),[P,F]=(0,l.useState)(null),[L,R]=(0,l.useState)(null),[M,E]=(0,l.useState)(!1),[q,Y]=(0,l.useState)(""),O=[10,25,50,100,200],z=(0,l.useCallback)(()=>new Promise((e,a)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e,a,{enableHighAccuracy:!0,timeout:15e3,maximumAge:0}):a(Error("Geolocation is not supported by your browser"))}),[]),X=(0,l.useRef)(null),[B,G]=(0,l.useState)(""),[D,K]=(0,l.useState)(""),[Q,H]=(0,l.useState)(!1),W=(0,l.useRef)(null);(0,l.useEffect)(()=>(W.current&&clearTimeout(W.current),W.current=setTimeout(()=>K(B),300),()=>{W.current&&clearTimeout(W.current)}),[B]);let V=(0,l.useCallback)(async(e,a,t,l)=>{try{let s=e??h?.lat,n=a??h?.lng,i=l??w;if(!s||!n)return void r([]);let o=await I(i,50,s,n,(t??D)||void 0);if(o.locationRequired)return void r([]);r(o.users||[]),!o.userLocation||e&&a||N({lat:o.userLocation.lat,lng:o.userLocation.lng})}catch(e){console.error("[NearbyUsers] Failed to fetch nearby users:",e)}},[w,h?.lat,h?.lng,D]),J=(0,l.useCallback)(async()=>{o(!0),b(null);try{let{latitude:e,longitude:a,accuracy:t}=(await z()).coords;N({lat:e,lng:a});try{await U(e,a,t)}catch(e){console.warn("Could not update server location:",e)}await V(e,a)}catch(e){console.error("Location error:",e),1===e.code?b("Location permission denied. Please enable location access."):2===e.code?b("Unable to determine your location. Please try again."):3===e.code?b("Location request timed out. Please try again."):b(e.message||"Failed to get location")}finally{o(!1),n(!1)}},[z,V]);(0,l.useEffect)(()=>{J()},[]),(0,l.useEffect)(()=>{if(h&&!c)return X.current=navigator.geolocation?.watchPosition?.(e=>{let{latitude:a,longitude:t,accuracy:r}=e.coords;N({lat:a,lng:t}),U(a,t,r).catch(console.warn),(0,T.updateLocation)({lat:a,lng:t,accuracy:r})},e=>{1===e.code&&b("Location permission denied.")},{enableHighAccuracy:!0,maximumAge:3e4})??null,()=>{null!=X.current&&navigator.geolocation?.clearWatch?.(X.current)}},[!!h,!!c]),(0,l.useEffect)(()=>{s||!h||c||V(h.lat,h.lng,B,w)},[w,D,h?.lat,h?.lng]);let Z=async e=>{R(e);try{await (0,S.sendConnectionRequest)(e);let a=t?.find(a=>a.id===e);Y(a?.name||""),E(!0)}catch(e){console.error("Failed to connect:",e)}finally{R(null)}};return(0,a.jsxs)("div",{className:"h-[calc(100vh-200px)] min-h-[500px] flex flex-col bg-gray-50 dark:bg-neutral-950 rounded-xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:(0,a.jsx)(p.MapPin,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-white",children:"People Nearby"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[h&&(0,a.jsxs)(a.Fragment,{children:["Your location: ",h.lat.toFixed(4),", ",h.lng.toFixed(4)," · "]}),t.length," people within ",w,"km"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("select",{value:w,onChange:e=>C(Number(e.target.value)),className:"px-3 py-1.5 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-lg text-sm border-0 focus:ring-2 focus:ring-blue-500",children:O.map(e=>(0,a.jsxs)("option",{value:e,children:[e," km"]},e))}),(0,a.jsx)("button",{onClick:J,disabled:i,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",title:"Refresh location",children:(0,a.jsx)(f.RefreshCw,{className:`w-5 h-5 text-gray-600 dark:text-neutral-400 ${i?"animate-spin":""}`})})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:B,onChange:e=>G(e.target.value),placeholder:"Search by name, username, college, skills...",className:"w-full pl-9 pr-16 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 text-sm outline-none focus:ring-2 focus:ring-blue-500"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[B&&(0,a.jsx)("button",{onClick:()=>G(""),className:"p-1 rounded-full hover:bg-gray-200 dark:hover:bg-neutral-700",children:(0,a.jsx)(x.X,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)("button",{onClick:()=>H(!Q),className:`p-1.5 rounded-full transition-colors ${Q?"bg-blue-100 dark:bg-blue-900/30 text-blue-600":"text-gray-500 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:(0,a.jsx)(u.Filter,{className:"w-4 h-4"})})]})]}),Q&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-gray-50 dark:bg-neutral-800 rounded-lg space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 block",children:"Search radius"}),(0,a.jsx)("select",{value:w,onChange:e=>C(Number(e.target.value)),className:"w-full px-3 py-2 bg-white dark:bg-neutral-900 rounded-lg text-sm",children:O.map(e=>(0,a.jsxs)("option",{value:e,children:["Within ",e," km"]},e))})]})]}),(0,a.jsxs)("div",{className:"flex-1 relative",children:[s&&(0,a.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-neutral-900 z-10",children:[(0,a.jsx)(g.Loader2,{className:"w-8 h-8 animate-spin text-blue-500 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-neutral-400",children:"Finding people near you..."})]}),!s&&c&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-neutral-900 z-10 p-4",children:(0,a.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 max-w-sm",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(y.AlertCircle,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-700 dark:text-red-400 font-medium",children:"Location Error"}),(0,a.jsx)("p",{className:"text-red-600 dark:text-red-300 text-sm mt-1",children:c}),(0,a.jsx)("button",{onClick:J,className:"mt-3 text-sm text-red-600 dark:text-red-400 hover:underline font-medium",children:"Try again"})]})]})})}),!s&&!c&&h&&(0,a.jsx)($,{center:h,radius:w,users:t,onUserClick:e=>F(e)}),!s&&!c&&t.length>0&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 rounded-t-2xl max-h-48 overflow-hidden z-[500]",children:(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("div",{className:"w-12 h-1 bg-gray-300 dark:bg-neutral-700 rounded-full mx-auto mb-2"}),(0,a.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:t.map(e=>(0,a.jsxs)("button",{onClick:()=>F(e),className:"flex-shrink-0 flex items-center gap-2 p-2 bg-gray-50 dark:bg-neutral-800 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.profileImage?(0,a.jsx)("img",{src:e.profileImage,alt:e.name,className:"w-full h-full object-cover"}):(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:e.name?.charAt(0)||"?"})}),(0,a.jsxs)("div",{className:"text-left",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate max-w-[100px]",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:e.distance<1?`${Math.round(1e3*e.distance)}m`:`${e.distance.toFixed(1)}km`})]})]},e.id))})]})}),!s&&!c&&0===t.length&&h&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white dark:bg-neutral-900 border-t border-gray-200 dark:border-neutral-800 rounded-t-2xl p-6 z-[500]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(m.Users,{className:"w-12 h-12 text-gray-300 dark:text-neutral-700 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-1",children:"No one nearby"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:"Try increasing the search radius to find more people"})]})})]}),P&&"undefined"!=typeof document&&(0,A.createPortal)((0,a.jsx)(({user:e,onClose:t})=>(0,a.jsxs)("div",{style:{zIndex:9999},onClick:e=>{e.target===e.currentTarget&&t()},className:"jsx-ab0afecbe1649125 fixed inset-0 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm",children:[(0,a.jsxs)("div",{style:{animation:"slideUp 0.3s ease-out"},className:"jsx-ab0afecbe1649125 bg-white dark:bg-neutral-900 w-full max-w-md rounded-t-3xl sm:rounded-2xl overflow-hidden max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 h-24 bg-gradient-to-br from-blue-400 via-purple-500 to-pink-500 relative",children:[e.bannerImage&&(0,a.jsx)("img",{src:e.bannerImage,alt:"Banner",className:"jsx-ab0afecbe1649125 w-full h-full object-cover"}),(0,a.jsx)("button",{onClick:t,className:"jsx-ab0afecbe1649125 absolute top-3 right-3 p-2 bg-black/30 hover:bg-black/50 rounded-full transition-colors",children:(0,a.jsx)(x.X,{className:"w-4 h-4 text-white"})})]}),(0,a.jsx)("div",{className:"jsx-ab0afecbe1649125 px-4 -mt-10 relative z-10",children:(0,a.jsx)("div",{className:"jsx-ab0afecbe1649125 w-20 h-20 rounded-full border-4 border-white dark:border-neutral-900 overflow-hidden bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:e.profileImage?(0,a.jsx)("img",{src:e.profileImage,alt:e.name,className:"jsx-ab0afecbe1649125 w-full h-full object-cover"}):(0,a.jsx)("span",{className:"jsx-ab0afecbe1649125 text-white font-bold text-2xl",children:e.name?.charAt(0)||"?"})})}),(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 px-4 pb-6 pt-3",children:[(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-3",children:[(0,a.jsx)("h2",{className:"jsx-ab0afecbe1649125 text-xl font-bold text-gray-900 dark:text-white",children:e.name}),(0,a.jsxs)("p",{className:"jsx-ab0afecbe1649125 text-gray-500 dark:text-neutral-400",children:["@",e.username]})]}),(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex items-center gap-2 mb-4",children:[(0,a.jsxs)("span",{className:"jsx-ab0afecbe1649125 inline-flex items-center gap-1 px-2.5 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded-full text-sm font-medium",children:[(0,a.jsx)(p.MapPin,{className:"w-3.5 h-3.5"}),e.distance<1?`${Math.round(1e3*e.distance)}m away`:`${e.distance.toFixed(1)}km away`]}),e.location?.city&&(0,a.jsx)("span",{className:"jsx-ab0afecbe1649125 text-sm text-gray-500 dark:text-neutral-400",children:e.location.city}),e.isOnline&&(0,a.jsxs)("span",{className:"jsx-ab0afecbe1649125 inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded-full text-xs",children:[(0,a.jsx)("span",{className:"jsx-ab0afecbe1649125 w-1.5 h-1.5 bg-green-500 rounded-full"}),"Online"]})]}),e.headline&&(0,a.jsx)("p",{className:"jsx-ab0afecbe1649125 text-gray-700 dark:text-neutral-300 mb-4",children:e.headline}),e.skills&&e.skills.length>0&&(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-4",children:[(0,a.jsx)("h4",{className:"jsx-ab0afecbe1649125 text-xs font-semibold text-gray-500 dark:text-neutral-500 uppercase mb-2",children:"Skills"}),(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex flex-wrap gap-1.5",children:[e.skills.slice(0,6).map((e,t)=>(0,a.jsx)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-full text-xs",children:e},t)),e.skills.length>6&&(0,a.jsxs)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 text-gray-500 text-xs",children:["+",e.skills.length-6," more"]})]})]}),e.interests&&e.interests.length>0&&(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 mb-4",children:[(0,a.jsx)("h4",{className:"jsx-ab0afecbe1649125 text-xs font-semibold text-gray-500 dark:text-neutral-500 uppercase mb-2",children:"Interests"}),(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex flex-wrap gap-1.5",children:[e.interests.slice(0,6).map((e,t)=>(0,a.jsx)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400 rounded-full text-xs",children:e},t)),e.interests.length>6&&(0,a.jsxs)("span",{className:"jsx-ab0afecbe1649125 px-2.5 py-1 text-gray-500 text-xs",children:["+",e.interests.length-6," more"]})]})]}),(0,a.jsxs)("div",{className:"jsx-ab0afecbe1649125 flex gap-3 mt-4",children:[(0,a.jsx)(j.default,{href:`/profile/${e.username}`,className:"flex-1 py-2.5 text-center bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-xl font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:"View Profile"}),(0,a.jsxs)("button",{onClick:()=>Z(e.id),disabled:L===e.id,className:"jsx-ab0afecbe1649125 flex-1 py-2.5 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center gap-2 disabled:opacity-50",children:[L===e.id?(0,a.jsx)(g.Loader2,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(v.UserPlus,{className:"w-4 h-4"}),"Connect"]})]})]})]}),(0,a.jsx)(_.default,{id:"ab0afecbe1649125",children:"@keyframes slideUp{0%{transform:translateY(100%)}to{transform:translateY(0)}}"})]}),{user:P,onClose:()=>F(null)}),document.body),(0,a.jsx)(k.default,{show:M,recipientName:q,onClose:()=>E(!1)})]})}var E=e.i(73767);function q(){var e;(0,i.useQueryClient)();let[t,r]=(0,l.useState)("all"),[j,k]=(0,l.useState)(""),[v,N]=(0,l.useState)([]),[w,C]=(0,l.useState)([]),[S,_]=(0,l.useState)([]),[A,L]=(0,l.useState)(!0),[R,U]=(0,l.useState)(!1),[I,T]=(0,l.useState)(!1),[$,q]=(0,l.useState)(null),[Y,O]=(0,l.useState)(1),[z,X]=(0,l.useState)(!0),[B,G]=(0,l.useState)(0),[D,K]=(0,l.useState)({}),[Q,H]=(0,l.useState)(""),[W,V]=(0,l.useState)(""),[J,Z]=(0,l.useState)(void 0),ee=(0,l.useRef)(null),ea=(0,l.useRef)(null),et=(0,l.useRef)(null),{data:er,isLoading:el,isError:es,refetch:en}=(e={queryKey:["find-people-initial"],queryFn:async()=>{let[e,a,t]=await Promise.all([(0,E.getPeople)({},{page:1,limit:20}),(0,E.getSuggestions)(10).catch(()=>({suggestions:[]})),(0,E.getPeopleFromSameCollege)(10).catch(()=>({people:[]}))]);return{people:e.people,total:e.total,hasMore:e.hasMore,suggestions:a.suggestions,colleaguePeople:t.people}},staleTime:3e5,retry:2},(0,n.useBaseQuery)(e,s.QueryObserver,void 0));(0,l.useEffect)(()=>{er&&(N(er.people),G(er.total),X(er.hasMore),C(er.suggestions),_(er.colleaguePeople),L(!1))},[er]),(0,l.useEffect)(()=>{!er&&el&&L(!0),el||L(!1)},[el,er]),(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,E.getFilterOptions)();q(e)}catch(e){console.error("Failed to fetch filter options:",e)}})()},[]);let ei=(0,l.useCallback)(async e=>{if("all"===t){L(!0),O(1);try{let a={...D,search:e||void 0},t=await (0,E.getPeople)(a,{page:1,limit:20});N(t.people),G(t.total),X(t.hasMore)}catch(e){console.error("Search failed:",e)}finally{L(!1)}}},[t,D]);(0,l.useEffect)(()=>{ee.current&&clearTimeout(ee.current);let e=Q||W||J;if(!j&&!e&&"all"===t){er&&(N(er.people),G(er.total),X(er.hasMore)),L(!1);return}if("all"===t)return ee.current=setTimeout(()=>ei(j),300),()=>{ee.current&&clearTimeout(ee.current)}},[j,t,Q,W,J,er,ei]);let eo=async()=>{let e={search:j||void 0,college:Q||void 0,branch:W||void 0,graduationYear:J};K(e),L(!0),O(1);try{let a=await (0,E.getPeople)(e,{page:1,limit:20});N(a.people),G(a.total),X(a.hasMore)}catch(e){console.error("Failed to apply filters:",e)}finally{L(!1),T(!1)}},ec=async()=>{if(R||!z||"all"!==t)return;U(!0);let e=Y+1;try{let a=await (0,E.getPeople)({...D,search:j||void 0},{page:e,limit:20});N(e=>[...e,...a.people]),O(e),X(a.hasMore)}catch(e){console.error("Failed to load more:",e)}finally{U(!1)}};(0,l.useEffect)(()=>(ea.current&&ea.current.disconnect(),ea.current=new IntersectionObserver(e=>{e[0].isIntersecting&&z&&!R&&"all"===t&&ec()},{threshold:.1}),et.current&&ea.current.observe(et.current),()=>{ea.current&&ea.current.disconnect()}),[z,R,t,Y]);let ed=(e,a)=>{let t=t=>t.map(t=>t.id===e?{...t,connectionStatus:a}:t);N(t),C(t),_(t)},eu=(()=>{switch(t){case"suggestions":return w;case"college":return S;default:return v}})(),ex=Q||W||J;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 pb-24",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 bg-white/95 dark:bg-neutral-900/95 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Find People"}),B>0&&"all"===t&&(0,a.jsxs)("span",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[B.toLocaleString()," people"]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4 overflow-x-auto pb-2 -mb-2 scrollbar-hide",children:[(0,a.jsxs)("button",{onClick:()=>r("all"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"all"===t?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,a.jsx)(m.Users,{className:"w-4 h-4"}),"All People"]}),(0,a.jsxs)("button",{onClick:()=>r("suggestions"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"suggestions"===t?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,a.jsx)(b.Sparkles,{className:"w-4 h-4"}),"For You"]}),(0,a.jsxs)("button",{onClick:()=>r("college"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"college"===t?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,a.jsx)(h.GraduationCap,{className:"w-4 h-4"}),"Same College"]}),(0,a.jsxs)("button",{onClick:()=>r("nearby"),className:`flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${"nearby"===t?"bg-blue-500 text-white":"bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:[(0,a.jsx)(p.MapPin,{className:"w-4 h-4"}),"Nearby"]})]}),"all"===t&&(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>k(e.target.value),placeholder:"Search by name, username, college, skills...",className:"w-full pl-10 pr-20 py-3 rounded-xl bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-blue-500 transition-all"}),(0,a.jsxs)("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[j&&(0,a.jsx)("button",{onClick:()=>k(""),className:"p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-neutral-700",children:(0,a.jsx)(x.X,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)("button",{onClick:()=>T(!I),className:`p-2 rounded-full transition-colors ${I||ex?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"hover:bg-gray-200 dark:hover:bg-neutral-700 text-gray-500"}`,children:(0,a.jsx)(u.Filter,{className:"w-4 h-4"})})]})]})]}),(0,a.jsx)(c.AnimatePresence,{children:I&&"all"===t&&(0,a.jsx)(o.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden border-t border-gray-100 dark:border-neutral-800",children:(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[$?.colleges&&$.colleges.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"College"}),(0,a.jsxs)("select",{value:Q,onChange:e=>H(e.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Colleges"}),$.colleges.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),$?.branches&&$.branches.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"Branch"}),(0,a.jsxs)("select",{value:W,onChange:e=>V(e.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Branches"}),$.branches.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),$?.graduationYears&&$.graduationYears.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-neutral-300 mb-2 block",children:"Graduation Year"}),(0,a.jsxs)("select",{value:J||"",onChange:e=>Z(e.target.value?parseInt(e.target.value):void 0),className:"w-full px-4 py-2 rounded-lg bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Years"}),$.graduationYears.sort((e,a)=>a-e).map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:eo,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Apply Filters"}),ex&&(0,a.jsx)("button",{onClick:()=>{H(""),V(""),Z(void 0),K({}),ei(j)},className:"px-4 py-2 bg-gray-100 dark:bg-neutral-800 text-gray-700 dark:text-neutral-300 rounded-lg font-medium hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:"Clear"})]})]})})})]}),(0,a.jsxs)("div",{className:"p-4",children:[ex&&"all"===t&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[Q&&(0,a.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 text-sm rounded-full",children:[(0,a.jsx)(h.GraduationCap,{className:"w-3 h-3"}),Q,(0,a.jsx)("button",{onClick:()=>{H(""),eo()},children:(0,a.jsx)(x.X,{className:"w-3 h-3 ml-1"})})]}),W&&(0,a.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 text-sm rounded-full",children:[W,(0,a.jsx)("button",{onClick:()=>{V(""),eo()},children:(0,a.jsx)(x.X,{className:"w-3 h-3 ml-1"})})]}),J&&(0,a.jsxs)("span",{className:"flex items-center gap-1 px-3 py-1 bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400 text-sm rounded-full",children:["Class of ",J,(0,a.jsx)("button",{onClick:()=>{Z(void 0),eo()},children:(0,a.jsx)(x.X,{className:"w-3 h-3 ml-1"})})]})]}),"nearby"===t&&(0,a.jsx)(M,{}),"nearby"!==t&&A&&(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)(F,{},t))}),"nearby"!==t&&es&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(y.AlertCircle,{className:"w-16 h-16 mx-auto text-red-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Failed to load people"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-neutral-400 max-w-md mx-auto mb-4",children:"Something went wrong. Please try again."}),(0,a.jsx)("button",{onClick:()=>en(),className:"px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors",children:"Retry"})]}),"nearby"!==t&&!A&&!es&&0===eu.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(m.Users,{className:"w-16 h-16 mx-auto text-gray-300 dark:text-neutral-600 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"suggestions"===t?"No suggestions yet":"college"===t?"No colleagues found":j?"No results found":"No people found"}),(0,a.jsx)("p",{className:"text-gray-500 dark:text-neutral-400 max-w-md mx-auto",children:"suggestions"===t?"Complete your profile to get personalized suggestions":"college"===t?"Add your college information to find colleagues":j?"Try a different search term or adjust your filters":"Check back later for new users"})]}),"nearby"!==t&&!A&&eu.length>0&&(0,a.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:eu.map(e=>(0,a.jsx)(P,{person:e,onConnectionChange:ed},e.id))}),"all"===t&&z&&!A&&(0,a.jsx)("div",{ref:et,className:"flex justify-center py-8",children:R?(0,a.jsx)(g.Loader2,{className:"w-6 h-6 animate-spin text-blue-500"}):(0,a.jsxs)("button",{onClick:ec,className:"flex items-center gap-2 px-6 py-2 text-gray-600 dark:text-neutral-400 hover:text-gray-800 dark:hover:text-neutral-200 transition-colors",children:[(0,a.jsx)(f.RefreshCw,{className:"w-4 h-4"}),"Load more"]})})]})]})})}function Y(){let e,l=(0,t.c)(1);return l[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,a.jsx)(r.ProtectedRoute,{children:(0,a.jsx)(q,{})}),l[0]=e):e=l[0],e}e.s(["default",()=>Y],9747)}]);