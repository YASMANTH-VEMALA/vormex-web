{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/posts.ts"],"sourcesContent":["// Posts API - Complete API client for Posts & Feed endpoints\n\nimport apiClient from './client';\nimport type {\n  Post,\n  FeedResponse,\n  Comment,\n  CommentsResponse,\n  MentionUser,\n  MentionNotification,\n} from '@/types/post';\n\n// ============================================\n// Feed Endpoints\n// ============================================\n\n/**\n * Get home feed with cursor-based pagination\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of posts per page (default: 20)\n */\nexport async function getFeed(cursor?: string, limit: number = 20): Promise<FeedResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  return apiClient.get('/posts/feed', { params });\n}\n\n/**\n * Get a single post by ID\n * @param postId - Post ID\n */\nexport async function getPost(postId: string): Promise<Post> {\n  return apiClient.get(`/posts/${postId}`);\n}\n\n// ============================================\n// Post CRUD Endpoints\n// ============================================\n\n/**\n * Create a new post (supports all post types)\n * Uses FormData for file uploads\n */\nexport async function createPost(formData: FormData): Promise<Post> {\n  // Content-Type is automatically handled by the request interceptor for FormData\n  return apiClient.post('/posts', formData);\n}\n\n/**\n * Delete a post\n * @param postId - Post ID to delete\n */\nexport async function deletePost(postId: string): Promise<{ success: boolean }> {\n  return apiClient.delete(`/posts/${postId}`);\n}\n\n/**\n * Update a post (content and visibility only)\n * @param postId - Post ID to update\n * @param data - Updated content and/or visibility\n */\nexport async function updatePost(\n  postId: string,\n  data: { content?: string; visibility?: string }\n): Promise<Post> {\n  return apiClient.put(`/posts/${postId}`, data);\n}\n\n// ============================================\n// Engagement Endpoints\n// ============================================\n\n/**\n * Toggle like on a post\n * @param postId - Post ID\n */\nexport async function toggleLike(postId: string): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/like`);\n}\n\n/**\n * Vote on a poll\n * @param postId - Post ID\n * @param optionId - Poll option ID\n */\nexport async function votePoll(postId: string, optionId: string): Promise<{ success: boolean; pollOptions: any[] }> {\n  return apiClient.post(`/posts/${postId}/poll/vote`, { optionId });\n}\n\n/**\n * Share post to user(s)\n * @param postId - Post ID\n * @param userId - Target user ID to share with\n */\nexport async function sharePostToUser(postId: string, userId: string): Promise<{ message: string }> {\n  return apiClient.post(`/posts/${postId}/share`, { userId });\n}\n\n/**\n * Track post impression (view)\n * @param postId - Post ID\n * @param locationData - Optional location data\n */\nexport async function trackImpression(\n  postId: string,\n  locationData?: { lat: number; lng: number; city?: string; country?: string }\n): Promise<{ success: boolean }> {\n  return apiClient.post(`/posts/${postId}/impression`, locationData);\n}\n\n// ============================================\n// Comments Endpoints\n// ============================================\n\n/**\n * Get comments for a post\n * @param postId - Post ID\n * @param parentId - Optional parent comment ID for replies\n * @param page - Page number\n * @param limit - Comments per page\n */\nexport async function getComments(\n  postId: string,\n  parentId?: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<CommentsResponse> {\n  const params: Record<string, any> = { page, limit };\n  if (parentId) params.parentId = parentId;\n  return apiClient.get(`/posts/${postId}/comments`, { params });\n}\n\n/**\n * Create a comment on a post\n * Note: This is handled via WebSocket for real-time updates\n * This is a fallback HTTP endpoint\n */\nexport async function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): Promise<Comment> {\n  return apiClient.post(`/posts/${postId}/comments`, {\n    content,\n    parentId,\n    mentions,\n  });\n}\n\n/**\n * Toggle like on a comment\n * Note: This is handled via WebSocket for real-time updates\n */\nexport async function toggleCommentLike(\n  postId: string,\n  commentId: string\n): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/comments/${commentId}/like`);\n}\n\n// ============================================\n// Mention Endpoints\n// ============================================\n\n/**\n * Search users for @mention autocomplete\n * @param query - Search query\n */\nexport async function searchUsersForMention(query: string): Promise<MentionUser[]> {\n  const res = await apiClient.get('/mentions/search', { params: { q: query } });\n  return (res as { users?: MentionUser[] }).users ?? [];\n}\n\n/**\n * Get unread mentions\n */\nexport async function getUnreadMentions(): Promise<MentionNotification[]> {\n  return apiClient.get('/mentions/unread');\n}\n\n/**\n * Get unread mention count\n */\nexport async function getUnreadMentionCount(): Promise<{ count: number }> {\n  return apiClient.get('/mentions/count');\n}\n\n/**\n * Mark mentions as read\n * @param mentionIds - Array of mention IDs to mark as read\n */\nexport async function markMentionsAsRead(mentionIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/mentions/read', { mentionIds });\n}\n\n// ============================================\n// Upload Endpoints\n// ============================================\n\n/**\n * Upload avatar image\n * @param file - Image file\n */\nexport async function uploadAvatar(file: File): Promise<{ avatarUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/avatar', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload banner image\n * @param file - Image file\n */\nexport async function uploadBanner(file: File): Promise<{ bannerUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/banner', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload certificate/document image\n * @param file - Image file\n */\nexport async function uploadCertificate(file: File): Promise<{ certificateUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/certificate', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload project image\n * @param file - Image file\n */\nexport async function uploadProjectImage(file: File): Promise<{ imageUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/project', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Delete an uploaded file\n * @param fileUrl - URL of file to delete\n * @param type - Type of file (avatar, banner, post)\n */\nexport async function deleteUpload(fileUrl: string, type: 'avatar' | 'banner' | 'post'): Promise<{ success: boolean }> {\n  return apiClient.delete('/upload', { data: { fileUrl, type } });\n}\n\n// ============================================\n// Location Endpoints\n// ============================================\n\n/**\n * Update user location\n */\nexport async function updateLocation(\n  lat: number,\n  lng: number,\n  accuracy?: number,\n  activity?: string\n): Promise<any> {\n  return apiClient.post('/location/update', { lat, lng, accuracy, activity });\n}\n\n/**\n * Get current user's location\n */\nexport async function getMyLocation(): Promise<any> {\n  return apiClient.get('/location/me');\n}\n\n/**\n * Get nearby users\n * @param radius - Search radius in km (default: 50)\n * @param limit - Max users to return (default: 20)\n */\nexport async function getNearbyUsers(radius?: number, limit?: number): Promise<any[]> {\n  const params: Record<string, any> = {};\n  if (radius) params.radius = radius;\n  if (limit) params.limit = limit;\n  return apiClient.get('/location/nearby', { params });\n}\n\n/**\n * Update location settings\n */\nexport async function updateLocationSettings(settings: {\n  locationPermission?: boolean;\n  shareLocationPublic?: boolean;\n}): Promise<{ message: string }> {\n  return apiClient.put('/location/settings', settings);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/saved.ts"],"sourcesContent":["import apiClient from './client';\nimport type { Post } from '@/types/post';\n\nexport interface SavedPostsResponse {\n  posts: (Post & { savedAt: string })[];\n  pagination: {\n    page: number;\n    limit: number;\n    totalCount: number;\n    totalPages: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface ToggleSaveResponse {\n  message: string;\n  saved: boolean;\n  savesCount: number;\n}\n\n// Get all saved posts\nexport const getSavedPosts = async (page = 1, limit = 10): Promise<SavedPostsResponse> => {\n  const response = await apiClient.get('/saved', {\n    params: { page, limit },\n  });\n  return response.data;\n};\n\n// Toggle save status\nexport const toggleSavePost = async (postId: string): Promise<ToggleSaveResponse> => {\n  const response = await apiClient.post(`/saved/${postId}/toggle`);\n  return response.data;\n};\n\n// Save a post\nexport const savePost = async (postId: string): Promise<{ message: string }> => {\n  const response = await apiClient.post(`/saved/${postId}`);\n  return response.data;\n};\n\n// Unsave a post\nexport const unsavePost = async (postId: string): Promise<{ message: string }> => {\n  const response = await apiClient.delete(`/saved/${postId}`);\n  return response.data;\n};\n\n// Check if post is saved\nexport const checkPostSaved = async (postId: string): Promise<{ saved: boolean }> => {\n  const response = await apiClient.get(`/saved/${postId}/check`);\n  return response.data;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAqBO,MAAM,gBAAgB,OAAO,OAAO,CAAC,EAAE,QAAQ,EAAE;IACtD,MAAM,WAAW,MAAM,yIAAS,CAAC,GAAG,CAAC,UAAU;QAC7C,QAAQ;YAAE;YAAM;QAAM;IACxB;IACA,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,iBAAiB,OAAO;IACnC,MAAM,WAAW,MAAM,yIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,OAAO,CAAC;IAC/D,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,WAAW,OAAO;IAC7B,MAAM,WAAW,MAAM,yIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ;IACxD,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,aAAa,OAAO;IAC/B,MAAM,WAAW,MAAM,yIAAS,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ;IAC1D,OAAO,SAAS,IAAI;AACtB;AAGO,MAAM,iBAAiB,OAAO;IACnC,MAAM,WAAW,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,OAAO,MAAM,CAAC;IAC7D,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/reports.ts"],"sourcesContent":["import apiClient from './client';\n\nexport interface ReportReason {\n  value: string;\n  label: string;\n  description: string;\n}\n\nexport interface ReportResponse {\n  message: string;\n  reportId: string;\n}\n\nexport interface MyReport {\n  id: string;\n  reportType: 'POST' | 'CHAT' | 'USER' | 'COMMENT' | 'GROUP';\n  reason: string;\n  description: string | null;\n  status: 'PENDING' | 'UNDER_REVIEW' | 'RESOLVED' | 'DISMISSED';\n  actionTaken: string;\n  createdAt: string;\n  reviewedAt: string | null;\n  post: {\n    id: string;\n    content: string;\n    type: string;\n  } | null;\n  reportedUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage: string | null;\n  } | null;\n}\n\nexport interface ReportRequest {\n  reason: string;\n  description?: string;\n}\n\nexport interface ChatReportRequest extends ReportRequest {\n  reportedUserId: string;\n}\n\nexport const reportAPI = {\n  // Get available report reasons\n  getReasons: async (): Promise<{ reasons: ReportReason[] }> => {\n    return apiClient.get('/reports/reasons');\n  },\n\n  // Report a post\n  reportPost: async (postId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/post/${postId}`, data);\n  },\n\n  // Report a comment\n  reportComment: async (commentId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/comment/${commentId}`, data);\n  },\n\n  // Report a user in chat\n  reportChatUser: async (conversationId: string, data: ChatReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/chat/${conversationId}`, data);\n  },\n\n  // Report a user profile\n  reportUser: async (userId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/user/${userId}`, data);\n  },\n\n  // Report a group\n  reportGroup: async (groupId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/group/${groupId}`, data);\n  },\n\n  // Get user's own reports\n  getMyReports: async (page = 1, limit = 10): Promise<{\n    reports: MyReport[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n    };\n  }> => {\n    return apiClient.get(`/reports/my-reports?page=${page}&limit=${limit}`);\n  },\n};\n"],"names":[],"mappings":";;;;AAAA;;AA4CO,MAAM,YAAY;IACvB,+BAA+B;IAC/B,YAAY;QACV,OAAO,yIAAS,CAAC,GAAG,CAAC;IACvB;IAEA,gBAAgB;IAChB,YAAY,OAAO,QAAgB;QACjC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,mBAAmB;IACnB,eAAe,OAAO,WAAmB;QACvC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,WAAW,EAAE;IACzD;IAEA,wBAAwB;IACxB,gBAAgB,OAAO,gBAAwB;QAC7C,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,gBAAgB,EAAE;IAC3D;IAEA,wBAAwB;IACxB,YAAY,OAAO,QAAgB;QACjC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,iBAAiB;IACjB,aAAa,OAAO,SAAiB;QACnC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,SAAS,EAAE;IACrD;IAEA,yBAAyB;IACzB,cAAc,OAAO,OAAO,CAAC,EAAE,QAAQ,EAAE;QASvC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,KAAK,OAAO,EAAE,OAAO;IACxE;AACF"}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/stories.ts"],"sourcesContent":["import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport type StoryMediaType = 'IMAGE' | 'VIDEO' | 'TEXT';\nexport type StoryCategory = 'GENERAL' | 'DAY_AT_WORK' | 'LEARNING' | 'ACHIEVEMENT' | 'PROJECT' | 'EVENT' | 'BEHIND_SCENES' | 'TIPS' | 'QNA';\nexport type StoryVisibility = 'PUBLIC' | 'CONNECTIONS' | 'CLOSE_FRIENDS';\n\nexport interface StoryAuthor {\n  id: string;\n  name: string;\n  username: string;\n  profileImage: string | null;\n  headline?: string | null;\n  isVerified?: boolean;\n}\n\nexport interface Story {\n  id: string;\n  mediaUrl: string;\n  mediaType: StoryMediaType;\n  thumbnailUrl?: string | null;\n  duration: number;\n  category: StoryCategory;\n  backgroundColor?: string | null;\n  textContent?: string | null;\n  textPosition?: { x: number; y: number } | null;\n  textStyle?: { fontSize?: number; fontWeight?: string; color?: string } | null;\n  stickers?: any[] | null;\n  filters?: string | null;\n  musicUrl?: string | null;\n  musicTitle?: string | null;\n  musicArtist?: string | null;\n  linkUrl?: string | null;\n  linkTitle?: string | null;\n  visibility: StoryVisibility;\n  viewsCount: number;\n  reactionsCount: number;\n  repliesCount?: number;\n  isViewed: boolean;\n  userReaction?: string | null;\n  isOwn?: boolean;\n  expiresAt: string;\n  createdAt: string;\n}\n\nexport interface StoryGroup {\n  user: StoryAuthor;\n  stories: Story[];\n  hasUnviewed: boolean;\n  lastStoryAt: string;\n  isOwnStory: boolean;\n}\n\nexport interface StoryHighlight {\n  id: string;\n  title: string;\n  coverImage: string | null;\n  emoji?: string | null;\n  storiesCount: number;\n  isPublic: boolean;\n  createdAt: string;\n}\n\nexport interface StoryViewer {\n  id: string;\n  user: StoryAuthor;\n  viewedAt: string;\n  duration?: number | null;\n}\n\nexport interface StoryReply {\n  id: string;\n  content: string;\n  mediaUrl?: string | null;\n  author: StoryAuthor;\n  createdAt: string;\n}\n\n// ============================================\n// Story CRUD\n// ============================================\n\nexport interface CreateStoryInput {\n  mediaUrl?: string;\n  mediaType?: StoryMediaType;\n  thumbnailUrl?: string;\n  duration?: number;\n  category?: StoryCategory;\n  backgroundColor?: string;\n  textContent?: string;\n  textPosition?: { x: number; y: number };\n  textStyle?: { fontSize?: number; fontWeight?: string; color?: string };\n  stickers?: any[];\n  filters?: string;\n  musicUrl?: string;\n  musicTitle?: string;\n  musicArtist?: string;\n  linkUrl?: string;\n  linkTitle?: string;\n  visibility?: StoryVisibility;\n  mentions?: string[];\n}\n\nexport const createStory = async (data: CreateStoryInput): Promise<{ message: string; story: Story }> => {\n  // apiClient interceptor already returns response.data\n  return apiClient.post('/stories', data);\n};\n\n// Create story with file upload\nexport const createStoryWithMedia = async (formData: FormData): Promise<{ message: string; story: Story }> => {\n  // apiClient interceptor already returns response.data\n  return apiClient.post('/stories', formData, {\n    headers: {\n      'Content-Type': 'multipart/form-data',\n    },\n  });\n};\n\nexport const getStoriesFeed = async (): Promise<{ storyGroups: StoryGroup[] }> => {\n  try {\n    // apiClient interceptor already returns response.data, so this IS the data\n    const response = await apiClient.get('/stories/feed');\n    const data = response.data || response;\n    console.log('üìñ Stories API raw response:', data);\n    \n    // Ensure we always return the expected structure\n    if (data && Array.isArray(data.storyGroups)) {\n      return { storyGroups: data.storyGroups };\n    }\n    \n    // If response is already an array, wrap it\n    if (Array.isArray(data)) {\n      return { storyGroups: data };\n    }\n    \n    // Default empty array\n    return { storyGroups: [] };\n  } catch (error) {\n    console.error('üìñ Stories API error:', error);\n    throw error;\n  }\n};\n\nexport const getStory = async (storyId: string): Promise<{ story: Story & { isOwn: boolean } }> => {\n  return apiClient.get(`/stories/${storyId}`);\n};\n\nexport const getMyStories = async (includeExpired = false): Promise<{ stories: Story[] }> => {\n  return apiClient.get('/stories/me', {\n    params: { includeExpired },\n  });\n};\n\nexport const deleteStory = async (storyId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/stories/${storyId}`);\n};\n\nexport const getUserStories = async (userId: string): Promise<{\n  hasStories: boolean;\n  user?: StoryAuthor;\n  hasUnviewed?: boolean;\n  stories?: Story[];\n}> => {\n  return apiClient.get(`/stories/user/${userId}`);\n};\n\n// ============================================\n// Story Viewing\n// ============================================\n\nexport const viewStory = async (storyId: string, duration?: number): Promise<{ message: string; viewsCount: number }> => {\n  return apiClient.post(`/stories/${storyId}/view`, { duration });\n};\n\nexport const getStoryViewers = async (\n  storyId: string,\n  cursor?: string,\n  limit = 20\n): Promise<{\n  viewers: StoryViewer[];\n  nextCursor: string | null;\n  hasMore: boolean;\n}> => {\n  return apiClient.get(`/stories/${storyId}/viewers`, {\n    params: { cursor, limit },\n  });\n};\n\n// ============================================\n// Story Reactions\n// ============================================\n\nexport const reactToStory = async (\n  storyId: string,\n  reactionType: string\n): Promise<{ message: string; reactionType: string; reactionsCount: number }> => {\n  return apiClient.post(`/stories/${storyId}/react`, { reactionType });\n};\n\nexport const removeReaction = async (storyId: string): Promise<{ message: string; reactionsCount: number }> => {\n  return apiClient.delete(`/stories/${storyId}/react`);\n};\n\n// ============================================\n// Story Replies\n// ============================================\n\nexport const replyToStory = async (\n  storyId: string,\n  content: string,\n  mediaUrl?: string\n): Promise<{ message: string; reply: StoryReply }> => {\n  return apiClient.post(`/stories/${storyId}/reply`, { content, mediaUrl });\n};\n\nexport const getStoryReplies = async (storyId: string): Promise<{ replies: StoryReply[] }> => {\n  return apiClient.get(`/stories/${storyId}/replies`);\n};\n\n// ============================================\n// Highlights\n// ============================================\n\nexport interface CreateHighlightInput {\n  title: string;\n  coverImage?: string;\n  emoji?: string;\n  storyIds?: string[];\n}\n\nexport const createHighlight = async (data: CreateHighlightInput): Promise<{ message: string; highlight: StoryHighlight }> => {\n  return apiClient.post('/stories/highlights', data);\n};\n\nexport const getUserHighlights = async (userId: string): Promise<{ highlights: StoryHighlight[] }> => {\n  return apiClient.get(`/stories/highlights/user/${userId}`);\n};\n\nexport const getHighlightStories = async (highlightId: string): Promise<{\n  highlight: StoryHighlight & { user: StoryAuthor; stories: Story[] };\n}> => {\n  return apiClient.get(`/stories/highlights/${highlightId}`);\n};\n\nexport const updateHighlight = async (\n  highlightId: string,\n  data: Partial<CreateHighlightInput>\n): Promise<{ message: string; highlight: StoryHighlight }> => {\n  return apiClient.patch(`/stories/highlights/${highlightId}`, data);\n};\n\nexport const deleteHighlight = async (highlightId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/stories/highlights/${highlightId}`);\n};\n\nexport const addStoryToHighlight = async (highlightId: string, storyId: string): Promise<{ message: string }> => {\n  return apiClient.post(`/stories/highlights/${highlightId}/stories/${storyId}`);\n};\n\nexport const removeStoryFromHighlight = async (highlightId: string, storyId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/stories/highlights/${highlightId}/stories/${storyId}`);\n};\n\n// ============================================\n// Archive\n// ============================================\n\nexport const archiveStory = async (storyId: string): Promise<{ message: string }> => {\n  return apiClient.post(`/stories/${storyId}/archive`);\n};\n\nexport const getArchivedStories = async (): Promise<{ stories: Story[] }> => {\n  return apiClient.get('/stories/archive');\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AA0GO,MAAM,cAAc,OAAO;IAChC,sDAAsD;IACtD,OAAO,yIAAS,CAAC,IAAI,CAAC,YAAY;AACpC;AAGO,MAAM,uBAAuB,OAAO;IACzC,sDAAsD;IACtD,OAAO,yIAAS,CAAC,IAAI,CAAC,YAAY,UAAU;QAC1C,SAAS;YACP,gBAAgB;QAClB;IACF;AACF;AAEO,MAAM,iBAAiB;IAC5B,IAAI;QACF,2EAA2E;QAC3E,MAAM,WAAW,MAAM,yIAAS,CAAC,GAAG,CAAC;QACrC,MAAM,OAAO,SAAS,IAAI,IAAI;QAC9B,QAAQ,GAAG,CAAC,gCAAgC;QAE5C,iDAAiD;QACjD,IAAI,QAAQ,MAAM,OAAO,CAAC,KAAK,WAAW,GAAG;YAC3C,OAAO;gBAAE,aAAa,KAAK,WAAW;YAAC;QACzC;QAEA,2CAA2C;QAC3C,IAAI,MAAM,OAAO,CAAC,OAAO;YACvB,OAAO;gBAAE,aAAa;YAAK;QAC7B;QAEA,sBAAsB;QACtB,OAAO;YAAE,aAAa,EAAE;QAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;AACF;AAEO,MAAM,WAAW,OAAO;IAC7B,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,SAAS;AAC5C;AAEO,MAAM,eAAe,OAAO,iBAAiB,KAAK;IACvD,OAAO,yIAAS,CAAC,GAAG,CAAC,eAAe;QAClC,QAAQ;YAAE;QAAe;IAC3B;AACF;AAEO,MAAM,cAAc,OAAO;IAChC,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,SAAS;AAC/C;AAEO,MAAM,iBAAiB,OAAO;IAMnC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,cAAc,EAAE,QAAQ;AAChD;AAMO,MAAM,YAAY,OAAO,SAAiB;IAC/C,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,KAAK,CAAC,EAAE;QAAE;IAAS;AAC/D;AAEO,MAAM,kBAAkB,OAC7B,SACA,QACA,QAAQ,EAAE;IAMV,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,QAAQ,CAAC,EAAE;QAClD,QAAQ;YAAE;YAAQ;QAAM;IAC1B;AACF;AAMO,MAAM,eAAe,OAC1B,SACA;IAEA,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,MAAM,CAAC,EAAE;QAAE;IAAa;AACpE;AAEO,MAAM,iBAAiB,OAAO;IACnC,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,QAAQ,MAAM,CAAC;AACrD;AAMO,MAAM,eAAe,OAC1B,SACA,SACA;IAEA,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,MAAM,CAAC,EAAE;QAAE;QAAS;IAAS;AACzE;AAEO,MAAM,kBAAkB,OAAO;IACpC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,QAAQ,CAAC;AACpD;AAaO,MAAM,kBAAkB,OAAO;IACpC,OAAO,yIAAS,CAAC,IAAI,CAAC,uBAAuB;AAC/C;AAEO,MAAM,oBAAoB,OAAO;IACtC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,QAAQ;AAC3D;AAEO,MAAM,sBAAsB,OAAO;IAGxC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,aAAa;AAC3D;AAEO,MAAM,kBAAkB,OAC7B,aACA;IAEA,OAAO,yIAAS,CAAC,KAAK,CAAC,CAAC,oBAAoB,EAAE,aAAa,EAAE;AAC/D;AAEO,MAAM,kBAAkB,OAAO;IACpC,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,oBAAoB,EAAE,aAAa;AAC9D;AAEO,MAAM,sBAAsB,OAAO,aAAqB;IAC7D,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,YAAY,SAAS,EAAE,SAAS;AAC/E;AAEO,MAAM,2BAA2B,OAAO,aAAqB;IAClE,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,oBAAoB,EAAE,YAAY,SAAS,EAAE,SAAS;AACjF;AAMO,MAAM,eAAe,OAAO;IACjC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ,QAAQ,CAAC;AACrD;AAEO,MAAM,qBAAqB;IAChC,OAAO,yIAAS,CAAC,GAAG,CAAC;AACvB"}},
    {"offset": {"line": 465, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/connections.ts"],"sourcesContent":["import apiClient from './client';\nimport type { PersonCard } from './people';\n\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n// TYPES\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nexport type ConnectionStatus = 'none' | 'pending_sent' | 'pending_received' | 'connected' | 'blocked';\n\nexport interface Connection {\n  id: string;\n  status: 'PENDING' | 'ACCEPTED' | 'REJECTED' | 'BLOCKED';\n  message: string | null;\n  createdAt: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n    profileImage: string | null;\n    headline: string | null;\n    college: string | null;\n  };\n}\n\nexport interface ConnectionsResponse {\n  connections: Connection[];\n  total: number;\n  page: number;\n  totalPages: number;\n  hasMore: boolean;\n}\n\nexport interface ConnectionStatusResponse {\n  status: ConnectionStatus;\n  connectionId?: string;\n  direction?: 'sent' | 'received';\n}\n\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n// API FUNCTIONS\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n/**\n * Send a connection request to another user\n */\nexport async function sendConnectionRequest(\n  receiverId: string,\n  message?: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post('/connections/request', { receiverId, message });\n}\n\n/**\n * Accept a connection request\n */\nexport async function acceptConnectionRequest(\n  connectionId: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post(`/connections/${connectionId}/accept`);\n}\n\n/**\n * Reject a connection request\n */\nexport async function rejectConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.post(`/connections/${connectionId}/reject`);\n}\n\n/**\n * Cancel a sent connection request\n */\nexport async function cancelConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}/cancel`);\n}\n\n/**\n * Remove an existing connection\n */\nexport async function removeConnection(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}`);\n}\n\n/**\n * Get all connections for current user\n */\nexport async function getConnections(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get all connections for a specific user\n */\nexport async function getUserConnections(\n  userId: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections/user/${userId}?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get pending connection requests (received)\n */\nexport async function getPendingRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/pending?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get sent connection requests\n */\nexport async function getSentRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/sent?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get connection status with a specific user\n */\nexport async function getConnectionStatus(\n  userId: string\n): Promise<ConnectionStatusResponse> {\n  return apiClient.get(`/connections/status/${userId}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AA6CO,eAAe,sBACpB,UAAkB,EAClB,OAAgB;IAEhB,OAAO,yIAAS,CAAC,IAAI,CAAC,wBAAwB;QAAE;QAAY;IAAQ;AACtE;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC/D;AAKO,eAAe,iBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,cAAc;AACxD;AAKO,eAAe,eACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,KAAK,OAAO,EAAE,OAAO;AACjE;AAKO,eAAe,mBACpB,MAAc,EACd,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,MAAM,EAAE,KAAK,OAAO,EAAE,OAAO;AAChF;AAKO,eAAe,mBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,OAAO,EAAE,OAAO;IAC5F,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,gBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,KAAK,OAAO,EAAE,OAAO;IACzF,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,oBACpB,MAAc;IAEd,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,QAAQ;AACtD"}},
    {"offset": {"line": 545, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/variable-rewards.ts"],"sourcesContent":["import apiClient from './client';\n\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n// VARIABLE REWARDS TYPES\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nexport type RewardCardType =\n  | 'MATCH_BURST'\n  | 'TRENDING'\n  | 'HIDDEN_GEM'\n  | 'MILESTONE'\n  | 'OPPORTUNITY'\n  | 'SOCIAL_PROOF'\n  | 'SURPRISE_BOOST'\n  | 'CONNECTION_UPDATE';\n\nexport interface MatchUser {\n  id: string;\n  name: string;\n  username: string;\n  profileImage: string | null;\n  college: string | null;\n  branch: string | null;\n  headline: string | null;\n  interests: string[];\n}\n\nexport interface TrendingData {\n  hasSpike: boolean;\n  recentViews: number;\n  previousViews: number;\n  increasePercent: number;\n}\n\nexport interface MilestoneData {\n  id: string;\n  type: string;\n  value: number;\n  title: string;\n  description: string;\n  icon: string;\n  unlockedAt: string;\n}\n\nexport interface OpportunityData {\n  id: string;\n  title: string;\n  type: string;\n  company: string;\n  location: string;\n  createdAt: string;\n}\n\nexport interface ViewerData {\n  id: string;\n  viewId: string;\n  name: string;\n  username: string;\n  profileImage: string | null;\n  college: string | null;\n  viewedAt: string;\n}\n\nexport interface SurpriseBoostData {\n  eligible: boolean;\n  activeDays: number;\n  xpAmount: number;\n  reason: string;\n}\n\nexport interface ConnectionUpdateData {\n  hasUpdates: boolean;\n  recentAccepts: Array<{\n    id: string;\n    name: string;\n    username: string;\n    profileImage: string | null;\n    acceptedAt: string;\n  }>;\n  newRequests: Array<{\n    id: string;\n    name: string;\n    username: string;\n    profileImage: string | null;\n    sentAt: string;\n  }>;\n}\n\nexport interface RewardDataResponse {\n  hasNewMatches: boolean;\n  matches: MatchUser[];\n  hasTrendingSpike: boolean;\n  trendingData: TrendingData | null;\n  hasHiddenGems: boolean;\n  hiddenGems: MatchUser[];\n  hasNewMilestones: boolean;\n  milestones: MilestoneData[];\n  hasNewOpportunities: boolean;\n  opportunities: OpportunityData[];\n  hasNewViewers: boolean;\n  viewers: ViewerData[];\n  canGetSurpriseBoost: boolean;\n  surpriseBoostData: SurpriseBoostData | null;\n  hasConnectionUpdates: boolean;\n  connectionUpdates: ConnectionUpdateData | null;\n}\n\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n// API FUNCTIONS\n// ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\nexport async function getRewardData(): Promise<RewardDataResponse> {\n  const res = await apiClient.get('/feed/reward-data');\n  return res.data.data;\n}\n\nexport async function markRewardShown(cardType: RewardCardType, itemIds: string[]): Promise<void> {\n  await apiClient.post('/feed/mark-shown', { cardType, itemIds });\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AA+GO,eAAe;IACpB,MAAM,MAAM,MAAM,yIAAS,CAAC,GAAG,CAAC;IAChC,OAAO,IAAI,IAAI,CAAC,IAAI;AACtB;AAEO,eAAe,gBAAgB,QAAwB,EAAE,OAAiB;IAC/E,MAAM,yIAAS,CAAC,IAAI,CAAC,oBAAoB;QAAE;QAAU;IAAQ;AAC/D"}},
    {"offset": {"line": 570, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/notifications.ts"],"sourcesContent":["// Notifications API - Complete API client for Notifications endpoints\n\nimport apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport type NotificationType =\n  | 'POST_LIKE'\n  | 'POST_REACTION'\n  | 'COMMENT'\n  | 'COMMENT_LIKE'\n  | 'MENTION'\n  | 'CONNECTION_REQUEST'\n  | 'CONNECTION_ACCEPTED'\n  | 'POLL_VOTE'\n  | 'POST_SHARE'\n  | 'GROUP_INVITE'\n  | 'GROUP_JOIN_REQUEST'\n  | 'GROUP_JOIN_APPROVED';\n\nexport interface NotificationActor {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n}\n\nexport interface Notification {\n  id: string;\n  type: NotificationType;\n  actor: NotificationActor | null;\n  postId: string | null;\n  commentId: string | null;\n  groupId: string | null;\n  reactionType: string | null;\n  content: string | null;\n  postPreview: string | null;\n  isRead: boolean;\n  createdAt: string;\n}\n\nexport interface NotificationsResponse {\n  notifications: Notification[];\n  nextCursor: string | null;\n  hasMore: boolean;\n}\n\n// ============================================\n// Notification Endpoints\n// ============================================\n\n/**\n * Get notifications for the current user\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of notifications per page (default: 20)\n * @param unreadOnly - Only return unread notifications\n */\nexport async function getNotifications(\n  cursor?: string,\n  limit: number = 20,\n  unreadOnly: boolean = false\n): Promise<NotificationsResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  if (unreadOnly) params.unreadOnly = 'true';\n  return apiClient.get('/notifications', { params });\n}\n\n/**\n * Get unread notification count\n */\nexport async function getUnreadNotificationCount(): Promise<{ count: number }> {\n  return apiClient.get('/notifications/unread-count');\n}\n\n/**\n * Mark specific notifications as read\n * @param notificationIds - Array of notification IDs to mark as read\n */\nexport async function markNotificationsAsRead(notificationIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/notifications/read', { notificationIds });\n}\n\n/**\n * Mark all notifications as read\n */\nexport async function markAllNotificationsAsRead(): Promise<{ success: boolean }> {\n  return apiClient.post('/notifications/read-all');\n}\n"],"names":[],"mappings":"AAAA,sEAAsE;;;;;;;;;;;AAEtE;;AAyDO,eAAe,iBACpB,MAAe,EACf,QAAgB,EAAE,EAClB,aAAsB,KAAK;IAE3B,MAAM,SAA8B;QAAE;IAAM;IAC5C,IAAI,QAAQ,OAAO,MAAM,GAAG;IAC5B,IAAI,YAAY,OAAO,UAAU,GAAG;IACpC,OAAO,yIAAS,CAAC,GAAG,CAAC,kBAAkB;QAAE;IAAO;AAClD;AAKO,eAAe;IACpB,OAAO,yIAAS,CAAC,GAAG,CAAC;AACvB;AAMO,eAAe,wBAAwB,eAAyB;IACrE,OAAO,yIAAS,CAAC,IAAI,CAAC,uBAAuB;QAAE;IAAgB;AACjE;AAKO,eAAe;IACpB,OAAO,yIAAS,CAAC,IAAI,CAAC;AACxB"}},
    {"offset": {"line": 611, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, type FirebaseApp } from 'firebase/app';\nimport { getMessaging, getToken, onMessage, isSupported, type Messaging } from 'firebase/messaging';\n\nconst firebaseConfig = {\n  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\nlet app: FirebaseApp | null = null;\nlet messaging: Messaging | null = null;\n\n/**\n * Initialize Firebase app (singleton, client-side only)\n */\nexport function getFirebaseApp(): FirebaseApp | null {\n  if (typeof window === 'undefined') return null;\n  if (!firebaseConfig.apiKey || !firebaseConfig.projectId) return null;\n\n  if (!app) {\n    app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\n  }\n  return app;\n}\n\n/**\n * Get Firebase Cloud Messaging instance\n * Returns null if not supported (SSR, no permission, missing config)\n */\nexport async function getFirebaseMessaging(): Promise<Messaging | null> {\n  if (typeof window === 'undefined') return null;\n\n  const supported = await isSupported();\n  if (!supported) return null;\n\n  const firebaseApp = getFirebaseApp();\n  if (!firebaseApp) return null;\n\n  if (!messaging) {\n    messaging = getMessaging(firebaseApp);\n  }\n  return messaging;\n}\n\n/**\n * Request notification permission and get FCM token\n * Returns the token string, or null if denied/unsupported\n */\nexport async function requestNotificationToken(): Promise<string | null> {\n  try {\n    const permission = await Notification.requestPermission();\n    if (permission !== 'granted') return null;\n\n    const msg = await getFirebaseMessaging();\n    if (!msg) return null;\n\n    const vapidKey = process.env.NEXT_PUBLIC_FIREBASE_VAPID_KEY;\n    if (!vapidKey) {\n      console.warn('NEXT_PUBLIC_FIREBASE_VAPID_KEY not set');\n      return null;\n    }\n\n    const token = await getToken(msg, {\n      vapidKey,\n      serviceWorkerRegistration: await navigator.serviceWorker.register('/firebase-messaging-sw.js'),\n    });\n\n    return token;\n  } catch (err) {\n    console.error('Failed to get notification token:', err);\n    return null;\n  }\n}\n\n/**\n * Listen for foreground messages\n */\nexport function onForegroundMessage(callback: (payload: any) => void): (() => void) | null {\n  if (typeof window === 'undefined') return null;\n\n  getFirebaseMessaging().then(msg => {\n    if (!msg) return;\n    onMessage(msg, callback);\n  });\n\n  // Firebase onMessage doesn't return a clean unsubscribe for async init,\n  // so we return a no-op. The listener is tied to page lifecycle.\n  return () => {};\n}\n"],"names":[],"mappings":";;;;;;;;;;AAIU;AAJV;AAAA;AACA;AAAA;;;AAEA,MAAM,iBAAiB;IACrB,QAAQ,2KAAO,CAAC,GAAG,CAAC,4BAA4B;IAChD,YAAY,2KAAO,CAAC,GAAG,CAAC,gCAAgC;IACxD,WAAW,2KAAO,CAAC,GAAG,CAAC,+BAA+B;IACtD,eAAe,2KAAO,CAAC,GAAG,CAAC,mCAAmC;IAC9D,mBAAmB,2KAAO,CAAC,GAAG,CAAC,wCAAwC;IACvE,OAAO,2KAAO,CAAC,GAAG,CAAC,2BAA2B;AAChD;AAEA,IAAI,MAA0B;AAC9B,IAAI,YAA8B;AAK3B,SAAS;IACd;;IACA,IAAI,CAAC,eAAe,MAAM,IAAI,CAAC,eAAe,SAAS,EAAE,OAAO;IAEhE,IAAI,CAAC,KAAK;QACR,MAAM,IAAA,8KAAO,IAAG,MAAM,KAAK,IAAI,IAAA,oLAAa,EAAC,kBAAkB,IAAA,8KAAO,GAAE,CAAC,EAAE;IAC7E;IACA,OAAO;AACT;AAMO,eAAe;IACpB;;IAEA,MAAM,YAAY,MAAM,IAAA,wLAAW;IACnC,IAAI,CAAC,WAAW,OAAO;IAEvB,MAAM,cAAc;IACpB,IAAI,CAAC,aAAa,OAAO;IAEzB,IAAI,CAAC,WAAW;QACd,YAAY,IAAA,yLAAY,EAAC;IAC3B;IACA,OAAO;AACT;AAMO,eAAe;IACpB,IAAI;QACF,MAAM,aAAa,MAAM,aAAa,iBAAiB;QACvD,IAAI,eAAe,WAAW,OAAO;QAErC,MAAM,MAAM,MAAM;QAClB,IAAI,CAAC,KAAK,OAAO;QAEjB,MAAM,WAAW,2KAAO,CAAC,GAAG,CAAC,8BAA8B;QAC3D,IAAI,CAAC,UAAU;YACb,QAAQ,IAAI,CAAC;YACb,OAAO;QACT;QAEA,MAAM,QAAQ,MAAM,IAAA,qLAAQ,EAAC,KAAK;YAChC;YACA,2BAA2B,MAAM,UAAU,aAAa,CAAC,QAAQ,CAAC;QACpE;QAEA,OAAO;IACT,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO;IACT;AACF;AAKO,SAAS,oBAAoB,QAAgC;IAClE;;IAEA,uBAAuB,IAAI,CAAC,CAAA;QAC1B,IAAI,CAAC,KAAK;QACV,IAAA,sLAAS,EAAC,KAAK;IACjB;IAEA,wEAAwE;IACxE,gEAAgE;IAChE,OAAO,KAAO;AAChB"}},
    {"offset": {"line": 698, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/hooks/useRewards.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback } from 'react';\nimport { getStreaks, getWeeklyGoals, type StreakData, type WeeklyGoals } from '@/lib/api/engagement';\nimport { type RewardData } from '@/components/engagement/RewardPopup';\n\n/**\n * useRewards - Hook that checks for milestone achievements and queues reward popups\n * Mirrors Android's FeedRewardRepository logic\n */\n\nconst REWARDS_SHOWN_KEY = 'vormex_rewards_shown';\n\nfunction getShownRewards(): Set<string> {\n  try {\n    const stored = localStorage.getItem(REWARDS_SHOWN_KEY);\n    return stored ? new Set(JSON.parse(stored)) : new Set();\n  } catch {\n    return new Set();\n  }\n}\n\nfunction markRewardShown(id: string) {\n  try {\n    const shown = getShownRewards();\n    shown.add(id);\n    // Keep only last 100 to avoid localStorage bloat\n    const arr = Array.from(shown).slice(-100);\n    localStorage.setItem(REWARDS_SHOWN_KEY, JSON.stringify(arr));\n  } catch {\n    // localStorage not available\n  }\n}\n\nexport function useRewards(userId?: string) {\n  const [rewards, setRewards] = useState<RewardData[]>([]);\n\n  useEffect(() => {\n    if (!userId) return;\n\n    const checkMilestones = async () => {\n      const shown = getShownRewards();\n      const newRewards: RewardData[] = [];\n\n      try {\n        const [streakData, goalsData] = await Promise.all([\n          getStreaks().catch(() => null),\n          getWeeklyGoals().catch(() => null),\n        ]);\n\n        // Streak milestones (3, 5, 7, 10, 14, 21, 30, 50, 100 days)\n        if (streakData) {\n          const milestones = [3, 5, 7, 10, 14, 21, 30, 50, 100];\n          const streaks = [\n            { key: 'connection', value: streakData.connectionStreak, label: 'Networking' },\n            { key: 'login', value: streakData.loginStreak, label: 'Login' },\n            { key: 'posting', value: streakData.postingStreak, label: 'Posting' },\n            { key: 'messaging', value: streakData.messagingStreak, label: 'Messaging' },\n          ];\n\n          for (const s of streaks) {\n            for (const m of milestones) {\n              if (s.value === m) {\n                const id = `streak_${s.key}_${m}`;\n                if (!shown.has(id)) {\n                  newRewards.push({\n                    id,\n                    type: 'streak_milestone',\n                    title: `${m}-Day ${s.label} Streak! üî•`,\n                    message: `You've been consistent for ${m} days straight.`,\n                    value: `${m} days`,\n                    subtext: 'Keep it going!',\n                    showConfetti: m >= 7,\n                  });\n                }\n              }\n            }\n          }\n        }\n\n        // Weekly goals completed\n        if (goalsData?.isCompleted) {\n          const weekId = `weekly_goals_${new Date().toISOString().slice(0, 10)}`;\n          if (!shown.has(weekId)) {\n            newRewards.push({\n              id: weekId,\n              type: 'weekly_goal_complete',\n              title: 'Weekly Goals Complete! üéØ',\n              message: 'You crushed all your goals this week.',\n              subtext: 'New goals reset next Monday',\n              showConfetti: true,\n            });\n          }\n        }\n\n        // Limit to 2 popups per session\n        setRewards(newRewards.slice(0, 2));\n      } catch (error) {\n        console.error('Failed to check milestones:', error);\n      }\n    };\n\n    // Delay the check to not compete with feed loading\n    const timer = setTimeout(checkMilestones, 3000);\n    return () => clearTimeout(timer);\n  }, [userId]);\n\n  const dismissReward = useCallback((id: string) => {\n    markRewardShown(id);\n    setRewards(prev => prev.filter(r => r.id !== id));\n  }, []);\n\n  return { rewards, dismissReward };\n}\n"],"names":["useState","useEffect","useCallback","getStreaks","getWeeklyGoals","StreakData","WeeklyGoals","RewardData","REWARDS_SHOWN_KEY","getShownRewards","Set","stored","localStorage","getItem","JSON","parse","markRewardShown","id","shown","add","arr","Array","from","slice","setItem","stringify","useRewards","userId","rewards","setRewards","checkMilestones","newRewards","streakData","goalsData","Promise","all","catch","milestones","streaks","key","value","connectionStreak","label","loginStreak","postingStreak","messagingStreak","s","m","has","push","type","title","message","subtext","showConfetti","isCompleted","weekId","Date","toISOString","error","console","timer","setTimeout","clearTimeout","dismissReward","prev","filter","r"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 857, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/hooks/useVariableRewards.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport {\n  getRewardData,\n  markRewardShown,\n  type RewardDataResponse,\n  type RewardCardType,\n} from '@/lib/api/variable-rewards';\n\nexport interface ActiveRewardCard {\n  type: RewardCardType;\n  data: RewardDataResponse;\n  position: number; // insert after this post index\n}\n\n/**\n * useVariableRewards ‚Äî fetches reward data and determines which cards\n * to inject into the feed at variable-ratio positions.\n * Mirrors Android's RewardViewModel reward injection logic.\n */\nexport function useVariableRewards(userId: string | undefined) {\n  const [rewardData, setRewardData] = useState<RewardDataResponse | null>(null);\n  const [activeCards, setActiveCards] = useState<ActiveRewardCard[]>([]);\n  const [shownCardTypes, setShownCardTypes] = useState<Set<string>>(new Set());\n  const fetchedRef = useRef(false);\n\n  const fetchRewards = useCallback(async () => {\n    if (!userId || fetchedRef.current) return;\n    fetchedRef.current = true;\n\n    try {\n      const data = await getRewardData();\n      setRewardData(data);\n\n      // Determine which cards to show (variable-ratio: not all at once)\n      const available: { type: RewardCardType; priority: number }[] = [];\n\n      if (data.hasNewMatches && data.matches.length > 0)\n        available.push({ type: 'MATCH_BURST', priority: 1 });\n      if (data.hasTrendingSpike && data.trendingData?.hasSpike)\n        available.push({ type: 'TRENDING', priority: 2 });\n      if (data.hasHiddenGems && data.hiddenGems.length > 0)\n        available.push({ type: 'HIDDEN_GEM', priority: 3 });\n      if (data.hasNewMilestones && data.milestones.length > 0)\n        available.push({ type: 'MILESTONE', priority: 0 }); // highest priority\n      if (data.hasNewOpportunities && data.opportunities.length > 0)\n        available.push({ type: 'OPPORTUNITY', priority: 5 });\n      if (data.hasNewViewers && data.viewers.length > 0)\n        available.push({ type: 'SOCIAL_PROOF', priority: 4 });\n      if (data.canGetSurpriseBoost && data.surpriseBoostData?.eligible)\n        available.push({ type: 'SURPRISE_BOOST', priority: 0 });\n      if (data.hasConnectionUpdates && data.connectionUpdates?.hasUpdates)\n        available.push({ type: 'CONNECTION_UPDATE', priority: 2 });\n\n      // Sort by priority, pick up to 3 cards per session (variable ratio)\n      available.sort((a, b) => a.priority - b.priority);\n      const maxCards = Math.min(available.length, 3);\n      const selected = available.slice(0, maxCards);\n\n      // Assign positions: after post 3, 7, 12 (variable spacing)\n      const positions = [3, 7, 12];\n      const cards: ActiveRewardCard[] = selected.map((s, i) => ({\n        type: s.type,\n        data,\n        position: positions[i] || positions[positions.length - 1] + (i * 4),\n      }));\n\n      // Check localStorage for already-shown deduplication\n      const shownKey = `rewards_shown_${new Date().toISOString().slice(0, 10)}`;\n      const alreadyShown = new Set<string>(\n        JSON.parse(localStorage.getItem(shownKey) || '[]')\n      );\n      const filtered = cards.filter(c => !alreadyShown.has(c.type));\n      setActiveCards(filtered);\n      setShownCardTypes(alreadyShown);\n    } catch (err) {\n      console.error('Failed to fetch reward data:', err);\n    }\n  }, [userId]);\n\n  useEffect(() => {\n    fetchRewards();\n  }, [fetchRewards]);\n\n  const dismissCard = useCallback(async (type: RewardCardType, itemIds: string[] = []) => {\n    setActiveCards(prev => prev.filter(c => c.type !== type));\n\n    // Persist to localStorage\n    const shownKey = `rewards_shown_${new Date().toISOString().slice(0, 10)}`;\n    const current = new Set<string>(\n      JSON.parse(localStorage.getItem(shownKey) || '[]')\n    );\n    current.add(type);\n    localStorage.setItem(shownKey, JSON.stringify([...current]));\n\n    // Notify backend\n    try {\n      await markRewardShown(type, itemIds);\n    } catch {\n      // silent ‚Äî non-critical\n    }\n  }, []);\n\n  return { rewardData, activeCards, dismissCard };\n}\n"],"names":["useState","useEffect","useCallback","useRef","getRewardData","markRewardShown","RewardDataResponse","RewardCardType","ActiveRewardCard","type","data","position","useVariableRewards","userId","rewardData","setRewardData","activeCards","setActiveCards","shownCardTypes","setShownCardTypes","Set","fetchedRef","fetchRewards","current","available","priority","hasNewMatches","matches","length","push","hasTrendingSpike","trendingData","hasSpike","hasHiddenGems","hiddenGems","hasNewMilestones","milestones","hasNewOpportunities","opportunities","hasNewViewers","viewers","canGetSurpriseBoost","surpriseBoostData","eligible","hasConnectionUpdates","connectionUpdates","hasUpdates","sort","a","b","maxCards","Math","min","selected","slice","positions","cards","map","s","i","shownKey","Date","toISOString","alreadyShown","JSON","parse","localStorage","getItem","filtered","filter","c","has","err","console","error","dismissCard","itemIds","prev","add","setItem","stringify"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 991, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/hooks/usePushNotifications.ts"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useCallback, useRef } from 'react';\nimport { requestNotificationToken, onForegroundMessage } from '@/lib/firebase';\nimport apiClient from '@/lib/api/client';\n\ninterface PushNotificationState {\n  isSupported: boolean;\n  isPermissionGranted: boolean;\n  isTokenRegistered: boolean;\n  isLoading: boolean;\n}\n\n/**\n * usePushNotifications ‚Äî manages web push notification lifecycle\n * 1. Checks browser support\n * 2. Requests permission\n * 3. Gets FCM token\n * 4. Registers token with backend via POST /api/devices/register\n * 5. Listens for foreground messages\n */\nexport function usePushNotifications(userId: string | undefined) {\n  const [state, setState] = useState<PushNotificationState>({\n    isSupported: false,\n    isPermissionGranted: false,\n    isTokenRegistered: false,\n    isLoading: false,\n  });\n  const [foregroundNotification, setForegroundNotification] = useState<any>(null);\n  const registeredRef = useRef(false);\n\n  // Check support on mount\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n\n    const supported = 'Notification' in window && 'serviceWorker' in navigator;\n    const granted = supported && Notification.permission === 'granted';\n\n    setState(prev => ({\n      ...prev,\n      isSupported: supported,\n      isPermissionGranted: granted,\n    }));\n\n    // If already granted + user logged in, register silently\n    if (granted && userId && !registeredRef.current) {\n      registerToken();\n    }\n  }, [userId]);\n\n  // Listen for foreground messages\n  useEffect(() => {\n    if (!state.isPermissionGranted) return;\n\n    const unsubscribe = onForegroundMessage((payload) => {\n      setForegroundNotification(payload);\n\n      // Auto-dismiss after 5s\n      setTimeout(() => setForegroundNotification(null), 5000);\n    });\n\n    return () => {\n      if (unsubscribe) unsubscribe();\n    };\n  }, [state.isPermissionGranted]);\n\n  const registerToken = useCallback(async () => {\n    if (registeredRef.current || state.isLoading) return;\n\n    setState(prev => ({ ...prev, isLoading: true }));\n\n    try {\n      const token = await requestNotificationToken();\n      if (!token) {\n        setState(prev => ({ ...prev, isLoading: false }));\n        return;\n      }\n\n      // Register with backend\n      await apiClient.post('/devices/register', {\n        token,\n        platform: 'web',\n        deviceId: `web-${navigator.userAgent.slice(0, 50)}`,\n      });\n\n      registeredRef.current = true;\n      setState(prev => ({\n        ...prev,\n        isPermissionGranted: true,\n        isTokenRegistered: true,\n        isLoading: false,\n      }));\n\n      // Store in localStorage to avoid re-registering\n      localStorage.setItem('push_token_registered', 'true');\n    } catch (err) {\n      console.error('Push notification registration failed:', err);\n      setState(prev => ({ ...prev, isLoading: false }));\n    }\n  }, [state.isLoading]);\n\n  const requestPermission = useCallback(async () => {\n    if (!state.isSupported) return;\n\n    setState(prev => ({ ...prev, isLoading: true }));\n\n    try {\n      const permission = await Notification.requestPermission();\n      if (permission === 'granted') {\n        setState(prev => ({ ...prev, isPermissionGranted: true }));\n        await registerToken();\n      } else {\n        setState(prev => ({ ...prev, isLoading: false }));\n      }\n    } catch {\n      setState(prev => ({ ...prev, isLoading: false }));\n    }\n  }, [state.isSupported, registerToken]);\n\n  const dismissNotification = useCallback(() => {\n    setForegroundNotification(null);\n  }, []);\n\n  return {\n    ...state,\n    foregroundNotification,\n    requestPermission,\n    dismissNotification,\n  };\n}\n"],"names":["useState","useEffect","useCallback","useRef","requestNotificationToken","onForegroundMessage","apiClient","PushNotificationState","isSupported","isPermissionGranted","isTokenRegistered","isLoading","usePushNotifications","userId","state","setState","foregroundNotification","setForegroundNotification","registeredRef","window","supported","navigator","granted","Notification","permission","prev","current","registerToken","unsubscribe","payload","setTimeout","token","post","platform","deviceId","userAgent","slice","localStorage","setItem","err","console","error","requestPermission","dismissNotification"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1167, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { Feed } from '@/components/feed';\n\nexport default function Home() {\n  return (\n    <ProtectedRoute>\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950\">\n        <Feed />\n      </div>\n    </ProtectedRoute>\n  );\n}\n"],"names":["c","_c","ProtectedRoute","Feed","Home","$","$i","Symbol","for","t0"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,cAAc,QAAQ,kCAAkC;;AACjE,SAASC,IAAI,QAAQ,mBAAmB;AAHxC,YAAY;;;;;AAKG;IAAA,MAAAE,CAAA,OAAAJ,gLAAA,EAAA;IAAA,IAAAI,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAA,IAAAI,EAAA;IAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAEXC,EAAA,iBAAA,6LAAC,iKAAc;oCACb,6LAAA,GAEM;gBAFS,SAA6C,EAA7C,6CAA6C;0BAC1D,2MAAC,6IAAI,GACP,EAFA,GAEM,CACR,EAJC,cAAc,CAIE;;;;;;;;;;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAJ,CAAA,CAAA,EAAA;IAAA;IAAA,OAJjBI,EAIiB;AAAA;KANNL,KAAA","ignoreList":[]}}]
}