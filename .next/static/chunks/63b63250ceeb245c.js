(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,28318,83220,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(46932),l=e.i(22016),s=e.i(417),n=e.i(94983),o=e.i(62031),i=e.i(71930),c=e.i(41071),d=e.i(78917),u=e.i(78583),x=e.i(31343),m=e.i(95242),h=e.i(82373),g=e.i(35116),p=e.i(73375),b=e.i(63059),f=e.i(27612),y=e.i(5899),v=e.i(74886),j=e.i(88699),k=e.i(37727),N=e.i(94913),w=e.i(6499),C=e.i(61238);let S=async(e,t=20)=>{let r={limit:t};e&&(r.cursor=e);let a=await C.default.get("/saved",{params:r});return{posts:a.posts||[],nextCursor:a.nextCursor??null,hasMore:a.hasMore??!1,pagination:{page:1,limit:t,totalCount:a.posts?.length??0,totalPages:a.hasMore?2:1,hasMore:a.hasMore??!1}}},T=async e=>C.default.post(`/saved/${e}/toggle`);e.s(["getSavedPosts",0,S,"toggleSavePost",0,T],83220);var E=e.i(13751),I=e.i(52962),U=e.i(932),L=e.i(88653),P=e.i(30731),$=e.i(90597),O=e.i(41240),R=e.i(18348);let A=[{type:"LIKE",icon:s.ThumbsUp,label:"Like",color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",hoverScale:1.3},{type:"CELEBRATE",icon:P.PartyPopper,label:"Celebrate",color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",hoverScale:1.3},{type:"SUPPORT",icon:$.Heart,label:"Support",color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",hoverScale:1.3},{type:"INSIGHTFUL",icon:O.Lightbulb,label:"Insightful",color:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",hoverScale:1.3},{type:"CURIOUS",icon:R.HelpCircle,label:"Curious",color:"text-pink-600",bgColor:"bg-pink-100 dark:bg-pink-900/30",hoverScale:1.3}];function z(e){return A.find(t=>t.type===e)||A[0]}function M(e){let r,a,l,s=(0,U.c)(9),{type:n,size:o,className:i}=e,c=void 0===o?16:o;s[0]!==n?(r=z(n),s[0]=n,s[1]=r):r=s[1];let d=r,u=d.icon,x=`inline-flex items-center justify-center rounded-full p-1 ${d.bgColor} ${void 0===i?"":i}`,m=`${d.color}`;return s[2]!==u||s[3]!==c||s[4]!==m?(a=(0,t.jsx)(u,{className:m,size:c}),s[2]=u,s[3]=c,s[4]=m,s[5]=a):a=s[5],s[6]!==x||s[7]!==a?(l=(0,t.jsx)("div",{className:x,children:a}),s[6]=x,s[7]=a,s[8]=l):l=s[8],l}function D(e){let r,l,s=(0,U.c)(7),{isOpen:n,currentReaction:o,onSelect:i,onClose:c}=e;return s[0]!==o||s[1]!==n||s[2]!==c||s[3]!==i?(r=n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:c}),(0,t.jsx)(a.motion.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},transition:{type:"spring",damping:25,stiffness:400},className:"absolute bottom-full left-0 mb-2 z-50",children:(0,t.jsx)("div",{className:"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1",children:A.map(e=>{let r=e.icon,l=o===e.type;return(0,t.jsxs)(a.motion.button,{whileHover:{scale:e.hoverScale,y:-8},whileTap:{scale:.95},onClick:()=>{i(e.type),c()},className:`relative p-2 rounded-full transition-colors group ${l?e.bgColor:"hover:bg-gray-100 dark:hover:bg-neutral-700"}`,title:e.label,children:[(0,t.jsx)(r,{className:`w-6 h-6 transition-transform ${l?e.color:"text-gray-500 dark:text-neutral-400"} group-hover:${e.color}`}),(0,t.jsx)(a.motion.span,{initial:{opacity:0,y:5},whileHover:{opacity:1,y:0},className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none",children:e.label})]},e.type)})})})]}),s[0]=o,s[1]=n,s[2]=c,s[3]=i,s[4]=r):r=s[4],s[5]!==r?(l=(0,t.jsx)(L.AnimatePresence,{children:r}),s[5]=r,s[6]=l):l=s[6],l}function F(e){let r,a,l,s,n,o,i,c=(0,U.c)(16),{reactionSummary:d,totalCount:u,onClick:x}=e;if(0===u)return null;if(c[0]!==x||c[1]!==d){let e=d.slice(0,3);l=x,s="flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline",r="flex -space-x-1",a=e.map(_),c[0]=x,c[1]=d,c[2]=r,c[3]=a,c[4]=l,c[5]=s}else r=c[2],a=c[3],l=c[4],s=c[5];return c[6]!==r||c[7]!==a?(n=(0,t.jsx)("div",{className:r,children:a}),c[6]=r,c[7]=a,c[8]=n):n=c[8],c[9]!==u?(o=(0,t.jsx)("span",{children:u}),c[9]=u,c[10]=o):o=c[10],c[11]!==l||c[12]!==s||c[13]!==n||c[14]!==o?(i=(0,t.jsxs)("button",{onClick:l,className:s,children:[n,o]}),c[11]=l,c[12]=s,c[13]=n,c[14]=o,c[15]=i):i=c[15],i}function _(e,r){return(0,t.jsx)(M,{type:e.type,size:14,className:"border-2 border-white dark:border-neutral-900"},e.type)}var B=e.i(36192),H=e.i(42740),K=e.i(31278),V=e.i(57688);function G({isOpen:e,onClose:s,postId:n,totalCount:o}){let[i,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[x,m]=(0,r.useState)("ALL"),[h,g]=(0,r.useState)({LIKE:0,CELEBRATE:0,SUPPORT:0,INSIGHTFUL:0,CURIOUS:0});(0,r.useEffect)(()=>{e&&n&&(async()=>{u(!0);try{let e=await C.default.get(`/posts/${n}/likes`);c(e.likes||[]);let t={LIKE:0,CELEBRATE:0,SUPPORT:0,INSIGHTFUL:0,CURIOUS:0};e.likes?.forEach(e=>{e.reactionType&&void 0!==t[e.reactionType]&&t[e.reactionType]++}),g(t)}catch(e){console.error("Error fetching likes:",e)}finally{u(!1)}})()},[e,n]);let p="ALL"===x?i:i.filter(e=>e.reactionType===x),b=A.filter(e=>h[e.type]>0);return(0,t.jsx)(L.AnimatePresence,{children:e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,className:"fixed inset-0 bg-black/50 z-50"}),(0,t.jsxs)(a.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:400},className:"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Reactions"}),(0,t.jsx)("button",{onClick:s,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,t.jsx)(k.X,{className:"w-5 h-5 text-gray-500 dark:text-neutral-400"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto",children:[(0,t.jsxs)("button",{onClick:()=>m("ALL"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${"ALL"===x?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:["All",(0,t.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full",children:o})]}),b.map(e=>{let r=e.icon,a=h[e.type];return(0,t.jsxs)("button",{onClick:()=>m(e.type),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${x===e.type?`${e.bgColor} ${e.color}`:"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,t.jsx)(r,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full",children:a})]},e.type)})]}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-[50vh]",children:d?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)(K.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})}):0===p.length?(0,t.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-neutral-400",children:"No reactions yet"}):(0,t.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-neutral-800",children:p.map(e=>{let r=z(e.reactionType),a=r.icon;return(0,t.jsxs)(l.default,{href:`/profile/${e.username}`,onClick:s,className:"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700",children:e.profileImage?(0,t.jsx)(V.default,{src:e.profileImage,alt:e.name,width:48,height:48,className:"object-cover w-full h-full"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300",children:e.name.charAt(0).toUpperCase()})}),(0,t.jsx)("div",{className:`absolute -bottom-1 -right-1 p-1 rounded-full ${r.bgColor} border-2 border-white dark:border-neutral-900`,children:(0,t.jsx)(a,{className:`w-3 h-3 ${r.color}`})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.name}),e.headline&&(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 truncate",children:e.headline})]})]},e.id)})})})]})]})})}var X=e.i(55436),J=e.i(14764),W=e.i(83079),Y=e.i(22651);function q({isOpen:e,onClose:a,postId:l,postPreview:s,postAuthor:n,postMediaUrl:o}){let[i,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),[h,g]=(0,r.useState)(new Set),[p,b]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),N=`${window.location.origin}/post/${l}`,C=(0,r.useCallback)(async()=>{try{let e=await (0,W.getConnections)(1,50);u(e.connections?.filter(e=>"ACCEPTED"===e.status)||[])}catch(e){console.error("Error loading connections:",e)}},[]);(0,r.useEffect)(()=>{e&&(C(),c(""),m([]),g(new Set),j(null))},[e,C]),(0,r.useEffect)(()=>{if(!i||i.length<2)return void m([]);let e=setTimeout(async()=>{b(!0);try{let e=await (0,w.searchUsersForMention)(i);m(e)}catch(e){m([])}finally{b(!1)}},300);return()=>clearTimeout(e)},[i]);let S=e=>{g(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},T=async()=>{if(0===h.size)return void j("Select at least one person to share with");y(!0),j(null);try{let e=JSON.stringify({type:"shared_post",postId:l,postUrl:N,preview:s?.slice(0,200)||"",author:n||null,mediaUrl:o||null});for(let t of h){let r=await (0,Y.getOrCreateConversation)(t);await (0,Y.sendMessage)(r.id,{content:e,contentType:"application/x-shared-post"}),await (0,w.sharePostToUser)(l,t)}a()}catch(e){j(e?.response?.data?.error||e?.message||"Failed to share")}finally{y(!1)}};if(!e)return null;let E=d.filter(e=>!i||e.user?.name?.toLowerCase().includes(i.toLowerCase())||e.user?.username?.toLowerCase().includes(i.toLowerCase())),I=i.length>=2?x:[],U=E.length>0||I.length>0;return(0,t.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,t.jsxs)("div",{className:"relative w-full max-w-md max-h-[80vh] flex flex-col rounded-2xl bg-white dark:bg-neutral-900 shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share post"}),(0,t.jsx)("button",{onClick:a,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,t.jsx)(k.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,t.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-neutral-800",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(X.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search connections or people...",value:i,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-100 dark:bg-neutral-800 border-0 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500"})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-3 min-h-[200px]",children:p?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)(K.Loader2,{className:"w-8 h-8 animate-spin text-gray-400"})}):(0,t.jsxs)(t.Fragment,{children:[i.length>=2&&I.length>0&&(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2",children:"Search results"}),I.map(e=>(0,t.jsx)(Q,{id:e.id,name:e.name,username:e.username,avatar:e.profileImage,selected:h.has(e.id),onToggle:()=>S(e.id)},e.id))]}),(i.length<2||E.length>0)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2",children:i.length<2?"Connections":"Matching connections"}),E.map(e=>(0,t.jsx)(Q,{id:e.user.id,name:e.user.name,username:e.user.username,avatar:e.user.profileImage,selected:h.has(e.user.id),onToggle:()=>S(e.user.id)},e.user.id))]}),!U&&!p&&(0,t.jsx)("p",{className:"text-center text-gray-500 dark:text-neutral-400 py-8",children:i.length>=2?"No users found":"No connections yet"})]})}),v&&(0,t.jsx)("p",{className:"px-4 py-2 text-sm text-red-500",children:v}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800",children:(0,t.jsxs)("button",{onClick:T,disabled:0===h.size||f,className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors",children:[f?(0,t.jsx)(K.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(J.Send,{className:"w-5 h-5"}),"Send to ",h.size," ",1===h.size?"person":"people"]})})]})]})}function Q(e){let r,a,l,s,n,o,i,c=(0,U.c)(21),{name:d,username:u,avatar:x,selected:m,onToggle:h}=e;c[0]!==x||c[1]!==d||c[2]!==u?(r=(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 overflow-hidden flex-shrink-0",children:x?(0,t.jsx)("img",{src:x,alt:"",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500 font-medium",children:(d||u)?.[0]?.toUpperCase()||"?"})}),c[0]=x,c[1]=d,c[2]=u,c[3]=r):r=c[3];let g=d||u;c[4]!==g?(a=(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:g}),c[4]=g,c[5]=a):a=c[5],c[6]!==u?(l=(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 truncate",children:["@",u]}),c[6]=u,c[7]=l):l=c[7],c[8]!==a||c[9]!==l?(s=(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[a,l]}),c[8]=a,c[9]=l,c[10]=s):s=c[10];let p=`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${m?"border-blue-600 bg-blue-600":"border-gray-300 dark:border-neutral-600"}`;return c[11]!==m?(n=m&&(0,t.jsx)("span",{className:"text-white text-xs",children:"âœ“"}),c[11]=m,c[12]=n):n=c[12],c[13]!==p||c[14]!==n?(o=(0,t.jsx)("div",{className:p,children:n}),c[13]=p,c[14]=n,c[15]=o):o=c[15],c[16]!==h||c[17]!==r||c[18]!==s||c[19]!==o?(i=(0,t.jsxs)("button",{type:"button",onClick:h,className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-left",children:[r,s,o]}),c[16]=h,c[17]=r,c[18]=s,c[19]=o,c[20]=i):i=c[20],i}var Z=e.i(78244);function ee({post:e,onLikeUpdate:C,onPollUpdate:S,onDelete:U,onEdit:L,onUnsave:P,onCommentClick:$}){let{user:O}=(0,I.useAuth)(),[R,A]=(0,r.useState)(e.isLiked),[M,_]=(0,r.useState)(e.likesCount),[K,V]=(0,r.useState)(e.commentsCount),[X,J]=(0,r.useState)(e.sharesCount),[W,Y]=(0,r.useState)(e.userReactionType||null),[Q,ee]=(0,r.useState)(e.reactionSummary||[]),[et,er]=(0,r.useState)(!1),[ea,el]=(0,r.useState)(!1),[es,en]=(0,r.useState)(e.isSaved??!1),[eo,ei]=(0,r.useState)(!1),[ec,ed]=(0,r.useState)(!1),[eu,ex]=(0,r.useState)(!1),[em,eh]=(0,r.useState)(!1),[eg,ep]=(0,r.useState)(e.userVotedOptionId??null),[eb,ef]=(0,r.useState)(e.pollOptions??[]),[ey,ev]=(0,r.useState)(0),[ej,ek]=(0,r.useState)(!1),[eN,ew]=(0,r.useState)("image"),eC=(0,r.useRef)(null),[eS,eT]=(0,r.useState)(!1),[eE,eI]=(0,r.useState)(!0),[eU,eL]=(0,r.useState)(!1),eP=O?.id===e.author.id;(0,r.useEffect)(()=>{A(e.isLiked),_(e.likesCount),V(e.commentsCount),J(e.sharesCount),Y(e.userReactionType||null),ee(e.reactionSummary||[])},[e.isLiked,e.likesCount,e.commentsCount,e.sharesCount,e.userReactionType,e.reactionSummary]),(0,r.useEffect)(()=>{e.pollOptions&&ef(e.pollOptions)},[e.pollOptions]),(0,r.useEffect)(()=>{if("VIDEO"!==e.type||!eC.current)return;let t=new IntersectionObserver(([e])=>{eL(e.isIntersecting),e.isIntersecting?(eC.current?.play().catch(()=>{}),eT(!0)):(eC.current?.pause(),eT(!1))},{threshold:.5});return t.observe(eC.current),()=>t.disconnect()},[e.type]);let e$=async()=>{eO("LIKE")},eO=async t=>{let r,a,l;W===t?(r=!1,a=M-1,l=null):(W?(r=!0,a=M):(r=!0,a=M+1),l=t);let s=[...Q];if(W&&W!==t&&(s=s.map(e=>e.type===W?{...e,count:Math.max(0,e.count-1)}:e).filter(e=>e.count>0)),l){let e=s.findIndex(e=>e.type===l);e>=0?s[e]={...s[e],count:s[e].count+ +(W!==l)}:W&&W===t||s.push({type:l,count:1})}else W&&(s=s.map(e=>e.type===W?{...e,count:Math.max(0,e.count-1)}:e).filter(e=>e.count>0));A(r),_(a),Y(l),ee(s),C?.(e.id,r,a,l,s);try{(0,E.reactToPost)(e.id,t)}catch(t){try{await (0,w.toggleLike)(e.id)}catch(e){A(R),_(M),Y(W),ee(Q)}}},eR=async t=>{if(eg&&!e.showResultsBeforeVote)return;ep(t);let r=eb.map(e=>({...e,votes:e.id===t?e.votes+1:e.votes})),a=r.reduce((e,t)=>e+t.votes,0),l=r.map(e=>({...e,percentage:Math.round(e.votes/a*100)}));ef(l),S?.(e.id,l);try{(0,E.votePoll)(e.id,t)}catch(r){try{await (0,w.votePoll)(e.id,t)}catch(e){console.error("Error voting on poll:",e)}}},eA=async()=>{if(confirm("Are you sure you want to delete this post?"))try{await (0,w.deletePost)(e.id),U?.(e.id)}catch(e){console.error("Error deleting post:",e)}},ez=async()=>{try{let t=await T(e.id);t&&"boolean"==typeof t.saved?(en(t.saved),t.saved||P?.(e.id)):(en(!es),es&&P?.(e.id))}catch(e){console.error("Error toggling save:",e),en(!es)}};return(0,t.jsxs)(a.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between p-4",children:[(0,t.jsxs)(l.default,{href:`/profile/${e.author.username}`,className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700",children:e.author.profileImage?(0,t.jsx)("img",{src:e.author.profileImage,alt:e.author.name,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500",children:e.author.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white hover:underline",children:e.author.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:e.author.headline||`@${e.author.username}`}),(0,t.jsx)("p",{className:"text-xs text-gray-400 dark:text-neutral-500",children:(0,N.formatDistanceToNow)(new Date(e.createdAt),{addSuffix:!0})})]})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>ei(!eo),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,t.jsx)(c.MoreHorizontal,{className:"w-5 h-5 text-gray-500"})}),eo&&(0,t.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10",children:[(0,t.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/post/${e.id}`),ei(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,t.jsx)(v.Copy,{className:"w-4 h-4"}),"Copy link"]}),eP&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:()=>{ed(!0),ei(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,t.jsx)(j.Pencil,{className:"w-4 h-4"}),"Edit post"]}),(0,t.jsxs)("button",{onClick:()=>{eA(),ei(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,t.jsx)(f.Trash2,{className:"w-4 h-4"}),"Delete post"]})]}),!eP&&(0,t.jsxs)("button",{onClick:()=>{ex(!0),ei(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,t.jsx)(y.Flag,{className:"w-4 h-4"}),"Report"]})]})]})]}),(0,t.jsxs)("div",{className:"px-4 pb-2",children:[e.content&&(0,t.jsx)(B.FormattedContent,{content:e.content,className:"text-gray-900 dark:text-white"}),(()=>{switch(e.type){case"IMAGE":let r=e.mediaUrls;if(!r||0===r.length)return null;if(1===r.length)return(0,t.jsx)("div",{className:"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800",children:(0,t.jsx)("button",{onClick:()=>{ew("image"),ev(0),ek(!0)},className:"w-full block cursor-zoom-in",children:(0,t.jsx)("img",{src:r[0],alt:"",className:"w-full max-h-[600px] object-contain mx-auto",loading:"lazy",style:{display:"block"}})})});let s=r[ey],n=r.filter((e,t)=>t!==ey);return(0,t.jsxs)("div",{className:"mt-3 rounded-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"relative bg-gray-100 dark:bg-neutral-800",children:[(0,t.jsx)("button",{onClick:()=>{ew("image"),ek(!0)},className:"w-full block cursor-zoom-in",children:(0,t.jsx)("img",{src:s,alt:"",className:"w-full max-h-[500px] object-contain mx-auto",loading:"lazy",style:{display:"block"}})}),r.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>ev(e=>0===e?r.length-1:e-1),className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(p.ChevronLeft,{className:"w-5 h-5"})}),(0,t.jsx)("button",{onClick:()=>ev(e=>e===r.length-1?0:e+1),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(b.ChevronRight,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs",children:[ey+1," / ",r.length]})]}),n.length>0&&(0,t.jsx)("div",{className:"flex gap-1 mt-1 overflow-x-auto",children:n.map((e,r)=>{let a=r>=ey?r+1:r;return(0,t.jsx)("button",{onClick:()=>ev(a),className:"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity",children:(0,t.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"})},a)})})]});case"VIDEO":return e.videoUrl?(0,t.jsxs)("div",{className:"mt-3 rounded-lg overflow-hidden relative bg-black",children:[(0,t.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{ew("video"),ek(!0)},onKeyDown:e=>{"Enter"===e.key&&(ew("video"),ek(!0))},className:"w-full block cursor-zoom-in relative",children:(0,t.jsx)("video",{ref:eC,src:e.videoUrl,poster:e.videoThumbnail||void 0,className:"w-full max-h-[500px] object-contain",loop:!0,muted:eE,playsInline:!0})}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center justify-between pointer-events-auto",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),eC.current&&(eS?eC.current.pause():eC.current.play(),eT(!eS))},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:eS?(0,t.jsx)(m.Pause,{className:"w-4 h-4"}):(0,t.jsx)(x.Play,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),eC.current&&(eC.current.muted=!eE,eI(!eE))},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:eE?(0,t.jsx)(g.VolumeX,{className:"w-4 h-4"}):(0,t.jsx)(h.Volume2,{className:"w-4 h-4"})})]}),e.videoDuration&&(0,t.jsxs)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs",children:[Math.floor(e.videoDuration/60),":",String(e.videoDuration%60).padStart(2,"0")]})]}):null;case"LINK":return e.linkUrl?(0,t.jsxs)("a",{href:e.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors",children:[e.linkImage&&(0,t.jsx)("img",{src:e.linkImage,alt:"",className:"w-full h-48 object-cover",loading:"lazy"}),(0,t.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-neutral-800/50",children:[(0,t.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white line-clamp-2",children:e.linkTitle||e.linkUrl}),e.linkDescription&&(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2",children:e.linkDescription}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-400",children:[(0,t.jsx)(d.ExternalLink,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:e.linkDomain||(e.linkUrl?(()=>{try{return new URL(e.linkUrl).hostname}catch{return"Link"}})():"Link")})]})]})]}):null;case"POLL":if(!eb||0===eb.length)return null;let o=eb.reduce((e,t)=>e+t.votes,0),i=null!==eg||eb.some(e=>e.hasVoted),c=i||e.showResultsBeforeVote||!1,f=!!e.pollEndsAt&&new Date(e.pollEndsAt)<new Date;return(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[eb.map(e=>{let r=o>0?Math.round(e.votes/o*100):0,l=eg===e.id;return(0,t.jsxs)("button",{onClick:()=>!i&&!f&&eR(e.id),disabled:i||f,className:`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${i||f?"cursor-default":"hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer"} ${l?"ring-2 ring-blue-500 dark:ring-blue-400":"border border-gray-200 dark:border-neutral-700"}`,children:[c&&(0,t.jsx)(a.motion.div,{initial:{width:0},animate:{width:`${r}%`},transition:{duration:.5},className:`absolute inset-y-0 left-0 ${l?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-neutral-800"}`}),(0,t.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.text}),c&&(0,t.jsxs)("span",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[r,"%"]})]})]},e.id)}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2",children:[(0,t.jsxs)("span",{children:[o," vote",1!==o?"s":""]}),e.pollEndsAt&&(0,t.jsx)("span",{children:f?"Poll ended":`Ends ${(0,N.formatDistanceToNow)(new Date(e.pollEndsAt),{addSuffix:!0})}`})]})]});case"ARTICLE":return(0,t.jsxs)(l.default,{href:`/article/${e.id}`,className:"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors",children:[e.articleCoverImage&&(0,t.jsx)("img",{src:e.articleCoverImage,alt:"",className:"w-full h-48 object-cover",loading:"lazy"}),(0,t.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-neutral-800/50",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:e.articleTitle}),e.articleTags&&e.articleTags.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.articleTags.map((e,r)=>(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:e},r))}),e.articleReadTime&&(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 mt-2",children:[e.articleReadTime," min read"]})]})]});case"CELEBRATION":let y;return y=e.celebrationType&&({NEW_JOB:"ðŸŽ‰",PROMOTION:"ðŸš€",GRADUATION:"ðŸŽ“",CERTIFICATION:"ðŸ“œ",WORK_ANNIVERSARY:"ðŸŽŠ",BIRTHDAY:"ðŸŽ‚",JOB_CHANGE:"âœ¨",NEW_POSITION:"ðŸŒŸ"})[e.celebrationType]||"ðŸŽ‰",(0,t.jsxs)("div",{className:"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center",children:[(0,t.jsx)("span",{className:"text-5xl",children:y}),(0,t.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-900 dark:text-white",children:e.celebrationType?.replace(/_/g," ").toLowerCase().replace(/^\w/,e=>e.toUpperCase())})]});case"DOCUMENT":return e.documentUrl?(0,t.jsxs)("a",{href:e.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30",children:(0,t.jsx)(u.FileText,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.documentName||"Document"}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[e.documentType?.toUpperCase()," â€¢ ",e.documentSize?`${(e.documentSize/1024/1024).toFixed(1)} MB`:"",e.documentPages?` â€¢ ${e.documentPages} pages`:""]})]}),(0,t.jsx)(d.ExternalLink,{className:"w-5 h-5 text-gray-400"})]}):null;default:return null}})()]}),(0,t.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:M>0&&(0,t.jsx)(F,{reactionSummary:Q,totalCount:M,onClick:()=>el(!0)})}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:K>0&&(0,t.jsxs)("button",{onClick:$,className:"hover:underline",children:[K," comment",1!==K?"s":""]})})]}),(0,t.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800",children:[(0,t.jsxs)("div",{className:"relative",onMouseEnter:()=>er(!0),onMouseLeave:()=>er(!1),children:[(0,t.jsx)("button",{onClick:e$,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${R&&W?`${z(W).color} ${z(W).bgColor}`:"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:W?(0,t.jsxs)(t.Fragment,{children:[r.default.createElement(z(W).icon,{className:`w-5 h-5 ${R?"fill-current":""}`}),(0,t.jsx)("span",{className:"text-sm font-medium",children:z(W).label})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.ThumbsUp,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Like"})]})}),(0,t.jsx)(D,{isOpen:et,currentReaction:W,onSelect:eO,onClose:()=>er(!1)})]}),(0,t.jsxs)("button",{onClick:$,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)(n.MessageCircle,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Comment"})]}),(0,t.jsxs)("button",{onClick:()=>{eh(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:[(0,t.jsx)(o.Share2,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Share"})]}),(0,t.jsxs)("button",{onClick:ez,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${es?"text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,t.jsx)(i.Bookmark,{className:`w-5 h-5 ${es?"fill-current":""}`}),(0,t.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:"Save"})]})]}),(0,t.jsx)(G,{isOpen:ea,onClose:()=>el(!1),postId:e.id,totalCount:M}),(0,t.jsx)(H.EditPostModal,{isOpen:ec,onClose:()=>ed(!1),post:e,onPostUpdated:t=>{L?.(e.id,t)}}),(0,t.jsx)(Z.default,{isOpen:eu,onClose:()=>ex(!1),type:"post",targetId:e.id,targetName:`Post by ${e.author.name}`}),(0,t.jsx)(q,{isOpen:em,onClose:()=>eh(!1),postId:e.id,postPreview:e.content||void 0,postAuthor:{name:e.author.name,username:e.author.username,profileImage:e.author.profileImage},postMediaUrl:e.mediaUrls?.[0]||e.videoUrl||null}),ej&&(0,t.jsxs)("div",{className:"fixed inset-0 z-[9999] bg-black flex items-center justify-center",onClick:()=>ek(!1),children:[(0,t.jsx)("button",{onClick:()=>ek(!1),className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,t.jsx)(k.X,{className:"w-8 h-8"})}),(0,t.jsx)("div",{className:"max-w-[95vw] max-h-[95vh] flex items-center justify-center",onClick:e=>e.stopPropagation(),children:"image"===eN&&e.mediaUrls&&e.mediaUrls.length>0?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e.mediaUrls[ey],alt:"",className:"max-w-full max-h-[95vh] object-contain",onClick:e=>e.stopPropagation()}),e.mediaUrls.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),ev(t=>0===t?e.mediaUrls.length-1:t-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70",children:(0,t.jsx)(p.ChevronLeft,{className:"w-6 h-6"})}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),ev(t=>t===e.mediaUrls.length-1?0:t+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70",children:(0,t.jsx)(b.ChevronRight,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-black/50 text-white text-sm",children:[ey+1," / ",e.mediaUrls.length]})]})]}):"video"===eN&&e.videoUrl?(0,t.jsx)("video",{src:e.videoUrl,controls:!0,autoPlay:!0,className:"max-w-full max-h-[95vh]",onClick:e=>e.stopPropagation()}):null})]})]})}e.s(["PostCard",()=>ee],28318)}]);