module.exports=[94770,21894,37404,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(38246),f=a.i(90545),g=a.i(45222),h=a.i(53569),i=a.i(38617),j=a.i(17755),k=a.i(52495),l=a.i(4720),m=a.i(25015),n=a.i(8549),o=a.i(12439),p=a.i(52920),q=a.i(13749),r=a.i(50522),s=a.i(81560),t=a.i(94183),u=a.i(5151),v=a.i(99464),w=a.i(33508),x=a.i(94632),y=a.i(13434),z=a.i(92415);let A=async(a,b=20)=>{let c={limit:b};a&&(c.cursor=a);let d=await z.default.get("/saved",{params:c});return{posts:d.posts||[],nextCursor:d.nextCursor??null,hasMore:d.hasMore??!1,pagination:{page:1,limit:b,totalCount:d.posts?.length??0,totalPages:d.hasMore?2:1,hasMore:d.hasMore??!1}}},B=async a=>z.default.post(`/saved/${a}/toggle`);a.s(["getSavedPosts",0,A,"toggleSavePost",0,B],21894);var C=a.i(12469),D=a.i(3512),E=a.i(62036),F=a.i(67594),G=a.i(76472),H=a.i(69439),I=a.i(42211);let J=[{type:"LIKE",icon:f.ThumbsUp,label:"Like",color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",hoverScale:1.3},{type:"CELEBRATE",icon:F.PartyPopper,label:"Celebrate",color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",hoverScale:1.3},{type:"SUPPORT",icon:G.Heart,label:"Support",color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",hoverScale:1.3},{type:"INSIGHTFUL",icon:H.Lightbulb,label:"Insightful",color:"text-amber-600",bgColor:"bg-amber-100 dark:bg-amber-900/30",hoverScale:1.3},{type:"CURIOUS",icon:I.HelpCircle,label:"Curious",color:"text-pink-600",bgColor:"bg-pink-100 dark:bg-pink-900/30",hoverScale:1.3}];function K(a){return J.find(b=>b.type===a)||J[0]}function L({type:a,size:c=16,className:d=""}){let e=K(a),f=e.icon;return(0,b.jsx)("div",{className:`inline-flex items-center justify-center rounded-full p-1 ${e.bgColor} ${d}`,children:(0,b.jsx)(f,{className:`${e.color}`,size:c})})}function M({isOpen:a,currentReaction:c,onSelect:e,onClose:f}){return(0,b.jsx)(E.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-40",onClick:f}),(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},transition:{type:"spring",damping:25,stiffness:400},className:"absolute bottom-full left-0 mb-2 z-50",children:(0,b.jsx)("div",{className:"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1",children:J.map(a=>{let g=a.icon,h=c===a.type;return(0,b.jsxs)(d.motion.button,{whileHover:{scale:a.hoverScale,y:-8},whileTap:{scale:.95},onClick:()=>{e(a.type),f()},className:`relative p-2 rounded-full transition-colors group ${h?a.bgColor:"hover:bg-gray-100 dark:hover:bg-neutral-700"}`,title:a.label,children:[(0,b.jsx)(g,{className:`w-6 h-6 transition-transform ${h?a.color:"text-gray-500 dark:text-neutral-400"} group-hover:${a.color}`}),(0,b.jsx)(d.motion.span,{initial:{opacity:0,y:5},whileHover:{opacity:1,y:0},className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none",children:a.label})]},a.type)})})})]})})}function N({reactionSummary:a,totalCount:c,onClick:d}){if(0===c)return null;let e=a.slice(0,3);return(0,b.jsxs)("button",{onClick:d,className:"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline",children:[(0,b.jsx)("div",{className:"flex -space-x-1",children:e.map((a,c)=>(0,b.jsx)(L,{type:a.type,size:14,className:"border-2 border-white dark:border-neutral-900"},a.type))}),(0,b.jsx)("span",{children:c})]})}function O({content:a,className:c=""}){if(!a)return null;let d=a=>{let c=[],f=a,g=0;for(;f.length>0;){let a=f.match(/^\[color:\s*([a-zA-Z]+|#[0-9a-fA-F]{3,8})\]([\s\S]*?)\[\/color\]/i);if(a){let[e,h,i]=a,j=/^#[0-9a-fA-F]{3,8}$/.test(h)||/^[a-zA-Z]+$/.test(h)?h:"#000";c.push((0,b.jsx)("span",{style:{color:j},children:d(i)},g++)),f=f.slice(e.length);continue}let h=f.match(/^\[b\]([\s\S]*?)\[\/b\]/i);if(h){let[a,e]=h;c.push((0,b.jsx)("strong",{className:"font-bold",children:d(e)},g++)),f=f.slice(a.length);continue}let i=f.match(/^\*\*(.+?)\*\*/);if(i){let[a,e]=i;c.push((0,b.jsx)("strong",{className:"font-bold",children:d(e)},g++)),f=f.slice(a.length);continue}let j=f.match(/^\*([^*]+?)\*/);if(j){let[a,e]=j;c.push((0,b.jsx)("em",{className:"italic",children:d(e)},g++)),f=f.slice(a.length);continue}let k=f.match(/^`([^`]+?)`/);if(k){let[a,d]=k;c.push((0,b.jsx)("code",{className:"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm",children:d},g++)),f=f.slice(a.length);continue}let l=f.match(/^@([a-zA-Z0-9_]+)/);if(l){let[a,d]=l;c.push((0,b.jsxs)(e.default,{href:`/profile/${d}`,className:"text-blue-600 dark:text-blue-400 hover:underline font-medium",children:["@",d]},g++)),f=f.slice(a.length);continue}let m=f.match(/^(https?:\/\/[^\s]+)/);if(m){let[a]=m;c.push((0,b.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline break-all",children:a},g++)),f=f.slice(a.length);continue}if(f.startsWith("\n")){c.push((0,b.jsx)("br",{},g++)),f=f.slice(1);continue}let n=f.search(/[\*`@\[\n]|https?:\/\//);if(-1===n){c.push((0,b.jsx)("span",{children:f},g++));break}0===n?(c.push((0,b.jsx)("span",{children:f[0]},g++)),f=f.slice(1)):(c.push((0,b.jsx)("span",{children:f.slice(0,n)},g++)),f=f.slice(n))}return c};return(0,b.jsx)("div",{className:`whitespace-pre-wrap break-words ${c}`,children:d(a)})}a.s(["FormattedContent",()=>O],37404);var P=a.i(97199),Q=a.i(96221),R=a.i(71987);function S({isOpen:a,onClose:f,postId:g,totalCount:h}){let[i,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)("ALL"),[o,p]=(0,c.useState)({LIKE:0,CELEBRATE:0,SUPPORT:0,INSIGHTFUL:0,CURIOUS:0});(0,c.useEffect)(()=>{a&&g&&(async()=>{l(!0);try{let a=await z.default.get(`/posts/${g}/likes`);j(a.likes||[]);let b={LIKE:0,CELEBRATE:0,SUPPORT:0,INSIGHTFUL:0,CURIOUS:0};a.likes?.forEach(a=>{a.reactionType&&void 0!==b[a.reactionType]&&b[a.reactionType]++}),p(b)}catch(a){console.error("Error fetching likes:",a)}finally{l(!1)}})()},[a,g]);let q="ALL"===m?i:i.filter(a=>a.reactionType===m),r=J.filter(a=>o[a.type]>0);return(0,b.jsx)(E.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:f,className:"fixed inset-0 bg-black/50 z-50"}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:400},className:"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Reactions"}),(0,b.jsx)("button",{onClick:f,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,b.jsx)(w.X,{className:"w-5 h-5 text-gray-500 dark:text-neutral-400"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto",children:[(0,b.jsxs)("button",{onClick:()=>n("ALL"),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${"ALL"===m?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:["All",(0,b.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full",children:h})]}),r.map(a=>{let c=a.icon,d=o[a.type];return(0,b.jsxs)("button",{onClick:()=>n(a.type),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${m===a.type?`${a.bgColor} ${a.color}`:"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,b.jsx)(c,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full",children:d})]},a.type)})]}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-[50vh]",children:k?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(Q.Loader2,{className:"w-8 h-8 animate-spin text-blue-500"})}):0===q.length?(0,b.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-neutral-400",children:"No reactions yet"}):(0,b.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-neutral-800",children:q.map(a=>{let c=K(a.reactionType),d=c.icon;return(0,b.jsxs)(e.default,{href:`/profile/${a.username}`,onClick:f,className:"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700",children:a.profileImage?(0,b.jsx)(R.default,{src:a.profileImage,alt:a.name,width:48,height:48,className:"object-cover w-full h-full"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsx)("div",{className:`absolute -bottom-1 -right-1 p-1 rounded-full ${c.bgColor} border-2 border-white dark:border-neutral-900`,children:(0,b.jsx)(d,{className:`w-3 h-3 ${c.color}`})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:a.name}),a.headline&&(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 truncate",children:a.headline})]})]},a.id)})})})]})]})})}var T=a.i(87532),U=a.i(92759),V=a.i(70580),W=a.i(72764);function X({isOpen:a,onClose:d,postId:e,postPreview:f,postAuthor:g,postMediaUrl:h}){let[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(new Set),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),x=(0,c.useCallback)(async()=>{try{let a=await (0,V.getConnections)(1,50);l(a.connections?.filter(a=>"ACCEPTED"===a.status)||[])}catch(a){console.error("Error loading connections:",a)}},[]);(0,c.useEffect)(()=>{a&&(x(),j(""),n([]),p(new Set),v(null))},[a,x]),(0,c.useEffect)(()=>{if(!i||i.length<2)return void n([]);let a=setTimeout(async()=>{r(!0);try{let a=await (0,y.searchUsersForMention)(i);n(a)}catch(a){n([])}finally{r(!1)}},300);return()=>clearTimeout(a)},[i]);let z=a=>{p(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},A=async()=>{if(0===o.size)return void v("Select at least one person to share with");t(!0),v(null);try{let a=JSON.stringify({type:"shared_post",postId:e,postUrl:"",preview:f?.slice(0,200)||"",author:g||null,mediaUrl:h||null});for(let b of o){let c=await (0,W.getOrCreateConversation)(b);await (0,W.sendMessage)(c.id,{content:a,contentType:"application/x-shared-post"}),await (0,y.sharePostToUser)(e,b)}d()}catch(a){v(a?.response?.data?.error||a?.message||"Failed to share")}finally{t(!1)}};if(!a)return null;let B=k.filter(a=>!i||a.user?.name?.toLowerCase().includes(i.toLowerCase())||a.user?.username?.toLowerCase().includes(i.toLowerCase())),C=i.length>=2?m:[],D=B.length>0||C.length>0;return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:d}),(0,b.jsxs)("div",{className:"relative w-full max-w-md max-h-[80vh] flex flex-col rounded-2xl bg-white dark:bg-neutral-900 shadow-xl",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Share post"}),(0,b.jsx)("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,b.jsx)(w.X,{className:"w-5 h-5 text-gray-500"})})]}),(0,b.jsx)("div",{className:"p-3 border-b border-gray-200 dark:border-neutral-800",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(T.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search connections or people...",value:i,onChange:a=>j(a.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-100 dark:bg-neutral-800 border-0 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500"})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-3 min-h-[200px]",children:q?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)(Q.Loader2,{className:"w-8 h-8 animate-spin text-gray-400"})}):(0,b.jsxs)(b.Fragment,{children:[i.length>=2&&C.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2",children:"Search results"}),C.map(a=>(0,b.jsx)(Y,{id:a.id,name:a.name,username:a.username,avatar:a.profileImage,selected:o.has(a.id),onToggle:()=>z(a.id)},a.id))]}),(i.length<2||B.length>0)&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2",children:i.length<2?"Connections":"Matching connections"}),B.map(a=>(0,b.jsx)(Y,{id:a.user.id,name:a.user.name,username:a.user.username,avatar:a.user.profileImage,selected:o.has(a.user.id),onToggle:()=>z(a.user.id)},a.user.id))]}),!D&&!q&&(0,b.jsx)("p",{className:"text-center text-gray-500 dark:text-neutral-400 py-8",children:i.length>=2?"No users found":"No connections yet"})]})}),u&&(0,b.jsx)("p",{className:"px-4 py-2 text-sm text-red-500",children:u}),(0,b.jsx)("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800",children:(0,b.jsxs)("button",{onClick:A,disabled:0===o.size||s,className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors",children:[s?(0,b.jsx)(Q.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsx)(U.Send,{className:"w-5 h-5"}),"Send to ",o.size," ",1===o.size?"person":"people"]})})]})]})}function Y({id:a,name:c,username:d,avatar:e,selected:f,onToggle:g}){return(0,b.jsxs)("button",{type:"button",onClick:g,className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-left",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 overflow-hidden flex-shrink-0",children:e?(0,b.jsx)("img",{src:e,alt:"",className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500 font-medium",children:(c||d)?.[0]?.toUpperCase()||"?"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:c||d}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 truncate",children:["@",d]})]}),(0,b.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${f?"border-blue-600 bg-blue-600":"border-gray-300 dark:border-neutral-600"}`,children:f&&(0,b.jsx)("span",{className:"text-white text-xs",children:"âœ“"})})]})}var Z=a.i(18422);function $({post:a,onLikeUpdate:z,onPollUpdate:A,onDelete:E,onEdit:F,onUnsave:G,onCommentClick:H}){let{user:I}=(0,D.useAuth)(),[J,L]=(0,c.useState)(a.isLiked),[Q,R]=(0,c.useState)(a.likesCount),[T,U]=(0,c.useState)(a.commentsCount),[V,W]=(0,c.useState)(a.sharesCount),[Y,$]=(0,c.useState)(a.userReactionType||null),[_,aa]=(0,c.useState)(a.reactionSummary||[]),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(a.isSaved??!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(!1),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)(a.userVotedOptionId??null),[ar,as]=(0,c.useState)(a.pollOptions??[]),[at,au]=(0,c.useState)(0),[av,aw]=(0,c.useState)(!1),[ax,ay]=(0,c.useState)("image"),az=(0,c.useRef)(null),[aA,aB]=(0,c.useState)(!1),[aC,aD]=(0,c.useState)(!0),[aE,aF]=(0,c.useState)(!1),aG=I?.id===a.author.id;(0,c.useEffect)(()=>{L(a.isLiked),R(a.likesCount),U(a.commentsCount),W(a.sharesCount),$(a.userReactionType||null),aa(a.reactionSummary||[])},[a.isLiked,a.likesCount,a.commentsCount,a.sharesCount,a.userReactionType,a.reactionSummary]),(0,c.useEffect)(()=>{a.pollOptions&&as(a.pollOptions)},[a.pollOptions]),(0,c.useEffect)(()=>{if("VIDEO"!==a.type||!az.current)return;let b=new IntersectionObserver(([a])=>{aF(a.isIntersecting),a.isIntersecting?(az.current?.play().catch(()=>{}),aB(!0)):(az.current?.pause(),aB(!1))},{threshold:.5});return b.observe(az.current),()=>b.disconnect()},[a.type]);let aH=async()=>{aI("LIKE")},aI=async b=>{let c,d,e;Y===b?(c=!1,d=Q-1,e=null):(Y?(c=!0,d=Q):(c=!0,d=Q+1),e=b);let f=[..._];if(Y&&Y!==b&&(f=f.map(a=>a.type===Y?{...a,count:Math.max(0,a.count-1)}:a).filter(a=>a.count>0)),e){let a=f.findIndex(a=>a.type===e);a>=0?f[a]={...f[a],count:f[a].count+ +(Y!==e)}:Y&&Y===b||f.push({type:e,count:1})}else Y&&(f=f.map(a=>a.type===Y?{...a,count:Math.max(0,a.count-1)}:a).filter(a=>a.count>0));L(c),R(d),$(e),aa(f),z?.(a.id,c,d,e,f);try{(0,C.reactToPost)(a.id,b)}catch(b){try{await (0,y.toggleLike)(a.id)}catch(a){L(J),R(Q),$(Y),aa(_)}}},aJ=async b=>{if(ap&&!a.showResultsBeforeVote)return;aq(b);let c=ar.map(a=>({...a,votes:a.id===b?a.votes+1:a.votes})),d=c.reduce((a,b)=>a+b.votes,0),e=c.map(a=>({...a,percentage:Math.round(a.votes/d*100)}));as(e),A?.(a.id,e);try{(0,C.votePoll)(a.id,b)}catch(c){try{await (0,y.votePoll)(a.id,b)}catch(a){console.error("Error voting on poll:",a)}}},aK=async()=>{if(confirm("Are you sure you want to delete this post?"))try{await (0,y.deletePost)(a.id),E?.(a.id)}catch(a){console.error("Error deleting post:",a)}},aL=async()=>{try{let b=await B(a.id);b&&"boolean"==typeof b.saved?(ag(b.saved),b.saved||G?.(a.id)):(ag(!af),af&&G?.(a.id))}catch(a){console.error("Error toggling save:",a),ag(!af)}};return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between p-4",children:[(0,b.jsxs)(e.default,{href:`/profile/${a.author.username}`,className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700",children:a.author.profileImage?(0,b.jsx)("img",{src:a.author.profileImage,alt:a.author.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500",children:a.author.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white hover:underline",children:a.author.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:a.author.headline||`@${a.author.username}`}),(0,b.jsx)("p",{className:"text-xs text-gray-400 dark:text-neutral-500",children:(0,x.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>ai(!ah),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,b.jsx)(j.MoreHorizontal,{className:"w-5 h-5 text-gray-500"})}),ah&&(0,b.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10",children:[(0,b.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/post/${a.id}`),ai(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,b.jsx)(u.Copy,{className:"w-4 h-4"}),"Copy link"]}),aG&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:()=>{ak(!0),ai(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,b.jsx)(v.Pencil,{className:"w-4 h-4"}),"Edit post"]}),(0,b.jsxs)("button",{onClick:()=>{aK(),ai(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,b.jsx)(s.Trash2,{className:"w-4 h-4"}),"Delete post"]})]}),!aG&&(0,b.jsxs)("button",{onClick:()=>{am(!0),ai(!1)},className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[(0,b.jsx)(t.Flag,{className:"w-4 h-4"}),"Report"]})]})]})]}),(0,b.jsxs)("div",{className:"px-4 pb-2",children:[a.content&&(0,b.jsx)(O,{content:a.content,className:"text-gray-900 dark:text-white"}),(()=>{switch(a.type){case"IMAGE":let c=a.mediaUrls;if(!c||0===c.length)return null;if(1===c.length)return(0,b.jsx)("div",{className:"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800",children:(0,b.jsx)("button",{onClick:()=>{ay("image"),au(0),aw(!0)},className:"w-full block cursor-zoom-in",children:(0,b.jsx)("img",{src:c[0],alt:"",className:"w-full max-h-[600px] object-contain mx-auto",loading:"lazy",style:{display:"block"}})})});let f=c[at],g=c.filter((a,b)=>b!==at);return(0,b.jsxs)("div",{className:"mt-3 rounded-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative bg-gray-100 dark:bg-neutral-800",children:[(0,b.jsx)("button",{onClick:()=>{ay("image"),aw(!0)},className:"w-full block cursor-zoom-in",children:(0,b.jsx)("img",{src:f,alt:"",className:"w-full max-h-[500px] object-contain mx-auto",loading:"lazy",style:{display:"block"}})}),c.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>au(a=>0===a?c.length-1:a-1),className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,b.jsx)(q.ChevronLeft,{className:"w-5 h-5"})}),(0,b.jsx)("button",{onClick:()=>au(a=>a===c.length-1?0:a+1),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,b.jsx)(r.ChevronRight,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs",children:[at+1," / ",c.length]})]}),g.length>0&&(0,b.jsx)("div",{className:"flex gap-1 mt-1 overflow-x-auto",children:g.map((a,c)=>{let d=c>=at?c+1:c;return(0,b.jsx)("button",{onClick:()=>au(d),className:"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity",children:(0,b.jsx)("img",{src:a,alt:"",className:"w-full h-full object-cover"})},d)})})]});case"VIDEO":return a.videoUrl?(0,b.jsxs)("div",{className:"mt-3 rounded-lg overflow-hidden relative bg-black",children:[(0,b.jsx)("div",{role:"button",tabIndex:0,onClick:()=>{ay("video"),aw(!0)},onKeyDown:a=>{"Enter"===a.key&&(ay("video"),aw(!0))},className:"w-full block cursor-zoom-in relative",children:(0,b.jsx)("video",{ref:az,src:a.videoUrl,poster:a.videoThumbnail||void 0,className:"w-full max-h-[500px] object-contain",loop:!0,muted:aC,playsInline:!0})}),(0,b.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 flex items-center justify-between pointer-events-auto",children:[(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),az.current&&(aA?az.current.pause():az.current.play(),aB(!aA))},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:aA?(0,b.jsx)(n.Pause,{className:"w-4 h-4"}):(0,b.jsx)(m.Play,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),az.current&&(az.current.muted=!aC,aD(!aC))},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:aC?(0,b.jsx)(p.VolumeX,{className:"w-4 h-4"}):(0,b.jsx)(o.Volume2,{className:"w-4 h-4"})})]}),a.videoDuration&&(0,b.jsxs)("div",{className:"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs",children:[Math.floor(a.videoDuration/60),":",String(a.videoDuration%60).padStart(2,"0")]})]}):null;case"LINK":return a.linkUrl?(0,b.jsxs)("a",{href:a.linkUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors",children:[a.linkImage&&(0,b.jsx)("img",{src:a.linkImage,alt:"",className:"w-full h-48 object-cover",loading:"lazy"}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 dark:bg-neutral-800/50",children:[(0,b.jsx)("p",{className:"font-semibold text-gray-900 dark:text-white line-clamp-2",children:a.linkTitle||a.linkUrl}),a.linkDescription&&(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2",children:a.linkDescription}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-2 text-xs text-gray-400",children:[(0,b.jsx)(k.ExternalLink,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.linkDomain||(a.linkUrl?(()=>{try{return new URL(a.linkUrl).hostname}catch{return"Link"}})():"Link")})]})]})]}):null;case"POLL":if(!ar||0===ar.length)return null;let h=ar.reduce((a,b)=>a+b.votes,0),i=null!==ap||ar.some(a=>a.hasVoted),j=i||a.showResultsBeforeVote||!1,s=!!a.pollEndsAt&&new Date(a.pollEndsAt)<new Date;return(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[ar.map(a=>{let c=h>0?Math.round(a.votes/h*100):0,e=ap===a.id;return(0,b.jsxs)("button",{onClick:()=>!i&&!s&&aJ(a.id),disabled:i||s,className:`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${i||s?"cursor-default":"hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer"} ${e?"ring-2 ring-blue-500 dark:ring-blue-400":"border border-gray-200 dark:border-neutral-700"}`,children:[j&&(0,b.jsx)(d.motion.div,{initial:{width:0},animate:{width:`${c}%`},transition:{duration:.5},className:`absolute inset-y-0 left-0 ${e?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-neutral-800"}`}),(0,b.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:a.text}),j&&(0,b.jsxs)("span",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[c,"%"]})]})]},a.id)}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2",children:[(0,b.jsxs)("span",{children:[h," vote",1!==h?"s":""]}),a.pollEndsAt&&(0,b.jsx)("span",{children:s?"Poll ended":`Ends ${(0,x.formatDistanceToNow)(new Date(a.pollEndsAt),{addSuffix:!0})}`})]})]});case"ARTICLE":return(0,b.jsxs)(e.default,{href:`/article/${a.id}`,className:"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors",children:[a.articleCoverImage&&(0,b.jsx)("img",{src:a.articleCoverImage,alt:"",className:"w-full h-48 object-cover",loading:"lazy"}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-neutral-800/50",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:a.articleTitle}),a.articleTags&&a.articleTags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:a.articleTags.map((a,c)=>(0,b.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",children:a},c))}),a.articleReadTime&&(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400 mt-2",children:[a.articleReadTime," min read"]})]})]});case"CELEBRATION":let t;return t=a.celebrationType&&({NEW_JOB:"ðŸŽ‰",PROMOTION:"ðŸš€",GRADUATION:"ðŸŽ“",CERTIFICATION:"ðŸ“œ",WORK_ANNIVERSARY:"ðŸŽŠ",BIRTHDAY:"ðŸŽ‚",JOB_CHANGE:"âœ¨",NEW_POSITION:"ðŸŒŸ"})[a.celebrationType]||"ðŸŽ‰",(0,b.jsxs)("div",{className:"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center",children:[(0,b.jsx)("span",{className:"text-5xl",children:t}),(0,b.jsx)("p",{className:"mt-3 text-lg font-semibold text-gray-900 dark:text-white",children:a.celebrationType?.replace(/_/g," ").toLowerCase().replace(/^\w/,a=>a.toUpperCase())})]});case"DOCUMENT":return a.documentUrl?(0,b.jsxs)("a",{href:a.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors",children:[(0,b.jsx)("div",{className:"p-3 rounded-lg bg-red-100 dark:bg-red-900/30",children:(0,b.jsx)(l.FileText,{className:"w-6 h-6 text-red-600 dark:text-red-400"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:a.documentName||"Document"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-neutral-400",children:[a.documentType?.toUpperCase()," â€¢ ",a.documentSize?`${(a.documentSize/1024/1024).toFixed(1)} MB`:"",a.documentPages?` â€¢ ${a.documentPages} pages`:""]})]}),(0,b.jsx)(k.ExternalLink,{className:"w-5 h-5 text-gray-400"})]}):null;default:return null}})()]}),(0,b.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800",children:[(0,b.jsx)("div",{className:"flex items-center gap-4",children:Q>0&&(0,b.jsx)(N,{reactionSummary:_,totalCount:Q,onClick:()=>ae(!0)})}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:T>0&&(0,b.jsxs)("button",{onClick:H,className:"hover:underline",children:[T," comment",1!==T?"s":""]})})]}),(0,b.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800",children:[(0,b.jsxs)("div",{className:"relative",onMouseEnter:()=>ac(!0),onMouseLeave:()=>ac(!1),children:[(0,b.jsx)("button",{onClick:aH,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${J&&Y?`${K(Y).color} ${K(Y).bgColor}`:"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:Y?(0,b.jsxs)(b.Fragment,{children:[c.default.createElement(K(Y).icon,{className:`w-5 h-5 ${J?"fill-current":""}`}),(0,b.jsx)("span",{className:"text-sm font-medium",children:K(Y).label})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.ThumbsUp,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Like"})]})}),(0,b.jsx)(M,{isOpen:ab,currentReaction:Y,onSelect:aI,onClose:()=>ac(!1)})]}),(0,b.jsxs)("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:[(0,b.jsx)(g.MessageCircle,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Comment"})]}),(0,b.jsxs)("button",{onClick:()=>{ao(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:[(0,b.jsx)(h.Share2,{className:"w-5 h-5"}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Share"})]}),(0,b.jsxs)("button",{onClick:aL,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${af?"text-blue-500 bg-blue-50 dark:bg-blue-900/20":"text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800"}`,children:[(0,b.jsx)(i.Bookmark,{className:`w-5 h-5 ${af?"fill-current":""}`}),(0,b.jsx)("span",{className:"text-sm font-medium hidden sm:inline",children:"Save"})]})]}),(0,b.jsx)(S,{isOpen:ad,onClose:()=>ae(!1),postId:a.id,totalCount:Q}),(0,b.jsx)(P.EditPostModal,{isOpen:aj,onClose:()=>ak(!1),post:a,onPostUpdated:b=>{F?.(a.id,b)}}),(0,b.jsx)(Z.default,{isOpen:al,onClose:()=>am(!1),type:"post",targetId:a.id,targetName:`Post by ${a.author.name}`}),(0,b.jsx)(X,{isOpen:an,onClose:()=>ao(!1),postId:a.id,postPreview:a.content||void 0,postAuthor:{name:a.author.name,username:a.author.username,profileImage:a.author.profileImage},postMediaUrl:a.mediaUrls?.[0]||a.videoUrl||null}),av&&(0,b.jsxs)("div",{className:"fixed inset-0 z-[9999] bg-black flex items-center justify-center",onClick:()=>aw(!1),children:[(0,b.jsx)("button",{onClick:()=>aw(!1),className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors",children:(0,b.jsx)(w.X,{className:"w-8 h-8"})}),(0,b.jsx)("div",{className:"max-w-[95vw] max-h-[95vh] flex items-center justify-center",onClick:a=>a.stopPropagation(),children:"image"===ax&&a.mediaUrls&&a.mediaUrls.length>0?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:a.mediaUrls[at],alt:"",className:"max-w-full max-h-[95vh] object-contain",onClick:a=>a.stopPropagation()}),a.mediaUrls.length>1&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),au(b=>0===b?a.mediaUrls.length-1:b-1)},className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70",children:(0,b.jsx)(q.ChevronLeft,{className:"w-6 h-6"})}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),au(b=>b===a.mediaUrls.length-1?0:b+1)},className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/50 text-white hover:bg-black/70",children:(0,b.jsx)(r.ChevronRight,{className:"w-6 h-6"})}),(0,b.jsxs)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 rounded-full bg-black/50 text-white text-sm",children:[at+1," / ",a.mediaUrls.length]})]})]}):"video"===ax&&a.videoUrl?(0,b.jsx)("video",{src:a.videoUrl,controls:!0,autoPlay:!0,className:"max-w-full max-h-[95vh]",onClick:a=>a.stopPropagation()}):null})]})]})}a.s(["PostCard",()=>$],94770)}];

//# sourceMappingURL=src_components_feed_PostCard_tsx_f6fd8897._.js.map