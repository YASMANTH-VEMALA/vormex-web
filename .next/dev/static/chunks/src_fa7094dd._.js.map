{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useAuth } from '@/lib/auth/useAuth';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nexport function ProtectedRoute({ children }: ProtectedRouteProps) {\n  const { isAuthenticated, loading } = useAuth();\n  const router = useRouter();\n\n  React.useEffect(() => {\n    if (!loading && !isAuthenticated) {\n      router.push('/login');\n    }\n  }, [isAuthenticated, loading, router]);\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center min-h-screen\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!isAuthenticated) {\n    return null;\n  }\n\n  return <>{children}</>;\n}\n\n"],"names":["c","_c","React","useRouter","useAuth","ProtectedRouteProps","children","ReactNode","ProtectedRoute","t0","$","$i","Symbol","for","isAuthenticated","loading","router","t1","t2","ProtectedRoute[useEffect()]","push","useEffect","t3"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,OAAO,QAAQ,oBAAoB;;;AAJ5C,YAAY;;;;;AAUL,wBAAAK,EAAA;;IAAA,MAAAC,CAAA,OAAAT,gLAAA,EAAA;IAAA,IAAAS,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,GAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAAwB,MAAA,EAAAJ,QAAAA,EAAA,GAAAG,EAAiC;IAC9D,MAAA,EAAAK,eAAA,EAAAC,OAAAA,EAAA;IACA,MAAAC,MAAA;IAA2B,IAAAC,EAAA;IAAA,IAAAC,EAAA;IAAA,IAAAR,CAAA,CAAA,EAAA,KAAAI,eAAA,IAAAJ,CAAA,CAAA,EAAA,KAAAK,OAAA,IAAAL,CAAA,CAAA,EAAA,KAAAM,MAAA,EAAA;QAEXC,EAAA,GAAA,CAAA;YAAA,+BAAAE,CAAA;gBACd,IAAI,CAACJ,OAA2B,IAA5B,CAAaD,eAAe,EAAA;oBAC9BE,MAAM,CAAAI,IAAK,CAAC,QAAQ,CAAC;gBAAA;YACtB;SAAA,CAAA,CAAA,8BACF;QAAEF,EAAA,GAAA;YAACJ,eAAe;YAAEC,OAAO;YAAEC,MAAM;SAAC;QAAAN,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAK,OAAA;QAAAL,CAAA,CAAA,EAAA,GAAAM,MAAA;QAAAN,CAAA,CAAA,EAAA,GAAAO,EAAA;QAAAP,CAAA,CAAA,EAAA,GAAAQ,EAAA;IAAA,OAAA;QAAAD,EAAA,GAAAP,CAAA,CAAA,EAAA;QAAAQ,EAAA,GAAAR,CAAA,CAAA,EAAA;IAAA;IAJrCR,wKAAK,CAAAmB,SAAU,CAACJ,EAIf,EAAEC,EAAkC,CAAC;IAEtC,IAAIH,OAAO,EAAA;QAAA,IAAAO,EAAA;QAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;YAEPS,EAAA,iBAAA,6LAAA,GAKM;gBALS,SAA+C,EAA/C,+CAA+C;wCAC5D,6LAAA,GAGM;oBAHS,SAAa,EAAb,aAAa;;sCAC1B,6LAAA,GAA8F;4BAA/E,SAAwE,EAAxE,wEAAwE;;;;;;sCACvF,6LAAA,CAAgD;4BAAnC,SAAoB,EAApB,oBAAoB;sCAAC,UAAU,EAA5C,CAAgD,CAClD,EAHA,GAGM,CACR,EALA,GAKM;;;;;;;;;;;;;;;;;YAAAZ,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAA,OAAA;YAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;QAAA;QAAA,OALNY,EAKM;IAAA;IAIV,IAAI,CAACR,eAAe,EAAA;QAAA,OACX,IAAI;IAAA;IACZ,IAAAQ,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAJ,QAAA,EAAA;QAEMgB,EAAA,iBAAA,EAAGhB;sBAAAA,QAAO,CAAC,GAAI;;QAAAI,CAAA,CAAA,EAAA,GAAAJ,QAAA;QAAAI,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,OAAfY,EAAe;AAAA;;;QAxBelB,2IAAO,CAAC,CAAC;QAC/BD,kJAAS,CAAC,CAAC;;;KAFrBK","ignoreList":[]}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/posts.ts"],"sourcesContent":["// Posts API - Complete API client for Posts & Feed endpoints\n\nimport apiClient from './client';\nimport type {\n  Post,\n  FeedResponse,\n  Comment,\n  CommentsResponse,\n  MentionUser,\n  MentionNotification,\n} from '@/types/post';\n\n// ============================================\n// Feed Endpoints\n// ============================================\n\n/**\n * Get home feed with cursor-based pagination\n * @param cursor - Optional cursor for pagination\n * @param limit - Number of posts per page (default: 20)\n */\nexport async function getFeed(cursor?: string, limit: number = 20): Promise<FeedResponse> {\n  const params: Record<string, any> = { limit };\n  if (cursor) params.cursor = cursor;\n  return apiClient.get('/posts/feed', { params });\n}\n\n/**\n * Get a single post by ID\n * @param postId - Post ID\n */\nexport async function getPost(postId: string): Promise<Post> {\n  return apiClient.get(`/posts/${postId}`);\n}\n\n// ============================================\n// Post CRUD Endpoints\n// ============================================\n\n/**\n * Create a new post (supports all post types)\n * Uses FormData for file uploads\n */\nexport async function createPost(formData: FormData): Promise<Post> {\n  // Content-Type is automatically handled by the request interceptor for FormData\n  return apiClient.post('/posts', formData);\n}\n\n/**\n * Delete a post\n * @param postId - Post ID to delete\n */\nexport async function deletePost(postId: string): Promise<{ success: boolean }> {\n  return apiClient.delete(`/posts/${postId}`);\n}\n\n/**\n * Update a post (content and visibility only)\n * @param postId - Post ID to update\n * @param data - Updated content and/or visibility\n */\nexport async function updatePost(\n  postId: string,\n  data: { content?: string; visibility?: string }\n): Promise<Post> {\n  return apiClient.put(`/posts/${postId}`, data);\n}\n\n// ============================================\n// Engagement Endpoints\n// ============================================\n\n/**\n * Toggle like on a post\n * @param postId - Post ID\n */\nexport async function toggleLike(postId: string): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/like`);\n}\n\n/**\n * Vote on a poll\n * @param postId - Post ID\n * @param optionId - Poll option ID\n */\nexport async function votePoll(postId: string, optionId: string): Promise<{ success: boolean; pollOptions: any[] }> {\n  return apiClient.post(`/posts/${postId}/poll/vote`, { optionId });\n}\n\n/**\n * Share post to user(s)\n * @param postId - Post ID\n * @param userId - Target user ID to share with\n */\nexport async function sharePostToUser(postId: string, userId: string): Promise<{ message: string }> {\n  return apiClient.post(`/posts/${postId}/share`, { userId });\n}\n\n/**\n * Track post impression (view)\n * @param postId - Post ID\n * @param locationData - Optional location data\n */\nexport async function trackImpression(\n  postId: string,\n  locationData?: { lat: number; lng: number; city?: string; country?: string }\n): Promise<{ success: boolean }> {\n  return apiClient.post(`/posts/${postId}/impression`, locationData);\n}\n\n// ============================================\n// Comments Endpoints\n// ============================================\n\n/**\n * Get comments for a post\n * @param postId - Post ID\n * @param parentId - Optional parent comment ID for replies\n * @param page - Page number\n * @param limit - Comments per page\n */\nexport async function getComments(\n  postId: string,\n  parentId?: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<CommentsResponse> {\n  const params: Record<string, any> = { page, limit };\n  if (parentId) params.parentId = parentId;\n  return apiClient.get(`/posts/${postId}/comments`, { params });\n}\n\n/**\n * Create a comment on a post\n * Note: This is handled via WebSocket for real-time updates\n * This is a fallback HTTP endpoint\n */\nexport async function createComment(\n  postId: string,\n  content: string,\n  parentId?: string,\n  mentions?: string[]\n): Promise<Comment> {\n  return apiClient.post(`/posts/${postId}/comments`, {\n    content,\n    parentId,\n    mentions,\n  });\n}\n\n/**\n * Toggle like on a comment\n * Note: This is handled via WebSocket for real-time updates\n */\nexport async function toggleCommentLike(\n  postId: string,\n  commentId: string\n): Promise<{ liked: boolean; likesCount: number }> {\n  return apiClient.post(`/posts/${postId}/comments/${commentId}/like`);\n}\n\n// ============================================\n// Mention Endpoints\n// ============================================\n\n/**\n * Search users for @mention autocomplete\n * @param query - Search query\n */\nexport async function searchUsersForMention(query: string): Promise<MentionUser[]> {\n  const res = await apiClient.get('/mentions/search', { params: { q: query } });\n  return (res as { users?: MentionUser[] }).users ?? [];\n}\n\n/**\n * Get unread mentions\n */\nexport async function getUnreadMentions(): Promise<MentionNotification[]> {\n  return apiClient.get('/mentions/unread');\n}\n\n/**\n * Get unread mention count\n */\nexport async function getUnreadMentionCount(): Promise<{ count: number }> {\n  return apiClient.get('/mentions/count');\n}\n\n/**\n * Mark mentions as read\n * @param mentionIds - Array of mention IDs to mark as read\n */\nexport async function markMentionsAsRead(mentionIds: string[]): Promise<{ success: boolean }> {\n  return apiClient.post('/mentions/read', { mentionIds });\n}\n\n// ============================================\n// Upload Endpoints\n// ============================================\n\n/**\n * Upload avatar image\n * @param file - Image file\n */\nexport async function uploadAvatar(file: File): Promise<{ avatarUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/avatar', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload banner image\n * @param file - Image file\n */\nexport async function uploadBanner(file: File): Promise<{ bannerUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/banner', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload certificate/document image\n * @param file - Image file\n */\nexport async function uploadCertificate(file: File): Promise<{ certificateUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/certificate', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Upload project image\n * @param file - Image file\n */\nexport async function uploadProjectImage(file: File): Promise<{ imageUrl: string }> {\n  const formData = new FormData();\n  formData.append('image', file);\n  return apiClient.post('/upload/project', formData, {\n    headers: { 'Content-Type': 'multipart/form-data' },\n  });\n}\n\n/**\n * Delete an uploaded file\n * @param fileUrl - URL of file to delete\n * @param type - Type of file (avatar, banner, post)\n */\nexport async function deleteUpload(fileUrl: string, type: 'avatar' | 'banner' | 'post'): Promise<{ success: boolean }> {\n  return apiClient.delete('/upload', { data: { fileUrl, type } });\n}\n\n// ============================================\n// Location Endpoints\n// ============================================\n\n/**\n * Update user location\n */\nexport async function updateLocation(\n  lat: number,\n  lng: number,\n  accuracy?: number,\n  activity?: string\n): Promise<any> {\n  return apiClient.post('/location/update', { lat, lng, accuracy, activity });\n}\n\n/**\n * Get current user's location\n */\nexport async function getMyLocation(): Promise<any> {\n  return apiClient.get('/location/me');\n}\n\n/**\n * Get nearby users\n * @param radius - Search radius in km (default: 50)\n * @param limit - Max users to return (default: 20)\n */\nexport async function getNearbyUsers(radius?: number, limit?: number): Promise<any[]> {\n  const params: Record<string, any> = {};\n  if (radius) params.radius = radius;\n  if (limit) params.limit = limit;\n  return apiClient.get('/location/nearby', { params });\n}\n\n/**\n * Update location settings\n */\nexport async function updateLocationSettings(settings: {\n  locationPermission?: boolean;\n  shareLocationPublic?: boolean;\n}): Promise<{ message: string }> {\n  return apiClient.put('/location/settings', settings);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 333, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/saved.ts"],"sourcesContent":["import apiClient from './client';\nimport type { Post } from '@/types/post';\n\nexport interface SavedPostsResponse {\n  posts: (Post & { savedAt?: string })[];\n  nextCursor: string | null;\n  hasMore: boolean;\n  pagination?: {\n    page: number;\n    limit: number;\n    totalCount: number;\n    totalPages: number;\n    hasMore: boolean;\n  };\n}\n\nexport interface ToggleSaveResponse {\n  message: string;\n  saved: boolean;\n  savesCount: number;\n}\n\n// Get all saved posts (cursor-based pagination)\nexport const getSavedPosts = async (\n  cursor?: string | null,\n  limit = 20\n): Promise<SavedPostsResponse> => {\n  const params: Record<string, string | number> = { limit };\n  if (cursor) params.cursor = cursor;\n  const res = await apiClient.get('/saved', { params });\n  return {\n    posts: res.posts || [],\n    nextCursor: res.nextCursor ?? null,\n    hasMore: res.hasMore ?? false,\n    pagination: {\n      page: 1,\n      limit,\n      totalCount: res.posts?.length ?? 0,\n      totalPages: res.hasMore ? 2 : 1,\n      hasMore: res.hasMore ?? false,\n    },\n  };\n};\n\n// Toggle save status\nexport const toggleSavePost = async (postId: string): Promise<ToggleSaveResponse> => {\n  return apiClient.post(`/saved/${postId}/toggle`);\n};\n\n// Save a post\nexport const savePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.post(`/saved/${postId}`);\n};\n\n// Unsave a post\nexport const unsavePost = async (postId: string): Promise<{ message: string }> => {\n  return apiClient.delete(`/saved/${postId}`);\n};\n\n// Check if post is saved\nexport const checkPostSaved = async (postId: string): Promise<{ saved: boolean }> => {\n  return apiClient.get(`/saved/${postId}/check`);\n};\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAuBO,MAAM,gBAAgB,OAC3B,QACA,QAAQ,EAAE;IAEV,MAAM,SAA0C;QAAE;IAAM;IACxD,IAAI,QAAQ,OAAO,MAAM,GAAG;IAC5B,MAAM,MAAM,MAAM,yIAAS,CAAC,GAAG,CAAC,UAAU;QAAE;IAAO;IACnD,OAAO;QACL,OAAO,IAAI,KAAK,IAAI,EAAE;QACtB,YAAY,IAAI,UAAU,IAAI;QAC9B,SAAS,IAAI,OAAO,IAAI;QACxB,YAAY;YACV,MAAM;YACN;YACA,YAAY,IAAI,KAAK,EAAE,UAAU;YACjC,YAAY,IAAI,OAAO,GAAG,IAAI;YAC9B,SAAS,IAAI,OAAO,IAAI;QAC1B;IACF;AACF;AAGO,MAAM,iBAAiB,OAAO;IACnC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,OAAO,CAAC;AACjD;AAGO,MAAM,WAAW,OAAO;IAC7B,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ;AAC1C;AAGO,MAAM,aAAa,OAAO;IAC/B,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ;AAC5C;AAGO,MAAM,iBAAiB,OAAO;IACnC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,OAAO,MAAM,CAAC;AAC/C"}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ReactionPicker.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  ThumbsUp, \n  PartyPopper, \n  Heart, \n  Lightbulb, \n  HelpCircle \n} from 'lucide-react';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface ReactionPickerProps {\n  isOpen: boolean;\n  currentReaction?: ReactionType | null;\n  onSelect: (reaction: ReactionType) => void;\n  onClose: () => void;\n}\n\n// Reaction configurations with LinkedIn-style icons\nexport const REACTIONS: {\n  type: ReactionType;\n  icon: React.ElementType;\n  label: string;\n  color: string;\n  bgColor: string;\n  hoverScale: number;\n}[] = [\n  { \n    type: 'LIKE', \n    icon: ThumbsUp, \n    label: 'Like', \n    color: 'text-blue-600',\n    bgColor: 'bg-blue-100 dark:bg-blue-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CELEBRATE', \n    icon: PartyPopper, \n    label: 'Celebrate', \n    color: 'text-green-600',\n    bgColor: 'bg-green-100 dark:bg-green-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'SUPPORT', \n    icon: Heart, \n    label: 'Support', \n    color: 'text-purple-600',\n    bgColor: 'bg-purple-100 dark:bg-purple-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'INSIGHTFUL', \n    icon: Lightbulb, \n    label: 'Insightful', \n    color: 'text-amber-600',\n    bgColor: 'bg-amber-100 dark:bg-amber-900/30',\n    hoverScale: 1.3,\n  },\n  { \n    type: 'CURIOUS', \n    icon: HelpCircle, \n    label: 'Curious', \n    color: 'text-pink-600',\n    bgColor: 'bg-pink-100 dark:bg-pink-900/30',\n    hoverScale: 1.3,\n  },\n];\n\n// Helper to get reaction config by type\nexport function getReactionConfig(type: ReactionType) {\n  return REACTIONS.find(r => r.type === type) || REACTIONS[0];\n}\n\n// Reaction icons for summary display\nexport function ReactionIcon({ \n  type, \n  size = 16,\n  className = '' \n}: { \n  type: ReactionType; \n  size?: number;\n  className?: string;\n}) {\n  const config = getReactionConfig(type);\n  const Icon = config.icon;\n  \n  return (\n    <div className={`inline-flex items-center justify-center rounded-full p-1 ${config.bgColor} ${className}`}>\n      <Icon className={`${config.color}`} size={size} />\n    </div>\n  );\n}\n\nexport function ReactionPicker({ \n  isOpen, \n  currentReaction,\n  onSelect, \n  onClose \n}: ReactionPickerProps) {\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <div \n            className=\"fixed inset-0 z-40\"\n            onClick={onClose}\n          />\n          \n          {/* Reaction picker */}\n          <motion.div\n            initial={{ opacity: 0, y: 10, scale: 0.9 }}\n            animate={{ opacity: 1, y: 0, scale: 1 }}\n            exit={{ opacity: 0, y: 10, scale: 0.9 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"absolute bottom-full left-0 mb-2 z-50\"\n          >\n            <div className=\"bg-white dark:bg-neutral-800 rounded-full shadow-lg border border-gray-200 dark:border-neutral-700 px-2 py-1.5 flex items-center gap-1\">\n              {REACTIONS.map((reaction) => {\n                const Icon = reaction.icon;\n                const isSelected = currentReaction === reaction.type;\n                \n                return (\n                  <motion.button\n                    key={reaction.type}\n                    whileHover={{ scale: reaction.hoverScale, y: -8 }}\n                    whileTap={{ scale: 0.95 }}\n                    onClick={() => {\n                      onSelect(reaction.type);\n                      onClose();\n                    }}\n                    className={`relative p-2 rounded-full transition-colors group ${\n                      isSelected \n                        ? reaction.bgColor \n                        : 'hover:bg-gray-100 dark:hover:bg-neutral-700'\n                    }`}\n                    title={reaction.label}\n                  >\n                    <Icon \n                      className={`w-6 h-6 transition-transform ${\n                        isSelected ? reaction.color : 'text-gray-500 dark:text-neutral-400'\n                      } group-hover:${reaction.color}`}\n                    />\n                    \n                    {/* Tooltip */}\n                    <motion.span\n                      initial={{ opacity: 0, y: 5 }}\n                      whileHover={{ opacity: 1, y: 0 }}\n                      className=\"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 dark:bg-neutral-700 text-white text-xs rounded whitespace-nowrap pointer-events-none\"\n                    >\n                      {reaction.label}\n                    </motion.span>\n                  </motion.button>\n                );\n              })}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n\n// Summary of reactions (shows top 3 reaction icons)\nexport function ReactionSummaryDisplay({ \n  reactionSummary,\n  totalCount,\n  onClick,\n}: { \n  reactionSummary: ReactionSummaryType[];\n  totalCount: number;\n  onClick?: () => void;\n}) {\n  if (totalCount === 0) return null;\n  \n  // Get top 3 unique reaction types\n  const topReactions = reactionSummary.slice(0, 3);\n  \n  return (\n    <button \n      onClick={onClick}\n      className=\"flex items-center gap-1 text-sm text-gray-500 dark:text-neutral-400 hover:underline\"\n    >\n      <div className=\"flex -space-x-1\">\n        {topReactions.map((reaction, index) => (\n          <ReactionIcon \n            key={reaction.type} \n            type={reaction.type} \n            size={14}\n            className=\"border-2 border-white dark:border-neutral-900\"\n          />\n        ))}\n      </div>\n      <span>{totalCount}</span>\n    </button>\n  );\n}\n"],"names":["c","_c","React","motion","AnimatePresence","ThumbsUp","PartyPopper","Heart","Lightbulb","HelpCircle","ReactionType","ReactionSummary","ReactionSummaryType","ReactionPickerProps","isOpen","currentReaction","onSelect","reaction","onClose","REACTIONS","type","icon","ElementType","label","color","bgColor","hoverScale","getReactionConfig","find","r","ReactionIcon","t0","$","$i","Symbol","for","size","t1","className","t2","undefined","t3","config","Icon","t4","t5","t6","t7","ReactionPicker","opacity","y","scale","damping","stiffness","map","isSelected","ReactionPicker[REACTIONS.map() > <motion.button>.onClick]","ReactionSummaryDisplay","reactionSummary","totalCount","onClick","topReactions","slice","_ReactionSummaryDisplayTopReactionsMap","index"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/FormattedContent.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport Link from 'next/link';\n\ninterface FormattedContentProps {\n  content: string;\n  className?: string;\n}\n\n/**\n * Renders formatted post content with support for:\n * - **bold** text\n * - *italic* text\n * - `code` inline\n * - @mentions (clickable links)\n * - [color:red]colored text[/color]\n * - URLs (auto-linked)\n * - Line breaks\n */\nexport function FormattedContent({ content, className = '' }: FormattedContentProps) {\n  if (!content) return null;\n\n  const renderFormattedText = (text: string): React.ReactNode[] => {\n    const elements: React.ReactNode[] = [];\n    let remaining = text;\n    let key = 0;\n\n    while (remaining.length > 0) {\n      // Check for color tags: [color:red]text[/color]\n      const colorMatch = remaining.match(/^\\[color:([a-zA-Z]+|#[0-9a-fA-F]{3,6})\\]([\\s\\S]*?)\\[\\/color\\]/);\n      if (colorMatch) {\n        const [fullMatch, color, innerText] = colorMatch;\n        elements.push(\n          <span key={key++} style={{ color }}>\n            {renderFormattedText(innerText)}\n          </span>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for bold: **text**\n      const boldMatch = remaining.match(/^\\*\\*(.+?)\\*\\*/);\n      if (boldMatch) {\n        const [fullMatch, innerText] = boldMatch;\n        elements.push(\n          <strong key={key++} className=\"font-bold\">\n            {renderFormattedText(innerText)}\n          </strong>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for italic: *text* (but not **)\n      const italicMatch = remaining.match(/^\\*([^*]+?)\\*/);\n      if (italicMatch) {\n        const [fullMatch, innerText] = italicMatch;\n        elements.push(\n          <em key={key++} className=\"italic\">\n            {renderFormattedText(innerText)}\n          </em>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for inline code: `code`\n      const codeMatch = remaining.match(/^`([^`]+?)`/);\n      if (codeMatch) {\n        const [fullMatch, innerText] = codeMatch;\n        elements.push(\n          <code \n            key={key++} \n            className=\"px-1.5 py-0.5 rounded bg-gray-100 dark:bg-neutral-800 text-pink-600 dark:text-pink-400 font-mono text-sm\"\n          >\n            {innerText}\n          </code>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for mentions: @username\n      const mentionMatch = remaining.match(/^@([a-zA-Z0-9_]+)/);\n      if (mentionMatch) {\n        const [fullMatch, username] = mentionMatch;\n        elements.push(\n          <Link \n            key={key++}\n            href={`/profile/${username}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline font-medium\"\n          >\n            @{username}\n          </Link>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for URLs\n      const urlMatch = remaining.match(/^(https?:\\/\\/[^\\s]+)/);\n      if (urlMatch) {\n        const [fullMatch] = urlMatch;\n        elements.push(\n          <a \n            key={key++}\n            href={fullMatch}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-blue-600 dark:text-blue-400 hover:underline break-all\"\n          >\n            {fullMatch}\n          </a>\n        );\n        remaining = remaining.slice(fullMatch.length);\n        continue;\n      }\n\n      // Check for line breaks\n      if (remaining.startsWith('\\n')) {\n        elements.push(<br key={key++} />);\n        remaining = remaining.slice(1);\n        continue;\n      }\n\n      // Find next special character or take the rest\n      const nextSpecialIndex = remaining.search(/[\\*`@\\[\\n]|https?:\\/\\//);\n      if (nextSpecialIndex === -1) {\n        // No more special chars, add rest as plain text\n        elements.push(<span key={key++}>{remaining}</span>);\n        break;\n      } else if (nextSpecialIndex === 0) {\n        // Special char at start but didn't match pattern - add single char\n        elements.push(<span key={key++}>{remaining[0]}</span>);\n        remaining = remaining.slice(1);\n      } else {\n        // Add text before special char\n        elements.push(<span key={key++}>{remaining.slice(0, nextSpecialIndex)}</span>);\n        remaining = remaining.slice(nextSpecialIndex);\n      }\n    }\n\n    return elements;\n  };\n\n  return (\n    <div className={`whitespace-pre-wrap break-words ${className}`}>\n      {renderFormattedText(content)}\n    </div>\n  );\n}\n\n// Color presets for the color picker\nexport const COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n  { name: 'Cyan', value: '#06b6d4' },\n];\n"],"names":["c","_c","React","Link","FormattedContentProps","content","className","FormattedContent","t0","$","$i","Symbol","for","t1","undefined","t2","t3","renderFormattedText","text","elements","remaining","key","length","colorMatch","match","fullMatch","color","innerText","push","slice","boldMatch","fullMatch_0","innerText_0","italicMatch","fullMatch_1","innerText_1","codeMatch","fullMatch_2","innerText_2","mentionMatch","fullMatch_3","username","urlMatch","fullMatch_4","startsWith","nextSpecialIndex","search","t4","COLOR_PRESETS","name","value"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1006, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/EditPostModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  X,\n  Globe,\n  Users,\n  Lock,\n  ChevronDown,\n  Loader2,\n  Bold,\n  Italic,\n  List,\n  Code,\n  AtSign,\n  Palette,\n  Pencil,\n} from 'lucide-react';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { updatePost } from '@/lib/api/posts';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport type { Post, PostVisibility, MentionUser } from '@/types/post';\n\ninterface EditPostModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  post: Post;\n  onPostUpdated?: (updatedPost: Post) => void;\n}\n\nconst VISIBILITY_OPTIONS: { value: PostVisibility; label: string; icon: React.ElementType }[] = [\n  { value: 'PUBLIC', label: 'Anyone', icon: Globe },\n  { value: 'CONNECTIONS', label: 'Connections only', icon: Users },\n  { value: 'PRIVATE', label: 'Only me', icon: Lock },\n];\n\nconst COLOR_PRESETS = [\n  { name: 'Red', value: '#ef4444' },\n  { name: 'Orange', value: '#f97316' },\n  { name: 'Yellow', value: '#eab308' },\n  { name: 'Green', value: '#22c55e' },\n  { name: 'Teal', value: '#14b8a6' },\n  { name: 'Blue', value: '#3b82f6' },\n  { name: 'Purple', value: '#a855f7' },\n  { name: 'Pink', value: '#ec4899' },\n];\n\nexport function EditPostModal({ isOpen, onClose, post, onPostUpdated }: EditPostModalProps) {\n  const { user } = useAuth();\n  const [content, setContent] = useState(post.content || '');\n  const [visibility, setVisibility] = useState<PostVisibility>(post.visibility);\n  const [showVisibilityDropdown, setShowVisibilityDropdown] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  \n  // Color picker state\n  const [showColorPicker, setShowColorPicker] = useState(false);\n  const colorPickerRef = useRef<HTMLDivElement>(null);\n  \n  // Refs\n  const contentRef = useRef<HTMLTextAreaElement>(null);\n\n  // Close color picker when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (colorPickerRef.current && !colorPickerRef.current.contains(event.target as Node)) {\n        setShowColorPicker(false);\n      }\n    };\n\n    if (showColorPicker) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showColorPicker]);\n\n  // Update content when post prop changes\n  useEffect(() => {\n    setContent(post.content || '');\n    setVisibility(post.visibility);\n  }, [post]);\n\n  // Mention search\n  useEffect(() => {\n    const searchMentions = async () => {\n      if (mentionQuery.length >= 2) {\n        try {\n          const results = await searchUsersForMention(mentionQuery);\n          setMentionResults(results);\n          setShowMentionDropdown(true);\n        } catch (error) {\n          console.error('Error searching mentions:', error);\n        }\n      } else {\n        setMentionResults([]);\n        setShowMentionDropdown(false);\n      }\n    };\n\n    const debounce = setTimeout(searchMentions, 300);\n    return () => clearTimeout(debounce);\n  }, [mentionQuery]);\n\n  const handleContentChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setContent(value);\n\n    // Check for @ mentions\n    const cursorPos = e.target.selectionStart;\n    const textBeforeCursor = value.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n\n    if (lastAtIndex !== -1) {\n      const textAfterAt = textBeforeCursor.slice(lastAtIndex + 1);\n      if (!textAfterAt.includes(' ') && textAfterAt.length >= 1) {\n        setMentionQuery(textAfterAt);\n      } else {\n        setMentionQuery('');\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setMentionQuery('');\n      setShowMentionDropdown(false);\n    }\n  };\n\n  const insertMention = (user: MentionUser) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const cursorPos = textarea.selectionStart;\n    const textBeforeCursor = content.slice(0, cursorPos);\n    const lastAtIndex = textBeforeCursor.lastIndexOf('@');\n    const textAfterCursor = content.slice(cursorPos);\n\n    const newContent = \n      content.slice(0, lastAtIndex) + \n      `@${user.username} ` + \n      textAfterCursor;\n\n    setContent(newContent);\n    setMentionQuery('');\n    setShowMentionDropdown(false);\n\n    setTimeout(() => {\n      const newCursorPos = lastAtIndex + user.username.length + 2;\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Text formatting helpers\n  const formatText = (wrapper: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + wrapper + selectedText + wrapper + content.slice(end);\n      newCursorPos = end + wrapper.length * 2;\n    } else {\n      newContent = content.slice(0, start) + wrapper + wrapper + content.slice(end);\n      newCursorPos = start + wrapper.length;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleBold = () => formatText('**');\n  const handleItalic = () => formatText('*');\n  const handleCode = () => formatText('`');\n\n  const handleList = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const beforeCursor = content.slice(0, start);\n    const afterCursor = content.slice(start);\n    const lineStart = beforeCursor.lastIndexOf('\\n') + 1;\n    const lineContent = beforeCursor.slice(lineStart);\n    \n    let newContent: string;\n    let newCursorPos: number;\n\n    if (lineContent.startsWith('- ')) {\n      newContent = content.slice(0, lineStart) + lineContent.slice(2) + afterCursor;\n      newCursorPos = start - 2;\n    } else {\n      newContent = content.slice(0, lineStart) + '- ' + lineContent + afterCursor;\n      newCursorPos = start + 2;\n    }\n\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  const handleMentionClick = () => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const newContent = content.slice(0, start) + '@' + content.slice(start);\n    setContent(newContent);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + 1, start + 1);\n    }, 0);\n  };\n\n  const handleColorInsert = (colorValue: string) => {\n    const textarea = contentRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.slice(start, end);\n    const openTag = `[color:${colorValue}]`;\n    const closeTag = '[/color]';\n\n    let newContent: string;\n    let newCursorPos: number;\n\n    if (selectedText) {\n      newContent = content.slice(0, start) + openTag + selectedText + closeTag + content.slice(end);\n      newCursorPos = start + openTag.length + selectedText.length + closeTag.length;\n    } else {\n      newContent = content.slice(0, start) + openTag + closeTag + content.slice(start);\n      newCursorPos = start + openTag.length;\n    }\n\n    setContent(newContent);\n    setShowColorPicker(false);\n    \n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(newCursorPos, newCursorPos);\n    }, 0);\n  };\n\n  // Submit update\n  const handleSubmit = async () => {\n    if (isSubmitting) return;\n    \n    setError(null);\n    setIsSubmitting(true);\n    \n    try {\n      const updatedPost = await updatePost(post.id, {\n        content,\n        visibility,\n      });\n      \n      onPostUpdated?.(updatedPost);\n      onClose();\n    } catch (err: any) {\n      console.error('Update post error:', err);\n      setError(err.message || 'Failed to update post');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const selectedVisibility = VISIBILITY_OPTIONS.find(v => v.value === visibility) || VISIBILITY_OPTIONS[0];\n  const VisibilityIcon = selectedVisibility.icon;\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          style={{ backgroundColor: 'rgba(0, 0, 0, 0.5)' }}\n          onClick={onClose}\n        >\n          <motion.div\n            initial={{ scale: 0.95, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            exit={{ scale: 0.95, opacity: 0 }}\n            onClick={(e) => e.stopPropagation()}\n            className=\"w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl\"\n            style={{\n              background: '#ecf0f3',\n              boxShadow: '20px 20px 60px #c9ccd1, -20px -20px 60px #ffffff',\n            }}\n          >\n            {/* Header */}\n            <div \n              className=\"flex items-center justify-between p-6 border-b\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <div className=\"flex items-center gap-3\">\n                <div \n                  className=\"p-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                  }}\n                >\n                  <Pencil className=\"w-5 h-5 text-blue-600\" />\n                </div>\n                <h2 \n                  className=\"text-xl font-bold\"\n                  style={{\n                    fontFamily: \"'Montserrat', sans-serif\",\n                    color: '#2d3748',\n                  }}\n                >\n                  Edit Post\n                </h2>\n              </div>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                <X className=\"w-5 h-5 text-gray-500\" />\n              </button>\n            </div>\n\n            {/* Content */}\n            <div className=\"p-6 space-y-6\">\n              {/* User Info & Visibility */}\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div \n                    className=\"w-12 h-12 rounded-full overflow-hidden\"\n                    style={{\n                      boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                    }}\n                  >\n                    {user?.profileImage ? (\n                      <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white font-bold\">\n                        {user?.name?.charAt(0).toUpperCase() || 'U'}\n                      </div>\n                    )}\n                  </div>\n                  <div>\n                    <p className=\"font-semibold text-gray-800\">{user?.name}</p>\n                    <div className=\"relative\">\n                      <button\n                        onClick={() => setShowVisibilityDropdown(!showVisibilityDropdown)}\n                        className=\"flex items-center gap-1 text-sm text-gray-500 hover:text-gray-700\"\n                      >\n                        <VisibilityIcon className=\"w-3 h-3\" />\n                        <span>{selectedVisibility.label}</span>\n                        <ChevronDown className=\"w-3 h-3\" />\n                      </button>\n                      \n                      {showVisibilityDropdown && (\n                        <div \n                          className=\"absolute top-full left-0 mt-1 py-1 rounded-lg z-20 min-w-[140px]\"\n                          style={{\n                            background: '#ecf0f3',\n                            boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                          }}\n                        >\n                          {VISIBILITY_OPTIONS.map((option) => (\n                            <button\n                              key={option.value}\n                              onClick={() => {\n                                setVisibility(option.value);\n                                setShowVisibilityDropdown(false);\n                              }}\n                              className=\"flex items-center gap-2 w-full px-4 py-2 text-left text-sm hover:bg-gray-100\"\n                            >\n                              <option.icon className=\"w-4 h-4 text-gray-500\" />\n                              <span className=\"text-gray-700\">{option.label}</span>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                \n                <span className=\"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded\">\n                  {post.type}\n                </span>\n              </div>\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"p-3 rounded-lg bg-red-50 text-red-600 text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* Rich Text Editor Area */}\n              <div className=\"relative\">\n                {/* Formatting Toolbar */}\n                <div \n                  className=\"flex items-center gap-2 p-2 mb-2 rounded-lg\"\n                  style={{\n                    background: '#ecf0f3',\n                    boxShadow: 'inset 2px 2px 4px #d1d9e6, inset -2px -2px 4px #f9f9f9',\n                  }}\n                >\n                  <button \n                    type=\"button\"\n                    onClick={handleBold}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bold (**text**)\"\n                  >\n                    <Bold className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleItalic}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Italic (*text*)\"\n                  >\n                    <Italic className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleList}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Bullet List\"\n                  >\n                    <List className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <button \n                    type=\"button\"\n                    onClick={handleCode}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Code (`code`)\"\n                  >\n                    <Code className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"w-px h-5 bg-gray-300 mx-1\" />\n                  <button \n                    type=\"button\"\n                    onClick={handleMentionClick}\n                    className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                    title=\"Mention someone (@)\"\n                  >\n                    <AtSign className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                  <div className=\"relative\" ref={colorPickerRef}>\n                    <button \n                      type=\"button\"\n                      onClick={() => setShowColorPicker(!showColorPicker)}\n                      className=\"p-2 rounded hover:bg-gray-200 transition-colors\" \n                      title=\"Text Color\"\n                    >\n                      <Palette className=\"w-4 h-4 text-gray-600\" />\n                    </button>\n                    {/* Color Picker Dropdown */}\n                    {showColorPicker && (\n                      <div \n                        className=\"absolute top-full left-1/2 -translate-x-1/2 mt-2 p-3 rounded-xl z-30 min-w-[200px]\"\n                        style={{\n                          background: '#ecf0f3',\n                          boxShadow: '6px 6px 12px #d1d9e6, -6px -6px 12px #ffffff',\n                        }}\n                      >\n                        <p className=\"text-xs font-medium text-gray-500 mb-2 text-center\">Choose Color</p>\n                        <div className=\"grid grid-cols-4 gap-2\">\n                          {COLOR_PRESETS.map((color) => (\n                            <button\n                              key={color.value}\n                              type=\"button\"\n                              onClick={() => handleColorInsert(color.value)}\n                              className=\"group flex flex-col items-center gap-1\"\n                            >\n                              <div \n                                className=\"w-8 h-8 rounded-full border-2 border-white shadow-md hover:scale-110 hover:shadow-lg transition-all duration-200\"\n                                style={{ backgroundColor: color.value }}\n                              />\n                              <span className=\"text-[10px] text-gray-500 group-hover:text-gray-700\">{color.name}</span>\n                            </button>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                \n                {/* Content Textarea */}\n                <div className=\"relative\">\n                  <textarea\n                    ref={contentRef}\n                    value={content}\n                    onChange={handleContentChange}\n                    placeholder=\"What do you want to share?\"\n                    className=\"w-full min-h-[180px] p-5 rounded-xl text-gray-800 placeholder-gray-400 resize-none outline-none text-base leading-relaxed\"\n                    style={{\n                      background: '#ecf0f3',\n                      boxShadow: 'inset 4px 4px 8px #d1d9e6, inset -4px -4px 8px #f9f9f9',\n                      fontFamily: \"'Montserrat', sans-serif\",\n                    }}\n                  />\n                  \n                  {/* Mention Dropdown */}\n                  {showMentionDropdown && (\n                    <div \n                      className=\"absolute bottom-full left-0 w-64 mb-2 py-2 rounded-lg max-h-48 overflow-y-auto z-20\"\n                      style={{\n                        background: '#ecf0f3',\n                        boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                      }}\n                    >\n                      {mentionResults.map((user) => (\n                        <button\n                          key={user.id}\n                          onClick={() => insertMention(user)}\n                          className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 transition-colors\"\n                        >\n                          <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-300\">\n                            {user.profileImage && (\n                              <img src={user.profileImage} alt={user.name} className=\"w-full h-full object-cover\" />\n                            )}\n                          </div>\n                          <div className=\"text-left\">\n                            <p className=\"text-sm font-medium text-gray-800\">{user.name}</p>\n                            <p className=\"text-xs text-gray-500\">@{user.username}</p>\n                          </div>\n                        </button>\n                      ))}\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Post type note */}\n              <p className=\"text-xs text-gray-400 text-center\">\n                Note: Only text content and visibility can be edited. Media, polls, and links cannot be changed.\n              </p>\n            </div>\n\n            {/* Footer */}\n            <div \n              className=\"flex justify-end gap-3 p-6 border-t\"\n              style={{ borderColor: '#d1d9e6' }}\n            >\n              <button\n                onClick={onClose}\n                className=\"px-6 py-2.5 rounded-xl text-gray-600 font-medium transition-all hover:scale-105\"\n                style={{\n                  background: '#ecf0f3',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={isSubmitting || !content.trim()}\n                className=\"px-8 py-2.5 rounded-xl text-white font-semibold transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed\"\n                style={{\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n                  boxShadow: '4px 4px 8px #d1d9e6, -4px -4px 8px #f9f9f9',\n                }}\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center gap-2\">\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Saving...\n                  </span>\n                ) : (\n                  'Save Changes'\n                )}\n              </button>\n            </div>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useRef","useEffect","motion","AnimatePresence","X","Globe","Users","Lock","ChevronDown","Loader2","Bold","Italic","List","Code","AtSign","Palette","Pencil","useAuth","updatePost","searchUsersForMention","Post","PostVisibility","MentionUser","EditPostModalProps","isOpen","onClose","post","onPostUpdated","updatedPost","VISIBILITY_OPTIONS","value","label","icon","ElementType","COLOR_PRESETS","name","EditPostModal","user","content","setContent","visibility","setVisibility","showVisibilityDropdown","setShowVisibilityDropdown","isSubmitting","setIsSubmitting","error","setError","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","showColorPicker","setShowColorPicker","colorPickerRef","HTMLDivElement","contentRef","HTMLTextAreaElement","handleClickOutside","event","MouseEvent","current","contains","target","Node","document","addEventListener","removeEventListener","searchMentions","length","results","console","debounce","setTimeout","clearTimeout","handleContentChange","e","ChangeEvent","cursorPos","selectionStart","textBeforeCursor","slice","lastAtIndex","lastIndexOf","textAfterAt","includes","insertMention","textarea","textAfterCursor","newContent","username","newCursorPos","focus","setSelectionRange","formatText","wrapper","start","end","selectionEnd","selectedText","handleBold","handleItalic","handleCode","handleList","beforeCursor","afterCursor","lineStart","lineContent","startsWith","handleMentionClick","handleColorInsert","colorValue","openTag","closeTag","handleSubmit","id","err","message","selectedVisibility","find","v","VisibilityIcon","opacity","backgroundColor","scale","stopPropagation","background","boxShadow","borderColor","fontFamily","color","profileImage","charAt","toUpperCase","map","option","type","trim"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1959, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/LikeListModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { X, Loader2 } from 'lucide-react';\nimport Image from 'next/image';\nimport Link from 'next/link';\nimport { getReactionConfig, REACTIONS } from './ReactionPicker';\nimport type { ReactionType } from '@/types/post';\nimport apiClient from '@/lib/api/client';\n\ninterface LikeUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  headline: string | null;\n  reactionType: ReactionType;\n  createdAt: string;\n}\n\ninterface LikeListModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  totalCount: number;\n}\n\nexport function LikeListModal({ isOpen, onClose, postId, totalCount }: LikeListModalProps) {\n  const [likes, setLikes] = useState<LikeUser[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedFilter, setSelectedFilter] = useState<ReactionType | 'ALL'>('ALL');\n  const [reactionCounts, setReactionCounts] = useState<Record<ReactionType, number>>({\n    LIKE: 0,\n    CELEBRATE: 0,\n    SUPPORT: 0,\n    INSIGHTFUL: 0,\n    CURIOUS: 0,\n  });\n\n  useEffect(() => {\n    if (!isOpen || !postId) return;\n\n    const fetchLikes = async () => {\n      setLoading(true);\n      try {\n        // apiClient already extracts response.data, so response IS the data\n        const data = await apiClient.get(`/posts/${postId}/likes`) as any;\n        setLikes(data.likes || []);\n        \n        // Calculate reaction counts\n        const counts: Record<ReactionType, number> = {\n          LIKE: 0,\n          CELEBRATE: 0,\n          SUPPORT: 0,\n          INSIGHTFUL: 0,\n          CURIOUS: 0,\n        };\n        data.likes?.forEach((like: LikeUser) => {\n          if (like.reactionType && counts[like.reactionType] !== undefined) {\n            counts[like.reactionType]++;\n          }\n        });\n        setReactionCounts(counts);\n      } catch (error) {\n        console.error('Error fetching likes:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchLikes();\n  }, [isOpen, postId]);\n\n  const filteredLikes = selectedFilter === 'ALL' \n    ? likes \n    : likes.filter(like => like.reactionType === selectedFilter);\n\n  // Get reactions with counts > 0\n  const activeReactions = REACTIONS.filter(r => reactionCounts[r.type] > 0);\n\n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <>\n          {/* Backdrop */}\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={onClose}\n            className=\"fixed inset-0 bg-black/50 z-50\"\n          />\n\n          {/* Modal */}\n          <motion.div\n            initial={{ opacity: 0, scale: 0.95, y: 20 }}\n            animate={{ opacity: 1, scale: 1, y: 0 }}\n            exit={{ opacity: 0, scale: 0.95, y: 20 }}\n            transition={{ type: 'spring', damping: 25, stiffness: 400 }}\n            className=\"fixed inset-x-4 top-[10%] md:inset-auto md:left-1/2 md:top-1/2 md:-translate-x-1/2 md:-translate-y-1/2 bg-white dark:bg-neutral-900 rounded-2xl shadow-2xl z-50 max-w-lg w-full max-h-[80vh] overflow-hidden\"\n          >\n            {/* Header */}\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                Reactions\n              </h2>\n              <button\n                onClick={onClose}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n              >\n                <X className=\"w-5 h-5 text-gray-500 dark:text-neutral-400\" />\n              </button>\n            </div>\n\n            {/* Reaction Filter Tabs */}\n            <div className=\"flex items-center gap-1 p-2 border-b border-gray-200 dark:border-neutral-800 overflow-x-auto\">\n              <button\n                onClick={() => setSelectedFilter('ALL')}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                  selectedFilter === 'ALL'\n                    ? 'bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400'\n                    : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                }`}\n              >\n                All\n                <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                  {totalCount}\n                </span>\n              </button>\n\n              {activeReactions.map((reaction) => {\n                const Icon = reaction.icon;\n                const count = reactionCounts[reaction.type];\n                \n                return (\n                  <button\n                    key={reaction.type}\n                    onClick={() => setSelectedFilter(reaction.type)}\n                    className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium transition-colors whitespace-nowrap ${\n                      selectedFilter === reaction.type\n                        ? `${reaction.bgColor} ${reaction.color}`\n                        : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n                    }`}\n                  >\n                    <Icon className=\"w-4 h-4\" />\n                    <span className=\"text-xs bg-gray-200 dark:bg-neutral-700 px-1.5 py-0.5 rounded-full\">\n                      {count}\n                    </span>\n                  </button>\n                );\n              })}\n            </div>\n\n            {/* User List */}\n            <div className=\"overflow-y-auto max-h-[50vh]\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n                </div>\n              ) : filteredLikes.length === 0 ? (\n                <div className=\"text-center py-12 text-gray-500 dark:text-neutral-400\">\n                  No reactions yet\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100 dark:divide-neutral-800\">\n                  {filteredLikes.map((like) => {\n                    const reactionConfig = getReactionConfig(like.reactionType);\n                    const Icon = reactionConfig.icon;\n                    \n                    return (\n                      <Link\n                        key={like.id}\n                        href={`/profile/${like.username}`}\n                        onClick={onClose}\n                        className=\"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors\"\n                      >\n                        {/* Avatar with Reaction Badge */}\n                        <div className=\"relative\">\n                          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n                            {like.profileImage ? (\n                              <Image\n                                src={like.profileImage}\n                                alt={like.name}\n                                width={48}\n                                height={48}\n                                className=\"object-cover w-full h-full\"\n                              />\n                            ) : (\n                              <div className=\"w-full h-full flex items-center justify-center text-lg font-semibold text-gray-600 dark:text-neutral-300\">\n                                {like.name.charAt(0).toUpperCase()}\n                              </div>\n                            )}\n                          </div>\n                          {/* Reaction Badge */}\n                          <div className={`absolute -bottom-1 -right-1 p-1 rounded-full ${reactionConfig.bgColor} border-2 border-white dark:border-neutral-900`}>\n                            <Icon className={`w-3 h-3 ${reactionConfig.color}`} />\n                          </div>\n                        </div>\n\n                        {/* User Info */}\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n                            {like.name}\n                          </p>\n                          {like.headline && (\n                            <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">\n                              {like.headline}\n                            </p>\n                          )}\n                        </div>\n\n                        {/* Connect Button (optional, can be added later) */}\n                        {/* <button className=\"px-4 py-1.5 text-sm font-medium text-blue-600 dark:text-blue-400 border border-blue-600 dark:border-blue-400 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors\">\n                          Connect\n                        </button> */}\n                      </Link>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n}\n"],"names":["React","useState","useEffect","motion","AnimatePresence","X","Loader2","Image","Link","getReactionConfig","REACTIONS","ReactionType","apiClient","LikeUser","id","username","name","profileImage","headline","reactionType","createdAt","LikeListModalProps","isOpen","onClose","postId","totalCount","LikeListModal","likes","setLikes","loading","setLoading","selectedFilter","setSelectedFilter","reactionCounts","setReactionCounts","Record","LIKE","CELEBRATE","SUPPORT","INSIGHTFUL","CURIOUS","fetchLikes","data","get","counts","forEach","like","undefined","error","console","filteredLikes","filter","activeReactions","r","type","opacity","scale","y","damping","stiffness","map","reaction","Icon","icon","count","bgColor","color","length","reactionConfig","charAt","toUpperCase"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2316, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/connections.ts"],"sourcesContent":["import apiClient from './client';\nimport type { PersonCard } from './people';\n\n// \n// TYPES\n// \n\nexport type ConnectionStatus = 'none' | 'pending_sent' | 'pending_received' | 'connected' | 'blocked';\n\nexport interface Connection {\n  id: string;\n  status: 'PENDING' | 'ACCEPTED' | 'REJECTED' | 'BLOCKED';\n  message: string | null;\n  createdAt: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n    profileImage: string | null;\n    headline: string | null;\n    college: string | null;\n  };\n}\n\nexport interface ConnectionsResponse {\n  connections: Connection[];\n  total: number;\n  page: number;\n  totalPages: number;\n  hasMore: boolean;\n}\n\nexport interface ConnectionStatusResponse {\n  status: ConnectionStatus;\n  connectionId?: string;\n  direction?: 'sent' | 'received';\n}\n\n// \n// API FUNCTIONS\n// \n\n/**\n * Send a connection request to another user\n */\nexport async function sendConnectionRequest(\n  receiverId: string,\n  message?: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post('/connections/request', { receiverId, message });\n}\n\n/**\n * Accept a connection request\n */\nexport async function acceptConnectionRequest(\n  connectionId: string\n): Promise<{ message: string; connection: Connection }> {\n  return apiClient.post(`/connections/${connectionId}/accept`);\n}\n\n/**\n * Reject a connection request\n */\nexport async function rejectConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.post(`/connections/${connectionId}/reject`);\n}\n\n/**\n * Cancel a sent connection request\n */\nexport async function cancelConnectionRequest(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}/cancel`);\n}\n\n/**\n * Remove an existing connection\n */\nexport async function removeConnection(\n  connectionId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/connections/${connectionId}`);\n}\n\n/**\n * Get all connections for current user\n */\nexport async function getConnections(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get all connections for a specific user\n */\nexport async function getUserConnections(\n  userId: string,\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  return apiClient.get(`/connections/user/${userId}?page=${page}&limit=${limit}`);\n}\n\n/**\n * Get pending connection requests (received)\n */\nexport async function getPendingRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/pending?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get sent connection requests\n */\nexport async function getSentRequests(\n  page: number = 1,\n  limit: number = 20\n): Promise<ConnectionsResponse> {\n  const response: any = await apiClient.get(`/connections/sent?page=${page}&limit=${limit}`);\n  // Backend returns 'requests', normalize to 'connections'\n  return {\n    connections: response.connections || response.requests || [],\n    total: response.total || 0,\n    page: response.page || page,\n    totalPages: response.totalPages || 1,\n    hasMore: response.hasMore || false,\n  };\n}\n\n/**\n * Get connection status with a specific user\n */\nexport async function getConnectionStatus(\n  userId: string\n): Promise<ConnectionStatusResponse> {\n  return apiClient.get(`/connections/status/${userId}`);\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;AA6CO,eAAe,sBACpB,UAAkB,EAClB,OAAgB;IAEhB,OAAO,yIAAS,CAAC,IAAI,CAAC,wBAAwB;QAAE;QAAY;IAAQ;AACtE;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC7D;AAKO,eAAe,wBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,aAAa,OAAO,CAAC;AAC/D;AAKO,eAAe,iBACpB,YAAoB;IAEpB,OAAO,yIAAS,CAAC,MAAM,CAAC,CAAC,aAAa,EAAE,cAAc;AACxD;AAKO,eAAe,eACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,KAAK,OAAO,EAAE,OAAO;AACjE;AAKO,eAAe,mBACpB,MAAc,EACd,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,kBAAkB,EAAE,OAAO,MAAM,EAAE,KAAK,OAAO,EAAE,OAAO;AAChF;AAKO,eAAe,mBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,0BAA0B,EAAE,KAAK,OAAO,EAAE,OAAO;IAC5F,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,gBACpB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,MAAM,WAAgB,MAAM,yIAAS,CAAC,GAAG,CAAC,CAAC,uBAAuB,EAAE,KAAK,OAAO,EAAE,OAAO;IACzF,yDAAyD;IACzD,OAAO;QACL,aAAa,SAAS,WAAW,IAAI,SAAS,QAAQ,IAAI,EAAE;QAC5D,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;QACvB,YAAY,SAAS,UAAU,IAAI;QACnC,SAAS,SAAS,OAAO,IAAI;IAC/B;AACF;AAKO,eAAe,oBACpB,MAAc;IAEd,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,oBAAoB,EAAE,QAAQ;AACtD"}},
    {"offset": {"line": 2396, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/chat.ts"],"sourcesContent":["import apiClient from './client';\n\n// ============================================\n// Types\n// ============================================\n\nexport interface ChatUser {\n  id: string;\n  username: string;\n  name: string;\n  profileImage: string | null;\n  isOnline: boolean;\n  lastActiveAt: string | null;\n}\n\nexport interface Message {\n  id: string;\n  conversationId: string;\n  senderId: string;\n  receiverId: string;\n  content: string;\n  contentType: string;\n  mediaUrl?: string;\n  mediaType?: string;\n  fileName?: string;\n  fileSize?: number;\n  status: 'SENT' | 'DELIVERED' | 'READ';\n  deliveredAt?: string;\n  readAt?: string;\n  isDeleted: boolean;\n  isEdited?: boolean; // Client-side flag to track if message was edited\n  replyToId?: string;\n  replyTo?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n  };\n  sender: ChatUser;\n  reactions: MessageReaction[];\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface MessageReaction {\n  id: string;\n  userId: string;\n  emoji: string;\n  user: {\n    id: string;\n    username: string;\n    name: string;\n  };\n}\n\nexport interface Conversation {\n  id: string;\n  participant1Id: string;\n  participant2Id: string;\n  participant1: ChatUser;\n  participant2: ChatUser;\n  otherParticipant: ChatUser;\n  lastMessage?: {\n    id: string;\n    content: string;\n    contentType: string;\n    senderId: string;\n    status: 'SENT' | 'DELIVERED' | 'READ';\n    createdAt: string;\n  };\n  lastMessageAt?: string;\n  unreadCount: number;\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface ConversationsResponse {\n  conversations: Conversation[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\nexport interface MessagesResponse {\n  messages: Message[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n// ============================================\n// Chat API Functions\n// ============================================\n\n/**\n * Get all conversations for the current user\n */\nexport async function getConversations(\n  limit?: number,\n  cursor?: string\n): Promise<ConversationsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations?${params.toString()}`);\n}\n\n/**\n * Get or create a conversation with another user\n */\nexport async function getOrCreateConversation(participantId: string): Promise<Conversation> {\n  return apiClient.post('/chat/conversations', { participantId });\n}\n\n/**\n * Get a specific conversation\n */\nexport async function getConversation(conversationId: string): Promise<Conversation> {\n  return apiClient.get(`/chat/conversations/${conversationId}`);\n}\n\n/**\n * Get messages for a conversation\n */\nexport async function getMessages(\n  conversationId: string,\n  limit?: number,\n  cursor?: string\n): Promise<MessagesResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/conversations/${conversationId}/messages?${params.toString()}`);\n}\n\n/**\n * Send a message (REST fallback - prefer WebSocket)\n */\nexport async function sendMessage(\n  conversationId: string,\n  data: {\n    content: string;\n    contentType?: string;\n    mediaUrl?: string;\n    mediaType?: string;\n    fileName?: string;\n    fileSize?: number;\n    replyToId?: string;\n  }\n): Promise<Message> {\n  return apiClient.post(`/chat/conversations/${conversationId}/messages`, data);\n}\n\n/**\n * Mark messages as read\n */\nexport async function markAsRead(conversationId: string): Promise<{ updatedCount: number; readAt: string }> {\n  return apiClient.post(`/chat/conversations/${conversationId}/read`);\n}\n\n/**\n * Delete a message\n */\nexport async function deleteMessage(\n  messageId: string,\n  forEveryone?: boolean\n): Promise<{ success: boolean }> {\n  return apiClient.delete(`/chat/messages/${messageId}`, { \n    data: { forEveryone } \n  });\n}\n\n/**\n * Edit a message\n */\nexport async function editMessage(messageId: string, content: string): Promise<Message> {\n  return apiClient.patch(`/chat/messages/${messageId}`, { content });\n}\n\n/**\n * Add reaction to a message\n */\nexport async function addReaction(\n  messageId: string,\n  emoji: string\n): Promise<{ action: 'added' | 'removed' | 'updated'; emoji: string }> {\n  return apiClient.post(`/chat/messages/${messageId}/reactions`, { emoji });\n}\n\n/**\n * Get unread message count\n */\nexport async function getUnreadCount(): Promise<{ unreadCount: number }> {\n  return apiClient.get('/chat/unread-count');\n}\n\n/**\n * Search messages\n */\nexport async function searchMessages(\n  query: string,\n  limit?: number\n): Promise<{ messages: Message[] }> {\n  const params = new URLSearchParams();\n  params.append('q', query);\n  if (limit) params.append('limit', String(limit));\n  \n  return apiClient.get(`/chat/search?${params.toString()}`);\n}\n\n/**\n * Upload chat media (image, video, document, audio)\n */\nexport async function uploadChatMedia(\n  file: File,\n  mediaType: 'image' | 'video' | 'document' | 'audio',\n  onProgress?: (progress: number) => void\n): Promise<{\n  mediaUrl: string;\n  fileName: string;\n  fileSize: number;\n  mediaType: string;\n}> {\n  const formData = new FormData();\n  formData.append('file', file);\n  formData.append('mediaType', mediaType);\n  \n  // Use axios with proper config for file uploads\n  return apiClient.post('/chat/upload', formData, {\n    timeout: 120000, // 2 minutes timeout for large files\n    maxContentLength: Infinity,\n    maxBodyLength: Infinity,\n    onUploadProgress: (progressEvent) => {\n      if (onProgress && progressEvent.total) {\n        const progress = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n        onProgress(progress);\n      }\n    },\n  });\n}\n\n// ============================================\n// Message Limit (Connection-based)\n// ============================================\n\nexport interface MessageLimitStatus {\n  canSend: boolean;\n  isConnected: boolean;\n  messagesSent: number;\n  messagesRemaining: number;\n  limit: number;\n}\n\n/**\n * Get message limit status for a user\n * Non-connected users can only send 2 messages\n * Connected users have unlimited messaging\n */\nexport async function getMessageLimitStatus(userId: string): Promise<MessageLimitStatus> {\n  return apiClient.get(`/chat/message-limit/${userId}`);\n}\n\n// ============================================\n// Message Requests (from non-connected users)\n// ============================================\n\nexport interface MessageRequest extends Conversation {\n  isMessageRequest: boolean;\n  messageRequestAcceptedAt: string | null;\n}\n\nexport interface MessageRequestsResponse {\n  messageRequests: MessageRequest[];\n  hasMore: boolean;\n  nextCursor?: string;\n}\n\n/**\n * Get message requests (conversations from non-connected users)\n */\nexport async function getMessageRequests(\n  limit?: number,\n  cursor?: string\n): Promise<MessageRequestsResponse> {\n  const params = new URLSearchParams();\n  if (limit) params.append('limit', String(limit));\n  if (cursor) params.append('cursor', cursor);\n  \n  return apiClient.get(`/chat/requests?${params.toString()}`);\n}\n\n/**\n * Get message requests count\n */\nexport async function getMessageRequestsCount(): Promise<{ count: number }> {\n  return apiClient.get('/chat/requests/count');\n}\n\n/**\n * Accept a message request\n */\nexport async function acceptMessageRequest(\n  conversationId: string\n): Promise<{ message: string; conversation: Conversation }> {\n  return apiClient.post(`/chat/requests/${conversationId}/accept`);\n}\n\n/**\n * Decline a message request\n */\nexport async function declineMessageRequest(\n  conversationId: string\n): Promise<{ message: string }> {\n  return apiClient.delete(`/chat/requests/${conversationId}`);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2528, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/ShareModal.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { X, Search, Send, Loader2 } from 'lucide-react';\nimport { getConnections } from '@/lib/api/connections';\nimport { searchUsersForMention } from '@/lib/api/posts';\nimport { getOrCreateConversation, sendMessage } from '@/lib/api/chat';\nimport { sharePostToUser } from '@/lib/api/posts';\nimport type { Connection } from '@/lib/api/connections';\nimport type { MentionUser } from '@/types/post';\n\ninterface ShareModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  postId: string;\n  postPreview?: string;\n  postAuthor?: {\n    name: string;\n    username: string;\n    profileImage?: string | null;\n  };\n  postMediaUrl?: string | null;\n}\n\nexport function ShareModal({ isOpen, onClose, postId, postPreview, postAuthor, postMediaUrl }: ShareModalProps) {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [connections, setConnections] = useState<Connection[]>([]);\n  const [searchResults, setSearchResults] = useState<MentionUser[]>([]);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [loading, setLoading] = useState(false);\n  const [sending, setSending] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const postUrl = typeof window !== 'undefined' ? `${window.location.origin}/post/${postId}` : '';\n\n  const loadConnections = useCallback(async () => {\n    try {\n      const res = await getConnections(1, 50);\n      setConnections(res.connections?.filter((c) => c.status === 'ACCEPTED') || []);\n    } catch (err) {\n      console.error('Error loading connections:', err);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (isOpen) {\n      loadConnections();\n      setSearchQuery('');\n      setSearchResults([]);\n      setSelectedIds(new Set());\n      setError(null);\n    }\n  }, [isOpen, loadConnections]);\n\n  useEffect(() => {\n    if (!searchQuery || searchQuery.length < 2) {\n      setSearchResults([]);\n      return;\n    }\n    const timer = setTimeout(async () => {\n      setLoading(true);\n      try {\n        const users = await searchUsersForMention(searchQuery);\n        setSearchResults(users);\n      } catch (err) {\n        setSearchResults([]);\n      } finally {\n        setLoading(false);\n      }\n    }, 300);\n    return () => clearTimeout(timer);\n  }, [searchQuery]);\n\n  const toggleSelect = (userId: string) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(userId)) next.delete(userId);\n      else next.add(userId);\n      return next;\n    });\n  };\n\n  const handleSend = async () => {\n    if (selectedIds.size === 0) {\n      setError('Select at least one person to share with');\n      return;\n    }\n    setSending(true);\n    setError(null);\n    try {\n      // Create shared post message content with metadata\n      const sharedPostContent = JSON.stringify({\n        type: 'shared_post',\n        postId,\n        postUrl,\n        preview: postPreview?.slice(0, 200) || '',\n        author: postAuthor || null,\n        mediaUrl: postMediaUrl || null,\n      });\n      \n      for (const userId of selectedIds) {\n        const conv = await getOrCreateConversation(userId);\n        await sendMessage(conv.id, {\n          content: sharedPostContent,\n          contentType: 'application/x-shared-post',\n        });\n        await sharePostToUser(postId, userId);\n      }\n      onClose();\n    } catch (err: any) {\n      setError(err?.response?.data?.error || err?.message || 'Failed to share');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const displayConnections = connections.filter(\n    (c) =>\n      !searchQuery ||\n      c.user?.name?.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.user?.username?.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n  const displaySearch = searchQuery.length >= 2 ? searchResults : [];\n  const hasResults = displayConnections.length > 0 || displaySearch.length > 0;\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\n      <div\n        className=\"relative w-full max-w-md max-h-[80vh] flex flex-col rounded-2xl bg-white dark:bg-neutral-900 shadow-xl\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Share post</h2>\n          <button\n            onClick={onClose}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <X className=\"w-5 h-5 text-gray-500\" />\n          </button>\n        </div>\n\n        <div className=\"p-3 border-b border-gray-200 dark:border-neutral-800\">\n          <div className=\"relative\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Search connections or people...\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-2.5 rounded-xl bg-gray-100 dark:bg-neutral-800 border-0 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500\"\n            />\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-3 min-h-[200px]\">\n          {loading ? (\n            <div className=\"flex justify-center py-8\">\n              <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n            </div>\n          ) : (\n            <>\n              {searchQuery.length >= 2 && displaySearch.length > 0 && (\n                <div className=\"mb-4\">\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">Search results</p>\n                  {displaySearch.map((u) => (\n                    <ProfileRow\n                      key={u.id}\n                      id={u.id}\n                      name={u.name}\n                      username={u.username}\n                      avatar={u.profileImage}\n                      selected={selectedIds.has(u.id)}\n                      onToggle={() => toggleSelect(u.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {(searchQuery.length < 2 || displayConnections.length > 0) && (\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 dark:text-neutral-400 mb-2\">\n                    {searchQuery.length < 2 ? 'Connections' : 'Matching connections'}\n                  </p>\n                  {displayConnections.map((c) => (\n                    <ProfileRow\n                      key={c.user.id}\n                      id={c.user.id}\n                      name={c.user.name}\n                      username={c.user.username}\n                      avatar={c.user.profileImage}\n                      selected={selectedIds.has(c.user.id)}\n                      onToggle={() => toggleSelect(c.user.id)}\n                    />\n                  ))}\n                </div>\n              )}\n              {!hasResults && !loading && (\n                <p className=\"text-center text-gray-500 dark:text-neutral-400 py-8\">\n                  {searchQuery.length >= 2 ? 'No users found' : 'No connections yet'}\n                </p>\n              )}\n            </>\n          )}\n        </div>\n\n        {error && (\n          <p className=\"px-4 py-2 text-sm text-red-500\">{error}</p>\n        )}\n\n        <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n          <button\n            onClick={handleSend}\n            disabled={selectedIds.size === 0 || sending}\n            className=\"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-medium transition-colors\"\n          >\n            {sending ? (\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n            ) : (\n              <Send className=\"w-5 h-5\" />\n            )}\n            Send to {selectedIds.size} {selectedIds.size === 1 ? 'person' : 'people'}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileRow({\n  id,\n  name,\n  username,\n  avatar,\n  selected,\n  onToggle,\n}: {\n  id: string;\n  name: string;\n  username: string;\n  avatar: string | null;\n  selected: boolean;\n  onToggle: () => void;\n}) {\n  return (\n    <button\n      type=\"button\"\n      onClick={onToggle}\n      className=\"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors text-left\"\n    >\n      <div className=\"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 overflow-hidden flex-shrink-0\">\n        {avatar ? (\n          <img src={avatar} alt=\"\" className=\"w-full h-full object-cover\" />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center text-gray-500 font-medium\">\n            {(name || username)?.[0]?.toUpperCase() || '?'}\n          </div>\n        )}\n      </div>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"font-medium text-gray-900 dark:text-white truncate\">{name || username}</p>\n        <p className=\"text-sm text-gray-500 dark:text-neutral-400 truncate\">@{username}</p>\n      </div>\n      <div\n        className={`w-6 h-6 rounded-full border-2 flex-shrink-0 flex items-center justify-center ${\n          selected\n            ? 'border-blue-600 bg-blue-600'\n            : 'border-gray-300 dark:border-neutral-600'\n        }`}\n      >\n        {selected && <span className=\"text-white text-xs\"></span>}\n      </div>\n    </button>\n  );\n}\n"],"names":["c","_c","React","useState","useEffect","useCallback","X","Search","Send","Loader2","getConnections","searchUsersForMention","getOrCreateConversation","sendMessage","sharePostToUser","Connection","MentionUser","ShareModalProps","isOpen","onClose","postId","postPreview","postAuthor","name","username","profileImage","postMediaUrl","ShareModal","searchQuery","setSearchQuery","connections","setConnections","searchResults","setSearchResults","selectedIds","setSelectedIds","Set","loading","setLoading","sending","setSending","error","setError","postUrl","window","location","origin","loadConnections","res","filter","status","err","console","length","timer","setTimeout","users","clearTimeout","toggleSelect","userId","prev","next","has","delete","add","handleSend","size","sharedPostContent","JSON","stringify","type","preview","slice","author","mediaUrl","conv","id","content","contentType","response","data","message","displayConnections","user","toLowerCase","includes","displaySearch","hasResults","e","stopPropagation","target","value","map","u","ProfileRow","t0","$","$i","Symbol","for","avatar","selected","onToggle","t1","toUpperCase","t2","t3","t4","t5","t6","t7","t8","t9"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3049, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/lib/api/reports.ts"],"sourcesContent":["import apiClient from './client';\n\nexport interface ReportReason {\n  value: string;\n  label: string;\n  description: string;\n}\n\nexport interface ReportResponse {\n  message: string;\n  reportId: string;\n}\n\nexport interface MyReport {\n  id: string;\n  reportType: 'POST' | 'CHAT' | 'USER' | 'COMMENT' | 'GROUP';\n  reason: string;\n  description: string | null;\n  status: 'PENDING' | 'UNDER_REVIEW' | 'RESOLVED' | 'DISMISSED';\n  actionTaken: string;\n  createdAt: string;\n  reviewedAt: string | null;\n  post: {\n    id: string;\n    content: string;\n    type: string;\n  } | null;\n  reportedUser: {\n    id: string;\n    name: string;\n    username: string;\n    profileImage: string | null;\n  } | null;\n}\n\nexport interface ReportRequest {\n  reason: string;\n  description?: string;\n}\n\nexport interface ChatReportRequest extends ReportRequest {\n  reportedUserId: string;\n}\n\nexport const reportAPI = {\n  // Get available report reasons\n  getReasons: async (): Promise<{ reasons: ReportReason[] }> => {\n    return apiClient.get('/reports/reasons');\n  },\n\n  // Report a post\n  reportPost: async (postId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/post/${postId}`, data);\n  },\n\n  // Report a comment\n  reportComment: async (commentId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/comment/${commentId}`, data);\n  },\n\n  // Report a user in chat\n  reportChatUser: async (conversationId: string, data: ChatReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/chat/${conversationId}`, data);\n  },\n\n  // Report a user profile\n  reportUser: async (userId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/user/${userId}`, data);\n  },\n\n  // Report a group\n  reportGroup: async (groupId: string, data: ReportRequest): Promise<ReportResponse> => {\n    return apiClient.post(`/reports/group/${groupId}`, data);\n  },\n\n  // Get user's own reports\n  getMyReports: async (page = 1, limit = 10): Promise<{\n    reports: MyReport[];\n    pagination: {\n      page: number;\n      limit: number;\n      total: number;\n      totalPages: number;\n    };\n  }> => {\n    return apiClient.get(`/reports/my-reports?page=${page}&limit=${limit}`);\n  },\n};\n"],"names":[],"mappings":";;;;AAAA;;AA4CO,MAAM,YAAY;IACvB,+BAA+B;IAC/B,YAAY;QACV,OAAO,yIAAS,CAAC,GAAG,CAAC;IACvB;IAEA,gBAAgB;IAChB,YAAY,OAAO,QAAgB;QACjC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,mBAAmB;IACnB,eAAe,OAAO,WAAmB;QACvC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,WAAW,EAAE;IACzD;IAEA,wBAAwB;IACxB,gBAAgB,OAAO,gBAAwB;QAC7C,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,gBAAgB,EAAE;IAC3D;IAEA,wBAAwB;IACxB,YAAY,OAAO,QAAgB;QACjC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,QAAQ,EAAE;IACnD;IAEA,iBAAiB;IACjB,aAAa,OAAO,SAAiB;QACnC,OAAO,yIAAS,CAAC,IAAI,CAAC,CAAC,eAAe,EAAE,SAAS,EAAE;IACrD;IAEA,yBAAyB;IACzB,cAAc,OAAO,OAAO,CAAC,EAAE,QAAQ,EAAE;QASvC,OAAO,yIAAS,CAAC,GAAG,CAAC,CAAC,yBAAyB,EAAE,KAAK,OAAO,EAAE,OAAO;IACxE;AACF"}},
    {"offset": {"line": 3092, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/reports/ReportModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { X, Flag, AlertTriangle, Loader2, CheckCircle } from 'lucide-react';\nimport { reportAPI, ReportReason } from '@/lib/api/reports';\nimport { motion, AnimatePresence } from 'framer-motion';\n\ninterface ReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  type: 'post' | 'comment' | 'user' | 'group' | 'chat';\n  targetId: string;\n  targetName?: string;\n  conversationId?: string; // For chat reports\n  reportedUserId?: string; // For chat reports\n}\n\nexport default function ReportModal({\n  isOpen,\n  onClose,\n  type,\n  targetId,\n  targetName,\n  conversationId,\n  reportedUserId,\n}: ReportModalProps) {\n  const [reasons, setReasons] = useState<ReportReason[]>([]);\n  const [selectedReason, setSelectedReason] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [fetchingReasons, setFetchingReasons] = useState(true);\n  const [success, setSuccess] = useState(false);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchReasons = async () => {\n      try {\n        const response = await reportAPI.getReasons();\n        setReasons(response.reasons);\n      } catch (err) {\n        console.error('Failed to fetch report reasons:', err);\n      } finally {\n        setFetchingReasons(false);\n      }\n    };\n\n    if (isOpen) {\n      fetchReasons();\n      // Reset state\n      setSelectedReason('');\n      setDescription('');\n      setSuccess(false);\n      setError('');\n    }\n  }, [isOpen]);\n\n  const handleSubmit = async () => {\n    if (!selectedReason) {\n      setError('Please select a reason');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n\n    try {\n      const data = {\n        reason: selectedReason,\n        description: description.trim() || undefined,\n      };\n\n      switch (type) {\n        case 'post':\n          await reportAPI.reportPost(targetId, data);\n          break;\n        case 'comment':\n          await reportAPI.reportComment(targetId, data);\n          break;\n        case 'user':\n          await reportAPI.reportUser(targetId, data);\n          break;\n        case 'group':\n          await reportAPI.reportGroup(targetId, data);\n          break;\n        case 'chat':\n          if (!conversationId || !reportedUserId) {\n            throw new Error('Missing conversation or user info');\n          }\n          await reportAPI.reportChatUser(conversationId, {\n            ...data,\n            reportedUserId,\n          });\n          break;\n      }\n\n      setSuccess(true);\n      setTimeout(() => {\n        onClose();\n      }, 2000);\n    } catch (err: any) {\n      setError(err.response?.data?.error || 'Failed to submit report');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getTitle = () => {\n    switch (type) {\n      case 'post':\n        return 'Report Post';\n      case 'comment':\n        return 'Report Comment';\n      case 'user':\n        return `Report ${targetName || 'User'}`;\n      case 'group':\n        return 'Report Group';\n      case 'chat':\n        return `Report ${targetName || 'User'}`;\n      default:\n        return 'Report';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\n        {/* Backdrop */}\n        <motion.div\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\n          onClick={onClose}\n        />\n\n        {/* Modal */}\n        <motion.div\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          exit={{ opacity: 0, scale: 0.95 }}\n          className=\"relative w-full max-w-md mx-4 bg-white dark:bg-gray-900 rounded-2xl shadow-xl overflow-hidden\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-red-100 dark:bg-red-900/30 rounded-full\">\n                <Flag className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\n              </div>\n              <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                {getTitle()}\n              </h2>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n\n          {/* Content */}\n          <div className=\"p-6\">\n            {success ? (\n              <div className=\"text-center py-8\">\n                <div className=\"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mb-4\">\n                  <CheckCircle className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\n                </div>\n                <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white mb-2\">\n                  Report Submitted\n                </h3>\n                <p className=\"text-gray-600 dark:text-gray-400\">\n                  Thank you for helping keep our community safe. We'll review your report shortly.\n                </p>\n              </div>\n            ) : fetchingReasons ? (\n              <div className=\"flex items-center justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-blue-600\" />\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                  Why are you reporting this {type}? Your report will be reviewed by our team.\n                </p>\n\n                {/* Reason Selection */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Select a reason <span className=\"text-red-500\">*</span>\n                  </label>\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                    {reasons.map((reason) => (\n                      <label\n                        key={reason.value}\n                        className={`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-all ${\n                          selectedReason === reason.value\n                            ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\n                            : 'border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600'\n                        }`}\n                      >\n                        <input\n                          type=\"radio\"\n                          name=\"reason\"\n                          value={reason.value}\n                          checked={selectedReason === reason.value}\n                          onChange={(e) => setSelectedReason(e.target.value)}\n                          className=\"mt-1 text-blue-600 focus:ring-blue-500\"\n                        />\n                        <div>\n                          <span className=\"font-medium text-gray-900 dark:text-white\">\n                            {reason.label}\n                          </span>\n                          <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-0.5\">\n                            {reason.description}\n                          </p>\n                        </div>\n                      </label>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Additional Details */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">\n                    Additional details (optional)\n                  </label>\n                  <textarea\n                    value={description}\n                    onChange={(e) => setDescription(e.target.value)}\n                    placeholder=\"Provide any additional context that might help us review this report...\"\n                    rows={3}\n                    maxLength={500}\n                    className=\"w-full px-4 py-3 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none\"\n                  />\n                  <p className=\"text-xs text-gray-400 text-right\">\n                    {description.length}/500\n                  </p>\n                </div>\n\n                {/* Error */}\n                {error && (\n                  <div className=\"flex items-center gap-2 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm\">\n                    <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n                    {error}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n\n          {/* Footer */}\n          {!success && (\n            <div className=\"flex items-center justify-end gap-3 px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                disabled={loading || !selectedReason}\n                className=\"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2\"\n              >\n                {loading ? (\n                  <>\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>\n                    <Flag className=\"w-4 h-4\" />\n                    Submit Report\n                  </>\n                )}\n              </button>\n            </div>\n          )}\n        </motion.div>\n      </div>\n    </AnimatePresence>\n  );\n}\n"],"names":["useState","useEffect","X","Flag","AlertTriangle","Loader2","CheckCircle","reportAPI","ReportReason","motion","AnimatePresence","ReportModalProps","isOpen","onClose","type","targetId","targetName","conversationId","reportedUserId","ReportModal","reasons","setReasons","selectedReason","setSelectedReason","description","setDescription","loading","setLoading","fetchingReasons","setFetchingReasons","success","setSuccess","error","setError","fetchReasons","response","getReasons","err","console","handleSubmit","data","reason","trim","undefined","reportPost","reportComment","reportUser","reportGroup","Error","reportChatUser","setTimeout","getTitle","opacity","scale","map","value","e","target","label","length"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3595, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/PostCard.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useRef, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  ThumbsUp,\n  MessageCircle,\n  Share2,\n  Bookmark,\n  MoreHorizontal,\n  ExternalLink,\n  FileText,\n  Play,\n  Pause,\n  Volume2,\n  VolumeX,\n  ChevronLeft,\n  ChevronRight,\n  Trash2,\n  Flag,\n  Copy,\n  Pencil,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Post, PollOption } from '@/types/post';\nimport { toggleLike, votePoll, deletePost } from '@/lib/api/posts';\nimport { toggleSavePost } from '@/lib/api/saved';\nimport { \n  likePost as socketLikePost, \n  reactToPost as socketReactToPost,\n  votePoll as socketVotePoll,\n} from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport { \n  ReactionPicker, \n  ReactionSummaryDisplay, \n  getReactionConfig,\n} from './ReactionPicker';\nimport { FormattedContent } from './FormattedContent';\nimport { EditPostModal } from './EditPostModal';\nimport { LikeListModal } from './LikeListModal';\nimport { ShareModal } from './ShareModal';\nimport ReportModal from '@/components/reports/ReportModal';\nimport type { ReactionType, ReactionSummary as ReactionSummaryType } from '@/types/post';\n\ninterface PostCardProps {\n  post: Post;\n  onLikeUpdate?: (postId: string, liked: boolean, count: number, reactionType?: ReactionType | null, reactionSummary?: ReactionSummaryType[]) => void;\n  onPollUpdate?: (postId: string, options: PollOption[]) => void;\n  onDelete?: (postId: string) => void;\n  onEdit?: (postId: string, updatedPost: Post) => void;\n  onUnsave?: (postId: string) => void;\n  onCommentClick?: () => void;\n  highlightCommentId?: string;\n}\n\nexport function PostCard({\n  post,\n  onLikeUpdate,\n  onPollUpdate,\n  onDelete,\n  onEdit,\n  onUnsave,\n  onCommentClick,\n}: PostCardProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(post.isLiked);\n  const [likesCount, setLikesCount] = useState(post.likesCount);\n  const [commentsCount, setCommentsCount] = useState(post.commentsCount);\n  const [sharesCount, setSharesCount] = useState(post.sharesCount);\n  const [currentReaction, setCurrentReaction] = useState<ReactionType | null>(post.userReactionType || null);\n  const [reactionSummary, setReactionSummary] = useState<ReactionSummaryType[]>(post.reactionSummary || []);\n  const [showReactionPicker, setShowReactionPicker] = useState(false);\n  const [showLikeListModal, setShowLikeListModal] = useState(false);\n  const [isSaved, setIsSaved] = useState(post.isSaved ?? false);\n  const [showMenu, setShowMenu] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [showReportModal, setShowReportModal] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [selectedPollOption, setSelectedPollOption] = useState<string | null>(post.userVotedOptionId ?? null);\n  const [pollOptions, setPollOptions] = useState(post.pollOptions ?? []);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  \n  // Video state\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isMuted, setIsMuted] = useState(true);\n  const [isVideoInView, setIsVideoInView] = useState(false);\n  \n  const isOwnPost = user?.id === post.author.id;\n  \n  // Sync like state with real-time updates from parent\n  useEffect(() => {\n    setIsLiked(post.isLiked);\n    setLikesCount(post.likesCount);\n    setCommentsCount(post.commentsCount);\n    setSharesCount(post.sharesCount);\n    setCurrentReaction(post.userReactionType || null);\n    setReactionSummary(post.reactionSummary || []);\n  }, [post.isLiked, post.likesCount, post.commentsCount, post.sharesCount, post.userReactionType, post.reactionSummary]);\n  \n  // Sync poll options with real-time updates from parent\n  useEffect(() => {\n    if (post.pollOptions) {\n      setPollOptions(post.pollOptions);\n    }\n  }, [post.pollOptions]);\n\n  // Auto-play video when in view\n  useEffect(() => {\n    if (post.type !== 'VIDEO' || !videoRef.current) return;\n    \n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        setIsVideoInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          videoRef.current?.play().catch(() => {});\n          setIsPlaying(true);\n        } else {\n          videoRef.current?.pause();\n          setIsPlaying(false);\n        }\n      },\n      { threshold: 0.5 }\n    );\n    \n    observer.observe(videoRef.current);\n    return () => observer.disconnect();\n  }, [post.type]);\n\n  // Handle quick like (default LIKE reaction)\n  const handleLike = async () => {\n    if (currentReaction === 'LIKE') {\n      // Remove reaction\n      handleReaction('LIKE');\n    } else {\n      // Add LIKE reaction\n      handleReaction('LIKE');\n    }\n  };\n\n  // Handle reaction selection\n  const handleReaction = async (reactionType: ReactionType) => {\n    const wasLiked = isLiked;\n    const oldReaction = currentReaction;\n    const oldCount = likesCount;\n    const oldSummary = reactionSummary;\n    \n    let newLiked: boolean;\n    let newCount: number;\n    let newReaction: ReactionType | null;\n    \n    if (currentReaction === reactionType) {\n      // Remove reaction (clicking same reaction again)\n      newLiked = false;\n      newCount = likesCount - 1;\n      newReaction = null;\n    } else if (currentReaction) {\n      // Change reaction (already reacted, changing type)\n      newLiked = true;\n      newCount = likesCount; // Count stays same\n      newReaction = reactionType;\n    } else {\n      // Add new reaction\n      newLiked = true;\n      newCount = likesCount + 1;\n      newReaction = reactionType;\n    }\n    \n    // Calculate updated reaction summary\n    let newSummary = [...reactionSummary];\n    if (oldReaction && oldReaction !== reactionType) {\n      // Decrement old reaction count\n      newSummary = newSummary.map(s => \n        s.type === oldReaction ? { ...s, count: Math.max(0, s.count - 1) } : s\n      ).filter(s => s.count > 0);\n    }\n    if (newReaction) {\n      const existingIdx = newSummary.findIndex(s => s.type === newReaction);\n      if (existingIdx >= 0) {\n        newSummary[existingIdx] = { ...newSummary[existingIdx], count: newSummary[existingIdx].count + (oldReaction === newReaction ? 0 : 1) };\n      } else if (!oldReaction || oldReaction !== reactionType) {\n        newSummary.push({ type: newReaction, count: 1 });\n      }\n    } else if (oldReaction) {\n      // Removing reaction entirely\n      newSummary = newSummary.map(s => \n        s.type === oldReaction ? { ...s, count: Math.max(0, s.count - 1) } : s\n      ).filter(s => s.count > 0);\n    }\n    \n    // Optimistic update\n    setIsLiked(newLiked);\n    setLikesCount(newCount);\n    setCurrentReaction(newReaction);\n    setReactionSummary(newSummary);\n    onLikeUpdate?.(post.id, newLiked, newCount, newReaction, newSummary);\n    \n    try {\n      // Use WebSocket for real-time\n      socketReactToPost(post.id, reactionType);\n    } catch (error) {\n      // Fallback to HTTP\n      try {\n        await toggleLike(post.id);\n      } catch (err) {\n        // Revert on error\n        setIsLiked(wasLiked);\n        setLikesCount(oldCount);\n        setCurrentReaction(oldReaction);\n        setReactionSummary(oldSummary);\n      }\n    }\n  };\n\n  // Handle poll vote\n  const handlePollVote = async (optionId: string) => {\n    if (selectedPollOption && !post.showResultsBeforeVote) return;\n    \n    setSelectedPollOption(optionId);\n    \n    // Optimistic update\n    const updatedOptions = pollOptions.map(opt => ({\n      ...opt,\n      votes: opt.id === optionId ? opt.votes + 1 : opt.votes,\n    }));\n    const totalVotes = updatedOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const optionsWithPercentage = updatedOptions.map(opt => ({\n      ...opt,\n      percentage: Math.round((opt.votes / totalVotes) * 100),\n    }));\n    setPollOptions(optionsWithPercentage);\n    onPollUpdate?.(post.id, optionsWithPercentage);\n    \n    try {\n      socketVotePoll(post.id, optionId);\n    } catch (error) {\n      try {\n        await votePoll(post.id, optionId);\n      } catch (err) {\n        console.error('Error voting on poll:', err);\n      }\n    }\n  };\n\n  // Handle delete\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this post?')) return;\n    \n    try {\n      await deletePost(post.id);\n      onDelete?.(post.id);\n    } catch (error) {\n      console.error('Error deleting post:', error);\n    }\n  };\n\n  // Handle share - open share modal\n  const handleShare = () => {\n    setShowShareModal(true);\n  };\n\n  // Handle save/unsave\n  const handleSave = async () => {\n    try {\n      const response = await toggleSavePost(post.id);\n      if (response && typeof response.saved === 'boolean') {\n        setIsSaved(response.saved);\n        if (!response.saved) onUnsave?.(post.id);\n      } else {\n        setIsSaved(!isSaved);\n        if (isSaved) onUnsave?.(post.id);\n      }\n    } catch (error) {\n      console.error('Error toggling save:', error);\n      setIsSaved(!isSaved);\n    }\n  };\n\n  // Render content based on post type\n  const renderContent = () => {\n    switch (post.type) {\n      case 'IMAGE':\n        return renderImageContent();\n      case 'VIDEO':\n        return renderVideoContent();\n      case 'LINK':\n        return renderLinkContent();\n      case 'POLL':\n        return renderPollContent();\n      case 'ARTICLE':\n        return renderArticleContent();\n      case 'CELEBRATION':\n        return renderCelebrationContent();\n      case 'DOCUMENT':\n        return renderDocumentContent();\n      default:\n        return null;\n    }\n  };\n\n  // Image content with LinkedIn-style layout\n  const renderImageContent = () => {\n    const images = post.mediaUrls;\n    if (!images || images.length === 0) return null;\n    \n    if (images.length === 1) {\n      return (\n        <div className=\"mt-3 rounded-lg overflow-hidden bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={images[0]}\n            alt=\"\"\n            className=\"w-full max-h-[600px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n        </div>\n      );\n    }\n    \n    // LinkedIn-style grid: 1 big + remaining small\n    const mainImage = images[currentImageIndex];\n    const thumbnails = images.filter((_, i) => i !== currentImageIndex);\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden\">\n        {/* Main Image */}\n        <div className=\"relative bg-gray-100 dark:bg-neutral-800\">\n          <img\n            src={mainImage}\n            alt=\"\"\n            className=\"w-full max-h-[500px] object-contain mx-auto\"\n            loading=\"lazy\"\n            style={{ display: 'block' }}\n          />\n          \n          {/* Navigation arrows */}\n          {images.length > 1 && (\n            <>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === 0 ? images.length - 1 : prev - 1))}\n                className=\"absolute left-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronLeft className=\"w-5 h-5\" />\n              </button>\n              <button\n                onClick={() => setCurrentImageIndex((prev) => (prev === images.length - 1 ? 0 : prev + 1))}\n                className=\"absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n              >\n                <ChevronRight className=\"w-5 h-5\" />\n              </button>\n            </>\n          )}\n          \n          {/* Image counter */}\n          <div className=\"absolute bottom-2 right-2 px-2 py-1 rounded-full bg-black/50 text-white text-xs\">\n            {currentImageIndex + 1} / {images.length}\n          </div>\n        </div>\n        \n        {/* Thumbnails */}\n        {thumbnails.length > 0 && (\n          <div className=\"flex gap-1 mt-1 overflow-x-auto\">\n            {thumbnails.map((img, index) => {\n              const actualIndex = index >= currentImageIndex ? index + 1 : index;\n              return (\n                <button\n                  key={actualIndex}\n                  onClick={() => setCurrentImageIndex(actualIndex)}\n                  className=\"flex-shrink-0 w-16 h-16 rounded overflow-hidden opacity-70 hover:opacity-100 transition-opacity\"\n                >\n                  <img src={img} alt=\"\" className=\"w-full h-full object-cover\" />\n                </button>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Video content with autoplay\n  const renderVideoContent = () => {\n    if (!post.videoUrl) return null;\n    \n    return (\n      <div className=\"mt-3 rounded-lg overflow-hidden relative bg-black\">\n        <video\n          ref={videoRef}\n          src={post.videoUrl}\n          poster={post.videoThumbnail || undefined}\n          className=\"w-full max-h-[500px] object-contain\"\n          loop\n          muted={isMuted}\n          playsInline\n          onClick={() => {\n            if (videoRef.current) {\n              if (isPlaying) {\n                videoRef.current.pause();\n              } else {\n                videoRef.current.play();\n              }\n              setIsPlaying(!isPlaying);\n            }\n          }}\n        />\n        \n        {/* Video controls overlay */}\n        <div className=\"absolute bottom-2 left-2 right-2 flex items-center justify-between\">\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                if (isPlaying) {\n                  videoRef.current.pause();\n                } else {\n                  videoRef.current.play();\n                }\n                setIsPlaying(!isPlaying);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n          </button>\n          \n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              if (videoRef.current) {\n                videoRef.current.muted = !isMuted;\n                setIsMuted(!isMuted);\n              }\n            }}\n            className=\"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors\"\n          >\n            {isMuted ? <VolumeX className=\"w-4 h-4\" /> : <Volume2 className=\"w-4 h-4\" />}\n          </button>\n        </div>\n        \n        {/* Duration badge */}\n        {post.videoDuration && (\n          <div className=\"absolute top-2 right-2 px-2 py-1 rounded bg-black/50 text-white text-xs\">\n            {Math.floor(post.videoDuration / 60)}:{String(post.videoDuration % 60).padStart(2, '0')}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Link preview content\n  const renderLinkContent = () => {\n    if (!post.linkUrl) return null;\n    \n    return (\n      <a\n        href={post.linkUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.linkImage && (\n          <img\n            src={post.linkImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-3 bg-gray-50 dark:bg-neutral-800/50\">\n          <p className=\"font-semibold text-gray-900 dark:text-white line-clamp-2\">\n            {post.linkTitle || post.linkUrl}\n          </p>\n          {post.linkDescription && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-1 line-clamp-2\">\n              {post.linkDescription}\n            </p>\n          )}\n          <div className=\"flex items-center gap-1 mt-2 text-xs text-gray-400\">\n            <ExternalLink className=\"w-3 h-3\" />\n            <span>\n              {post.linkDomain || (post.linkUrl ? (() => {\n                try {\n                  return new URL(post.linkUrl).hostname;\n                } catch {\n                  return 'Link';\n                }\n              })() : 'Link')}\n            </span>\n          </div>\n        </div>\n      </a>\n    );\n  };\n\n  // Poll content\n  const renderPollContent = () => {\n    if (!pollOptions || pollOptions.length === 0) return null;\n    \n    const totalVotes = pollOptions.reduce((sum, opt) => sum + opt.votes, 0);\n    const hasVoted = selectedPollOption !== null || pollOptions.some(opt => opt.hasVoted);\n    const showResults = hasVoted || post.showResultsBeforeVote || false;\n    const isPollEnded = post.pollEndsAt ? new Date(post.pollEndsAt) < new Date() : false;\n    \n    return (\n      <div className=\"mt-3 space-y-2\">\n        {pollOptions.map((option) => {\n          const percentage = totalVotes > 0 ? Math.round((option.votes / totalVotes) * 100) : 0;\n          const isSelected = selectedPollOption === option.id;\n          \n          return (\n            <button\n              key={option.id}\n              onClick={() => !hasVoted && !isPollEnded && handlePollVote(option.id)}\n              disabled={hasVoted || isPollEnded}\n              className={`w-full p-3 rounded-lg text-left transition-all relative overflow-hidden ${\n                hasVoted || isPollEnded\n                  ? 'cursor-default'\n                  : 'hover:bg-gray-100 dark:hover:bg-neutral-800 cursor-pointer'\n              } ${\n                isSelected\n                  ? 'ring-2 ring-blue-500 dark:ring-blue-400'\n                  : 'border border-gray-200 dark:border-neutral-700'\n              }`}\n            >\n              {/* Progress bar */}\n              {showResults && (\n                <motion.div\n                  initial={{ width: 0 }}\n                  animate={{ width: `${percentage}%` }}\n                  transition={{ duration: 0.5 }}\n                  className={`absolute inset-y-0 left-0 ${\n                    isSelected ? 'bg-blue-100 dark:bg-blue-900/30' : 'bg-gray-100 dark:bg-neutral-800'\n                  }`}\n                />\n              )}\n              \n              <div className=\"relative flex items-center justify-between\">\n                <span className=\"font-medium text-gray-900 dark:text-white\">\n                  {option.text}\n                </span>\n                {showResults && (\n                  <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                    {percentage}%\n                  </span>\n                )}\n              </div>\n            </button>\n          );\n        })}\n        \n        <div className=\"flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 pt-2\">\n          <span>{totalVotes} vote{totalVotes !== 1 ? 's' : ''}</span>\n          {post.pollEndsAt && (\n            <span>\n              {isPollEnded\n                ? 'Poll ended'\n                : `Ends ${formatDistanceToNow(new Date(post.pollEndsAt), { addSuffix: true })}`}\n            </span>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  // Article content\n  const renderArticleContent = () => {\n    return (\n      <Link\n        href={`/article/${post.id}`}\n        className=\"mt-3 block rounded-lg overflow-hidden border border-gray-200 dark:border-neutral-800 hover:border-gray-300 dark:hover:border-neutral-700 transition-colors\"\n      >\n        {post.articleCoverImage && (\n          <img\n            src={post.articleCoverImage}\n            alt=\"\"\n            className=\"w-full h-48 object-cover\"\n            loading=\"lazy\"\n          />\n        )}\n        <div className=\"p-4 bg-gray-50 dark:bg-neutral-800/50\">\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white\">\n            {post.articleTitle}\n          </h3>\n          {post.articleTags && post.articleTags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1 mt-2\">\n              {post.articleTags.map((tag, i) => (\n                <span\n                  key={i}\n                  className=\"px-2 py-0.5 text-xs rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300\"\n                >\n                  {tag}\n                </span>\n              ))}\n            </div>\n          )}\n          {post.articleReadTime && (\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400 mt-2\">\n              {post.articleReadTime} min read\n            </p>\n          )}\n        </div>\n      </Link>\n    );\n  };\n\n  // Celebration content\n  const renderCelebrationContent = () => {\n    const celebrationEmojis: Record<string, string> = {\n      NEW_JOB: '',\n      PROMOTION: '',\n      GRADUATION: '',\n      CERTIFICATION: '',\n      WORK_ANNIVERSARY: '',\n      BIRTHDAY: '',\n      JOB_CHANGE: '',\n      NEW_POSITION: '',\n    };\n    \n    const emoji = post.celebrationType ? celebrationEmojis[post.celebrationType] || '' : '';\n    \n    return (\n      <div className=\"mt-3 p-6 rounded-lg bg-gradient-to-r from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20 border border-yellow-200 dark:border-yellow-700/50 text-center\">\n        <span className=\"text-5xl\">{emoji}</span>\n        <p className=\"mt-3 text-lg font-semibold text-gray-900 dark:text-white\">\n          {post.celebrationType?.replace(/_/g, ' ').toLowerCase().replace(/^\\w/, c => c.toUpperCase())}\n        </p>\n      </div>\n    );\n  };\n\n  // Document content\n  const renderDocumentContent = () => {\n    if (!post.documentUrl) return null;\n    \n    return (\n      <a\n        href={post.documentUrl}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"mt-3 flex items-center gap-3 p-4 rounded-lg border border-gray-200 dark:border-neutral-700 hover:bg-gray-50 dark:hover:bg-neutral-800 transition-colors\"\n      >\n        <div className=\"p-3 rounded-lg bg-red-100 dark:bg-red-900/30\">\n          <FileText className=\"w-6 h-6 text-red-600 dark:text-red-400\" />\n        </div>\n        <div className=\"flex-1 min-w-0\">\n          <p className=\"font-medium text-gray-900 dark:text-white truncate\">\n            {post.documentName || 'Document'}\n          </p>\n          <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n            {post.documentType?.toUpperCase()}  {post.documentSize ? `${(post.documentSize / 1024 / 1024).toFixed(1)} MB` : ''}\n            {post.documentPages ? `  ${post.documentPages} pages` : ''}\n          </p>\n        </div>\n        <ExternalLink className=\"w-5 h-5 text-gray-400\" />\n      </a>\n    );\n  };\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white dark:bg-neutral-900 rounded-xl border border-gray-200 dark:border-neutral-800 overflow-hidden\"\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4\">\n        <Link href={`/profile/${post.author.username}`} className=\"flex items-center gap-3\">\n          <div className=\"w-12 h-12 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n            {post.author.profileImage ? (\n              <img\n                src={post.author.profileImage}\n                alt={post.author.name}\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center text-lg font-bold text-gray-500\">\n                {post.author.name.charAt(0).toUpperCase()}\n              </div>\n            )}\n          </div>\n          <div>\n            <p className=\"font-semibold text-gray-900 dark:text-white hover:underline\">\n              {post.author.name}\n            </p>\n            <p className=\"text-sm text-gray-500 dark:text-neutral-400\">\n              {post.author.headline || `@${post.author.username}`}\n            </p>\n            <p className=\"text-xs text-gray-400 dark:text-neutral-500\">\n              {formatDistanceToNow(new Date(post.createdAt), { addSuffix: true })}\n            </p>\n          </div>\n        </Link>\n        \n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <MoreHorizontal className=\"w-5 h-5 text-gray-500\" />\n          </button>\n          \n          {showMenu && (\n            <div className=\"absolute right-0 top-full mt-1 w-48 py-1 rounded-lg bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 shadow-lg z-10\">\n              <button\n                onClick={() => {\n                  navigator.clipboard.writeText(`${window.location.origin}/post/${post.id}`);\n                  setShowMenu(false);\n                }}\n                className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n              >\n                <Copy className=\"w-4 h-4\" />\n                Copy link\n              </button>\n              \n              {isOwnPost && (\n                <>\n                  <button\n                    onClick={() => {\n                      setShowEditModal(true);\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                    Edit post\n                  </button>\n                  <button\n                    onClick={() => {\n                      handleDelete();\n                      setShowMenu(false);\n                    }}\n                    className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                    Delete post\n                  </button>\n                </>\n              )}\n              \n              {!isOwnPost && (\n                <button\n                  onClick={() => {\n                    setShowReportModal(true);\n                    setShowMenu(false);\n                  }}\n                  className=\"flex items-center gap-2 w-full px-4 py-2 text-sm text-gray-700 dark:text-neutral-300 hover:bg-gray-100 dark:hover:bg-neutral-700\"\n                >\n                  <Flag className=\"w-4 h-4\" />\n                  Report\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {/* Content */}\n      <div className=\"px-4 pb-2\">\n        {post.content && (\n          <FormattedContent \n            content={post.content} \n            className=\"text-gray-900 dark:text-white\"\n          />\n        )}\n        {renderContent()}\n      </div>\n      \n      {/* Engagement Stats */}\n      <div className=\"px-4 py-2 flex items-center justify-between text-sm text-gray-500 dark:text-neutral-400 border-t border-gray-100 dark:border-neutral-800\">\n        <div className=\"flex items-center gap-4\">\n          {likesCount > 0 && (\n            <ReactionSummaryDisplay \n              reactionSummary={reactionSummary}\n              totalCount={likesCount}\n              onClick={() => setShowLikeListModal(true)}\n            />\n          )}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          {commentsCount > 0 && (\n            <button onClick={onCommentClick} className=\"hover:underline\">\n              {commentsCount} comment{commentsCount !== 1 ? 's' : ''}\n            </button>\n          )}\n        </div>\n      </div>\n      \n      {/* Actions */}\n      <div className=\"px-4 py-2 flex items-center justify-between border-t border-gray-100 dark:border-neutral-800\">\n        {/* Reaction Button with Picker */}\n        <div \n          className=\"relative\"\n          onMouseEnter={() => setShowReactionPicker(true)}\n          onMouseLeave={() => setShowReactionPicker(false)}\n        >\n          <button\n            onClick={handleLike}\n            className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n              isLiked && currentReaction\n                ? `${getReactionConfig(currentReaction).color} ${getReactionConfig(currentReaction).bgColor}`\n                : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n            }`}\n          >\n            {currentReaction ? (\n              <>\n                {React.createElement(getReactionConfig(currentReaction).icon, { \n                  className: `w-5 h-5 ${isLiked ? 'fill-current' : ''}` \n                })}\n                <span className=\"text-sm font-medium\">{getReactionConfig(currentReaction).label}</span>\n              </>\n            ) : (\n              <>\n                <ThumbsUp className=\"w-5 h-5\" />\n                <span className=\"text-sm font-medium\">Like</span>\n              </>\n            )}\n          </button>\n          \n          <ReactionPicker\n            isOpen={showReactionPicker}\n            currentReaction={currentReaction}\n            onSelect={handleReaction}\n            onClose={() => setShowReactionPicker(false)}\n          />\n        </div>\n        \n        <button\n          onClick={onCommentClick}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <MessageCircle className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Comment</span>\n        </button>\n        \n        <button\n          onClick={handleShare}\n          className=\"flex items-center gap-2 px-4 py-2 rounded-lg text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n        >\n          <Share2 className=\"w-5 h-5\" />\n          <span className=\"text-sm font-medium\">Share</span>\n        </button>\n        \n        <button\n          onClick={handleSave}\n          className={`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${\n            isSaved\n              ? 'text-blue-500 bg-blue-50 dark:bg-blue-900/20'\n              : 'text-gray-600 dark:text-neutral-400 hover:bg-gray-100 dark:hover:bg-neutral-800'\n          }`}\n        >\n          <Bookmark className={`w-5 h-5 ${isSaved ? 'fill-current' : ''}`} />\n          <span className=\"text-sm font-medium hidden sm:inline\">Save</span>\n        </button>\n      </div>\n\n      {/* Like List Modal */}\n      <LikeListModal\n        isOpen={showLikeListModal}\n        onClose={() => setShowLikeListModal(false)}\n        postId={post.id}\n        totalCount={likesCount}\n      />\n\n      {/* Edit Post Modal */}\n      <EditPostModal\n        isOpen={showEditModal}\n        onClose={() => setShowEditModal(false)}\n        post={post}\n        onPostUpdated={(updatedPost) => {\n          onEdit?.(post.id, updatedPost);\n        }}\n      />\n\n      {/* Report Modal */}\n      <ReportModal\n        isOpen={showReportModal}\n        onClose={() => setShowReportModal(false)}\n        type=\"post\"\n        targetId={post.id}\n        targetName={`Post by ${post.author.name}`}\n      />\n\n      {/* Share Modal */}\n      <ShareModal\n        isOpen={showShareModal}\n        onClose={() => setShowShareModal(false)}\n        postId={post.id}\n        postPreview={post.content || undefined}\n        postAuthor={{\n          name: post.author.name,\n          username: post.author.username,\n          profileImage: post.author.profileImage,\n        }}\n        postMediaUrl={post.mediaUrls?.[0] || post.videoUrl || null}\n      />\n    </motion.div>\n  );\n}\n\nexport default PostCard;\n"],"names":["React","useState","useRef","useEffect","motion","Link","ThumbsUp","MessageCircle","Share2","Bookmark","MoreHorizontal","ExternalLink","FileText","Play","Pause","Volume2","VolumeX","ChevronLeft","ChevronRight","Trash2","Flag","Copy","Pencil","formatDistanceToNow","Post","PollOption","toggleLike","votePoll","deletePost","toggleSavePost","likePost","socketLikePost","reactToPost","socketReactToPost","socketVotePoll","useAuth","ReactionPicker","ReactionSummaryDisplay","getReactionConfig","FormattedContent","EditPostModal","LikeListModal","ShareModal","ReportModal","ReactionType","ReactionSummary","ReactionSummaryType","PostCardProps","post","onLikeUpdate","postId","liked","count","reactionType","reactionSummary","onPollUpdate","options","onDelete","onEdit","updatedPost","onUnsave","onCommentClick","highlightCommentId","PostCard","user","isLiked","setIsLiked","likesCount","setLikesCount","commentsCount","setCommentsCount","sharesCount","setSharesCount","currentReaction","setCurrentReaction","userReactionType","setReactionSummary","showReactionPicker","setShowReactionPicker","showLikeListModal","setShowLikeListModal","isSaved","setIsSaved","showMenu","setShowMenu","showEditModal","setShowEditModal","showReportModal","setShowReportModal","showShareModal","setShowShareModal","selectedPollOption","setSelectedPollOption","userVotedOptionId","pollOptions","setPollOptions","currentImageIndex","setCurrentImageIndex","videoRef","HTMLVideoElement","isPlaying","setIsPlaying","isMuted","setIsMuted","isVideoInView","setIsVideoInView","isOwnPost","id","author","type","current","observer","IntersectionObserver","entry","isIntersecting","play","catch","pause","threshold","observe","disconnect","handleLike","handleReaction","wasLiked","oldReaction","oldCount","oldSummary","newLiked","newCount","newReaction","newSummary","map","s","Math","max","filter","existingIdx","findIndex","push","error","err","handlePollVote","optionId","showResultsBeforeVote","updatedOptions","opt","votes","totalVotes","reduce","sum","optionsWithPercentage","percentage","round","console","handleDelete","confirm","handleShare","handleSave","response","saved","renderContent","renderImageContent","renderVideoContent","renderLinkContent","renderPollContent","renderArticleContent","renderCelebrationContent","renderDocumentContent","images","mediaUrls","length","display","mainImage","thumbnails","_","i","prev","img","index","actualIndex","videoUrl","videoThumbnail","undefined","e","stopPropagation","muted","videoDuration","floor","String","padStart","linkUrl","linkImage","linkTitle","linkDescription","linkDomain","URL","hostname","hasVoted","some","showResults","isPollEnded","pollEndsAt","Date","option","isSelected","width","duration","text","addSuffix","articleCoverImage","articleTitle","articleTags","tag","articleReadTime","celebrationEmojis","Record","NEW_JOB","PROMOTION","GRADUATION","CERTIFICATION","WORK_ANNIVERSARY","BIRTHDAY","JOB_CHANGE","NEW_POSITION","emoji","celebrationType","replace","toLowerCase","c","toUpperCase","documentUrl","documentName","documentType","documentSize","toFixed","documentPages","opacity","y","username","profileImage","name","charAt","headline","createdAt","navigator","clipboard","writeText","window","location","origin","content","color","bgColor","createElement","icon","className","label"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 4992, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/components/feed/Comments.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport {\n  Heart,\n  MessageCircle,\n  ChevronDown,\n  ChevronUp,\n  Send,\n  Loader2,\n  X,\n  CornerDownRight,\n} from 'lucide-react';\nimport { formatDistanceToNow } from 'date-fns';\nimport type { Comment } from '@/types/post';\nimport { getComments, createComment as apiCreateComment, searchUsersForMention, toggleCommentLike } from '@/lib/api/posts';\nimport { joinPostRoom, leavePostRoom, getSocket } from '@/lib/socket';\nimport { useAuth } from '@/lib/auth/useAuth';\nimport type { MentionUser } from '@/types/post';\n\ninterface CommentsProps {\n  postId: string;\n  isOpen: boolean;\n  onClose: () => void;\n  highlightCommentId?: string;\n  onCommentCountChange?: (count: number) => void;\n}\n\ninterface CommentItemProps {\n  comment: Comment;\n  postId: string;\n  depth: number;\n  highlightId?: string;\n  onReply: (parentId: string, parentAuthor: string) => void;\n}\n\nfunction CommentItem({ comment, postId, depth, highlightId, onReply }: CommentItemProps) {\n  const { user } = useAuth();\n  const [isLiked, setIsLiked] = useState(comment.isLiked);\n  const [likesCount, setLikesCount] = useState(comment.likesCount);\n  const [showReplies, setShowReplies] = useState(depth < 2);\n  const [replies, setReplies] = useState<Comment[]>([]);\n  const [loadingReplies, setLoadingReplies] = useState(false);\n  const [hasMoreReplies, setHasMoreReplies] = useState(comment.replyCount > 0);\n  const [replyCount, setReplyCount] = useState(comment.replyCount);\n  \n  const commentRef = useRef<HTMLDivElement>(null);\n  const isHighlighted = highlightId === comment.id;\n\n  // Sync with parent state when comment prop changes (from real-time updates)\n  useEffect(() => {\n    setIsLiked(comment.isLiked);\n    setLikesCount(comment.likesCount);\n  }, [comment.isLiked, comment.likesCount]);\n\n  // Listen for real-time reply updates\n  useEffect(() => {\n    const socket = getSocket();\n    \n    const handleCommentCreated = (data: { postId: string; comment?: any; commentsCount: number }) => {\n      // Skip if no comment data or not a reply to this comment\n      if (!data.comment || data.postId !== postId || data.comment.parentId !== comment.id) return;\n      \n      // New reply to this comment\n      setReplies(prev => {\n        if (prev.some(r => r.id === data.comment.id)) return prev;\n        return [data.comment, ...prev];\n      });\n      setReplyCount(prev => prev + 1);\n      setHasMoreReplies(true);\n    };\n    \n    const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n      // Update this comment's likes\n      if (data.commentId === comment.id) {\n        setLikesCount(data.likesCount);\n        if (data.userId === user?.id) {\n          setIsLiked(data.liked);\n        }\n      }\n      // Update nested replies' likes\n      setReplies(prev => prev.map(r => \n        r.id === data.commentId \n          ? { ...r, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : r.isLiked }\n          : r\n      ));\n    };\n    \n    socket?.on('comment:created', handleCommentCreated);\n    socket?.on('comment:liked', handleCommentLiked);\n    \n    return () => {\n      socket?.off('comment:created', handleCommentCreated);\n      socket?.off('comment:liked', handleCommentLiked);\n    };\n  }, [postId, comment.id, user?.id]);\n\n  // Scroll to highlighted comment\n  useEffect(() => {\n    if (isHighlighted && commentRef.current) {\n      commentRef.current.scrollIntoView({ behavior: 'smooth', block: 'center' });\n    }\n  }, [isHighlighted]);\n\n  // Load replies\n  const loadReplies = async () => {\n    if (loadingReplies || replies.length >= comment.replyCount) return;\n    \n    setLoadingReplies(true);\n    try {\n      const response = await getComments(postId, comment.id, 1, 10);\n      setReplies(response.comments);\n      setHasMoreReplies(response.hasMore);\n    } catch (error) {\n      console.error('Error loading replies:', error);\n    } finally {\n      setLoadingReplies(false);\n    }\n  };\n\n  // Handle like\n  const handleLike = async () => {\n    const newLiked = !isLiked;\n    setIsLiked(newLiked);\n    setLikesCount(prev => newLiked ? prev + 1 : prev - 1);\n    \n    try {\n      const res = await toggleCommentLike(postId, comment.id);\n      if (res) {\n        setIsLiked(res.liked);\n        setLikesCount(res.likesCount);\n      }\n    } catch (error) {\n      setIsLiked(!newLiked);\n      setLikesCount(likesCount);\n    }\n  };\n\n  // Parse content for mentions\n  const parseContent = (text: string) => {\n    const parts = text.split(/(@\\w+)/g);\n    return parts.map((part, index) => {\n      if (part.startsWith('@')) {\n        return (\n          <Link\n            key={index}\n            href={`/profile/${part.slice(1)}`}\n            className=\"text-blue-600 dark:text-blue-400 hover:underline\"\n          >\n            {part}\n          </Link>\n        );\n      }\n      return <span key={index}>{part}</span>;\n    });\n  };\n\n  return (\n    <div\n      ref={commentRef}\n      className={`${depth > 0 ? 'ml-8 border-l-2 border-gray-100 dark:border-neutral-800 pl-4' : ''}`}\n    >\n      <motion.div\n        initial={{ opacity: 0, y: 10 }}\n        animate={{ opacity: 1, y: 0 }}\n        className={`py-3 transition-colors ${\n          isHighlighted ? 'bg-yellow-50 dark:bg-yellow-900/20 -mx-2 px-2 rounded-lg' : ''\n        }`}\n      >\n        <div className=\"flex gap-3\">\n          {/* Avatar */}\n          <Link href={`/profile/${comment.author.username}`} className=\"flex-shrink-0\">\n            <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700\">\n              {comment.author.profileImage ? (\n                <img\n                  src={comment.author.profileImage}\n                  alt={comment.author.name}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                  {comment.author.name.charAt(0).toUpperCase()}\n                </div>\n              )}\n            </div>\n          </Link>\n          \n          {/* Content */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"bg-gray-100 dark:bg-neutral-800 rounded-2xl px-4 py-2\">\n              <Link\n                href={`/profile/${comment.author.username}`}\n                className=\"font-semibold text-sm text-gray-900 dark:text-white hover:underline\"\n              >\n                {comment.author.name}\n              </Link>\n              <p className=\"text-sm text-gray-700 dark:text-neutral-300 whitespace-pre-wrap\">\n                {parseContent(comment.content)}\n              </p>\n            </div>\n            \n            {/* Actions */}\n            <div className=\"flex items-center gap-4 mt-1 ml-2 text-xs\">\n              <span className=\"text-gray-500 dark:text-neutral-500\">\n                {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n              </span>\n              \n              <button\n                onClick={handleLike}\n                className={`font-semibold transition-colors ${\n                  isLiked ? 'text-red-500' : 'text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300'\n                }`}\n              >\n                Like{likesCount > 0 && ` (${likesCount})`}\n              </button>\n              \n              <button\n                onClick={() => onReply(comment.id, comment.author.username)}\n                className=\"font-semibold text-gray-500 dark:text-neutral-400 hover:text-gray-700 dark:hover:text-neutral-300 transition-colors\"\n              >\n                Reply\n              </button>\n            </div>\n            \n            {/* Replies toggle */}\n            {replyCount > 0 && (\n              <button\n                onClick={() => {\n                  setShowReplies(!showReplies);\n                  if (!showReplies && replies.length === 0) {\n                    loadReplies();\n                  }\n                }}\n                className=\"flex items-center gap-1 mt-2 ml-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300\"\n              >\n                <CornerDownRight className=\"w-3 h-3\" />\n                {showReplies ? 'Hide' : 'View'} {replyCount} {replyCount === 1 ? 'reply' : 'replies'}\n                {showReplies ? <ChevronUp className=\"w-3 h-3\" /> : <ChevronDown className=\"w-3 h-3\" />}\n              </button>\n            )}\n          </div>\n        </div>\n        \n        {/* Replies */}\n        <AnimatePresence>\n          {showReplies && (\n            <motion.div\n              initial={{ opacity: 0, height: 0 }}\n              animate={{ opacity: 1, height: 'auto' }}\n              exit={{ opacity: 0, height: 0 }}\n              className=\"mt-2\"\n            >\n              {loadingReplies && replies.length === 0 ? (\n                <div className=\"flex justify-center py-4\">\n                  <Loader2 className=\"w-5 h-5 animate-spin text-gray-400\" />\n                </div>\n              ) : (\n                replies.map((reply) => (\n                  <CommentItem\n                    key={reply.id}\n                    comment={reply}\n                    postId={postId}\n                    depth={depth + 1}\n                    highlightId={highlightId}\n                    onReply={onReply}\n                  />\n                ))\n              )}\n              \n              {hasMoreReplies && replies.length > 0 && (\n                <button\n                  onClick={loadReplies}\n                  disabled={loadingReplies}\n                  className=\"ml-8 mt-2 text-xs font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700\"\n                >\n                  {loadingReplies ? (\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\n                  ) : (\n                    'Load more replies'\n                  )}\n                </button>\n              )}\n            </motion.div>\n          )}\n        </AnimatePresence>\n      </motion.div>\n    </div>\n  );\n}\n\nexport function Comments({ postId, isOpen, onClose, highlightCommentId, onCommentCountChange }: CommentsProps) {\n  const { user } = useAuth();\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMore, setHasMore] = useState(false);\n  const [page, setPage] = useState(1);\n  const [loadingMore, setLoadingMore] = useState(false);\n  \n  // Reply state\n  const [replyingTo, setReplyingTo] = useState<{ id: string; username: string } | null>(null);\n  \n  // Input state\n  const [newComment, setNewComment] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  \n  // Mention state\n  const [mentionQuery, setMentionQuery] = useState('');\n  const [mentionResults, setMentionResults] = useState<MentionUser[]>([]);\n  const [showMentionDropdown, setShowMentionDropdown] = useState(false);\n  const [mentions, setMentions] = useState<string[]>([]);\n  \n  const inputRef = useRef<HTMLTextAreaElement>(null);\n  const commentsContainerRef = useRef<HTMLDivElement>(null);\n\n  // Join post room for real-time updates\n  useEffect(() => {\n    if (isOpen) {\n      joinPostRoom(postId);\n      \n      // Set up real-time comment listeners\n      const socket = getSocket();\n      \n      const handleCommentCreated = (data: { postId: string; comment?: any; commentsCount: number }) => {\n        if (data.postId !== postId) return;\n        \n        // Update comment count regardless of whether full comment data is present\n        if (typeof data.commentsCount === 'number') {\n          onCommentCountChange?.(data.commentsCount);\n        }\n        \n        // If no comment data provided (global feed broadcast), just update the count\n        if (!data.comment) return;\n        \n        // Add new comment to the list (avoid duplicates)\n        setComments(prev => {\n          // Check if comment already exists (from optimistic update or duplicate event)\n          const exists = prev.some(c => c.id === data.comment.id);\n          const hasTempComment = prev.some(c => c.id.startsWith('temp-'));\n          \n          if (exists) {\n            // Comment already in list, no change needed\n            return prev;\n          }\n          \n          if (hasTempComment) {\n            // Replace temp comment with real one\n            return prev.map(c => c.id.startsWith('temp-') ? data.comment : c);\n          }\n          \n          // Add to top if it's a new top-level comment\n          if (!data.comment.parentId) {\n            return [data.comment, ...prev];\n          }\n          return prev;\n        });\n      };\n      \n      const handleCommentLiked = (data: { commentId: string; userId: string; liked: boolean; likesCount: number }) => {\n        // Update comment likes in real-time\n        setComments(prev => prev.map(c => \n          c.id === data.commentId \n            ? { ...c, likesCount: data.likesCount, isLiked: data.userId === user?.id ? data.liked : c.isLiked }\n            : c\n        ));\n      };\n      \n      socket?.on('comment:created', handleCommentCreated);\n      socket?.on('comment:liked', handleCommentLiked);\n      \n      return () => {\n        leavePostRoom(postId);\n        socket?.off('comment:created', handleCommentCreated);\n        socket?.off('comment:liked', handleCommentLiked);\n      };\n    }\n  }, [isOpen, postId, user?.id, onCommentCountChange]);\n\n  // Fetch comments\n  useEffect(() => {\n    if (!isOpen) return;\n    \n    const fetchComments = async () => {\n      setLoading(true);\n      try {\n        const response = await getComments(postId, undefined, 1, 20);\n        setComments(response.comments);\n        setHasMore(response.hasMore);\n        setPage(1);\n      } catch (error) {\n        console.error('Error fetching comments:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchComments();\n  }, [isOpen, postId]);\n\n  // Load more comments\n  const loadMore = async () => {\n    if (loadingMore || !hasMore) return;\n    \n    setLoadingMore(true);\n    try {\n      const nextPage = page + 1;\n      const response = await getComments(postId, undefined, nextPage, 20);\n      setComments(prev => [...prev, ...response.comments]);\n      setHasMore(response.hasMore);\n      setPage(nextPage);\n    } catch (error) {\n      console.error('Error loading more comments:', error);\n    } finally {\n      setLoadingMore(false);\n    }\n  };\n\n  // Handle reply click\n  const handleReply = (parentId: string, username: string) => {\n    setReplyingTo({ id: parentId, username });\n    setNewComment(`@${username} `);\n    setMentions([]);\n    inputRef.current?.focus();\n  };\n\n  // Cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n    setNewComment('');\n    setMentions([]);\n  };\n\n  // Search mentions\n  const searchMentions = useCallback(async (query: string) => {\n    if (query.length < 2) {\n      setMentionResults([]);\n      setShowMentionDropdown(false);\n      return;\n    }\n    \n    try {\n      const results = await searchUsersForMention(query);\n      setMentionResults(results);\n      setShowMentionDropdown(results.length > 0);\n    } catch (error) {\n      console.error('Error searching mentions:', error);\n    }\n  }, []);\n\n  // Handle input change\n  const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    const value = e.target.value;\n    setNewComment(value);\n    \n    // Detect @mention\n    const lastAtIndex = value.lastIndexOf('@');\n    if (lastAtIndex !== -1) {\n      const textAfterAt = value.slice(lastAtIndex + 1);\n      const spaceIndex = textAfterAt.indexOf(' ');\n      const query = spaceIndex === -1 ? textAfterAt : '';\n      \n      if (query) {\n        setMentionQuery(query);\n        searchMentions(query);\n      } else {\n        setShowMentionDropdown(false);\n      }\n    } else {\n      setShowMentionDropdown(false);\n    }\n  };\n\n  // Insert mention\n  const insertMention = (mentionUser: MentionUser) => {\n    const lastAtIndex = newComment.lastIndexOf('@');\n    const updatedComment = newComment.slice(0, lastAtIndex) + `@${mentionUser.username} `;\n    setNewComment(updatedComment);\n    setMentions([...mentions, mentionUser.id]);\n    setShowMentionDropdown(false);\n    inputRef.current?.focus();\n  };\n\n  // Submit comment\n  const handleSubmit = async () => {\n    if (!newComment.trim() || isSubmitting) return;\n    \n    setIsSubmitting(true);\n    \n    try {\n      const comment = await apiCreateComment(\n        postId,\n        newComment.trim(),\n        replyingTo?.id,\n        mentions\n      );\n      \n      setComments(prev => {\n        if (replyingTo) {\n          return prev.map(c =>\n            c.id === replyingTo.id\n              ? { ...c, replyCount: (c.replyCount || 0) + 1 }\n              : c\n          );\n        }\n        const exists = prev.some(c => c.id === comment.id);\n        if (exists) return prev;\n        return [comment, ...prev];\n      });\n      \n      onCommentCountChange?.(comments.length + 1);\n      setNewComment('');\n      setMentions([]);\n      setReplyingTo(null);\n    } catch (error) {\n      console.error('Error creating comment:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n        className=\"fixed inset-0 z-50 flex items-end sm:items-center justify-center\"\n        onClick={onClose}\n      >\n        {/* Backdrop */}\n        <div className=\"absolute inset-0 bg-black/50\" />\n        \n        {/* Panel */}\n        <motion.div\n          initial={{ y: '100%' }}\n          animate={{ y: 0 }}\n          exit={{ y: '100%' }}\n          transition={{ type: 'spring', damping: 25, stiffness: 300 }}\n          onClick={(e) => e.stopPropagation()}\n          className=\"relative w-full sm:max-w-xl h-[80vh] sm:h-[70vh] sm:rounded-t-2xl sm:rounded-b-2xl bg-white dark:bg-neutral-900 flex flex-col\"\n        >\n          {/* Header */}\n          <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-neutral-800\">\n            <h2 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Comments</h2>\n            <button\n              onClick={onClose}\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n            >\n              <X className=\"w-5 h-5 text-gray-500\" />\n            </button>\n          </div>\n          \n          {/* Comments List */}\n          <div\n            ref={commentsContainerRef}\n            className=\"flex-1 overflow-y-auto p-4\"\n          >\n            {loading ? (\n              <div className=\"flex justify-center py-8\">\n                <Loader2 className=\"w-8 h-8 animate-spin text-gray-400\" />\n              </div>\n            ) : comments.length === 0 ? (\n              <div className=\"text-center py-8\">\n                <MessageCircle className=\"w-12 h-12 mx-auto text-gray-300 dark:text-neutral-600 mb-2\" />\n                <p className=\"text-gray-500 dark:text-neutral-400\">No comments yet</p>\n                <p className=\"text-sm text-gray-400 dark:text-neutral-500\">Be the first to comment!</p>\n              </div>\n            ) : (\n              <>\n                {comments.map((comment) => (\n                  <CommentItem\n                    key={comment.id}\n                    comment={comment}\n                    postId={postId}\n                    depth={0}\n                    highlightId={highlightCommentId}\n                    onReply={handleReply}\n                  />\n                ))}\n                \n                {hasMore && (\n                  <button\n                    onClick={loadMore}\n                    disabled={loadingMore}\n                    className=\"w-full py-3 text-sm font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 transition-colors\"\n                  >\n                    {loadingMore ? (\n                      <Loader2 className=\"w-5 h-5 animate-spin mx-auto\" />\n                    ) : (\n                      'Load more comments'\n                    )}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n          \n          {/* Reply indicator */}\n          {replyingTo && (\n            <div className=\"px-4 py-2 bg-gray-50 dark:bg-neutral-800/50 border-t border-gray-200 dark:border-neutral-800 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 dark:text-neutral-400\">\n                Replying to <span className=\"font-semibold text-gray-700 dark:text-neutral-300\">@{replyingTo.username}</span>\n              </span>\n              <button onClick={cancelReply} className=\"text-gray-400 hover:text-gray-600\">\n                <X className=\"w-4 h-4\" />\n              </button>\n            </div>\n          )}\n          \n          {/* Input */}\n          <div className=\"p-4 border-t border-gray-200 dark:border-neutral-800\">\n            <div className=\"relative\">\n              {/* Mention Dropdown */}\n              {showMentionDropdown && (\n                <div className=\"absolute bottom-full left-0 right-0 mb-2 max-h-40 overflow-y-auto bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-lg shadow-lg z-10\">\n                  {mentionResults.map((mentionUser) => (\n                    <button\n                      key={mentionUser.id}\n                      onClick={() => insertMention(mentionUser)}\n                      className=\"flex items-center gap-2 w-full px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700 transition-colors\"\n                    >\n                      <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-600\">\n                        {mentionUser.profileImage && (\n                          <img src={mentionUser.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                        )}\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">{mentionUser.name}</p>\n                        <p className=\"text-xs text-gray-500\">@{mentionUser.username}</p>\n                      </div>\n                    </button>\n                  ))}\n                </div>\n              )}\n              \n              <div className=\"flex items-end gap-2\">\n                <div className=\"w-8 h-8 rounded-full overflow-hidden bg-gray-200 dark:bg-neutral-700 flex-shrink-0\">\n                  {user?.profileImage ? (\n                    <img src={user.profileImage} alt=\"\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <div className=\"w-full h-full flex items-center justify-center text-sm font-bold text-gray-500\">\n                      {user?.name?.charAt(0).toUpperCase()}\n                    </div>\n                  )}\n                </div>\n                \n                <textarea\n                  ref={inputRef}\n                  value={newComment}\n                  onChange={handleInputChange}\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter' && !e.shiftKey) {\n                      e.preventDefault();\n                      handleSubmit();\n                    }\n                  }}\n                  placeholder=\"Write a comment...\"\n                  rows={1}\n                  className=\"flex-1 px-4 py-2 rounded-full bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-white placeholder-gray-500 resize-none outline-none focus:ring-2 focus:ring-blue-500 max-h-24\"\n                  style={{ minHeight: '40px' }}\n                />\n                \n                <button\n                  onClick={handleSubmit}\n                  disabled={!newComment.trim() || isSubmitting}\n                  className=\"p-2 rounded-full bg-blue-500 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-blue-600 transition-colors\"\n                >\n                  {isSubmitting ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Send className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n\nexport default Comments;\n"],"names":["React","useState","useEffect","useRef","useCallback","motion","AnimatePresence","Link","Heart","MessageCircle","ChevronDown","ChevronUp","Send","Loader2","X","CornerDownRight","formatDistanceToNow","Comment","getComments","createComment","apiCreateComment","searchUsersForMention","toggleCommentLike","joinPostRoom","leavePostRoom","getSocket","useAuth","MentionUser","CommentsProps","postId","isOpen","onClose","highlightCommentId","onCommentCountChange","count","CommentItemProps","comment","depth","highlightId","onReply","parentId","parentAuthor","CommentItem","user","isLiked","setIsLiked","likesCount","setLikesCount","showReplies","setShowReplies","replies","setReplies","loadingReplies","setLoadingReplies","hasMoreReplies","setHasMoreReplies","replyCount","setReplyCount","commentRef","HTMLDivElement","isHighlighted","id","socket","handleCommentCreated","data","commentsCount","prev","some","r","handleCommentLiked","commentId","userId","liked","map","on","off","current","scrollIntoView","behavior","block","loadReplies","length","response","comments","hasMore","error","console","handleLike","newLiked","res","parseContent","text","parts","split","part","index","startsWith","slice","opacity","y","author","username","profileImage","name","charAt","toUpperCase","content","Date","createdAt","addSuffix","height","reply","Comments","setComments","loading","setLoading","setHasMore","page","setPage","loadingMore","setLoadingMore","replyingTo","setReplyingTo","newComment","setNewComment","isSubmitting","setIsSubmitting","mentionQuery","setMentionQuery","mentionResults","setMentionResults","showMentionDropdown","setShowMentionDropdown","mentions","setMentions","inputRef","HTMLTextAreaElement","commentsContainerRef","exists","c","hasTempComment","fetchComments","undefined","loadMore","nextPage","handleReply","focus","cancelReply","searchMentions","query","results","handleInputChange","e","ChangeEvent","value","target","lastAtIndex","lastIndexOf","textAfterAt","spaceIndex","indexOf","insertMention","mentionUser","updatedComment","handleSubmit","trim","type","damping","stiffness","stopPropagation","key","shiftKey","preventDefault","minHeight"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 6054, "column": 0}, "map": {"version":3,"sources":["file:///home/yasmanth/Pictures/vormex/vormex-web/src/app/post/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect, Suspense } from 'react';\nimport { useParams, useSearchParams } from 'next/navigation';\nimport { motion } from 'framer-motion';\nimport { ArrowLeft, Loader2 } from 'lucide-react';\nimport Link from 'next/link';\nimport { ProtectedRoute } from '@/components/auth/ProtectedRoute';\nimport { PostCard } from '@/components/feed/PostCard';\nimport { Comments } from '@/components/feed/Comments';\nimport { getPost } from '@/lib/api/posts';\nimport { joinPostRoom, leavePostRoom } from '@/lib/socket';\nimport type { Post, PollOption } from '@/types/post';\n\nfunction PostDetailContent() {\n  const params = useParams();\n  const searchParams = useSearchParams();\n  const postId = params.id as string;\n  const highlightCommentId = searchParams.get('comment') || undefined;\n  \n  const [post, setPost] = useState<Post | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [showComments, setShowComments] = useState(!!highlightCommentId);\n\n  // Fetch post\n  useEffect(() => {\n    const fetchPost = async () => {\n      setLoading(true);\n      setError(null);\n      \n      try {\n        const data = await getPost(postId);\n        setPost(data);\n        \n        // Join room for real-time updates\n        joinPostRoom(postId);\n      } catch (err: any) {\n        console.error('Error fetching post:', err);\n        setError(err.response?.data?.error || 'Post not found');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    if (postId) {\n      fetchPost();\n    }\n    \n    return () => {\n      if (postId) {\n        leavePostRoom(postId);\n      }\n    };\n  }, [postId]);\n\n  // Auto-open comments if there's a highlight\n  useEffect(() => {\n    if (highlightCommentId && post) {\n      setShowComments(true);\n    }\n  }, [highlightCommentId, post]);\n\n  // Handle like update\n  const handleLikeUpdate = (postId: string, liked: boolean, count: number) => {\n    setPost(prev => prev ? { ...prev, isLiked: liked, likesCount: count } : null);\n  };\n\n  // Handle poll update\n  const handlePollUpdate = (postId: string, options: PollOption[]) => {\n    setPost(prev => prev ? { ...prev, pollOptions: options } : null);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950 flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 animate-spin text-blue-500\" />\n      </div>\n    );\n  }\n\n  if (error || !post) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950 flex flex-col items-center justify-center px-4\">\n        <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n          {error || 'Post not found'}\n        </h1>\n        <p className=\"text-gray-500 dark:text-neutral-400 mb-4\">\n          The post you're looking for doesn't exist or has been deleted.\n        </p>\n        <Link\n          href=\"/\"\n          className=\"px-4 py-2 bg-blue-500 text-white rounded-lg font-medium hover:bg-blue-600 transition-colors\"\n        >\n          Go back home\n        </Link>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-neutral-950 pb-10\">\n      {/* Header */}\n      <div className=\"sticky top-0 z-40 bg-white/80 dark:bg-neutral-900/80 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800\">\n        <div className=\"max-w-2xl mx-auto flex items-center gap-4 p-4\">\n          <Link\n            href=\"/\"\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors\"\n          >\n            <ArrowLeft className=\"w-5 h-5 text-gray-600 dark:text-neutral-400\" />\n          </Link>\n          <h1 className=\"text-lg font-semibold text-gray-900 dark:text-white\">Post</h1>\n        </div>\n      </div>\n\n      {/* Post Content */}\n      <div className=\"max-w-2xl mx-auto p-4\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n        >\n          <PostCard\n            post={post}\n            onLikeUpdate={handleLikeUpdate}\n            onPollUpdate={handlePollUpdate}\n            onCommentClick={() => setShowComments(true)}\n          />\n        </motion.div>\n      </div>\n\n      {/* Comments Panel */}\n      <Comments\n        postId={postId}\n        isOpen={showComments}\n        onClose={() => setShowComments(false)}\n        highlightCommentId={highlightCommentId}\n        onCommentCountChange={(count) => {\n          setPost(prev => prev ? { ...prev, commentsCount: count } : null);\n        }}\n      />\n    </div>\n  );\n}\n\nexport default function PostDetailPage() {\n  return (\n    <ProtectedRoute>\n      <Suspense fallback={\n        <div className=\"min-h-screen flex items-center justify-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\" />\n        </div>\n      }>\n        <PostDetailContent />\n      </Suspense>\n    </ProtectedRoute>\n  );\n}\n"],"names":["c","_c","React","useState","useEffect","Suspense","useParams","useSearchParams","motion","ArrowLeft","Loader2","Link","ProtectedRoute","PostCard","Comments","getPost","joinPostRoom","leavePostRoom","Post","PollOption","PostDetailContent","params","searchParams","postId","id","highlightCommentId","get","undefined","post","setPost","loading","setLoading","error","setError","showComments","setShowComments","fetchPost","data","err","console","response","handleLikeUpdate","liked","count","prev","isLiked","likesCount","handlePollUpdate","options","pollOptions","opacity","y","commentsCount","PostDetailPage","$","$i","Symbol","for","t0"],"mappings":"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","ignoreList":[]}}]
}