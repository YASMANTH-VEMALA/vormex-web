module.exports=[59857,17659,60327,37662,99588,78343,38942,a=>{"use strict";var b=a.i(87924),c=a.i(38246),d=a.i(71987),e=a.i(68114);function f({group:a,onJoin:f,onLeave:g,isJoining:h}){let i=a._count?.members||a.memberCount,j=a._count?.posts||a.postCount,k={PUBLIC:{label:"Public",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},PRIVATE:{label:"Private",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"},SECRET:{label:"Secret",color:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}}[a.privacy];return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden hover:shadow-md transition-shadow",children:[(0,b.jsx)(c.default,{href:`/groups/${a.slug}`,children:(0,b.jsxs)("div",{className:"relative h-32 bg-gradient-to-r from-blue-500 to-purple-600",children:[a.coverImage&&(0,b.jsx)(d.default,{src:a.coverImage,alt:a.name,fill:!0,className:"object-cover"}),a.iconImage&&(0,b.jsx)("div",{className:"absolute -bottom-6 left-4",children:(0,b.jsx)("div",{className:"w-14 h-14 rounded-xl border-4 border-white dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-800",children:(0,b.jsx)(d.default,{src:a.iconImage,alt:a.name,width:56,height:56,className:"object-cover"})})})]})}),(0,b.jsxs)("div",{className:(0,e.cn)("p-4",a.iconImage&&"pt-8"),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)(c.default,{href:`/groups/${a.slug}`,className:"flex-1 min-w-0",children:(0,b.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white truncate hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:a.name})}),(0,b.jsx)("span",{className:(0,e.cn)("px-2 py-0.5 text-xs font-medium rounded-full flex-shrink-0",k.color),children:k.label})]}),a.description&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),i.toLocaleString()," members"]}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})}),j," posts"]})]}),a.category&&(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-md",children:a.category})}),a.members&&a.members.length>0&&(0,b.jsxs)("div",{className:"mt-3 flex items-center",children:[(0,b.jsx)("div",{className:"flex -space-x-2",children:a.members.slice(0,3).map(a=>(0,b.jsx)("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-gray-800 overflow-hidden bg-gray-200 dark:bg-gray-600",children:a.user.profileImage?(0,b.jsx)(d.default,{src:a.user.profileImage,alt:a.user.name,width:28,height:28,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs font-medium text-gray-600 dark:text-gray-300",children:a.user.name.charAt(0).toUpperCase()})},a.id))}),i>3&&(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-400",children:["+",i-3," more"]})]}),(0,b.jsx)("div",{className:"mt-4",children:a.isMember?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(c.default,{href:`/groups/${a.slug}`,className:"flex-1 px-4 py-2 text-center text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"View Group"}),"OWNER"!==a.memberRole&&g&&(0,b.jsx)("button",{onClick:()=>g(a.id),className:"p-2 text-gray-500 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Leave group",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):(0,b.jsx)("button",{onClick:()=>f?.(a.id),disabled:h,className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Joining..."]}):"PRIVATE"===a.privacy?"Request to Join":"Join Group"})})]})]})}a.s(["default",()=>f],17659);var g=a.i(50944);function h({group:a,onJoin:e,onLeave:f,isLoading:h}){let i=(0,g.useRouter)(),j=a._count?.members||a.memberCount,k={PUBLIC:{icon:"ðŸŒ",label:"Public Group"},PRIVATE:{icon:"ðŸ”’",label:"Private Group"},SECRET:{icon:"ðŸ‘ï¸",label:"Secret Group"}}[a.privacy],l=a.memberRole&&["OWNER","ADMIN"].includes(a.memberRole);return(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[(0,b.jsxs)("div",{className:"relative h-48 md:h-64 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",children:[a.coverImage&&(0,b.jsx)(d.default,{src:a.coverImage,alt:a.name,fill:!0,className:"object-cover"}),(0,b.jsx)("button",{onClick:()=>i.back(),className:"absolute top-4 left-4 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l&&(0,b.jsx)(c.default,{href:`/groups/${a.slug}/settings`,className:"absolute top-4 right-4 p-2 bg-black/30 hover:bg-black/50 text-white rounded-full backdrop-blur-sm transition-colors",children:(0,b.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,b.jsx)("div",{className:"absolute -bottom-12 left-6",children:(0,b.jsx)("div",{className:"w-24 h-24 rounded-2xl border-4 border-white dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-800 shadow-lg",children:a.iconImage?(0,b.jsx)(d.default,{src:a.iconImage,alt:a.name,width:96,height:96,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600 text-white text-3xl font-bold",children:a.name.charAt(0).toUpperCase()})})})]}),(0,b.jsxs)("div",{className:"pt-14 px-6 pb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[k.icon," ",k.label]}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),j.toLocaleString()," members"]}),a.category&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs",children:a.category})]})]}),a.description&&(0,b.jsx)("p",{className:"mt-3 text-gray-600 dark:text-gray-400 max-w-2xl",children:a.description})]}),(0,b.jsx)("div",{className:"flex items-center gap-3",children:a.isMember?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(c.default,{href:`/groups/${a.slug}/chat`,className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Chat"]}),"OWNER"!==a.memberRole&&f&&(0,b.jsx)("button",{onClick:f,disabled:h,className:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 transition-colors",children:"Leave"})]}):(0,b.jsx)("button",{onClick:e,disabled:h,className:"flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Joining..."]}):"PRIVATE"===a.privacy?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Request to Join"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Join Group"]})})})]}),a.memberRole&&(0,b.jsxs)("div",{className:"mt-4 inline-flex items-center gap-1.5 px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-sm font-medium rounded-full",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a.memberRole.charAt(0)+a.memberRole.slice(1).toLowerCase()]})]})]})}a.s(["default",()=>h],60327);var i=a.i(72131),j=a.i(56711),k=a.i(12402),l=a.i(11065),m=a.i(46271),n=a.i(62036),o=a.i(92415);async function p(a){return o.default.post("/groups",a)}async function q(a){return o.default.get(`/groups/${a}`)}async function r(a,b){return o.default.put(`/groups/${a}`,b)}async function s(a){return o.default.delete(`/groups/${a}`)}async function t(a=1,b=20){return o.default.get(`/groups/my?page=${a}&limit=${b}`)}async function u(a=1,b=20){return o.default.get(`/groups/discover?page=${a}&limit=${b}`)}async function v(a,b){return o.default.post(`/groups/${a}/join`,{message:b})}async function w(a){return o.default.post(`/groups/${a}/leave`)}async function x(a,b){let c=new URLSearchParams;return b?.role&&c.append("role",b.role),b?.search&&c.append("search",b.search),b?.page&&c.append("page",String(b.page)),b?.limit&&c.append("limit",String(b.limit)),o.default.get(`/groups/${a}/members?${c.toString()}`)}async function y(a,b,c){return o.default.put(`/groups/${a}/members/${b}`,{role:c})}async function z(a,b){return o.default.delete(`/groups/${a}/members/${b}`)}async function A(a,b){let c=b?`?status=${b}`:"";return o.default.get(`/groups/${a}/requests${c}`)}async function B(a,b,c){return o.default.post(`/groups/${a}/requests/${b}`,{action:c})}async function C(a,b,c){return o.default.post(`/groups/${a}/invites`,{userId:b,message:c})}async function D(a,b){let c=b?`?status=${b}`:"";return o.default.get(`/groups/${a}/invites${c}`)}async function E(){return o.default.get("/groups/invites/pending")}async function F(a,b){return o.default.post(`/groups/invites/${a}`,{action:b})}async function G(a,b){return o.default.delete(`/groups/${a}/invites/${b}`)}async function H(a,b){let c=new URLSearchParams;return b?.page&&c.append("page",String(b.page)),b?.limit&&c.append("limit",String(b.limit)),b?.pinnedFirst!==void 0&&c.append("pinnedFirst",String(b.pinnedFirst)),o.default.get(`/groups/${a}/posts?${c.toString()}`)}async function I(a,b,c="like"){return o.default.post(`/groups/${a}/posts/${b}/like`,{reactionType:c})}async function J(a,b){let c=new URLSearchParams;return b?.before&&c.append("before",b.before),b?.limit&&c.append("limit",String(b.limit)),o.default.get(`/groups/${a}/messages?${c.toString()}`)}async function K(a,b){let c=new FormData;return c.append("image",b),o.default.post(`/groups/${a}/upload/icon`,c,{headers:{"Content-Type":"multipart/form-data"}})}async function L(a,b){let c=new FormData;return c.append("image",b),o.default.post(`/groups/${a}/upload/cover`,c,{headers:{"Content-Type":"multipart/form-data"}})}a.s(["cancelInvite",()=>G,"createGroup",()=>p,"deleteGroup",()=>s,"discoverGroups",()=>u,"getGroup",()=>q,"getGroupInvites",()=>D,"getGroupMembers",()=>x,"getGroupMessages",()=>J,"getGroupPosts",()=>H,"getJoinRequests",()=>A,"getMyGroups",()=>t,"getUserPendingInvites",()=>E,"handleJoinRequest",()=>B,"inviteToGroup",()=>C,"joinGroup",()=>v,"leaveGroup",()=>w,"removeMember",()=>z,"respondToInvite",()=>F,"toggleGroupPostLike",()=>I,"updateGroup",()=>r,"updateMemberRole",()=>y,"uploadGroupCover",()=>L,"uploadGroupIcon",()=>K],37662);var M=a.i(12469),N=a.i(3512);function O({group:a}){let{user:c}=(0,N.useAuth)(),[f,g]=(0,i.useState)([]),[h,o]=(0,i.useState)(!0),[p,q]=(0,i.useState)(""),[r,s]=(0,i.useState)([]),[t,u]=(0,i.useState)(0),v=(0,i.useRef)(null),w=(0,i.useRef)(null),[x,y]=(0,i.useState)(!1),z=()=>{v.current?.scrollIntoView({behavior:"smooth"})};(0,i.useEffect)(()=>{(async()=>{try{o(!0);let b=await J(a.id);g(b),setTimeout(z,100)}catch(a){console.error("Failed to fetch messages:",a)}finally{o(!1)}})()},[a.id]),(0,i.useEffect)(()=>{(0,M.initializeSocket)();let b=(0,M.getSocket)();if(b)return b.emit("group:join",{groupId:a.id}),b.on("group:new_message",a=>{g(b=>[...b,a]),z()}),b.on("group:user_typing",b=>{b.groupId===a.id&&b.user.id!==c?.id&&s(a=>b.isTyping?a.find(a=>a.id===b.user.id)?a:[...a,b.user]:a.filter(a=>a.id!==b.user.id))}),b.on("group:online_count",b=>{b.groupId===a.id&&u(b.count)}),b.on("group:user_joined",b=>{b.groupId===a.id&&u(b.onlineCount)}),b.on("group:user_left",b=>{b.groupId===a.id&&u(b.onlineCount)}),b.on("group:message_deleted",b=>{b.groupId===a.id&&g(a=>a.filter(a=>a.id!==b.messageId))}),()=>{b.emit("group:leave",{groupId:a.id}),b.off("group:new_message"),b.off("group:user_typing"),b.off("group:online_count"),b.off("group:user_joined"),b.off("group:user_left"),b.off("group:message_deleted")}},[a.id,c?.id]);let A=(0,i.useCallback)(()=>{let b=(0,M.getSocket)();b&&(x||(y(!0),b.emit("group:typing",{groupId:a.id,isTyping:!0})),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{y(!1),b.emit("group:typing",{groupId:a.id,isTyping:!1})},2e3))},[a.id,x]),B=()=>{if(!p.trim())return;let b=(0,M.getSocket)();b&&(b.emit("group:message",{groupId:a.id,content:p.trim(),tempId:`temp-${Date.now()}`}),q(""),w.current&&clearTimeout(w.current),y(!1),b.emit("group:typing",{groupId:a.id,isTyping:!1}))},C=f.reduce((a,b)=>{let c=new Date(b.createdAt),d=(0,j.format)(c,"MMMM d, yyyy");return(0,k.isToday)(c)?d="Today":(0,l.isYesterday)(c)&&(d="Yesterday"),a[d]||(a[d]=[]),a[d].push(b),a},{});return h?(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900",children:[(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl overflow-hidden bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:a.iconImage?(0,b.jsx)(d.default,{src:a.iconImage,alt:a.name,width:40,height:40,className:"object-cover"}):a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"font-semibold text-gray-900 dark:text-white",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[t," online â€¢ ",a.memberCount," members"]})]})]})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[Object.entries(C).map(([a,f])=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"flex items-center justify-center my-4",children:(0,b.jsx)("span",{className:"px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 text-xs rounded-full",children:a})}),f.map((a,g)=>{let h,i=a.senderId===c?.id,k=!i&&(0===g||f[g-1]?.senderId!==a.senderId);return(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:(0,e.cn)("flex gap-2 mb-2",i?"justify-end":"justify-start"),children:[!i&&(0,b.jsx)("div",{className:(0,e.cn)("w-8 h-8 flex-shrink-0",!k&&"invisible"),children:a.sender.profileImage?(0,b.jsx)(d.default,{src:a.sender.profileImage,alt:a.sender.name,width:32,height:32,className:"rounded-full object-cover"}):(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-medium",children:a.sender.name.charAt(0).toUpperCase()})}),(0,b.jsxs)("div",{className:(0,e.cn)("max-w-[70%]",i?"text-right":"text-left"),children:[!i&&k&&(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1 mb-1 block",children:a.sender.name}),(0,b.jsxs)("div",{className:(0,e.cn)("inline-block px-4 py-2 rounded-2xl",i?"bg-blue-600 text-white rounded-br-md":"bg-white dark:bg-gray-800 text-gray-900 dark:text-white rounded-bl-md shadow-sm"),children:[a.mediaUrl&&(0,b.jsx)("div",{className:"mb-2",children:"image"===a.contentType?(0,b.jsx)(d.default,{src:a.mediaUrl,alt:"Image",width:200,height:200,className:"rounded-lg max-w-full"}):"video"===a.contentType?(0,b.jsx)("video",{src:a.mediaUrl,controls:!0,className:"rounded-lg max-w-full"}):(0,b.jsxs)("a",{href:a.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-blue-400 hover:underline",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})}),a.fileName||"Attachment"]})}),a.content&&(0,b.jsx)("p",{className:"whitespace-pre-wrap break-words",children:a.content}),(0,b.jsx)("span",{className:(0,e.cn)("text-xs mt-1 block",i?"text-blue-200":"text-gray-400"),children:(h=new Date(a.createdAt),(0,j.format)(h,"HH:mm"))})]})]})]},a.id)})]},a)),(0,b.jsx)(n.AnimatePresence,{children:r.length>0&&(0,b.jsxs)(m.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-sm",children:[(0,b.jsx)("div",{className:"flex -space-x-2",children:r.slice(0,3).map(a=>(0,b.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-300 dark:bg-gray-600 border-2 border-white dark:border-gray-900 overflow-hidden",children:a.profileImage?(0,b.jsx)(d.default,{src:a.profileImage,alt:a.name,width:24,height:24,className:"object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs",children:a.name.charAt(0)})},a.id))}),(0,b.jsx)("span",{children:1===r.length?`${r[0].name} is typing...`:`${r.length} people are typing...`})]})}),(0,b.jsx)("div",{ref:v})]}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,b.jsx)("input",{type:"text",value:p,onChange:a=>{q(a.target.value),A()},onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),B())},placeholder:"Type a message...",className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-gray-900 rounded-full border-0 focus:ring-2 focus:ring-blue-500 text-gray-900 dark:text-white placeholder-gray-500"}),(0,b.jsx)("button",{onClick:B,disabled:!p.trim(),className:"p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})}a.s(["default",()=>O],99588);let P=["Technology","Career","Education","Business","Design","Marketing","Finance","Health","Sports","Entertainment","Other"];function Q({isOpen:a,onClose:c,onSuccess:d}){let[e,f]=(0,i.useState)(""),[g,h]=(0,i.useState)(""),[j,k]=(0,i.useState)("PUBLIC"),[l,o]=(0,i.useState)(""),[q,r]=(0,i.useState)([""]),[s,t]=(0,i.useState)(!1),[u,v]=(0,i.useState)(null),w=async a=>{if(a.preventDefault(),v(null),!e.trim()||e.trim().length<3)return void v("Group name must be at least 3 characters");t(!0);try{await p({name:e.trim(),description:g.trim()||void 0,privacy:j,category:l||void 0,rules:q.filter(a=>a.trim())}),f(""),h(""),k("PUBLIC"),o(""),r([""]),d(),c()}catch(a){v(a.response?.data?.error||"Failed to create group")}finally{t(!1)}};return a?(0,b.jsx)(n.AnimatePresence,{children:(0,b.jsx)(m.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:c,children:(0,b.jsxs)(m.motion.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-lg bg-white dark:bg-gray-800 rounded-2xl shadow-xl max-h-[90vh] overflow-y-auto",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create Group"}),(0,b.jsx)("button",{onClick:c,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:w,className:"p-6 space-y-5",children:[u&&(0,b.jsx)("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",children:u}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Group Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Enter group name",className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500",maxLength:100})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:g,onChange:a=>h(a.target.value),placeholder:"What is this group about?",rows:3,className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 resize-none",maxLength:500})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Privacy"}),(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3",children:[{value:"PUBLIC",label:"Public",desc:"Anyone can join"},{value:"PRIVATE",label:"Private",desc:"Request to join"},{value:"SECRET",label:"Secret",desc:"Invite only"}].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>k(a.value),className:`p-3 rounded-lg border-2 text-left transition-colors ${j===a.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,children:[(0,b.jsx)("span",{className:`block text-sm font-medium ${j===a.value?"text-blue-600 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:a.label}),(0,b.jsx)("span",{className:"block text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:a.desc})]},a.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category"}),(0,b.jsxs)("select",{value:l,onChange:a=>o(a.target.value),className:"w-full px-4 py-2.5 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white",children:[(0,b.jsx)("option",{value:"",children:"Select a category"}),P.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Group Rules"}),(0,b.jsxs)("div",{className:"space-y-2",children:[q.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400 w-6",children:[c+1,"."]}),(0,b.jsx)("input",{type:"text",value:a,onChange:a=>{var b;let d;return b=a.target.value,void((d=[...q])[c]=b,r(d))},placeholder:"Enter a rule",className:"flex-1 px-3 py-2 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 text-sm"}),q.length>1&&(0,b.jsx)("button",{type:"button",onClick:()=>{r(q.filter((a,b)=>b!==c))},className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},c)),q.length<10&&(0,b.jsxs)("button",{type:"button",onClick:()=>{r([...q,""])},className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Rule"]})]})]}),(0,b.jsx)("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:(0,b.jsx)("button",{type:"submit",disabled:s||!e.trim(),className:"w-full px-4 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?(0,b.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,b.jsxs)("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Creating..."]}):"Create Group"})})]})]})})}):null}a.s(["default",()=>Q],78343);var R=a.i(97942),S=a.i(33508),T=a.i(73320),U=a.i(38632),V=a.i(96221),W=a.i(47341),X=a.i(96438),Y=a.i(5752);a.s(["default",0,function({isOpen:a,onClose:c,type:d,groupId:e,currentImageUrl:f,onImageUpdated:g}){let[h,j]=(0,i.useState)(null),[k,l]=(0,i.useState)(null),[o,p]=(0,i.useState)(null),[q,r]=(0,i.useState)(null),[s,t]=(0,i.useState)(!1),[u,v]=(0,i.useState)(!1),[w,x]=(0,i.useState)(null),[y,z]=(0,i.useState)(!1),A=(0,i.useRef)(null),B="icon"===d,C=B?"aspect-square":"aspect-[4/1]",D=B?5:10,E=(0,i.useCallback)(a=>{if(!a.type.startsWith("image/"))return void x("Please select an image file");if(a.size/1048576>D)return void x(`Image must be less than ${D}MB`);x(null),j(a);let b=new FileReader;b.onload=a=>{r(a.target?.result),t(!0)},b.readAsDataURL(a)},[D]),F=(0,i.useCallback)(a=>{l(new File([a],h?.name||"cropped-image.jpg",{type:"image/jpeg"})),p(URL.createObjectURL(a)),t(!1)},[h]),G=(0,i.useCallback)(()=>{t(!1),r(null),j(null)},[]),H=(0,i.useCallback)(()=>{q&&t(!0)},[q]),I=(0,i.useCallback)(a=>{a.preventDefault(),z(!1);let b=a.dataTransfer.files[0];b&&E(b)},[E]),J=(0,i.useCallback)(a=>{a.preventDefault(),z(!0)},[]),M=(0,i.useCallback)(a=>{a.preventDefault(),z(!1)},[]),N=async()=>{let a=k||h;if(a){v(!0),x(null);try{let b;b=B?(await K(e,a)).iconUrl:(await L(e,a)).coverUrl,g(b),O()}catch(a){console.error("Upload error:",a),x(a.response?.data?.error||a.message||"Failed to upload image")}finally{v(!1)}}},O=()=>{j(null),l(null),p(null),r(null),t(!1),x(null),z(!1),c()};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(n.AnimatePresence,{children:s&&q&&(0,b.jsx)(Y.default,{imageSrc:q,aspectRatio:B?1:4,onCropComplete:F,onCancel:G,cropShape:"rectangle"})}),(0,b.jsx)(R.Root,{open:a&&!s,onOpenChange:O,children:(0,b.jsx)(R.Portal,{children:(0,b.jsx)(n.AnimatePresence,{children:a&&!s&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Overlay,{asChild:!0,children:(0,b.jsx)(m.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50"})}),(0,b.jsx)(R.Content,{asChild:!0,children:(0,b.jsxs)(m.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-full max-w-lg bg-white dark:bg-gray-900 rounded-2xl shadow-2xl z-50 overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[(0,b.jsx)(R.Title,{className:"text-lg font-semibold text-gray-900 dark:text-white",children:B?"Update Group Icon":"Update Group Cover"}),(0,b.jsx)(R.Close,{asChild:!0,children:(0,b.jsx)("button",{className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Close",children:(0,b.jsx)(S.X,{className:"w-5 h-5"})})})]}),(0,b.jsxs)("div",{className:"p-6",children:[w&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm rounded-lg",children:w}),o?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:`relative ${C} w-full bg-gray-100 dark:bg-gray-800 rounded-xl overflow-hidden`,children:(0,b.jsx)("img",{src:o,alt:"Preview",className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(X.Button,{variant:"outline",onClick:H,className:"flex-1",children:[(0,b.jsx)(W.Crop,{className:"w-4 h-4 mr-2"}),"Re-crop"]}),(0,b.jsx)(X.Button,{variant:"outline",onClick:()=>{j(null),l(null),p(null),r(null),x(null),A.current&&(A.current.value="")},className:"flex-1",children:"Choose Different"})]})]}):(0,b.jsxs)("div",{onDrop:I,onDragOver:J,onDragLeave:M,className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-colors ${y?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,children:[(0,b.jsx)("input",{ref:A,type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];b&&E(b)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:`p-4 rounded-full ${y?"bg-blue-100 dark:bg-blue-900/40":"bg-gray-100 dark:bg-gray-800"}`,children:y?(0,b.jsx)(T.Upload,{className:"w-8 h-8 text-blue-500"}):(0,b.jsx)(U.Image,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-700 dark:text-gray-300 font-medium",children:y?"Drop image here":"Drag and drop an image"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"or click to browse"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:B?"Square image recommended â€¢ Max 5MB":"Wide image recommended (4:1 ratio) â€¢ Max 10MB"})]})]}),f&&!o&&(0,b.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:["Current ",B?"icon":"cover",":"]}),(0,b.jsx)("div",{className:`relative ${C} w-full max-w-[200px] bg-gray-100 dark:bg-gray-800 rounded-lg overflow-hidden`,children:(0,b.jsx)("img",{src:f,alt:"Current",className:"w-full h-full object-cover"})})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[(0,b.jsx)(X.Button,{variant:"ghost",onClick:O,disabled:u,children:"Cancel"}),(0,b.jsx)(X.Button,{onClick:N,disabled:!o||u,className:"min-w-[100px]",children:u?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(V.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):"Save"})]})]})})]})})})})]})}],38942),a.s([],59857)}];

//# sourceMappingURL=src_components_groups_index_ts_d3f607f0._.js.map