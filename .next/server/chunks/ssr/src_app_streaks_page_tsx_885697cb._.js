module.exports=[40153,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(46271),e=a.i(62036),f=a.i(38246),g=a.i(16106),h=a.i(3314),i=a.i(70106);let j=(0,i.default)("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);var k=a.i(45222),l=a.i(4720),m=a.i(31067),n=a.i(50522),o=a.i(77156);let p=(0,i.default)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),q=(0,i.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var r=a.i(86520),s=a.i(1027),t=a.i(73570),u=a.i(210),v=a.i(21374),w=a.i(90925),x=a.i(24002);let y=[{key:"connection",label:"Networking",icon:g.Flame,color:"orange",currentKey:"connectionStreak",longestKey:"longestConnectionStreak",description:"Connect with someone daily",bgLight:"bg-orange-50",bgDark:"dark:bg-orange-900/20",textColor:"text-orange-500",ringColor:"ring-orange-500/30"},{key:"login",label:"Login",icon:m.LogIn,color:"blue",currentKey:"loginStreak",longestKey:"longestLoginStreak",description:"Log in every day",bgLight:"bg-blue-50",bgDark:"dark:bg-blue-900/20",textColor:"text-blue-500",ringColor:"ring-blue-500/30"},{key:"posting",label:"Posting",icon:l.FileText,color:"green",currentKey:"postingStreak",longestKey:"longestPostingStreak",description:"Share a post every day",bgLight:"bg-green-50",bgDark:"dark:bg-green-900/20",textColor:"text-green-500",ringColor:"ring-green-500/30"},{key:"messaging",label:"Messaging",icon:k.MessageCircle,color:"purple",currentKey:"messagingStreak",longestKey:"longestMessagingStreak",description:"Send a message every day",bgLight:"bg-purple-50",bgDark:"dark:bg-purple-900/20",textColor:"text-purple-500",ringColor:"ring-purple-500/30"}];function z(){let[a,i]=(0,c.useState)(null),[k,l]=(0,c.useState)([]),[m,z]=(0,c.useState)(!0),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),K=(0,c.useCallback)(async()=>{try{let[a,b]=await Promise.all([(0,x.getStreaks)(),(0,x.getStreakHistory)(15)]);i(a),l(Array.isArray(b)?b:[])}catch(a){console.error("Failed to fetch streak data:",a)}finally{z(!1)}},[]);(0,c.useEffect)(()=>{K()},[K]);let L=(a,b)=>{J({message:a,type:b}),setTimeout(()=>J(null),3e3)},M=async()=>{if(!A){B(!0);try{let a=await (0,x.purchaseStreakFreeze)();L(a.message,"success"),i(b=>b?{...b,streakFreezes:a.freezesRemaining}:b)}catch(a){L(a?.response?.data?.message||"Failed to purchase freeze","error")}finally{B(!1)}}},N=async()=>{if(!C){D(!0);try{let a=await (0,x.toggleStreakShield)();L(a.message,"success"),i(b=>b?{...b,streakShieldActive:a.shieldActive}:b)}catch(a){L(a?.response?.data?.message||"Failed to toggle shield","error")}finally{D(!1)}}},O=async()=>{if(!E){F(!0);try{let a=await (0,x.toggleStreakVisibility)();L(a.message,"success"),i(b=>b?{...b,showOnProfile:a.showOnProfile}:b)}catch(a){L(a?.response?.data?.message||"Failed to toggle visibility","error")}finally{F(!1)}}},P=!!a?.isAtRisk&&Object.values(a.isAtRisk).some(Boolean),Q=a?Math.max(a.connectionStreak,a.loginStreak,a.postingStreak,a.messagingStreak):0;return m?(0,b.jsx)(w.ProtectedRoute,{children:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950",children:(0,b.jsx)("div",{className:"max-w-lg mx-auto px-4 py-8",children:(0,b.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,b.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-neutral-800 rounded w-1/3"}),(0,b.jsx)("div",{className:"h-40 bg-gray-200 dark:bg-neutral-800 rounded-xl"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(a=>(0,b.jsx)("div",{className:"h-28 bg-gray-200 dark:bg-neutral-800 rounded-xl"},a))})]})})})}):a?(0,b.jsx)(w.ProtectedRoute,{children:(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 pb-24",children:[(0,b.jsx)(e.AnimatePresence,{children:I&&(0,b.jsx)(d.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`fixed top-4 left-1/2 -translate-x-1/2 z-[200] px-4 py-2.5 rounded-lg text-sm font-medium shadow-lg ${"success"===I.type?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:I.message})}),(0,b.jsxs)("div",{className:"max-w-lg mx-auto px-4 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)(f.default,{href:"/more",className:"p-2 -ml-2 hover:bg-gray-100 dark:hover:bg-neutral-800 rounded-lg transition-colors",children:(0,b.jsx)(u.ArrowLeft,{className:"w-5 h-5 text-gray-600 dark:text-neutral-400"})}),(0,b.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Your Streaks"})]}),(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-orange-500 to-amber-500 dark:from-orange-600 dark:to-amber-600 p-6 mb-6 text-white",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 opacity-10",children:(0,b.jsx)(g.Flame,{className:"w-full h-full"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(d.motion.div,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"text-5xl font-black tabular-nums",children:Q})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-base font-semibold text-white/90",children:"Best Active Streak"}),(0,b.jsxs)("p",{className:"text-sm text-white/70",children:["Overall best: ",a.overallBestStreak," days"]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(s.Zap,{className:"w-4 h-4"}),(0,b.jsxs)("span",{className:"font-medium",children:[a.engagementScore," XP"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)(v.Star,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[a.weeklyConnectionsMade,"/",a.weeklyConnectionsGoal," weekly"]})]})]}),P&&(0,b.jsxs)(d.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-3 flex items-center gap-2 px-3 py-2 bg-white/15 backdrop-blur-sm rounded-lg text-sm",children:[(0,b.jsx)(t.AlertTriangle,{className:"w-4 h-4 flex-shrink-0"}),(0,b.jsx)("span",{children:"Some streaks are at risk â€” take action today!"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3 mb-6",children:y.map((c,e)=>{let f=a[c.currentKey],g=a[c.longestKey],h=a.isAtRisk?.[c.key]??!1,i=c.icon;return(0,b.jsxs)(d.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*e},className:`relative rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4 ${h?"ring-2 ring-amber-400/50":""}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-lg ${c.bgLight} ${c.bgDark} flex items-center justify-center`,children:(0,b.jsx)(i,{className:`w-4 h-4 ${c.textColor}`})}),h&&(0,b.jsx)("span",{className:"ml-auto px-1.5 py-0.5 bg-amber-50 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400 text-[10px] rounded font-medium",children:"At risk"})]}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-none",children:f}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-neutral-400 mt-1",children:c.label}),(0,b.jsxs)("p",{className:"text-[10px] text-gray-400 dark:text-neutral-500 mt-0.5",children:["Best: ",g," days"]})]},c.key)})}),(0,b.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-500 dark:text-neutral-400 uppercase tracking-wider px-1",children:"Protection"}),(0,b.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-cyan-50 dark:bg-cyan-900/20 flex items-center justify-center",children:(0,b.jsx)(j,{className:"w-5 h-5 text-cyan-500"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Streak Freezes"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[a.streakFreezes," available Â· ",a.totalFreezesUsed," used total"]})]}),(0,b.jsx)("button",{onClick:M,disabled:A,className:"px-3 py-1.5 text-xs font-medium rounded-lg bg-cyan-50 dark:bg-cyan-900/20 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-100 dark:hover:bg-cyan-900/30 transition-colors disabled:opacity-50",children:A?"...":"Buy"})]})}),(0,b.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.streakShieldActive?"bg-green-50 dark:bg-green-900/20":"bg-gray-100 dark:bg-neutral-800"}`,children:(0,b.jsx)(h.Shield,{className:`w-5 h-5 ${a.streakShieldActive?"text-green-500":"text-gray-400 dark:text-neutral-500"}`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Streak Shield"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:a.streakShieldActive?"Active â€” your streaks are protected":"Inactive â€” enable for protection"})]}),(0,b.jsx)("button",{onClick:N,disabled:C,className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors disabled:opacity-50 ${a.streakShieldActive?"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30":"bg-gray-100 dark:bg-neutral-800 text-gray-600 dark:text-neutral-400 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:C?"...":a.streakShieldActive?"On":"Off"})]})})]}),(0,b.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-gray-500 dark:text-neutral-400 uppercase tracking-wider px-1",children:"More"}),(0,b.jsxs)(f.default,{href:"/streaks/leaderboard",className:"flex items-center gap-3 rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center",children:(0,b.jsx)(r.Crown,{className:"w-5 h-5 text-amber-500"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Leaderboard"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:"See top streakers"})]}),(0,b.jsx)(n.ChevronRight,{className:"w-4 h-4 text-gray-400 dark:text-neutral-500"})]}),(0,b.jsxs)("button",{onClick:O,disabled:E,className:"w-full flex items-center gap-3 rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors disabled:opacity-50 text-left",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${a.showOnProfile?"bg-blue-50 dark:bg-blue-900/20":"bg-gray-100 dark:bg-neutral-800"}`,children:a.showOnProfile?(0,b.jsx)(o.Eye,{className:"w-5 h-5 text-blue-500"}):(0,b.jsx)(p,{className:"w-5 h-5 text-gray-400 dark:text-neutral-500"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Show on Profile"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:a.showOnProfile?"Visible to others":"Hidden from profile"})]}),(0,b.jsx)("div",{className:`w-9 h-5 rounded-full relative transition-colors ${a.showOnProfile?"bg-blue-500":"bg-gray-300 dark:bg-neutral-600"}`,children:(0,b.jsx)(d.motion.div,{animate:{x:a.showOnProfile?16:2},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-0.5 w-4 h-4 bg-white rounded-full shadow-sm"})})]}),(0,b.jsxs)("button",{onClick:()=>H(!G),className:"w-full flex items-center gap-3 rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 p-4 hover:bg-gray-50 dark:hover:bg-neutral-800/50 transition-colors text-left",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center",children:(0,b.jsx)(q,{className:"w-5 h-5 text-indigo-500"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"Streak History"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[k?.length||0," recent events"]})]}),(0,b.jsx)(d.motion.div,{animate:{rotate:90*!!G},transition:{duration:.15},children:(0,b.jsx)(n.ChevronRight,{className:"w-4 h-4 text-gray-400 dark:text-neutral-500"})})]})]}),(0,b.jsx)(e.AnimatePresence,{children:G&&k.length>0&&(0,b.jsx)(d.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden mb-6",children:(0,b.jsx)("div",{className:"rounded-xl border border-gray-200 dark:border-neutral-800 bg-white dark:bg-neutral-900 divide-y divide-gray-100 dark:divide-neutral-800",children:k.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3",children:[(0,b.jsx)("span",{className:"text-lg flex-shrink-0",children:function(a){switch(a){case"increment":return"ðŸ”¥";case"milestone":return"ðŸ†";case"break":return"ðŸ’”";case"freeze_used":return"â„ï¸";case"shield_saved":return"ðŸ›¡ï¸";default:return"ðŸ“Œ"}}(a.event)}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm text-gray-900 dark:text-white",children:function(a){switch(a){case"increment":return"Streak extended";case"milestone":return"Milestone reached!";case"break":return"Streak broken";case"freeze_used":return"Freeze used";case"shield_saved":return"Shield saved streak";default:return a}}(a.event)}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 dark:text-neutral-400",children:[function(a){switch(a){case"connection":return"Networking";case"login":return"Login";case"posting":return"Posting";case"messaging":return"Messaging";default:return a}}(a.streakType)," Â· ",a.streakBefore,"â†’",a.streakAfter,a.xpEarned>0&&` \xb7 +${a.xpEarned} XP`]})]}),(0,b.jsx)("span",{className:"text-[11px] text-gray-400 dark:text-neutral-500 flex-shrink-0",children:new Date(a.createdAt).toLocaleDateString(void 0,{month:"short",day:"numeric"})})]},a.id))})})})]})]})}):(0,b.jsx)(w.ProtectedRoute,{children:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500 dark:text-neutral-400",children:"Failed to load streak data."})})})}a.s(["default",()=>z],40153)}];

//# sourceMappingURL=src_app_streaks_page_tsx_885697cb._.js.map