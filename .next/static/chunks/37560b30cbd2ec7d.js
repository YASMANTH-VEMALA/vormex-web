(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48010,e=>{"use strict";var r=e.i(43476),a=e.i(932),t=e.i(71645),s=e.i(18566),l=e.i(52962);function d(e){let d,i,n,c=(0,a.c)(8),{children:x}=e,{isAuthenticated:o,loading:m}=(0,l.useAuth)(),g=(0,s.useRouter)();if(c[0]!==o||c[1]!==m||c[2]!==g?(d=()=>{m||o||g.push("/login")},i=[o,m,g],c[0]=o,c[1]=m,c[2]=g,c[3]=d,c[4]=i):(d=c[3],i=c[4]),t.default.useEffect(d,i),m){let e;return c[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-neutral-950",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600 dark:text-neutral-400",children:"Loading..."})]})}),c[5]=e):e=c[5],e}return o?(c[6]!==x?(n=(0,r.jsx)(r.Fragment,{children:x}),c[6]=x,c[7]=n):n=c[7],n):null}e.s(["ProtectedRoute",()=>d])},73375,e=>{"use strict";let r=(0,e.i(75254).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>r],73375)},43531,e=>{"use strict";let r=(0,e.i(75254).default)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>r],43531)},74886,e=>{"use strict";let r=(0,e.i(75254).default)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>r],74886)},58524,e=>{"use strict";let r=(0,e.i(75254).default)("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);e.s(["Link2",()=>r],58524)},39312,e=>{"use strict";let r=(0,e.i(75254).default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);e.s(["Zap",()=>r],39312)},64030,e=>{"use strict";let r=(0,e.i(75254).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>r],64030)},20278,e=>{"use strict";let r=(0,e.i(75254).default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);e.s(["Target",()=>r],20278)},30699,e=>{"use strict";let r=(0,e.i(75254).default)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);e.s(["Gift",()=>r],30699)},43553,e=>{"use strict";let r=(0,e.i(75254).default)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);e.s(["Crown",()=>r],43553)},51689,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(46932),s=e.i(30699),l=e.i(74886),d=e.i(43531),i=e.i(73375),n=e.i(61911),c=e.i(39312),x=e.i(64030),o=e.i(58524),m=e.i(43553),g=e.i(20278),h=e.i(22016),u=e.i(48010),y=e.i(61238);let b=async()=>(await y.default.get("/referrals/stats")).data,p=async e=>(await y.default.get("/referrals/leaderboard",{params:{limit:e}})).data,f=[{count:1,reward:100,completed:!1},{count:5,reward:250,completed:!1},{count:10,reward:500,completed:!1},{count:25,reward:1e3,completed:!1},{count:50,reward:2500,completed:!1},{count:100,reward:5e3,completed:!1}];function k(){let[e,y]=(0,a.useState)(null),[k,j]=(0,a.useState)([]),[N,w]=(0,a.useState)(!0),[v,C]=(0,a.useState)(!1),[M,T]=(0,a.useState)("overview");(0,a.useEffect)(()=>{R()},[]);let R=async()=>{try{w(!0);let[e,r]=await Promise.all([b(),p()]);y(e||null),j(r||[])}catch(e){console.error("Error loading referrals:",e)}finally{w(!1)}};return N?(0,r.jsx)(u.ProtectedRoute,{children:(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-gray-300 dark:border-neutral-600 border-t-blue-500"})})}):(0,r.jsx)(u.ProtectedRoute,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-neutral-950 pb-20",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-neutral-900 border-b border-gray-200 dark:border-neutral-800 sticky top-0 z-10",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(h.default,{href:"/more",className:"p-2 -ml-2 rounded-lg hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors",children:(0,r.jsx)(i.ChevronLeft,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Invite Friends"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Earn XP for every friend who joins"})]})]})})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl p-6 border border-gray-200 dark:border-neutral-800",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"w-14 h-14 mx-auto mb-3 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center",children:(0,r.jsx)(s.Gift,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"})}),(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-1",children:"Your Referral Code"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Share this code with friends"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsx)("div",{className:"flex-1 bg-gray-100 dark:bg-neutral-800 rounded-lg px-4 py-3 font-mono text-lg text-center text-gray-900 dark:text-white",children:e?.referralCode||"Loading..."}),(0,r.jsx)("button",{onClick:()=>{e?.referralCode&&(navigator.clipboard.writeText(e.referralCode),C(!0),setTimeout(()=>C(!1),2e3))},className:"p-3 rounded-lg bg-gray-100 dark:bg-neutral-800 hover:bg-gray-200 dark:hover:bg-neutral-700 transition-colors",children:v?(0,r.jsx)(d.Check,{className:"w-5 h-5 text-green-500"}):(0,r.jsx)(l.Copy,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),(0,r.jsxs)("button",{onClick:()=>{if(e?.referralCode){let r=`${window.location.origin}/signup?ref=${e.referralCode}`;navigator.clipboard.writeText(r),C(!0),setTimeout(()=>C(!1),2e3)}},className:"w-full flex items-center justify-center gap-2 py-3 rounded-lg bg-gray-900 dark:bg-white text-white dark:text-gray-900 font-medium hover:bg-gray-800 dark:hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(o.Link2,{className:"w-4 h-4"}),"Copy Invite Link"]})]})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-1",children:[(0,r.jsx)(n.Users,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs",children:"Total"})]}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:e?.totalReferrals||0})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-1",children:[(0,r.jsx)(d.Check,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs",children:"Completed"})]}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:e?.completedReferrals||0})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-800",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 mb-1",children:[(0,r.jsx)(c.Zap,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-xs",children:"XP Earned"})]}),(0,r.jsx)("p",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:e?.totalXPEarned||0})]})]})}),(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-4",children:(0,r.jsx)("div",{className:"flex gap-1 bg-gray-100 dark:bg-neutral-800 p-1 rounded-lg",children:[{id:"overview",label:"Milestones",icon:g.Target},{id:"leaderboard",label:"Leaderboard",icon:x.Trophy}].map(e=>(0,r.jsxs)("button",{onClick:()=>T(e.id),className:`flex-1 flex items-center justify-center gap-2 py-2 px-3 rounded-md text-sm font-medium transition-colors ${M===e.id?"bg-white dark:bg-neutral-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[(0,r.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))})}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:["overview"===M&&(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Referral Milestones"}),(()=>{if(!e)return f;let r=e.completedReferrals??e.activeReferrals??0;return f.map(e=>({...e,completed:r>=e.count}))})().map((a,l)=>(0,r.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*l},className:`bg-white dark:bg-neutral-900 rounded-xl p-4 border ${a.completed?"border-green-300 dark:border-green-700":"border-gray-200 dark:border-neutral-800"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${a.completed?"bg-green-100 dark:bg-green-900/30":"bg-gray-100 dark:bg-neutral-800"}`,children:a.completed?(0,r.jsx)(d.Check,{className:"w-5 h-5 text-green-600 dark:text-green-400"}):(0,r.jsx)(s.Gift,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:`font-medium ${a.completed?"text-gray-900 dark:text-white":"text-gray-600 dark:text-gray-400"}`,children:["Refer ",a.count," ",1===a.count?"friend":"friends"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.completed?"Completed":`${e?.completedReferrals||0} / ${a.count}`})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm",children:[(0,r.jsx)(c.Zap,{className:"w-4 h-4 text-amber-500"}),(0,r.jsxs)("span",{className:a.completed?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400",children:["+",a.reward]})]})]}),!a.completed&&(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)("div",{className:"h-1.5 bg-gray-100 dark:bg-neutral-800 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${Math.min(100,(e?.completedReferrals||0)/a.count*100)}%`}})})})]},a.count))]}),"leaderboard"===M&&(0,r.jsx)(r.Fragment,{children:0===k.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 dark:bg-neutral-800 flex items-center justify-center",children:(0,r.jsx)(x.Trophy,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"Leaderboard"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No referrals yet"})]}):(0,r.jsx)("div",{className:"space-y-2",children:k.map((e,a)=>(0,r.jsxs)(t.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*a},className:"bg-white dark:bg-neutral-900 rounded-xl p-4 border border-gray-200 dark:border-neutral-800 flex items-center gap-4",children:[(0,r.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${1===e.rank?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":2===e.rank?"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300":3===e.rank?"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400":"bg-gray-100 text-gray-600 dark:bg-neutral-800 dark:text-gray-400"}`,children:e.rank<=3?(0,r.jsx)(m.Crown,{className:"w-4 h-4"}):e.rank}),(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-neutral-700 flex items-center justify-center overflow-hidden",children:e.user.profileImage?(0,r.jsx)("img",{src:e.user.profileImage,alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:e.user.name?.charAt(0)||e.user.username?.charAt(0)||"?"})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.user.name||e.user.username}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",e.user.username]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-600 dark:text-gray-300",children:[(0,r.jsx)(n.Users,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"font-semibold",children:e.referralCount})]})]},e.user.id))})})]})]})})}e.s(["default",()=>k],51689)}]);